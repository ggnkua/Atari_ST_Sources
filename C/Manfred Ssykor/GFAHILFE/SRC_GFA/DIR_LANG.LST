FILESELECT "\*.*","",d$
@dir_ermitteln(d$)
PRINT STR$(laenge%)+" Bytes in "+STR$(datei_count&)+" Dateien und "+STR$(pfad_count&)+" Ordnern!"
~INP(2)
> PROCEDURE dir_ermitteln(path$)
  ERASE pfad$(),datei$()
  DIM pfad$(400),datei$(3000)
  laenge%=0
  dummy&=0
  datei_count&=0
  @read_dir(path$)
  WHILE pfad_count&>pfad_zeiger&
    INC pfad_zeiger&
    dummy&=0
    @read_dir(pfad$(pfad_zeiger&))
  WEND
RETURN
> PROCEDURE read_dir(pfad$)
  LOCAL datei$,suche$,fertig&
  fertig&=FSFIRST(pfad$+"*.*"+CHR$(0),63)
  DO UNTIL fertig&
    datei$=CHAR{FGETDTA()+30}
    laenge%=laenge%+{FGETDTA()+26}
    IF datei$<>"." AND datei$<>".."
      IF BTST(BYTE{FGETDTA()+21},4)
        INC pfad_count&
        INC dummy&
        pfad$(pfad_count&)=pfad$+datei$+"\"
      ELSE
        INC datei_count&
        datei$(datei_count&)=pfad$+datei$
      ENDIF
    ENDIF
    fertig&=FSNEXT()
  LOOP
RETURN
