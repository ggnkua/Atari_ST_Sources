eXtended Universal FontSeLektor
===============================

(c) 1994 RoSoft
         Stefan Rogel
         Kîhlerweg 1
   67661 Kaiserslautern

   Bankverbindung: Kreissparkasse Kaiserslautern
                   BLZ  540 502 20
                   Kto. 100 807 577

   eMail: Mausnetz: Stefan Rogel @ LU
          Sonst:    Stefan_Rogel@lu.maus.de

Der xUFSL ist Freeware und darf beliebig zusammen mit folgenden Dateien
weitergegeben werden:

XUFSL
  - XUFSL.PRG     Der xUFSL selbst
  - XUFSL.CHG     Versionshistorie des xUFSL
  - XUFSL.TXT     Kurzanleitung zum xUFSL

  XUFC
  - XUFC.CPX      Ein kleines CPX-Utility zur applikationsunabhÑngigen Konfigu-
                  ration des xUFSL
  - XUFC.TXT      Kurzanleitung zum xUFC

  FÅr Programmierer sind sicherlich noch folgende Dateien interessant:

  - XUFSL.H       Definitionen fÅr den xUFSL

  CALLUFSL
  - CALLUFSL.PRG  Programm mit Quelltexten (PureC 1.1) zum Aufruf des xUFSL
  - CALLUFSL.C
  - CALLUFSL.RSC
  - CALLUFSL.H
  - CALLUFSL.HRD
  - CALLUFSL.PRJ

  COOKIE
  - COOKIE.C      Teilweise um C-Aufrufe erweitere Routinen zur COOKIE-Verwal-
  - COOKIE.H      tung. Die Originale sind von Arnd Beissner und in jeder gut
  - COOKIE.LIB    sortierten Mailbox zu finden.
  - COOKIE.S

  FONTS
  - MONACOxx.FNT  Ein unproportionaler "Mac-like"-Zeichensatz
  - CHICACxx.FNT  Ein proportionaler "Max-like"-Zeichensatz

Obwohl ich den xUFSL auch dann weiterentwickeln werde, wenn keine Reaktionen
in Form von Spenden, Anregungen oder Fehlermeldungen kommen, wÑre ich fÅr eben-
solche (insbesondere erstere) sehr dankbar.
Insbesondere wÅrde mich interessieren, ob und welche Programme von den erwei-
terten Optionen des xUFSL Gebrauch machen.
FÅr die Implementierung des xUFSL-Aufrufes kann CALLUFSL.PRG mit den beiliegen-
den Quelltexten zu rate gezogen werden. Dieses Programm ist zwar 'quick and
dirty' geschrieben und nicht gerade ausfÅhrlich (soll heiûen: gar nicht) kom-
mentiert, sollte jedoch von jedem Entwickler verstanden werden. In XUFSL.H habe
ich die verschiedenen Mîglichkeiten des xUFSL fÅr Entwickler einigermaûen aus-
fÅhrlich erlÑutert.


Wieso noch ein Fontselektor?
============================

Die mir bekannten "Zeichensatzauswahldialoge" sind zwar ganz brauchbar, wer-
den jedoch den steigenden Anforderungen, die sich mit EinfÅhrung der Multi-
tasking-Betriebssysteme und des SpeedoGDOS ergeben haben, nicht mehr gerecht.
Der "FONTSEL" von Holger Weets (1.00/11.5.94) ist bei mir (MagiC 2.0, Speedo
5.0a) nicht lauffÑhig, da er sich nach der Installation bei jedem Aufrufversuch
nur mit Bomben meldet...
Die Urversion, der UFSL von Michael ThÑnitz, lÑuft zwar korrekt, bietet jedoch
zu wenig Parametrierungen.


Die Konsequenz?
===============

ZunÑchst dachte ich, um eine Neuprogrammierung herumzukommen und habe etliche
Mailboxen durchwÅhlt, jedoch vergebens.
Also habe ich mich schweren Herzens hingesetzt und einen neuen Fontselektor
implementiert.


Das Ergebnis
============

Herausgekommen ist, so meine ich, ein ProgrÑmmchen, das sich durchaus sehen
lassen kann. Hier eine Kurzbeschreibung:

- Kompatibel zum UFSL von Michael ThÑnitz bis zur letzten Version 0.97
- xUFSL bietet wahlweise einen unmodalen Fensterdialog
- Neben der Auswahl der Schrift - getrennt nach Fontname und -schnitt - kann
  der Aufrufer zusÑtzlich folgende Parameter einstellen:
  . Schriftgrîûe (bei skalierbaren ZeichensÑtzen jede Zwischengrîûe)
  . Schriftbreite inkl. Kerning-Informationen: Pair- und Track-Kerning
    (nur bei skalierbaren ZeichensÑtzen)
  . Schriftneigung (ebenfalls nur bei skalierbaren ZeichensÑtzen)
  . Schriftfarbe
  . Schriftattribute, wahlweise wird als zusÑtzliches Attribut
    die invertierte Schrift unterstÅtzt (TF_INVERS:=0x40).
- Der xUFSL unterstÅtzt ein konfigurierbares Popup: Mit EINEM Aufruf kînnen
  mehrere Schriften fÅr verschiedene Zwecke abgefragt werden.
- Der xUFSL bietet eine Verwaltung von 'Fontsets'. Damit besteht ein besonders
  schneller Zugriff auf bevorzugte und hÑufig benîtigte ZeichensÑtze.
- Der Beispieltext kann durch Anklicken umgeschaltet werden, es stehen drei
  frei editierbare (!) Texte zur VerfÅgung.
- Ansicht aller Zeichen eines Fonts. Damit ist der xUFSL ein vollwertiger Font-
  viewer.
- Anzeige der aktuellen Font-ID.
- Der Dialog ist komplett tastaturbedienbar.
- Flexible Parametrierung, jede Funktion kann wahlweise abgschaltet werden.
- Als besonderes Bonbon besteht die Mîglichkeit, die DialogzeichensÑtze des
  xUFSL einzustellen. Es sind alle Bitmap-ZeichensÑtze erlaubt, die 8 Punkte
  (kleiner Zeichensatz) bzw. 10 Punkte (groûer Zeichensatz) groû sind. Default-
  mÑûig wird der Systemzeichensatz verwendet.
  Gut sieht z.B. der proportionale Chicago-Zeichensatz aus (siehe FONTS)!
- SÑmtliche Parameter kînnen in Zusammenarbeit mit dem xUFC applikationsunab-
  hÑngig konfiguriert werden.
- Ein kleiner Wermutstropfen: xUFSL ist mit ca. 58 KB relativ groû geraten, was
  allerdings in der heutigen Zeit keine allzu wichtige Rolle mehr spielen soll-
  te (unter Windoof gibt es kaum ein Programm, was nicht mindestens 5MB auf der
  Platte belegt, und das ist noch tief angesetzt ;-)). An diesem "Manko" werde
  ich in Zukunft dennoch arbeiten.

Als Beispiel fÅr den Aufruf des xUFSL kann das im Quelltext beiliegende Pro-
gramm CALLUFSL.PRG dienen. Dort kann man auch mit den verschiedenen Optionen
"herumspielen".

Ich habe xUFSL mit verschiedenen Programmen ausgetestet und dabei keine Fehler
mehr feststellen kînnen. Da ich leider keinen Farbmonitor besitze, konnte ich
die Farbeinstellungen nicht austesten. Insbesondere hier wÑre ich fÅr Erfah-
rungen dankbar. Der xUFSL benîtigt mindestens eine Auflîsung von 640*400 Punk-
ten.


Verwendete Hardware
===================

Meine Systemkonfiguration ist leider nicht mehr die aktuellste:
   Atari 520 ST+ von 1985 (...und lÑuft und lÑuft... seitdem ohne Defekte!),
   erweitert auf 4+1 MB mit
   - TOS 1.04 und MagiC 2.0 bzw. MultiTOS
   - Speedo bzw. NVDI
   - OverScan auf SM124 (auch noch von 1985!)
Unter diesen Konfigurationen lÑuft xUFSL einwandfrei.


Verwendete Software
===================

PureC 1.1        Leider immer noch, wann gibts endlich die Version 2.0?
                 BezÅglich des erzeugten Codes bleibts konkurrenzlos.
Interface 2.32   Aus meiner Sicht das beste Programm zum "Designen" von
                 Resourcen.
Gemini 1.9999    Wird die 2.0 mal erreicht?
Ease 3.5         GefÑllt mir in manchen Punkten besser als Gemini:
                 - Doppelklick auf dem Desktop
                 - MenÅpunkt fÅr Programme, bei Gemini nur Åber Take-Off.
                 - Bei Verwendung vieler Icons beim Fensteraufbau wesentlich
                   schneller
Speedo 5.0       Achtung: Bis Speedo 5.0b gibt es u.U. Probleme, siehe
                          XUFSL.CHG! Abhilfe: Speedo 5.0c.
NVDI 3.01        Subjektiv noch schneller als die Version 2.5, auf jeden Fall
                 ein schneller Ersatz fÅr Speedo, allerdings noch nicht ganz
                 fehlerfrei. Es gibt Probleme mit Kerning und Skewing.


Installation
============

Die Installation des xUFSL kann entweder im AUTO-Ordner oder per Aufruf des
XUFSL.PRG vom Desktop aus erfolgen.
Der xUFSL installiert sich mit dem Cookie "UFSL", sofern dieser noch nicht be-
legt ist. Zur Unterscheidung zu den bekannten Fontselektoren trÑgt er in der
installierten Struktur die ID "xUFS" ein.


Begriffe
========

GDOS:         'Graphics Device Operating System', u.a. zur Verwaltung von GerÑ-
              tetreibern und ZeichensÑtzen zustÑndig. Da das GDOS von ATARI
              lange stiefmÅtterlich behandelt wurde, konnte es sich nicht nen-
              nenswert verbreiten. Dies hat sich erst in der jÅngsten Zeit mit
              der Entwicklung des einigermaûen leistungsfÑhigen SpeedoGDOS und
              der erfreulichen Tendenz zu standardisierten Applikationen grund-
              legend geÑndert.
Fontselektor: Ein Programm, das analog der im GEM integrierten Dateiauswahlbox
              die Wahl von installierten Schriften ermîglicht.
Bitmap-Fonts: ZeichensÑtze, deren Darstellung auf einer Pixelmatrix basiert.
              Solche ZeichensÑtze waren bis zur EinfÅhrung des FSM-GDOS Stan-
              dard. Ein typisches Beispiel ist der Systemzeichensatz des ATARI.
              Nachteil: FÅr jede Zeichengrîûe muû eine eigene Matrix definiert
              werden, da eine algorithmische Matrixvergrîûerung ein hÑûliches
              Schriftbild ('Treppchenbildung') ergibt.
Vektorfonts:  Im Gegensatz zu Bitmap-Fonts werden solche ZeichensÑtze anhand
              von sog. StÅtzpunkten definiert, durch die Kurven (Bezier-Kurven)
              gelegt werden. Solche ZeichensÑtze kînnen ohne QualitÑtsverluste
              in jeder beliebigen Grîûe dargestellt werden, sind also 'skalier-
              bar'.


Kurzanleitung
=============

Der xUFSL dient zur Zeichensatzauswahl fÅr alle Programme, die einen UFSL
unterstÅtzen. Je nach aufrufendem Programm und selektiertem Zeichensatz bietet
er unterschiedliche Mîglichkeiten.

Bereich (Alt-B): Auswahl des Bereiches bzw. Fensters o.Ñ., fÅr den der Zei-
                 chensatz verwendet werden soll. Dieses Popup ist applika-
                 tionsabhÑngig und evtl. nicht zu sehen.

Font (Alt-F):    Auswahl des Zeichensatzes. Durch Anklicken kann einer der
                 installierten ZeichensÑtze Åber ein Popup ausgewÑhlt werden.
                 Je nach Stellung des Schalters "Set verwenden" werden folgen-
                 de ZeichensÑtze angeboten:
                 Schalter aktiv:
                 - Einfachklick: ZeichensÑtze aus dem Fontset
                 - Doppelklick:  Alle ZeichensÑtze
                 Schalter inaktiv:
                 - Einfachklick: Alle ZeichensÑtze
                 - Doppelklick:  ZeichensÑtze aus dem Fontset
Schnitt (Alt-N): Auswahl der Schnitte des gewÑhlten Zeichensatzes, nur fÅr
                 Vektorfonts!

Parameterbereich "Standard" (Alt-S)
-----------------------------------
Die Einstellungen dieses Bereiches sind fÅr alle ZeichensÑtze mîglich.

Grîûe (Alt-G):   Auswahl der Fontgrîûe. Es werden alle installierten Grîûen,
                 wenn es die Applikation unterstÅtzt, auch eine Default-Grîûe,
                 angeboten. Bei skalierbaren ZeichensÑtzen kann im Feld
                 "Punkte" (Alt-P) eine beliebige Grîûe eingetragen werden.
Farbe (Alt-R):   Auswahl einer Schriftfarbe, im Popup werden die zur VerfÅgung
                 stehenden Farben angeboten.

Parameterbereich "Effekte" (Alt-E)
----------------------------------
Die Einstellungen dieses Bereiches sind ebenfalls fÅr alle ZeichensÑtze mîg-
lich, sollten jedoch nur fÅr Bitmap-Fonts angewendet werden, da fÅr Vektor-
Fonts meist unterschiedliche Schriftschnitte vorhanden sind.

Parameterbereich "Vektor" (Alt-V)
---------------------------------
Die Einstellungen dieses Bereiches kînnen nur bei VektorzeichensÑtzen geÑndert
werden.

Breite (Alt-R):  Auswahl der Schriftbreite analog der Grîûe. Zur Auswahl
                 werden neben der Defaultbreite die viertel, halbe, ganze,
                 doppelte und vierfache Breite angeboten. Diese Mîglichkeit
                 bieten nur skalierbare ZeichensÑtze.
Kerning-Infos:   Die Breite des auszugebenden Textes kann bei VektorzeichensÑt-
                 zen zusÑtzlich Åber das sog. 'Kerning', zu deutsch: 'Unter-
                 schneiden', gesteuert werden. Mit dem Schalter "Paar-Kerning"
                 (Alt-K) kann das Unterschneiden bestimmter Buchstabenpaare
                 (z.B. 'Ve' oder 'Fa', je nach Zeichensatz) eingeschaltet wer-
                 den. Dies hat zur Folge, daû die betroffenen Paare 'ineinan-
                 dergeschoben' werden.
                 Mit dem Schieberegler "Weite" kann der generelle Abstand zwi-
                 schen den Zeichen verÑndert werden. Ein hîherer Wert bewirkt
                 ein nÑheres ZusammenrÅcken der Buchstaben (Alt >/<, Ctrl >/<).
Neigung:         Definition der Neigung bei skalierbaren ZeichensÑtzen
                 (Alt +/-: 1 Grad énderung, Ctrl +/-: 10 Grad énderung).
                 Die Neigung kann auch direkt eingegeben werden. DafÅr muû das
                 Neigungsfeld per Tastatur (TAB oder Pfeil unten) angewÑhlt
                 werden. Im Neigungsfeld ist allerdings der Cursor nicht posi-
                 tionierbar, was jedoch keine EinschrÑnkung bedeutet.

Parameterbereich "Info" (Alt-I)
-------------------------------
Anzeige einiger interessanter Informationen aus dem Fontheader. Leider nur fÅr
Vektorfonts!

Name:            Kurzname/Schnitt
Datum:           Erstellungsdatum
Form:            Breite/Dicke/Neigungswinkel
Kerning:         Tracks/Paare

Parameterbereich "Extra" (Alt-X)
--------------------------------
Hier werden allgemeine Parametrierungen des xUFSL vorgenommen.

Auto-Redraw:     Wenn dieser Schalter gesetzt ist, erfolgt das Redraw des Text-
  (Alt-R)        beispiels bei jeder énderung eines Zeichensatzparameters. Das
                 kann u.U. bei VektorzeichensÑtzen "nervend" sein und ist daher
                 abschaltbar. Ein Redraw kann jederzeit mit einem Doppelklick
                 auf den Wechselpfeil im Textbeispiel erzwungen werden.
Zentrieren:      Der Dialog wird in der Bildschirmmitte zentriert. Andernfalls
  (Alt-Z)        wird der Dialog in MauszeigernÑhe dargestellt.
Set verwenden:   Bei der Zeichensatzauswahl wird das aktuelle Fontset verwen-
  (Alt-W)        det. Ansonsten werden alle installierten ZeichensÑtze angebo-
                 ten. Dieser Knopf ist nur wÑhlbar, wenn das Fontset nicht leer
                 ist.
Set sortieren:   Das aktuelle Fontset wird nach Zeichensatznamen sortiert. Auch
  (Alt-T)        dieser Knopf ist bei leerem Fontset nicht wÑhlbar.
Ok Åbernimmt:    Bei der Wahl des "Ok"-Knopfes wird der ausgewÑhlte Zeichen-
  (Alt-K)        satz in das Fontset Åbernommen. Auûerdem ist das Fontset dann
                 auf 8 EintrÑge begrenzt. Im Zweifelsfall wird der erste
                 Eintrag entfernt.
Laden/Sichern:   Laden eines Fontsets bzw. Speichern des aktuellen Fontsets.
  (Alt-L/N)      Bei jedem Aufruf versucht der xUFSL, das Standard-Fontset
                 XUFSL.SET zu laden, das dann sofort zur VerfÅgung steht.
                 Dieses Fontset wird in dem Verzeichnis gesucht, aus dem der
                 xUFSL gestartet wurde. Mit dem Fontset werden neben den
                 Parametern auch die Textbeispiele gesichert.

Textbeispiel
------------
Das Textbeispiel kann beliebig editiert werden. Mit der Taste UNDO wird das
vorgegebene Beispiel zurÅckgeholt.
Als Titel des Textbeispiels wird der Zeichensatztyp und seine ID angezeigt.

Icon-Knîpfe
-----------
Mit den Icon-Knîpfen rechts neben dem Textbeispiel kînnen verschiedene Zusatz-
funktionen ausgefÅhrt werden.

Wechselpfeil:    Mit einem Klick auf dieses Icon kann aus verschiedenen Text-
  (Alt-Y)        beispielen ausgewÑhlt werden.
Info:            Anzeige aller Zeichen des aktuell eingestellten Fonts in einer
  (Alt-Q)        Maximalgrîûe von 12 Punkten. Wenn der Mauszeiger Åber eines
                 der Zeichen bewegt wird, wird in der linken oberen Ecke dessen
                 ASCII-Code angezeigt. Wahlweise kann der Cursor auch mit den
                 Cursortasten bewegt werden.
                 Mit RETURN, ENTER oder der linken Maustaste wird das aktuelle
                 Zeichen in das Textbeispiel Åbernommen. Zeichen, die im Text-
                 beispiel vorkommen, werden hell dargestellt.
                 Die Anzeige wird mit ESC, UNDO oder der rechten Maustaste be-
                 endet.
Clipboard:       Mit einem Klick auf das Clipboard-Symbol wird der eingestellte
  (Alt-C)        Zeichensatz MIT ALLEN PARAMETERN in das Fontset Åbernommen.
                 Ein leeres Clipboard zeigt an, daû der aktuelle Zeichensatz
                 nicht im Set ist. Ein helles "F" bedeutet, daû er im Set ent-
                 halten ist, jedoch mit anderen Attributen. Ein dunkles "F"
                 schlieûlich zeigt an, daû der Zeichensatz genauso im Fontset
                 enthalten ist.
                 Ein Fontset-Eintrag wird eindeutig durch den Zeichensatz und
                 die Grîûe in Punkten charakterisiert. Aus diesem Grund ist es
                 nicht mîglich, denselben Zeichensatz in derselben Grîûe mehr-
                 fach im Fontset unterzubringen.
Papierkorb:      Der Zeichensatz wird, falls er im Fontset enthalten ist, da-
  (Alt-D)        raus entfernt. Mit einem Doppelklick wird das ganze Fontset
                 gelîscht.

Info:            Kurzinformation Åber den xUFSL.
Hilfe (Alt-H):   Hilfefunktion der rufenden Applikation, sofern diese das
                 unterstÅtzt.
Ok (Alt-O):      öbernahme der gemachten Einstellungen.
Abbruch (Alt-A): Verwerfen der Einstellungen.

Alle Buttons kînnen mit der Alternate-Taste in Verbindung mit dem unterstri-
chenen Buchstaben per Tastatur erreicht werden. Wenn statt der Alternate- die
Control-Taste verwendet wird, dann entspricht das einem Doppelklick.

Der Cursor kann innerhalb von Eingabefeldern selbst dann mit der Maus posi-
tioniert werden, wenn ein proportionaler Dialogzeichensatz gewÑhlt wird.
Auûerdem kann per <Alt>+Ziffernblock Åber den ASCII-Code jedes Zeichen er-
reicht werden! Das ist besonders zur Anzeige von Sonderzeichen im Textbei-
spiel interessant.

Auch die Popups sind komplett mit der Tastatur bedienbar:
Pfeiltasten:         NÑchster/vorheriger Eintrag
Shift+Pfeiltasten:   Seite unten/oben
Control+Pfeiltasten: Erster/letzter Eintrag
Return oder Enter:   öbernahme des aktuellen Wertes
ESC oder UNDO:       Abbruch (auch mit rechter Maustaste)
Mit dem Anfangsbuchstaben kînnen zyklisch alle EintrÑge gewÑhlt werden, die
mit diesem Buchstaben beginnen.

Der FULLER des Fensters, sofern vorhanden, zentriert den Dialog, der CLOSER
entspricht, sofern vorhanden, dem "Abbruch"-Knopf.

Viele Applikationen, die SpeedoGDOS oder ein anderes GDOS nicht mit allen
Mîglichkeiten aktiv unterstÅtzen, bieten nur die Einstellung des Zeichensatzes
und der Schriftgrîûe an. Ebenso werden u.U. nur die unproportionalen Fonts zur
Auswahl angeboten.


Danksagungen
============

FÅr die UnterstÅtzung bei der Fehlersuche und fÅr neue Anregungen mîchte ich,
und wenns auch noch so abgedroschen klingt, namentlich folgenden Leuten danken
(in alphabetischer Reihenfolge ;-):
- Dirk Allard @ WI2
- Ralf Heckmann @ IZ
- Gerhard Hîlscher @ MS2
- Uwe Holtkamp @ DO2
- David Reitter @ WI2
- Ulrich Rossgoderer @ M

... und natÅrlich:
- Dirk Haun @ WI2 (CALVINO-Autor), mit dem ich mich nach langen Diskussionen
  hoffentlich bald auf eine neue Selektor-Schnittstelle (xFSL) einigen werde.
- Michael ThÑnitz @ BI, von ihm stammt schlieûlich die UFSL-Idee.
- Holger Weets @ OL fÅr diverse Programme, u.a. ST-Guide und Fontsel.


14.09.1994 Stefan Rogel
23.09.1994 Anpassung an xUFSL 1.02
01.10.1994 Anpassung an xUFSL 1.03
25.10.1994 Anpassung an xUFSL 1.04
23.12.1994 Anpassung an xUFSL 1.05