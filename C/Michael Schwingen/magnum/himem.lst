PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   1
Source File: C:\PC\MAGNUM\HIMEM.S

   1                                    ; MAGNUM FASTRAM-Installation
   2                                    ;
   3                                    ; $Id: himem.s,v 1.2 1998/05/14 11:44:00 rincewind Exp $
   4                                    ; 
   5                                    ; $Log: himem.s,v $
   6                                    ; Revision 1.2  1998/05/14  11:44:00  rincewind
   7                                    ; shrink memory at start, check for machine cookie
   8                                    ;
   9                                    ; Revision 1.1  1997/03/14  00:13:56  rincewind
  10                                    ; Initial revision
  11                                    ;
  12                                    ; Revision 1.9  1996/11/28  17:59:48  rincewind
  13                                    ; Ramtest abschaltbar
  14                                    ;
  15                                    ; Revision 1.8  1996/11/28  17:10:58  rincewind
  16                                    ; Angepasst fuer Magnum-ST
  17                                    ;
  18                                    ; Revision 1.7  1995/09/13  18:01:12  rincewind
  19                                    ; changed memory mirror test for new MACH version
  20                                    ; made texts readable in 40-column mode
  21                                    ;
  22                                    ; Revision 1.6  1995/09/13  12:13:26  rincewind
  23                                    ; disable data cache during memory organization check
  24                                    ;
  25                                    ; Revision 1.5  1995/09/08  13:48:40  rincewind
  26                                    ; first working release version
  27                                    ;
  28                                    ; Revision 1.4  1995/08/30  16:41:44  rincewind
  29                                    ; moved patch area in magnum.s
  30                                    ;
  31                                    ; Revision 1.3  1995/08/28  21:31:40  rincewind
  32                                    ; changed cookie to point to structure
  33                                    ;
  34                                    ; Revision 1.2  1995/08/28  20:13:34  rincewind
  35                                    ; first version ... untested
  36                                    ;
  37  
  38                                                    IMPORT sleep
  39                                    resvalid        EQU $0426       ;Reset-Vektor Magic
  40                                    resvector       EQU $042A       ;der Reset-Vektor
  41                                    _p_cookies      EQU $05A0       ;Zeiger auf das Cookie Jar
  42                                    memctrl		EQU $0424	;Shadow von $ffff8001
  43                                    phystop		EQU $042E
  44                                    berr_vec        EQU $8          ;Buserror-Vektor
  45                                    COOKIE          EQU "HMEM"
  46                                    MAGIC1		EQU "MAGN"
  47                                    MAGIC2		EQU "WARM"
  48  
  49                                    BLK1_START	EQU $e80000
  50                                    BLK1_LEN	EQU $080000
  51                                    BLK2_START	EQU $f20000
  52                                    BLK2_LEN	EQU $080000
  53  
  54                                                    MACRO SUPEXEC addr
  55                                                    clr.l   sup_ret
  56                                                    pea     addr(pc)
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   2
Source File: C:\PC\MAGNUM\HIMEM.S

  57                                                    move.w  #38,-(sp)
  58                                                    trap    #14
  59                                                    addq.l  #6,sp
  60                                                    ENDM
  61  
  62                                                    MACRO PRINTSTR string
  63                                                    lea     string(pc),a0
  64                                                    bsr     print
  65                                                    ENDM
  66  
  67                                                    MACRO PUTC val
  68                                                    move.w  val,d0
  69                                                    bsr     putc
  70                                                    ENDM
  71                                                    
  72 00000000' 6000 1F58                start:          bra     start2
  73  
  74  
  75 00000004' 0001                     the_cookie:     dc.w    1               ; Versionsnummer
  76 00000006' 0000 0000                _alt_ram_start:  dc.l    0               ; Startadresse Fastram
  77 0000000A' 0000 0000                _alt_ram_len:    dc.l    0               ; LÑnge Fastram
  78  
  79 0000000E' 0000 0000 0000 0000 
     00000016' 0000 0000 0000 0000 
     0000001E' 0000 0000 0000 0000 
     00000026' 0000 0000 0000 0000 
     0000002E' 0000 0000 0000 0000 
     00000036' 0000 0000 0000 0000 
     0000003E' 0000 0000 0000 0000 
     00000046' 0000 0000 0000 0000 
     0000004E' 0000 0000 0000 0000 
     00000056' 0000 0000 0000 0000 
     0000005E' 0000 0000 0000 0000 
     00000066' 0000 0000 0000 0000 
     0000006E' 0000 0000 0000 0000 
     00000076' 0000 0000 0000 0000 
     0000007E' 0000 0000 0000 0000 
     00000086' 0000 0000 0000 0000 
     0000008E' 0000 0000 0000 0000 
     00000096' 0000 0000 0000 0000 
     0000009E' 0000 0000 0000 0000 
     000000A6' 0000 0000 0000 0000 
     000000AE' 0000 0000 0000 0000 
     000000B6' 0000 0000 0000 0000 
     000000BE' 0000 0000 0000 0000 
     000000C6' 0000 0000 0000 0000 
     000000CE' 0000 0000 0000 0000 
     000000D6' 0000 0000 0000 0000 
     000000DE' 0000 0000 0000 0000 
     000000E6' 0000 0000 0000 0000 
     000000EE' 0000 0000 0000 0000 
     000000F6' 0000 0000 0000 0000 
     000000FE' 0000 0000 0000 0000 
     00000106' 0000 0000 0000 0000 
     0000010E' 0000 0000 0000 0000 
     00000116' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   3
Source File: C:\PC\MAGNUM\HIMEM.S

     0000011E' 0000 0000 0000 0000 
     00000126' 0000 0000 0000 0000 
     0000012E' 0000 0000 0000 0000 
     00000136' 0000 0000 0000 0000 
     0000013E' 0000 0000 0000 0000 
     00000146' 0000 0000 0000 0000 
     0000014E' 0000 0000 0000 0000 
     00000156' 0000 0000 0000 0000 
     0000015E' 0000 0000 0000 0000 
     00000166' 0000 0000 0000 0000 
     0000016E' 0000 0000 0000 0000 
     00000176' 0000 0000 0000 0000 
     0000017E' 0000 0000 0000 0000 
     00000186' 0000 0000 0000 0000 
     0000018E' 0000 0000 0000 0000 
     00000196' 0000 0000 0000 0000 
     0000019E' 0000 0000 0000 0000 
     000001A6' 0000 0000 0000 0000 
     000001AE' 0000 0000 0000 0000 
     000001B6' 0000 0000 0000 0000 
     000001BE' 0000 0000 0000 0000 
     000001C6' 0000 0000 0000 0000 
     000001CE' 0000 0000 0000 0000 
     000001D6' 0000 0000 0000 0000 
     000001DE' 0000 0000 0000 0000 
     000001E6' 0000 0000 0000 0000 
     000001EE' 0000 0000 0000 0000 
     000001F6' 0000 0000 0000 0000 
     000001FE' 0000 0000 0000 0000 
     00000206' 0000 0000 0000 0000 
     0000020E' 0000 0000 0000 0000 
     00000216' 0000 0000 0000 0000 
     0000021E' 0000 0000 0000 0000 
     00000226' 0000 0000 0000 0000 
     0000022E' 0000 0000 0000 0000 
     00000236' 0000 0000 0000 0000 
     0000023E' 0000 0000 0000 0000 
     00000246' 0000 0000 0000 0000 
     0000024E' 0000 0000 0000 0000 
     00000256' 0000 0000 0000 0000 
     0000025E' 0000 0000 0000 0000 
     00000266' 0000 0000 0000 0000 
     0000026E' 0000 0000 0000 0000 
     00000276' 0000 0000 0000 0000 
     0000027E' 0000 0000 0000 0000 
     00000286' 0000 0000 0000 0000 
     0000028E' 0000 0000 0000 0000 
     00000296' 0000 0000 0000 0000 
     0000029E' 0000 0000 0000 0000 
     000002A6' 0000 0000 0000 0000 
     000002AE' 0000 0000 0000 0000 
     000002B6' 0000 0000 0000 0000 
     000002BE' 0000 0000 0000 0000 
     000002C6' 0000 0000 0000 0000 
     000002CE' 0000 0000 0000 0000 
     000002D6' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   4
Source File: C:\PC\MAGNUM\HIMEM.S

     000002DE' 0000 0000 0000 0000 
     000002E6' 0000 0000 0000 0000 
     000002EE' 0000 0000 0000 0000 
     000002F6' 0000 0000 0000 0000 
     000002FE' 0000 0000 0000 0000 
     00000306' 0000 0000 0000 0000 
     0000030E' 0000 0000 0000 0000 
     00000316' 0000 0000 0000 0000 
     0000031E' 0000 0000 0000 0000 
     00000326' 0000 0000 0000 0000 
     0000032E' 0000 0000 0000 0000 
     00000336' 0000 0000 0000 0000 
     0000033E' 0000 0000 0000 0000 
     00000346' 0000 0000 0000 0000 
     0000034E' 0000 0000 0000 0000 
     00000356' 0000 0000 0000 0000 
     0000035E' 0000 0000 0000 0000 
     00000366' 0000 0000 0000 0000 
     0000036E' 0000 0000 0000 0000 
     00000376' 0000 0000 0000 0000 
     0000037E' 0000 0000 0000 0000 
     00000386' 0000 0000 0000 0000 
     0000038E' 0000 0000 0000 0000 
     00000396' 0000 0000 0000 0000 
     0000039E' 0000 0000 0000 0000 
     000003A6' 0000 0000 0000 0000 
     000003AE' 0000 0000 0000 0000 
     000003B6' 0000 0000 0000 0000 
     000003BE' 0000 0000 0000 0000 
     000003C6' 0000 0000 0000 0000 
     000003CE' 0000 0000 0000 0000 
     000003D6' 0000 0000 0000 0000 
     000003DE' 0000 0000 0000 0000 
     000003E6' 0000 0000 0000 0000 
     000003EE' 0000 0000 0000 0000 
     000003F6' 0000 0000 0000 0000 
     000003FE' 0000 0000 0000 0000 
     00000406' 0000 0000 0000 0000 
     0000040E' 0000 0000 0000 0000 
     00000416' 0000 0000 0000 0000 
     0000041E' 0000 0000 0000 0000 
     00000426' 0000 0000 0000 0000 
     0000042E' 0000 0000 0000 0000 
     00000436' 0000 0000 0000 0000 
     0000043E' 0000 0000 0000 0000 
     00000446' 0000 0000 0000 0000 
     0000044E' 0000 0000 0000 0000 
     00000456' 0000 0000 0000 0000 
     0000045E' 0000 0000 0000 0000 
     00000466' 0000 0000 0000 0000 
     0000046E' 0000 0000 0000 0000 
     00000476' 0000 0000 0000 0000 
     0000047E' 0000 0000 0000 0000 
     00000486' 0000 0000 0000 0000 
     0000048E' 0000 0000 0000 0000 
     00000496' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   5
Source File: C:\PC\MAGNUM\HIMEM.S

     0000049E' 0000 0000 0000 0000 
     000004A6' 0000 0000 0000 0000 
     000004AE' 0000 0000 0000 0000 
     000004B6' 0000 0000 0000 0000 
     000004BE' 0000 0000 0000 0000 
     000004C6' 0000 0000 0000 0000 
     000004CE' 0000 0000 0000 0000 
     000004D6' 0000 0000 0000 0000 
     000004DE' 0000 0000 0000 0000 
     000004E6' 0000 0000 0000 0000 
     000004EE' 0000 0000 0000 0000 
     000004F6' 0000 0000 0000 0000 
     000004FE' 0000 0000 0000 0000 
     00000506' 0000 0000 0000 0000 
     0000050E' 0000 0000 0000 0000 
     00000516' 0000 0000 0000 0000 
     0000051E' 0000 0000 0000 0000 
     00000526' 0000 0000 0000 0000 
     0000052E' 0000 0000 0000 0000 
     00000536' 0000 0000 0000 0000 
     0000053E' 0000 0000 0000 0000 
     00000546' 0000 0000 0000 0000 
     0000054E' 0000 0000 0000 0000 
     00000556' 0000 0000 0000 0000 
     0000055E' 0000 0000 0000 0000 
     00000566' 0000 0000 0000 0000 
     0000056E' 0000 0000 0000 0000 
     00000576' 0000 0000 0000 0000 
     0000057E' 0000 0000 0000 0000 
     00000586' 0000 0000 0000 0000 
     0000058E' 0000 0000 0000 0000 
     00000596' 0000 0000 0000 0000 
     0000059E' 0000 0000 0000 0000 
     000005A6' 0000 0000 0000 0000 
     000005AE' 0000 0000 0000 0000 
     000005B6' 0000 0000 0000 0000 
     000005BE' 0000 0000 0000 0000 
     000005C6' 0000 0000 0000 0000 
     000005CE' 0000 0000 0000 0000 
     000005D6' 0000 0000 0000 0000 
     000005DE' 0000 0000 0000 0000 
     000005E6' 0000 0000 0000 0000 
     000005EE' 0000 0000 0000 0000 
     000005F6' 0000 0000 0000 0000 
     000005FE' 0000 0000 0000 0000 
     00000606' 0000 0000 0000 0000 
     0000060E' 0000 0000 0000 0000 
     00000616' 0000 0000 0000 0000 
     0000061E' 0000 0000 0000 0000 
     00000626' 0000 0000 0000 0000 
     0000062E' 0000 0000 0000 0000 
     00000636' 0000 0000 0000 0000 
     0000063E' 0000 0000 0000 0000 
     00000646' 0000 0000 0000 0000 
     0000064E' 0000 0000 0000 0000 
     00000656' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   6
Source File: C:\PC\MAGNUM\HIMEM.S

     0000065E' 0000 0000 0000 0000 
     00000666' 0000 0000 0000 0000 
     0000066E' 0000 0000 0000 0000 
     00000676' 0000 0000 0000 0000 
     0000067E' 0000 0000 0000 0000 
     00000686' 0000 0000 0000 0000 
     0000068E' 0000 0000 0000 0000 
     00000696' 0000 0000 0000 0000 
     0000069E' 0000 0000 0000 0000 
     000006A6' 0000 0000 0000 0000 
     000006AE' 0000 0000 0000 0000 
     000006B6' 0000 0000 0000 0000 
     000006BE' 0000 0000 0000 0000 
     000006C6' 0000 0000 0000 0000 
     000006CE' 0000 0000 0000 0000 
     000006D6' 0000 0000 0000 0000 
     000006DE' 0000 0000 0000 0000 
     000006E6' 0000 0000 0000 0000 
     000006EE' 0000 0000 0000 0000 
     000006F6' 0000 0000 0000 0000 
     000006FE' 0000 0000 0000 0000 
     00000706' 0000 0000 0000 0000 
     0000070E' 0000 0000 0000 0000 
     00000716' 0000 0000 0000 0000 
     0000071E' 0000 0000 0000 0000 
     00000726' 0000 0000 0000 0000 
     0000072E' 0000 0000 0000 0000 
     00000736' 0000 0000 0000 0000 
     0000073E' 0000 0000 0000 0000 
     00000746' 0000 0000 0000 0000 
     0000074E' 0000 0000 0000 0000 
     00000756' 0000 0000 0000 0000 
     0000075E' 0000 0000 0000 0000 
     00000766' 0000 0000 0000 0000 
     0000076E' 0000 0000 0000 0000 
     00000776' 0000 0000 0000 0000 
     0000077E' 0000 0000 0000 0000 
     00000786' 0000 0000 0000 0000 
     0000078E' 0000 0000 0000 0000 
     00000796' 0000 0000 0000 0000 
     0000079E' 0000 0000 0000 0000 
     000007A6' 0000 0000 0000 0000 
     000007AE' 0000 0000 0000 0000 
     000007B6' 0000 0000 0000 0000 
     000007BE' 0000 0000 0000 0000 
     000007C6' 0000 0000 0000 0000 
     000007CE' 0000 0000 0000 0000 
     000007D6' 0000 0000 0000 0000 
     000007DE' 0000 0000 0000 0000 
     000007E6' 0000 0000 0000 0000 
     000007EE' 0000 0000 0000 0000 
     000007F6' 0000 0000 0000 0000 
     000007FE' 0000 0000 0000 0000 
     00000806' 0000 0000 0000 0000 
     0000080E' 0000 0000 0000 0000 
     00000816' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   7
Source File: C:\PC\MAGNUM\HIMEM.S

     0000081E' 0000 0000 0000 0000 
     00000826' 0000 0000 0000 0000 
     0000082E' 0000 0000 0000 0000 
     00000836' 0000 0000 0000 0000 
     0000083E' 0000 0000 0000 0000 
     00000846' 0000 0000 0000 0000 
     0000084E' 0000 0000 0000 0000 
     00000856' 0000 0000 0000 0000 
     0000085E' 0000 0000 0000 0000 
     00000866' 0000 0000 0000 0000 
     0000086E' 0000 0000 0000 0000 
     00000876' 0000 0000 0000 0000 
     0000087E' 0000 0000 0000 0000 
     00000886' 0000 0000 0000 0000 
     0000088E' 0000 0000 0000 0000 
     00000896' 0000 0000 0000 0000 
     0000089E' 0000 0000 0000 0000 
     000008A6' 0000 0000 0000 0000 
     000008AE' 0000 0000 0000 0000 
     000008B6' 0000 0000 0000 0000 
     000008BE' 0000 0000 0000 0000 
     000008C6' 0000 0000 0000 0000 
     000008CE' 0000 0000 0000 0000 
     000008D6' 0000 0000 0000 0000 
     000008DE' 0000 0000 0000 0000 
     000008E6' 0000 0000 0000 0000 
     000008EE' 0000 0000 0000 0000 
     000008F6' 0000 0000 0000 0000 
     000008FE' 0000 0000 0000 0000 
     00000906' 0000 0000 0000 0000 
     0000090E' 0000 0000 0000 0000 
     00000916' 0000 0000 0000 0000 
     0000091E' 0000 0000 0000 0000 
     00000926' 0000 0000 0000 0000 
     0000092E' 0000 0000 0000 0000 
     00000936' 0000 0000 0000 0000 
     0000093E' 0000 0000 0000 0000 
     00000946' 0000 0000 0000 0000 
     0000094E' 0000 0000 0000 0000 
     00000956' 0000 0000 0000 0000 
     0000095E' 0000 0000 0000 0000 
     00000966' 0000 0000 0000 0000 
     0000096E' 0000 0000 0000 0000 
     00000976' 0000 0000 0000 0000 
     0000097E' 0000 0000 0000 0000 
     00000986' 0000 0000 0000 0000 
     0000098E' 0000 0000 0000 0000 
     00000996' 0000 0000 0000 0000 
     0000099E' 0000 0000 0000 0000 
     000009A6' 0000 0000 0000 0000 
     000009AE' 0000 0000 0000 0000 
     000009B6' 0000 0000 0000 0000 
     000009BE' 0000 0000 0000 0000 
     000009C6' 0000 0000 0000 0000 
     000009CE' 0000 0000 0000 0000 
     000009D6' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   8
Source File: C:\PC\MAGNUM\HIMEM.S

     000009DE' 0000 0000 0000 0000 
     000009E6' 0000 0000 0000 0000 
     000009EE' 0000 0000 0000 0000 
     000009F6' 0000 0000 0000 0000 
     000009FE' 0000 0000 0000 0000 
     00000A06' 0000 0000 0000 0000 
     00000A0E' 0000 0000 0000 0000 
     00000A16' 0000 0000 0000 0000 
     00000A1E' 0000 0000 0000 0000 
     00000A26' 0000 0000 0000 0000 
     00000A2E' 0000 0000 0000 0000 
     00000A36' 0000 0000 0000 0000 
     00000A3E' 0000 0000 0000 0000 
     00000A46' 0000 0000 0000 0000 
     00000A4E' 0000 0000 0000 0000 
     00000A56' 0000 0000 0000 0000 
     00000A5E' 0000 0000 0000 0000 
     00000A66' 0000 0000 0000 0000 
     00000A6E' 0000 0000 0000 0000 
     00000A76' 0000 0000 0000 0000 
     00000A7E' 0000 0000 0000 0000 
     00000A86' 0000 0000 0000 0000 
     00000A8E' 0000 0000 0000 0000 
     00000A96' 0000 0000 0000 0000 
     00000A9E' 0000 0000 0000 0000 
     00000AA6' 0000 0000 0000 0000 
     00000AAE' 0000 0000 0000 0000 
     00000AB6' 0000 0000 0000 0000 
     00000ABE' 0000 0000 0000 0000 
     00000AC6' 0000 0000 0000 0000 
     00000ACE' 0000 0000 0000 0000 
     00000AD6' 0000 0000 0000 0000 
     00000ADE' 0000 0000 0000 0000 
     00000AE6' 0000 0000 0000 0000 
     00000AEE' 0000 0000 0000 0000 
     00000AF6' 0000 0000 0000 0000 
     00000AFE' 0000 0000 0000 0000 
     00000B06' 0000 0000 0000 0000 
     00000B0E' 0000 0000 0000 0000 
     00000B16' 0000 0000 0000 0000 
     00000B1E' 0000 0000 0000 0000 
     00000B26' 0000 0000 0000 0000 
     00000B2E' 0000 0000 0000 0000 
     00000B36' 0000 0000 0000 0000 
     00000B3E' 0000 0000 0000 0000 
     00000B46' 0000 0000 0000 0000 
     00000B4E' 0000 0000 0000 0000 
     00000B56' 0000 0000 0000 0000 
     00000B5E' 0000 0000 0000 0000 
     00000B66' 0000 0000 0000 0000 
     00000B6E' 0000 0000 0000 0000 
     00000B76' 0000 0000 0000 0000 
     00000B7E' 0000 0000 0000 0000 
     00000B86' 0000 0000 0000 0000 
     00000B8E' 0000 0000 0000 0000 
     00000B96' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page   9
Source File: C:\PC\MAGNUM\HIMEM.S

     00000B9E' 0000 0000 0000 0000 
     00000BA6' 0000 0000 0000 0000 
     00000BAE' 0000 0000 0000 0000 
     00000BB6' 0000 0000 0000 0000 
     00000BBE' 0000 0000 0000 0000 
     00000BC6' 0000 0000 0000 0000 
     00000BCE' 0000 0000 0000 0000 
     00000BD6' 0000 0000 0000 0000 
     00000BDE' 0000 0000 0000 0000 
     00000BE6' 0000 0000 0000 0000 
     00000BEE' 0000 0000 0000 0000 
     00000BF6' 0000 0000 0000 0000 
     00000BFE' 0000 0000 0000 0000 
     00000C06' 0000 0000 0000 0000 
     00000C0E' 0000 0000 0000 0000 
     00000C16' 0000 0000 0000 0000 
     00000C1E' 0000 0000 0000 0000 
     00000C26' 0000 0000 0000 0000 
     00000C2E' 0000 0000 0000 0000 
     00000C36' 0000 0000 0000 0000 
     00000C3E' 0000 0000 0000 0000 
     00000C46' 0000 0000 0000 0000 
     00000C4E' 0000 0000 0000 0000 
     00000C56' 0000 0000 0000 0000 
     00000C5E' 0000 0000 0000 0000 
     00000C66' 0000 0000 0000 0000 
     00000C6E' 0000 0000 0000 0000 
     00000C76' 0000 0000 0000 0000 
     00000C7E' 0000 0000 0000 0000 
     00000C86' 0000 0000 0000 0000 
     00000C8E' 0000 0000 0000 0000 
     00000C96' 0000 0000 0000 0000 
     00000C9E' 0000 0000 0000 0000 
     00000CA6' 0000 0000 0000 0000 
     00000CAE' 0000 0000 0000 0000 
     00000CB6' 0000 0000 0000 0000 
     00000CBE' 0000 0000 0000 0000 
     00000CC6' 0000 0000 0000 0000 
     00000CCE' 0000 0000 0000 0000 
     00000CD6' 0000 0000 0000 0000 
     00000CDE' 0000 0000 0000 0000 
     00000CE6' 0000 0000 0000 0000 
     00000CEE' 0000 0000 0000 0000 
     00000CF6' 0000 0000 0000 0000 
     00000CFE' 0000 0000 0000 0000 
     00000D06' 0000 0000 0000 0000 
     00000D0E' 0000 0000 0000 0000 
     00000D16' 0000 0000 0000 0000 
     00000D1E' 0000 0000 0000 0000 
     00000D26' 0000 0000 0000 0000 
     00000D2E' 0000 0000 0000 0000 
     00000D36' 0000 0000 0000 0000 
     00000D3E' 0000 0000 0000 0000 
     00000D46' 0000 0000 0000 0000 
     00000D4E' 0000 0000 0000 0000 
     00000D56' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  10
Source File: C:\PC\MAGNUM\HIMEM.S

     00000D5E' 0000 0000 0000 0000 
     00000D66' 0000 0000 0000 0000 
     00000D6E' 0000 0000 0000 0000 
     00000D76' 0000 0000 0000 0000 
     00000D7E' 0000 0000 0000 0000 
     00000D86' 0000 0000 0000 0000 
     00000D8E' 0000 0000 0000 0000 
     00000D96' 0000 0000 0000 0000 
     00000D9E' 0000 0000 0000 0000 
     00000DA6' 0000 0000 0000 0000 
     00000DAE' 0000 0000 0000 0000 
     00000DB6' 0000 0000 0000 0000 
     00000DBE' 0000 0000 0000 0000 
     00000DC6' 0000 0000 0000 0000 
     00000DCE' 0000 0000 0000 0000 
     00000DD6' 0000 0000 0000 0000 
     00000DDE' 0000 0000 0000 0000 
     00000DE6' 0000 0000 0000 0000 
     00000DEE' 0000 0000 0000 0000 
     00000DF6' 0000 0000 0000 0000 
     00000DFE' 0000 0000 0000 0000 
     00000E06' 0000 0000 0000 0000 
     00000E0E' 0000 0000 0000 0000 
     00000E16' 0000 0000 0000 0000 
     00000E1E' 0000 0000 0000 0000 
     00000E26' 0000 0000 0000 0000 
     00000E2E' 0000 0000 0000 0000 
     00000E36' 0000 0000 0000 0000 
     00000E3E' 0000 0000 0000 0000 
     00000E46' 0000 0000 0000 0000 
     00000E4E' 0000 0000 0000 0000 
     00000E56' 0000 0000 0000 0000 
     00000E5E' 0000 0000 0000 0000 
     00000E66' 0000 0000 0000 0000 
     00000E6E' 0000 0000 0000 0000 
     00000E76' 0000 0000 0000 0000 
     00000E7E' 0000 0000 0000 0000 
     00000E86' 0000 0000 0000 0000 
     00000E8E' 0000 0000 0000 0000 
     00000E96' 0000 0000 0000 0000 
     00000E9E' 0000 0000 0000 0000 
     00000EA6' 0000 0000 0000 0000 
     00000EAE' 0000 0000 0000 0000 
     00000EB6' 0000 0000 0000 0000 
     00000EBE' 0000 0000 0000 0000 
     00000EC6' 0000 0000 0000 0000 
     00000ECE' 0000 0000 0000 0000 
     00000ED6' 0000 0000 0000 0000 
     00000EDE' 0000 0000 0000 0000 
     00000EE6' 0000 0000 0000 0000 
     00000EEE' 0000 0000 0000 0000 
     00000EF6' 0000 0000 0000 0000 
     00000EFE' 0000 0000 0000 0000 
     00000F06' 0000 0000 0000 0000 
     00000F0E' 0000 0000 0000 0000 
     00000F16' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  11
Source File: C:\PC\MAGNUM\HIMEM.S

     00000F1E' 0000 0000 0000 0000 
     00000F26' 0000 0000 0000 0000 
     00000F2E' 0000 0000 0000 0000 
     00000F36' 0000 0000 0000 0000 
     00000F3E' 0000 0000 0000 0000 
     00000F46' 0000 0000 0000 0000 
     00000F4E' 0000 0000 0000 0000 
     00000F56' 0000 0000 0000 0000 
     00000F5E' 0000 0000 0000 0000 
     00000F66' 0000 0000 0000 0000 
     00000F6E' 0000 0000 0000 0000 
     00000F76' 0000 0000 0000 0000 
     00000F7E' 0000 0000 0000 0000 
     00000F86' 0000 0000 0000 0000 
     00000F8E' 0000 0000 0000 0000 
     00000F96' 0000 0000 0000 0000 
     00000F9E' 0000 0000 0000 0000 
     00000FA6' 0000 0000 0000 0000 
     00000FAE' 0000 0000 0000 0000 
     00000FB6' 0000 0000 0000 0000 
     00000FBE' 0000 0000 0000 0000 
     00000FC6' 0000 0000 0000 0000 
     00000FCE' 0000 0000 0000 0000 
     00000FD6' 0000 0000 0000 0000 
     00000FDE' 0000 0000 0000 0000 
     00000FE6' 0000 0000 0000 0000 
     00000FEE' 0000 0000 0000 0000 
     00000FF6' 0000 0000 0000 0000 
     00000FFE' 0000 0000 0000 0000 
     00001006' 0000 0000 0000 0000 
     0000100E' 0000 0000 0000 0000 
     00001016' 0000 0000 0000 0000 
     0000101E' 0000 0000 0000 0000 
     00001026' 0000 0000 0000 0000 
     0000102E' 0000 0000 0000 0000 
     00001036' 0000 0000 0000 0000 
     0000103E' 0000 0000 0000 0000 
     00001046' 0000 0000 0000 0000 
     0000104E' 0000 0000 0000 0000 
     00001056' 0000 0000 0000 0000 
     0000105E' 0000 0000 0000 0000 
     00001066' 0000 0000 0000 0000 
     0000106E' 0000 0000 0000 0000 
     00001076' 0000 0000 0000 0000 
     0000107E' 0000 0000 0000 0000 
     00001086' 0000 0000 0000 0000 
     0000108E' 0000 0000 0000 0000 
     00001096' 0000 0000 0000 0000 
     0000109E' 0000 0000 0000 0000 
     000010A6' 0000 0000 0000 0000 
     000010AE' 0000 0000 0000 0000 
     000010B6' 0000 0000 0000 0000 
     000010BE' 0000 0000 0000 0000 
     000010C6' 0000 0000 0000 0000 
     000010CE' 0000 0000 0000 0000 
     000010D6' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  12
Source File: C:\PC\MAGNUM\HIMEM.S

     000010DE' 0000 0000 0000 0000 
     000010E6' 0000 0000 0000 0000 
     000010EE' 0000 0000 0000 0000 
     000010F6' 0000 0000 0000 0000 
     000010FE' 0000 0000 0000 0000 
     00001106' 0000 0000 0000 0000 
     0000110E' 0000 0000 0000 0000 
     00001116' 0000 0000 0000 0000 
     0000111E' 0000 0000 0000 0000 
     00001126' 0000 0000 0000 0000 
     0000112E' 0000 0000 0000 0000 
     00001136' 0000 0000 0000 0000 
     0000113E' 0000 0000 0000 0000 
     00001146' 0000 0000 0000 0000 
     0000114E' 0000 0000 0000 0000 
     00001156' 0000 0000 0000 0000 
     0000115E' 0000 0000 0000 0000 
     00001166' 0000 0000 0000 0000 
     0000116E' 0000 0000 0000 0000 
     00001176' 0000 0000 0000 0000 
     0000117E' 0000 0000 0000 0000 
     00001186' 0000 0000 0000 0000 
     0000118E' 0000 0000 0000 0000 
     00001196' 0000 0000 0000 0000 
     0000119E' 0000 0000 0000 0000 
     000011A6' 0000 0000 0000 0000 
     000011AE' 0000 0000 0000 0000 
     000011B6' 0000 0000 0000 0000 
     000011BE' 0000 0000 0000 0000 
     000011C6' 0000 0000 0000 0000 
     000011CE' 0000 0000 0000 0000 
     000011D6' 0000 0000 0000 0000 
     000011DE' 0000 0000 0000 0000 
     000011E6' 0000 0000 0000 0000 
     000011EE' 0000 0000 0000 0000 
     000011F6' 0000 0000 0000 0000 
     000011FE' 0000 0000 0000 0000 
     00001206' 0000 0000 0000 0000 
     0000120E' 0000 0000 0000 0000 
     00001216' 0000 0000 0000 0000 
     0000121E' 0000 0000 0000 0000 
     00001226' 0000 0000 0000 0000 
     0000122E' 0000 0000 0000 0000 
     00001236' 0000 0000 0000 0000 
     0000123E' 0000 0000 0000 0000 
     00001246' 0000 0000 0000 0000 
     0000124E' 0000 0000 0000 0000 
     00001256' 0000 0000 0000 0000 
     0000125E' 0000 0000 0000 0000 
     00001266' 0000 0000 0000 0000 
     0000126E' 0000 0000 0000 0000 
     00001276' 0000 0000 0000 0000 
     0000127E' 0000 0000 0000 0000 
     00001286' 0000 0000 0000 0000 
     0000128E' 0000 0000 0000 0000 
     00001296' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  13
Source File: C:\PC\MAGNUM\HIMEM.S

     0000129E' 0000 0000 0000 0000 
     000012A6' 0000 0000 0000 0000 
     000012AE' 0000 0000 0000 0000 
     000012B6' 0000 0000 0000 0000 
     000012BE' 0000 0000 0000 0000 
     000012C6' 0000 0000 0000 0000 
     000012CE' 0000 0000 0000 0000 
     000012D6' 0000 0000 0000 0000 
     000012DE' 0000 0000 0000 0000 
     000012E6' 0000 0000 0000 0000 
     000012EE' 0000 0000 0000 0000 
     000012F6' 0000 0000 0000 0000 
     000012FE' 0000 0000 0000 0000 
     00001306' 0000 0000 0000 0000 
     0000130E' 0000 0000 0000 0000 
     00001316' 0000 0000 0000 0000 
     0000131E' 0000 0000 0000 0000 
     00001326' 0000 0000 0000 0000 
     0000132E' 0000 0000 0000 0000 
     00001336' 0000 0000 0000 0000 
     0000133E' 0000 0000 0000 0000 
     00001346' 0000 0000 0000 0000 
     0000134E' 0000 0000 0000 0000 
     00001356' 0000 0000 0000 0000 
     0000135E' 0000 0000 0000 0000 
     00001366' 0000 0000 0000 0000 
     0000136E' 0000 0000 0000 0000 
     00001376' 0000 0000 0000 0000 
     0000137E' 0000 0000 0000 0000 
     00001386' 0000 0000 0000 0000 
     0000138E' 0000 0000 0000 0000 
     00001396' 0000 0000 0000 0000 
     0000139E' 0000 0000 0000 0000 
     000013A6' 0000 0000 0000 0000 
     000013AE' 0000 0000 0000 0000 
     000013B6' 0000 0000 0000 0000 
     000013BE' 0000 0000 0000 0000 
     000013C6' 0000 0000 0000 0000 
     000013CE' 0000 0000 0000 0000 
     000013D6' 0000 0000 0000 0000 
     000013DE' 0000 0000 0000 0000 
     000013E6' 0000 0000 0000 0000 
     000013EE' 0000 0000 0000 0000 
     000013F6' 0000 0000 0000 0000 
     000013FE' 0000 0000 0000 0000 
     00001406' 0000 0000 0000 0000 
     0000140E' 0000 0000 0000 0000 
     00001416' 0000 0000 0000 0000 
     0000141E' 0000 0000 0000 0000 
     00001426' 0000 0000 0000 0000 
     0000142E' 0000 0000 0000 0000 
     00001436' 0000 0000 0000 0000 
     0000143E' 0000 0000 0000 0000 
     00001446' 0000 0000 0000 0000 
     0000144E' 0000 0000 0000 0000 
     00001456' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  14
Source File: C:\PC\MAGNUM\HIMEM.S

     0000145E' 0000 0000 0000 0000 
     00001466' 0000 0000 0000 0000 
     0000146E' 0000 0000 0000 0000 
     00001476' 0000 0000 0000 0000 
     0000147E' 0000 0000 0000 0000 
     00001486' 0000 0000 0000 0000 
     0000148E' 0000 0000 0000 0000 
     00001496' 0000 0000 0000 0000 
     0000149E' 0000 0000 0000 0000 
     000014A6' 0000 0000 0000 0000 
     000014AE' 0000 0000 0000 0000 
     000014B6' 0000 0000 0000 0000 
     000014BE' 0000 0000 0000 0000 
     000014C6' 0000 0000 0000 0000 
     000014CE' 0000 0000 0000 0000 
     000014D6' 0000 0000 0000 0000 
     000014DE' 0000 0000 0000 0000 
     000014E6' 0000 0000 0000 0000 
     000014EE' 0000 0000 0000 0000 
     000014F6' 0000 0000 0000 0000 
     000014FE' 0000 0000 0000 0000 
     00001506' 0000 0000 0000 0000 
     0000150E' 0000 0000 0000 0000 
     00001516' 0000 0000 0000 0000 
     0000151E' 0000 0000 0000 0000 
     00001526' 0000 0000 0000 0000 
     0000152E' 0000 0000 0000 0000 
     00001536' 0000 0000 0000 0000 
     0000153E' 0000 0000 0000 0000 
     00001546' 0000 0000 0000 0000 
     0000154E' 0000 0000 0000 0000 
     00001556' 0000 0000 0000 0000 
     0000155E' 0000 0000 0000 0000 
     00001566' 0000 0000 0000 0000 
     0000156E' 0000 0000 0000 0000 
     00001576' 0000 0000 0000 0000 
     0000157E' 0000 0000 0000 0000 
     00001586' 0000 0000 0000 0000 
     0000158E' 0000 0000 0000 0000 
     00001596' 0000 0000 0000 0000 
     0000159E' 0000 0000 0000 0000 
     000015A6' 0000 0000 0000 0000 
     000015AE' 0000 0000 0000 0000 
     000015B6' 0000 0000 0000 0000 
     000015BE' 0000 0000 0000 0000 
     000015C6' 0000 0000 0000 0000 
     000015CE' 0000 0000 0000 0000 
     000015D6' 0000 0000 0000 0000 
     000015DE' 0000 0000 0000 0000 
     000015E6' 0000 0000 0000 0000 
     000015EE' 0000 0000 0000 0000 
     000015F6' 0000 0000 0000 0000 
     000015FE' 0000 0000 0000 0000 
     00001606' 0000 0000 0000 0000 
     0000160E' 0000 0000 0000 0000 
     00001616' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  15
Source File: C:\PC\MAGNUM\HIMEM.S

     0000161E' 0000 0000 0000 0000 
     00001626' 0000 0000 0000 0000 
     0000162E' 0000 0000 0000 0000 
     00001636' 0000 0000 0000 0000 
     0000163E' 0000 0000 0000 0000 
     00001646' 0000 0000 0000 0000 
     0000164E' 0000 0000 0000 0000 
     00001656' 0000 0000 0000 0000 
     0000165E' 0000 0000 0000 0000 
     00001666' 0000 0000 0000 0000 
     0000166E' 0000 0000 0000 0000 
     00001676' 0000 0000 0000 0000 
     0000167E' 0000 0000 0000 0000 
     00001686' 0000 0000 0000 0000 
     0000168E' 0000 0000 0000 0000 
     00001696' 0000 0000 0000 0000 
     0000169E' 0000 0000 0000 0000 
     000016A6' 0000 0000 0000 0000 
     000016AE' 0000 0000 0000 0000 
     000016B6' 0000 0000 0000 0000 
     000016BE' 0000 0000 0000 0000 
     000016C6' 0000 0000 0000 0000 
     000016CE' 0000 0000 0000 0000 
     000016D6' 0000 0000 0000 0000 
     000016DE' 0000 0000 0000 0000 
     000016E6' 0000 0000 0000 0000 
     000016EE' 0000 0000 0000 0000 
     000016F6' 0000 0000 0000 0000 
     000016FE' 0000 0000 0000 0000 
     00001706' 0000 0000 0000 0000 
     0000170E' 0000 0000 0000 0000 
     00001716' 0000 0000 0000 0000 
     0000171E' 0000 0000 0000 0000 
     00001726' 0000 0000 0000 0000 
     0000172E' 0000 0000 0000 0000 
     00001736' 0000 0000 0000 0000 
     0000173E' 0000 0000 0000 0000 
     00001746' 0000 0000 0000 0000 
     0000174E' 0000 0000 0000 0000 
     00001756' 0000 0000 0000 0000 
     0000175E' 0000 0000 0000 0000 
     00001766' 0000 0000 0000 0000 
     0000176E' 0000 0000 0000 0000 
     00001776' 0000 0000 0000 0000 
     0000177E' 0000 0000 0000 0000 
     00001786' 0000 0000 0000 0000 
     0000178E' 0000 0000 0000 0000 
     00001796' 0000 0000 0000 0000 
     0000179E' 0000 0000 0000 0000 
     000017A6' 0000 0000 0000 0000 
     000017AE' 0000 0000 0000 0000 
     000017B6' 0000 0000 0000 0000 
     000017BE' 0000 0000 0000 0000 
     000017C6' 0000 0000 0000 0000 
     000017CE' 0000 0000 0000 0000 
     000017D6' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  16
Source File: C:\PC\MAGNUM\HIMEM.S

     000017DE' 0000 0000 0000 0000 
     000017E6' 0000 0000 0000 0000 
     000017EE' 0000 0000 0000 0000 
     000017F6' 0000 0000 0000 0000 
     000017FE' 0000 0000 0000 0000 
     00001806' 0000 0000 0000 0000 
     0000180E' 0000 0000 0000 0000 
     00001816' 0000 0000 0000 0000 
     0000181E' 0000 0000 0000 0000 
     00001826' 0000 0000 0000 0000 
     0000182E' 0000 0000 0000 0000 
     00001836' 0000 0000 0000 0000 
     0000183E' 0000 0000 0000 0000 
     00001846' 0000 0000 0000 0000 
     0000184E' 0000 0000 0000 0000 
     00001856' 0000 0000 0000 0000 
     0000185E' 0000 0000 0000 0000 
     00001866' 0000 0000 0000 0000 
     0000186E' 0000 0000 0000 0000 
     00001876' 0000 0000 0000 0000 
     0000187E' 0000 0000 0000 0000 
     00001886' 0000 0000 0000 0000 
     0000188E' 0000 0000 0000 0000 
     00001896' 0000 0000 0000 0000 
     0000189E' 0000 0000 0000 0000 
     000018A6' 0000 0000 0000 0000 
     000018AE' 0000 0000 0000 0000 
     000018B6' 0000 0000 0000 0000 
     000018BE' 0000 0000 0000 0000 
     000018C6' 0000 0000 0000 0000 
     000018CE' 0000 0000 0000 0000 
     000018D6' 0000 0000 0000 0000 
     000018DE' 0000 0000 0000 0000 
     000018E6' 0000 0000 0000 0000 
     000018EE' 0000 0000 0000 0000 
     000018F6' 0000 0000 0000 0000 
     000018FE' 0000 0000 0000 0000 
     00001906' 0000 0000 0000 0000 
     0000190E' 0000 0000 0000 0000 
     00001916' 0000 0000 0000 0000 
     0000191E' 0000 0000 0000 0000 
     00001926' 0000 0000 0000 0000 
     0000192E' 0000 0000 0000 0000 
     00001936' 0000 0000 0000 0000 
     0000193E' 0000 0000 0000 0000 
     00001946' 0000 0000 0000 0000 
     0000194E' 0000 0000 0000 0000 
     00001956' 0000 0000 0000 0000 
     0000195E' 0000 0000 0000 0000 
     00001966' 0000 0000 0000 0000 
     0000196E' 0000 0000 0000 0000 
     00001976' 0000 0000 0000 0000 
     0000197E' 0000 0000 0000 0000 
     00001986' 0000 0000 0000 0000 
     0000198E' 0000 0000 0000 0000 
     00001996' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  17
Source File: C:\PC\MAGNUM\HIMEM.S

     0000199E' 0000 0000 0000 0000 
     000019A6' 0000 0000 0000 0000 
     000019AE' 0000 0000 0000 0000 
     000019B6' 0000 0000 0000 0000 
     000019BE' 0000 0000 0000 0000 
     000019C6' 0000 0000 0000 0000 
     000019CE' 0000 0000 0000 0000 
     000019D6' 0000 0000 0000 0000 
     000019DE' 0000 0000 0000 0000 
     000019E6' 0000 0000 0000 0000 
     000019EE' 0000 0000 0000 0000 
     000019F6' 0000 0000 0000 0000 
     000019FE' 0000 0000 0000 0000 
     00001A06' 0000 0000 0000 0000 
     00001A0E' 0000 0000 0000 0000 
     00001A16' 0000 0000 0000 0000 
     00001A1E' 0000 0000 0000 0000 
     00001A26' 0000 0000 0000 0000 
     00001A2E' 0000 0000 0000 0000 
     00001A36' 0000 0000 0000 0000 
     00001A3E' 0000 0000 0000 0000 
     00001A46' 0000 0000 0000 0000 
     00001A4E' 0000 0000 0000 0000 
     00001A56' 0000 0000 0000 0000 
     00001A5E' 0000 0000 0000 0000 
     00001A66' 0000 0000 0000 0000 
     00001A6E' 0000 0000 0000 0000 
     00001A76' 0000 0000 0000 0000 
     00001A7E' 0000 0000 0000 0000 
     00001A86' 0000 0000 0000 0000 
     00001A8E' 0000 0000 0000 0000 
     00001A96' 0000 0000 0000 0000 
     00001A9E' 0000 0000 0000 0000 
     00001AA6' 0000 0000 0000 0000 
     00001AAE' 0000 0000 0000 0000 
     00001AB6' 0000 0000 0000 0000 
     00001ABE' 0000 0000 0000 0000 
     00001AC6' 0000 0000 0000 0000 
     00001ACE' 0000 0000 0000 0000 
     00001AD6' 0000 0000 0000 0000 
     00001ADE' 0000 0000 0000 0000 
     00001AE6' 0000 0000 0000 0000 
     00001AEE' 0000 0000 0000 0000 
     00001AF6' 0000 0000 0000 0000 
     00001AFE' 0000 0000 0000 0000 
     00001B06' 0000 0000 0000 0000 
     00001B0E' 0000 0000 0000 0000 
     00001B16' 0000 0000 0000 0000 
     00001B1E' 0000 0000 0000 0000 
     00001B26' 0000 0000 0000 0000 
     00001B2E' 0000 0000 0000 0000 
     00001B36' 0000 0000 0000 0000 
     00001B3E' 0000 0000 0000 0000 
     00001B46' 0000 0000 0000 0000 
     00001B4E' 0000 0000 0000 0000 
     00001B56' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  18
Source File: C:\PC\MAGNUM\HIMEM.S

     00001B5E' 0000 0000 0000 0000 
     00001B66' 0000 0000 0000 0000 
     00001B6E' 0000 0000 0000 0000 
     00001B76' 0000 0000 0000 0000 
     00001B7E' 0000 0000 0000 0000 
     00001B86' 0000 0000 0000 0000 
     00001B8E' 0000 0000 0000 0000 
     00001B96' 0000 0000 0000 0000 
     00001B9E' 0000 0000 0000 0000 
     00001BA6' 0000 0000 0000 0000 
     00001BAE' 0000 0000 0000 0000 
     00001BB6' 0000 0000 0000 0000 
     00001BBE' 0000 0000 0000 0000 
     00001BC6' 0000 0000 0000 0000 
     00001BCE' 0000 0000 0000 0000 
     00001BD6' 0000 0000 0000 0000 
     00001BDE' 0000 0000 0000 0000 
     00001BE6' 0000 0000 0000 0000 
     00001BEE' 0000 0000 0000 0000 
     00001BF6' 0000 0000 0000 0000 
     00001BFE' 0000 0000 0000 0000 
     00001C06' 0000 0000 0000 0000 
     00001C0E' 0000 0000 0000 0000 
     00001C16' 0000 0000 0000 0000 
     00001C1E' 0000 0000 0000 0000 
     00001C26' 0000 0000 0000 0000 
     00001C2E' 0000 0000 0000 0000 
     00001C36' 0000 0000 0000 0000 
     00001C3E' 0000 0000 0000 0000 
     00001C46' 0000 0000 0000 0000 
     00001C4E' 0000 0000 0000 0000 
     00001C56' 0000 0000 0000 0000 
     00001C5E' 0000 0000 0000 0000 
     00001C66' 0000 0000 0000 0000 
     00001C6E' 0000 0000 0000 0000 
     00001C76' 0000 0000 0000 0000 
     00001C7E' 0000 0000 0000 0000 
     00001C86' 0000 0000 0000 0000 
     00001C8E' 0000 0000 0000 0000 
     00001C96' 0000 0000 0000 0000 
     00001C9E' 0000 0000 0000 0000 
     00001CA6' 0000 0000 0000 0000 
     00001CAE' 0000 0000 0000 0000 
     00001CB6' 0000 0000 0000 0000 
     00001CBE' 0000 0000 0000 0000 
     00001CC6' 0000 0000 0000 0000 
     00001CCE' 0000 0000 0000 0000 
     00001CD6' 0000 0000 0000 0000 
     00001CDE' 0000 0000 0000 0000 
     00001CE6' 0000 0000 0000 0000 
     00001CEE' 0000 0000 0000 0000 
     00001CF6' 0000 0000 0000 0000 
     00001CFE' 0000 0000 0000 0000 
     00001D06' 0000 0000 0000 0000 
     00001D0E' 0000 0000 0000 0000 
     00001D16' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  19
Source File: C:\PC\MAGNUM\HIMEM.S

     00001D1E' 0000 0000 0000 0000 
     00001D26' 0000 0000 0000 0000 
     00001D2E' 0000 0000 0000 0000 
     00001D36' 0000 0000 0000 0000 
     00001D3E' 0000 0000 0000 0000 
     00001D46' 0000 0000 0000 0000 
     00001D4E' 0000 0000 0000 0000 
     00001D56' 0000 0000 0000 0000 
     00001D5E' 0000 0000 0000 0000 
     00001D66' 0000 0000 0000 0000 
     00001D6E' 0000 0000 0000 0000 
     00001D76' 0000 0000 0000 0000 
     00001D7E' 0000 0000 0000 0000 
     00001D86' 0000 0000 0000 0000 
     00001D8E' 0000 0000 0000 0000 
     00001D96' 0000 0000 0000 0000 
     00001D9E' 0000 0000 0000 0000 
     00001DA6' 0000 0000 0000 0000 
     00001DAE' 0000 0000 0000 0000 
     00001DB6' 0000 0000 0000 0000 
     00001DBE' 0000 0000 0000 0000 
     00001DC6' 0000 0000 0000 0000 
     00001DCE' 0000 0000 0000 0000 
     00001DD6' 0000 0000 0000 0000 
     00001DDE' 0000 0000 0000 0000 
     00001DE6' 0000 0000 0000 0000 
     00001DEE' 0000 0000 0000 0000 
     00001DF6' 0000 0000 0000 0000 
     00001DFE' 0000 0000 0000 0000 
     00001E06' 0000 0000 0000 0000 
     00001E0E' 0000 0000 0000 0000 
     00001E16' 0000 0000 0000 0000 
     00001E1E' 0000 0000 0000 0000 
     00001E26' 0000 0000 0000 0000 
     00001E2E' 0000 0000 0000 0000 
     00001E36' 0000 0000 0000 0000 
     00001E3E' 0000 0000 0000 0000 
     00001E46' 0000 0000 0000 0000 
     00001E4E' 0000 0000 0000 0000 
     00001E56' 0000 0000 0000 0000 
     00001E5E' 0000 0000 0000 0000 
     00001E66' 0000 0000 0000 0000 
     00001E6E' 0000 0000 0000 0000 
     00001E76' 0000 0000 0000 0000 
     00001E7E' 0000 0000 0000 0000 
     00001E86' 0000 0000 0000 0000 
     00001E8E' 0000 0000 0000 0000 
     00001E96' 0000 0000 0000 0000 
     00001E9E' 0000 0000 0000 0000 
     00001EA6' 0000 0000 0000 0000 
     00001EAE' 0000 0000 0000 0000 
     00001EB6' 0000 0000 0000 0000 
     00001EBE' 0000 0000 0000 0000 
     00001EC6' 0000 0000 0000 0000 
     00001ECE' 0000 0000 0000 0000 
     00001ED6' 0000 0000 0000 0000 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  20
Source File: C:\PC\MAGNUM\HIMEM.S

     00001EDE' 0000 0000 0000 0000 
     00001EE6' 0000 0000 0000 0000 
     00001EEE' 0000 0000 0000 0000 
     00001EF6' 0000 0000 0000 0000 
     00001EFE' 0000 0000 0000 0000 
     00001F06' 0000 0000 0000 0000 
     00001F0E' 0000 0000 0000 0000 
     00001F16' 0000 0000 0000 0000 
     00001F1E' 0000 0000 0000 0000 
     00001F26' 0000 0000 0000 0000 
     00001F2E' 0000 0000 0000 0000 
     00001F36' 0000 0000 0000 0000 
     00001F3E' 0000 0000 0000 0000 
     00001F46' 0000 0000 0000 0000      cookie_space:   DS.B    8*1000          ; Platz fÅr max. 1000 Cookies
  80  
  81 00001F4E' 4D41 4750 4154 4332                      dc.b "MAGPATC2"
  82 00001F56' 0001                     patch_space:    dc.w    $01             ; Konfiguration:
  83                                                                            ; Bit 0: ausfÅhrlicher Ramtest
  84                                                                            ; Bit 1: Blitter auf 8MHz
  85                                                                            ; Bit 2: Speicher auf 6MB begrenzen
  86                                                                            ; Bit 3: kein Ramtest
  87 00001F58' 0009                                     dc.w     9              ; Bitmaske der mîgl. Optionen
  88  
  89 00001F5A' 206F 0004                start2:         move.l	4(sp),a0
  90 00001F5E' 4FFA 0000+               		lea	new_stack(pc),sp
  91 00001F62' 203C 0001 0100           		move.l	#$10100,d0	; 64K fÅr FRB plus Basepage
  92 00001F68' D0A8 000C                		add.l	$c(a0),d0
  93 00001F6C' D0A8 0014                		add.l	$14(a0),d0
  94 00001F70' D0A8 001C                		add.l	$1c(a0),d0
  95 00001F74' 2F00                     		move.l	d0,-(sp)
  96 00001F76' 2F08                     		move.l	a0,-(sp)
  97 00001F78' 4267                     		clr.w	-(sp)
  98 00001F7A' 3F3C 004A                		move.w	#$4a,-(sp)
  99 00001F7E' 4E41                     		trap	#1
 100 00001F80' 4FEF 000C                		lea	12(sp),sp
 101                                    		
 102 00001F84' 41FA 05E7                		lea     init_text(PC),A0
 103 00001F88' 6100 011E                                bsr     print
 104  
 105                                                    SUPEXEC cookie1
  55 00001F8C' 42B9 00000000'          +                clr.l   sup_ret
  56 00001F92' 487A 015E               +                pea     cookie1(pc)
  57 00001F96' 3F3C 0026               +                move.w  #38,-(sp)
  58 00001F9A' 4E4E                    +                trap    #14
  59 00001F9C' 5C8F                    +                addq.l  #6,sp
 106 00001F9E' 4AB9 00000000'                           tst.l   sup_ret
 107 00001FA4' 6600 00EE                                bne     is_inst
 108  
 109  
 110 00001FA8' 3039 00000000"           		move.w	machine,d0
 111 00001FAE' 67 06                    		beq.s	start2a		; ST oder kein Cookie
 112 00001FB0' 5340                     		sub.w	#1,d0
 113 00001FB2' 6600 00DA                		bne	machine_err	; auch kein STE
 114  
 115 00001FB6'                          start2a:        SUPEXEC test_magnum
  55 00001FB6' 42B9 00000000'          +                clr.l   sup_ret
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  21
Source File: C:\PC\MAGNUM\HIMEM.S

  56 00001FBC' 487A 01F4               +                pea     test_magnum(pc)
  57 00001FC0' 3F3C 0026               +                move.w  #38,-(sp)
  58 00001FC4' 4E4E                    +                trap    #14
  59 00001FC6' 5C8F                    +                addq.l  #6,sp
 116 00001FC8' 0839 0000 00000000'                      btst    #0,sup_ret
 117 00001FD0' 6600 00B6                                bne     no_magnum
 118  
 119 00001FD4' 0CB9 4D41 474E 
     00001FDA' 00000000'                		cmp.l	#MAGIC1,save_magic
 120 00001FDE' 66 14                    		bne.s	start3
 121 00001FE0' 0CB9 5741 524D 
     00001FE6' 00000004'                		cmp.l	#MAGIC2,save_magic+4
 122 00001FEA' 66 08                    		bne.s	start3
 123 00001FEC' 08F9 0003 00000001'      		bset	#3,patch_space+1
 124  
 125 00001FF4' 6100 021E                start3:		bsr     memtest
 126 00001FF8' 4AB9 00000000'                           tst.l   mem_err_addr
 127 00001FFE' 6600 0098                                bne     is_inst2
 128  
 129 00002002' 227C 00E8 0000           		move.l	#BLK1_START,a1
 130 00002008' 41FA 0430                		lea	save_magic(pc),a0
 131 0000200C' 22D8                     		move.l	(a0)+,(a1)+
 132 0000200E' 22D8                     		move.l	(a0)+,(a1)+
 133 00002010' 22D8                     		move.l	(a0)+,(a1)+
 134 00002012' 22D8                     		move.l	(a0)+,(a1)+
 135  
 136 00002014' 2F3C 0007 FFF0                           move.l  #BLK1_LEN-16,-(SP)
 137 0000201A' 2F3C 00E8 0010                           move.l  #BLK1_START+16,-(SP)
 138 00002020' 3F3C 0014                                move.w  #$14,-(SP)      ; Maddalt(start,len)
 139 00002024' 4E41                                     trap    #1
 140 00002026' 4FEF 000A                                lea     10(SP),SP
 141 0000202A' 4A40                                     tst.w   D0
 142 0000202C' 66 54                                    bne.s   maddalt_error
 143  
 144 0000202E' 2F3C 0008 0000                           move.l  #BLK2_LEN,-(SP)
 145 00002034' 2F3C 00F2 0000                           move.l  #BLK2_START,-(SP)
 146 0000203A' 3F3C 0014                                move.w  #$14,-(SP)      ; Maddalt(start,len)
 147 0000203E' 4E41                                     trap    #1
 148 00002040' 4FEF 000A                                lea     10(SP),SP
 149 00002044' 4A40                                     tst.w   D0
 150 00002046' 66 3A                                    bne.s   maddalt_error
 151  
 152 00002048' 41FA 0458                                lea     ok_txt(PC),A0
 153 0000204C' 6100 005A                                bsr     print
 154  
 155                                                    SUPEXEC cookie2
  55 00002050' 42B9 00000000'          +                clr.l   sup_ret
  56 00002056' 487A 00D8               +                pea     cookie2(pc)
  57 0000205A' 3F3C 0026               +                move.w  #38,-(sp)
  58 0000205E' 4E4E                    +                trap    #14
  59 00002060' 5C8F                    +                addq.l  #6,sp
 156  
 157 00002062' 4AB9 00000000'                           tst.l   res_len
 158 00002068' 6738                                     beq     not_res
 159                                    ; resident bleiben
 160 0000206A' 2E39 00000000'                           move.l  res_len,D7
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  22
Source File: C:\PC\MAGNUM\HIMEM.S

 161 00002070' DEBC 0000 0116                           add.l   #$108+cookie_space-start,D7
 162 00002076' 4267                                     clr.w   -(SP)
 163 00002078' 2F07                                     move.l  D7,-(SP)
 164 0000207A' 3F3C 0031                                move.w  #$31,-(SP)
 165 0000207E' 4E41                                     trap    #1              ;Ptermres()
 166 00002080' 4AFC                                     illegal
 167  
 168 00002082' 41FA 0423                maddalt_error:  lea     maddalt_txt(PC),A0
 169 00002086' 60 10                                    bra.s   is_inst2
 170 00002088' 41FA 047F                no_magnum:      lea     no_magnum_txt(PC),A0
 171 0000208C' 60 0A                                    bra.s   is_inst2
 172 0000208E' 41FA 04B1                machine_err:    lea     machine_txt(PC),A0
 173 00002092' 60 04                                    bra.s   is_inst2
 174 00002094' 41FA 0449                is_inst:        lea     is_inst_txt(PC),A0
 175 00002098' 61 0E                    is_inst2:       bsr.s   print
 176 0000209A' 3F3C 0008                                move.w  #8,-(sp)        ;Cnecin()
 177 0000209E' 4E41                                     trap    #1
 178 000020A0' 548F                                     addq.l  #2,sp
 179 000020A2' 4267                     not_res:        clr.w   -(SP)
 180 000020A4' 4E41                                     trap    #1              ;Pterm0()
 181 000020A6' 4AFC                                     illegal
 182  
 183 000020A8' 2C48                     print:          move.l  a0,a6
 184 000020AA' 101E                     print2:         move.b  (a6)+,d0
 185 000020AC' 67 18                                    beq.s   putc2
 186 000020AE' 61 02                                    bsr.s   putc
 187 000020B0' 60 F8                                    bra.s   print2
 188  
 189 000020B2' 48E7 00E0                putc:           movem.l a0-a2,-(sp)
 190 000020B6' 3F00                                     move.w  d0,-(sp)
 191 000020B8' 2F3C 0003 0002                           move.l  #$00030002,-(sp)
 192 000020BE' 4E4D                                     trap    #13
 193 000020C0' 5C8F                                     addq.l  #6,sp
 194 000020C2' 4CDF 0700                                movem.l (sp)+,a0-a2
 195 000020C6' 4E75                     putc2:          rts
 196  
 197 000020C8' 2E00                     print_hex:      move.l  d0,d7
 198 000020CA' 7C07                                     moveq   #7,d6
 199 000020CC' E99F                     print_hex2:     rol.l   #4,d7
 200 000020CE' 1007                                     move.b  d7,d0
 201 000020D0' C07C 000F                                and.w   #$0f,d0
 202 000020D4' 103B 00 0C                               move.b  hextab(pc,d0.w),d0
 203 000020D8' 6100 FFD8                                bsr     putc
 204 000020DC' 51CE FFEE                                dbra    d6,print_hex2
 205 000020E0' 4E75                                     rts
 206 000020E2' 3031 3233 3435 3637 
     000020EA' 3839 4142 4344 4546      hextab:         dc.b    "0123456789ABCDEF"
 207  
 208                                    ; Cookie-Routinen initialisieren und testen, ob RAM schon installiert ist
 209 000020F2' 7000                     cookie1:        moveq   #0,D0
 210 000020F4' 6100 04F4                                bsr     hunt_cookie     ;Abschlu·-Cookie suchen
 211 000020F8' 2400                                     move.l  D0,D2           ;LÑnge der bisherigen Liste merken
 212 000020FA' 5082                                     addq.l  #8,D2           ;8 EintrÑge dazu
 213 000020FC' 23C2 00000000'                           move.l  D2,new_cookie_num
 214  
 215 00002102' 203C 484D 454D                           move.l  #COOKIE,D0
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  23
Source File: C:\PC\MAGNUM\HIMEM.S

 216 00002108' 6100 04E0                                bsr     hunt_cookie     ;Cookie suchen
 217 0000210C' 6B08                                     bmi     cookie1a        ;nicht gefunden
 218 0000210E' 08F9 0000 00000000'                      bset    #0,sup_ret
 219 00002116' 42B9 00000000"           cookie1a:	clr.l	machine
 220 0000211C' 203C 5F4D 4348           		move.l	#"_MCH",d0
 221 00002122' 6100 04C6                		bsr	hunt_cookie
 222 00002126' 6B 06                    		bmi.s	cookie1b
 223 00002128' 23C0 00000000"           		move.l	d0,machine
 224 0000212E' 4E75                     cookie1b:	rts                
 225  
 226                                    ; _FRB und MAGN-Cookie anlegen
 227 00002130' 243A 02FC                cookie2:        move.l  new_cookie_num(pc),D2
 228 00002134' 41FA DED8                                lea     cookie_space(PC),A0 ;Zeiger auf das evtl. Cookie Jar
 229 00002138' 203C 484D 454D                           move.l  #COOKIE,D0
 230 0000213E' 223C 00000000'                           move.l  #the_cookie,D1  ;Cookie-Wert
 231 00002144' 6100 04C6                                bsr     insert_cookie   ;ins Cookie Jar eintragen
 232 00002148' 4A40                                     tst.w   D0              ;RÅckgabewert von insert_cookie()
 233 0000214A' 67 10                                    beq.s   cookie2a        ;Cookiejar nicht erweitert
 234  
 235 0000214C' 2239 00000000'                           move.l  new_cookie_num,d1
 236 00002152' 5241                                     addq.w  #1,D1
 237 00002154' E789                                     lsl.l   #3,D1           ;mal 8 (da ein Cookie = 8 Bytes)
 238 00002156' 23C1 00000000'                           move.l  d1,res_len      ;so viele Bytes resident
 239  
 240 0000215C' 203C 5F46 5242           cookie2a:       move.l  #'_FRB',D0
 241 00002162' 6100 0486                                bsr     hunt_cookie     ;Cookie suchen
 242 00002166' 6A 48                                    bpl.s   cookie2c        ;gefunden => nicht neu anlegen
 243  
 244 00002168' 243A 02C4                                move.l  new_cookie_num(pc),D2
 245 0000216C' 41FA DEA0                                lea     cookie_space(PC),A0 ;Zeiger auf das evtl. Cookie Jar
 246 00002170' 203C 5F46 5242                           move.l  #'_FRB',D0
 247 00002176' 2208                                     move.l  A0,D1           ;Cookie-Wert = Start cookie_space + res_len
 248 00002178' D2B9 00000000'                           add.l   res_len,D1
 249 0000217E' 6100 048C                                bsr     insert_cookie   ;ins Cookie Jar eintragen
 250 00002182' 4A40                                     tst.w   D0              ;RÅckgabewert von insert_cookie()
 251 00002184' 67 20                                    beq.s   cookie2b        ;Cookiejar nicht erweitert
 252  
 253 00002186' 2239 00000000'                           move.l  new_cookie_num,d1
 254 0000218C' 5241                                     addq.w  #1,D1
 255 0000218E' E789                                     lsl.l   #3,D1           ;mal 8 (da ein Cookie = 8 Bytes)
 256 00002190' 23C1 00000000'                           move.l  d1,res_len      ;so viele Bytes resident
 257 00002196' D2BC 00000000'                           add.l   #cookie_space,D1 ; Startadresse _FRB
 258  
 259 0000219C' 203C 5F46 5242                           move.l  #'_FRB',D0
 260 000021A2' 6100 041E                                bsr     change_cookie   ; Ñndern
 261 000021A6' 06B9 0001 0000 
     000021AC' 00000000'                cookie2b:       add.l   #65536,res_len  ; Platz fÅr Fastram-Buffer
 262 000021B0' 4E75                     cookie2c:       rts                
 263  
 264                                    ; Testen, ob MAGNUM-UMB im Rechner vorhanden ist
 265 000021B2' 2A78 0008                test_magnum:    move.l  berr_vec,a5
 266 000021B6' 2C4F                                     move.l  sp,a6
 267 000021B8' 40C7                                     move.w  sr,d7
 268 000021BA' 007C 0700                                or.w    #$0700,sr
 269                                    ;                movec   cacr,d6
 270                                    ;                move.l  d6,d0
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  24
Source File: C:\PC\MAGNUM\HIMEM.S

 271                                    ;                bclr    #8,d0            ; disable data cache
 272                                    ;                bset    #11,d0           ; clear data cache
 273                                    ;                movec   d0,cacr
 274  
 275 000021BE' 207C 00E8 0010                           move.l  #BLK1_START+16,a0    ; Adresse Test 1
 276 000021C4' 227C 00F2 0000                           move.l  #BLK2_START,a1    ; Adresse Test 2
 277 000021CA' 21FC 00000000'0008       		move.l	#test_m_berr,berr_vec
 278                                    		
 279 000021D2' 20BC 2345 6780           		move.l  #$23456780,(a0)
 280 000021D8' 22BC 1234 5678                           move.l  #$12345678,(a1)
 281 000021DE' 0C90 2345 6780                           cmp.l   #$23456780,(a0)
 282 000021E4' 6624                                     bne     test_m_berr       ; kein Speicher
 283 000021E6' 0C91 1234 5678                           cmp.l   #$12345678,(a1)   
 284 000021EC' 661C                                     bne     test_m_berr
 285  
 286 000021EE' 207C 00E8 0000           		move.l	#BLK1_START,a0
 287 000021F4' 43FA 0244                		lea	save_magic(pc),a1
 288 000021F8' 22D8                     		move.l	(a0)+,(a1)+
 289 000021FA' 22D8                     		move.l	(a0)+,(a1)+
 290 000021FC' 22D8                     		move.l	(a0)+,(a1)+
 291 000021FE' 22D8                     		move.l	(a0)+,(a1)+
 292  
 293 00002200' 21CD 0008                test_m_end:     move.l  a5,berr_vec
 294                                    ;                movec   d6,cacr
 295 00002204' 2E4E                                     move.l  a6,sp
 296 00002206' 46C7                                     move.w  d7,sr
 297 00002208' 4E75                                     rts
 298 0000220A' 08F9 0000 00000000'      test_m_berr:    bset    #0,sup_ret
 299 00002212' 60 EC                                    bra.s   test_m_end
 300                                     
 301 00002214'                          memtest:        PRINTSTR testtxt
  63 00002214' 41FA 0234               +                lea     testtxt(pc),a0
  64 00002218' 6100 FE8E               +                bsr     print
 302                                                    PRINTSTR reverse_on
  63 0000221C' 41FA 027D               +                lea     reverse_on(pc),a0
  64 00002220' 6100 FE86               +                bsr     print
 303 00002224' 7E07                                     moveq   #7,d7		; 1 MB = 8 Blîcke * 128 K
 304 00002226'                          memtest2:       PUTC    #' '
  68 00002226' 303C 0020               +                move.w  #' ',d0
  69 0000222A' 6100 FE86               +                bsr     putc
 305 0000222E' 51CF FFF6                                dbra    d7,memtest2
 306                                                    PUTC    #13
  68 00002232' 303C 000D               +                move.w  #13,d0
  69 00002236' 6100 FE7A               +                bsr     putc
 307 0000223A' 42B9 00000000'                           clr.l   mem_err_addr
 308  
 309 00002240' 207C 00E8 0000                           move.l  #BLK1_START,a0
 310 00002246' 247C 00F0 0000                           move.l	#BLK1_START+BLK1_LEN,a2
 311                                    ;                move.l  a0,a2
 312                                    ;                add.l   alt_ram_len,a2
 313 0000224C' 2248                     do_test2:       move.l  a0,a1
 314 0000224E' D3FC 0002 0000                           add.l   #128*1024,a1
 315  
 316 00002254' 0839 0003 00000001'                      btst    #3,patch_space+1
 317 0000225C' 6600 00CC                                bne     do_test4
 318 00002260' 0839 0000 00000001'                      btst    #0,patch_space+1
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  25
Source File: C:\PC\MAGNUM\HIMEM.S

 319 00002268' 6700 0084                                beq     do_test3
 320 0000226C' 223C 5555 5555                           move.l  #$55555555,d1
 321 00002272' 6100 010C                                bsr     mt_long
 322 00002276' 4AB9 00000000'                           tst.l   mem_err_addr
 323 0000227C' 6600 00E6                                bne     memtest3
 324  
 325 00002280' 223C AAAA AAAA                           move.l  #$aaaaaaaa,d1
 326 00002286' 6100 00F8                                bsr     mt_long
 327 0000228A' 4AB9 00000000'                           tst.l   mem_err_addr
 328 00002290' 6600 00D2                                bne     memtest3
 329  
 330 00002294' 223C 5A5A 5A5A                           move.l  #$5a5a5a5a,d1
 331 0000229A' 6100 00E4                                bsr     mt_long
 332 0000229E' 4AB9 00000000'                           tst.l   mem_err_addr
 333 000022A4' 6600 00BE                                bne     memtest3
 334  
 335 000022A8' 223C A5A5 A5A5                           move.l  #$a5a5a5a5,d1
 336 000022AE' 6100 00D0                                bsr     mt_long
 337 000022B2' 4AB9 00000000'                           tst.l   mem_err_addr
 338 000022B8' 6600 00AA                                bne     memtest3
 339  
 340 000022BC' 223C 4711 0815                           move.l  #$47110815,d1
 341 000022C2' 6100 00BC                                bsr     mt_long
 342 000022C6' 4AB9 00000000'                           tst.l   mem_err_addr
 343 000022CC' 6600 0096                                bne     memtest3
 344  
 345 000022D0' 72FF                                     moveq   #-1,d1
 346 000022D2' 6100 00DC                                bsr     mt_refresh1
 347 000022D6' 4AB9 00000000'                           tst.l   mem_err_addr
 348 000022DC' 6600 0086                                bne	memtest3
 349  
 350 000022E0' 72FF                                     moveq   #-1,d1
 351 000022E2' 6100 00F4                                bsr     mt_refresh2
 352 000022E6' 4AB9 00000000'                           tst.l   mem_err_addr
 353 000022EC' 66 76                                    bne.s   memtest3
 354  
 355 000022EE' 48E7 60E0                do_test3:       movem.l d1-d2/a0-a2,-(sp)
 356 000022F2' 2F3C 0001 0002                           move.l  #$00010002,-(sp)
 357 000022F8' 4E4D                                     trap    #13
 358 000022FA' 588F                                     addq.l  #4,sp
 359 000022FC' 4CDF 0706                                movem.l (sp)+,d1-d2/a0-a2
 360 00002300' B07C FFFF                                cmp.w   #-1,d0
 361 00002304' 66 08                                    bne.s   do_test5
 362 00002306' 08F9 0003 00000001'                      bset    #3,patch_space+1
 363  
 364 0000230E' 7200                     do_test5:       moveq   #0,d1
 365 00002310' 6100 009E                                bsr     mt_refresh1
 366 00002314' 4AB9 00000000'                           tst.l   mem_err_addr
 367 0000231A' 66 48                                    bne.s   memtest3
 368  
 369 0000231C' 7200                                     moveq   #0,d1
 370 0000231E' 6100 00B8                                bsr     mt_refresh2
 371 00002322' 4AB9 00000000'                           tst.l   mem_err_addr
 372 00002328' 66 3A                                    bne.s   memtest3
 373  
 374 0000232A' 4AB9 00000000'           do_test4:       tst.l   mem_err_addr
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  26
Source File: C:\PC\MAGNUM\HIMEM.S

 375 00002330' 66 32                                    bne.s   memtest3
 376 00002332' 2049                                     move.l  a1,a0
 377                                                    PUTC    #'-'
  68 00002334' 303C 002D               +                move.w  #'-',d0
  69 00002338' 6100 FD78               +                bsr     putc
 378 0000233C' B5C8                                     cmp.l   a0,a2
 379 0000233E' 6600 FF0C                                bne     do_test2
 380  
 381 00002342' B5FC 00FA 0000           		cmp.l	#BLK2_LEN+BLK2_START,a2
 382 00002348' 67 10                    		beq.s	do_test4a
 383 0000234A' 207C 00F2 0000                           move.l  #BLK2_START,a0
 384 00002350' 247C 00FA 0000                           move.l	#BLK2_LEN+BLK2_START,a2
 385 00002356' 6000 FEF4                		bra	do_test2	; test 2nd block
 386  
 387 0000235A'                          do_test4a:	PRINTSTR reverse_off
  63 0000235A' 41FA 0142               +                lea     reverse_off(pc),a0
  64 0000235E' 6100 FD48               +                bsr     print
 388 00002362' 4E75                                     rts
 389 00002364'                          memtest3:       PRINTSTR testtxt3
  63 00002364' 41FA 0104               +                lea     testtxt3(pc),a0
  64 00002368' 6100 FD3E               +                bsr     print
 390 0000236C' 2039 00000000'                           move.l  mem_err_addr,d0
 391 00002372' 6100 FD54                                bsr     print_hex
 392                                                    PRINTSTR testtxt4
  63 00002376' 41FA 010C               +                lea     testtxt4(pc),a0
  64 0000237A' 6100 FD2C               +                bsr     print
 393 0000237E' 4E75                                     rts
 394  
 395 00002380' 2648                     mt_long:        move.l  a0,a3
 396 00002382'                          mt_long2:       REPT    4
 397                                                    move.l  d1,(a3)+
 398                                                    ENDM
 397 00002382' 26C1                    +                move.l  d1,(a3)+
 397 00002384' 26C1                    +                move.l  d1,(a3)+
 397 00002386' 26C1                    +                move.l  d1,(a3)+
 397 00002388' 26C1                    +                move.l  d1,(a3)+
 399 0000238A' B3CB                                     cmp.l   a3,a1
 400 0000238C' 66 F4                                    bne.s   mt_long2
 401 0000238E' 2648                                     move.l  a0,a3
 402 00002390'                          mt_long3:       REPT    4
 403                                                    cmp.l   (a3)+,d1
 404                                                    bne.s   mt_long4
 405                                                    ENDM
 403 00002390' B29B                    +                cmp.l   (a3)+,d1
 404 00002392' 66 12                   +                bne.s   mt_long4
 403 00002394' B29B                    +                cmp.l   (a3)+,d1
 404 00002396' 66 0E                   +                bne.s   mt_long4
 403 00002398' B29B                    +                cmp.l   (a3)+,d1
 404 0000239A' 66 0A                   +                bne.s   mt_long4
 403 0000239C' B29B                    +                cmp.l   (a3)+,d1
 404 0000239E' 66 06                   +                bne.s   mt_long4
 406 000023A0' B3CB                                     cmp.l   a3,a1
 407 000023A2' 66 EC                                    bne.s   mt_long3
 408 000023A4' 4E75                                     rts
 409 000023A6' 598B                     mt_long4:       subq.l  #4,a3
 410 000023A8' 23CB 00000000'                           move.l  a3,mem_err_addr
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  27
Source File: C:\PC\MAGNUM\HIMEM.S

 411 000023AE' 4E75                                     rts
 412  
 413 000023B0' 2648                     mt_refresh1:    move.l  a0,a3
 414 000023B2'                          mt_refresh1a:   REPT    16
 415                                                    move.l  d1,(a3)+
 416                                                    ENDM
 415 000023B2' 26C1                    +                move.l  d1,(a3)+
 415 000023B4' 26C1                    +                move.l  d1,(a3)+
 415 000023B6' 26C1                    +                move.l  d1,(a3)+
 415 000023B8' 26C1                    +                move.l  d1,(a3)+
 415 000023BA' 26C1                    +                move.l  d1,(a3)+
 415 000023BC' 26C1                    +                move.l  d1,(a3)+
 415 000023BE' 26C1                    +                move.l  d1,(a3)+
 415 000023C0' 26C1                    +                move.l  d1,(a3)+
 415 000023C2' 26C1                    +                move.l  d1,(a3)+
 415 000023C4' 26C1                    +                move.l  d1,(a3)+
 415 000023C6' 26C1                    +                move.l  d1,(a3)+
 415 000023C8' 26C1                    +                move.l  d1,(a3)+
 415 000023CA' 26C1                    +                move.l  d1,(a3)+
 415 000023CC' 26C1                    +                move.l  d1,(a3)+
 415 000023CE' 26C1                    +                move.l  d1,(a3)+
 415 000023D0' 26C1                    +                move.l  d1,(a3)+
 417 000023D2' B3CB                                     cmp.l   a3,a1
 418 000023D4' 66 DC                                    bne.s   mt_refresh1a
 419 000023D6' 4E75                                     rts
 420  
 421 000023D8' 2648                     mt_refresh2:    move.l  a0,a3
 422 000023DA'                          mt_refresh2b:   REPT    16
 423                                                    cmp.l   (a3)+,d1
 424                                                    bne.s   mt_refresh2a
 425                                                    ENDM
 423 000023DA' B29B                    +                cmp.l   (a3)+,d1
 424 000023DC' 66 42                   +                bne.s   mt_refresh2a
 423 000023DE' B29B                    +                cmp.l   (a3)+,d1
 424 000023E0' 66 3E                   +                bne.s   mt_refresh2a
 423 000023E2' B29B                    +                cmp.l   (a3)+,d1
 424 000023E4' 66 3A                   +                bne.s   mt_refresh2a
 423 000023E6' B29B                    +                cmp.l   (a3)+,d1
 424 000023E8' 66 36                   +                bne.s   mt_refresh2a
 423 000023EA' B29B                    +                cmp.l   (a3)+,d1
 424 000023EC' 66 32                   +                bne.s   mt_refresh2a
 423 000023EE' B29B                    +                cmp.l   (a3)+,d1
 424 000023F0' 66 2E                   +                bne.s   mt_refresh2a
 423 000023F2' B29B                    +                cmp.l   (a3)+,d1
 424 000023F4' 66 2A                   +                bne.s   mt_refresh2a
 423 000023F6' B29B                    +                cmp.l   (a3)+,d1
 424 000023F8' 66 26                   +                bne.s   mt_refresh2a
 423 000023FA' B29B                    +                cmp.l   (a3)+,d1
 424 000023FC' 66 22                   +                bne.s   mt_refresh2a
 423 000023FE' B29B                    +                cmp.l   (a3)+,d1
 424 00002400' 66 1E                   +                bne.s   mt_refresh2a
 423 00002402' B29B                    +                cmp.l   (a3)+,d1
 424 00002404' 66 1A                   +                bne.s   mt_refresh2a
 423 00002406' B29B                    +                cmp.l   (a3)+,d1
 424 00002408' 66 16                   +                bne.s   mt_refresh2a
 423 0000240A' B29B                    +                cmp.l   (a3)+,d1
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  28
Source File: C:\PC\MAGNUM\HIMEM.S

 424 0000240C' 66 12                   +                bne.s   mt_refresh2a
 423 0000240E' B29B                    +                cmp.l   (a3)+,d1
 424 00002410' 66 0E                   +                bne.s   mt_refresh2a
 423 00002412' B29B                    +                cmp.l   (a3)+,d1
 424 00002414' 66 0A                   +                bne.s   mt_refresh2a
 423 00002416' B29B                    +                cmp.l   (a3)+,d1
 424 00002418' 66 06                   +                bne.s   mt_refresh2a
 426 0000241A' B3CB                                     cmp.l   a3,a1
 427 0000241C' 66 BC                                    bne.s   mt_refresh2b
 428 0000241E' 4E75                                     rts
 429 00002420' 598B                     mt_refresh2a:   subq.l  #4,a3
 430 00002422' 23CB 00000000'                           move.l  a3,mem_err_addr
 431 00002428' 4E75                                     rts
 432                                                    
 433 0000242A' 0000 0000                sup_ret:        dc.l    0
 434 0000242E' 0000 0000                new_cookie_num: dc.l    0
 435 00002432' 0000 0000                res_len:        dc.l    0
 436 00002436' 0000 0000                mem_err_addr:   dc.l    0
 437 0000243A' 0000 0000 0000 0000 
     00002442' 0000 0000 0000 0000      save_magic:	ds.l	4
 438  
 439 0000244A' 2055 4D42 7320 6765 
     00002452' 6675 6E64 656E 2C20 
     0000245A' 7465 7374 6520 3130 
     00002462' 3234 4B42 3A0D 0A00      testtxt:       dc.b " UMBs gefunden, teste 1024KB:",13,10,0
 440 0000246A' 1B71 0D0A                testtxt3:       dc.b 27,'q',13,10
 441 0000246E' 2046 6568 6C65 7220 
     00002476' 6265 6920 4164 7265 
     0000247E' 7373 6520 2400                           dc.b " Fehler bei Adresse $",0
 442 00002484' 202D 2054 6573 7420 
     0000248C' 6162 6765 6272 6F63 
     00002494' 6865 6E21 0D0A 00        testtxt4:       dc.b " - Test abgebrochen!",13,10,0
 443 0000249B' 1B70 00                  reverse_on:     dc.b 27,'p',0
 444 0000249E' 1B71 2000                reverse_off:    dc.b 27,'q ',0
 445 000024A2' 4F4B 0D0A 00             ok_txt:         dc.b "OK",13,10,0
 446                                    ;                     0123456789012345678901234567890123456789
 447 000024A7' 0D0A 2046 6568 6C65 
     000024AF' 7220 6265 6920 4D61 
     000024B7' 6464 616C 7428 2920 
     000024BF' 2D20 6B61 6E6E 2055 
     000024C7' 4D42 730D 0A             maddalt_txt:    DC.B 13,10," Fehler bei Maddalt() - kann UMBs",13,10
 448 000024CC' 206E 6963 6874 2061 
     000024D4' 6E6D 656C 6465 6E21 
     000024DC' 0D0A 00                                  DC.B " nicht anmelden!",13,10,0
 449 000024DF' 2046 6568 6C65 723A 
     000024E7' 2048 494D 454D 2069 
     000024EF' 7374 2062 6572 6569 
     000024F7' 7473 2069 6E73 7461 
     000024FF' 6C6C 6965 7274 210D 
     00002507' 0A00                     is_inst_txt:    DC.B " Fehler: HIMEM ist bereits installiert!",13,10,0
 450 00002509' 2046 6568 6C65 723A 
     00002511' 206B 6569 6E65 204D 
     00002519' 4147 4E55 4D2D 4B61 
     00002521' 7274 6520 6F64 6572 
     00002529' 206B 6569 6E65 2055 
     00002531' 4D42 7320 6765 6675 
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  29
Source File: C:\PC\MAGNUM\HIMEM.S

     00002539' 6E64 656E 210D 0A00      no_magnum_txt:  DC.B " Fehler: keine MAGNUM-Karte oder keine UMBs gefunden!",13,10,0
 451 00002541' 4469 6573 6572 2054 
     00002549' 7265 6962 6572 206C 
     00002551' 8475 6674 206E 7572 
     00002559' 2061 7566 2053 5420 
     00002561' 6F64 6572 2053 5445 
     00002569' 210D 0A00                machine_txt:	DC.B "Dieser Treiber lÑuft nur auf ST oder STE!",13,10,0
 452 0000256D' 1B66 0D0A 1B70 20        init_text:      DC.B 27,'f',13,10,27,"p "
 453 00002574' 4849 4D45 4D3A 204D 
     0000257C' 4147 4E55 4D2D 5354 
     00002584' 2845 2920 554D 4220 
     0000258C' 496E 7374 616C 6C61 
     00002594' 7469 6F6E 2056 312E 
     0000259C' 3120 1B71 0D0A                           DC.B "HIMEM: MAGNUM-ST(E) UMB Installation V1.1 ",27,"q",13,10
 454 000025A2' 20BD 2031 3939 372D 
     000025AA' 3938 204D 6963 6861 
     000025B2' 656C 2053 6368 7769 
     000025BA' 6E67 656E 0D0A 00                        DC.B " Ω 1997-98 Michael Schwingen",13,10,0
 455  
 456 000025C1' 00                                       EVEN
 457                                    	INCLUDE "cookie.s"
   1.                                   ********************************************************************************
   2.                                   * Routinen, um das "Cookie Jar" (siehe ST-Magazin 3/90) in eigenen Assembler-  *
   3.                                   * Programmen zu verwenden.                                                     *
   4.                                   *                                                                              *
   5.                                   * hunt_cookie(D0.l) - Sucht den Cookie mit dem Namen D0.l im Cookie Jar. Wurde *
   6.                                   *                     er gefunden, steht sein Wert in D0.l. Wurde er nicht ge- *
   7.                                   *                     funden, ist das N(egativ)-Flag des CCR-Registers gesetzt *
   8.                                   *                                                                              *
   9.                                   * insert_cookie(D0.l,D1.l,D2.l,A0.l) -                                         *
  10.                                   *                     TrÑgt einen Cookie mit dem Namen D0.l und dem Wert D1.l  *
  11.                                   *                     im Cookie Jar ein. Falls der Platz im Cookie Jar nicht   *
  12.                                   *                     mehr reicht, oder das Cookie Jar gar nicht existiert,    *
  13.                                   *                     wird es angelegt oder vergrî·ert. Wenn ein Cookie Jar    *
  14.                                   *                     neu angelegt wird, klinkt sich die Routine in den RESET- *
  15.                                   *                     vektor ein, um das Cookie Jar beim RESET zu entfernen.   *
  16.                                   *                     Wurde das Jar neu angelegt oder vergrî·ert, so MUSS das  *
  17.                                   *                     aufrufende Programm RESIDENT bleiben (ist bei Accessorys *
  18.                                   *                     nicht mîglich!!!). FÅr den Fall, da· ein Cookie Jar ein- *
  19.                                   *                     gerichtet werden mu·, mu· man stets in D2.l die LÑnge    *
  20.                                   *                     des eventuellen Cookie Jars in Langworten und in A0.l    *
  21.                                   *                     ein Zeiger auf den Buffer Åbergeben werden.              *
  22.                                   *                                                                              *
  23.                                   * ACHTUNG: beide Routinen mÅssen im Supervisor-Mode aufgerufen werden!!!       *
  24.                                   *                                                                              *
  25.                                   * Am Besten, wenn man sich das Demo-Programm ansieht.                          *
  26.                                   *                                                                              *
  27.                                   * Ω1990 ‰-soft, geschrieben von Markus Fritze fÅr den TurboAss V1.5            *
  28.                                   ********************************************************************************
  29.                                   ;Cookie mit dem Namen D0.l suchen und auf D1.l setzen
  30.                                   ;Parameter:  D0.l : Name des Cookies
  31.                                   ;            D1.l : neuer Wert
  32.                                   ;            D0.l : Wert des gefundenen Cookies
  33.                                   ;             N=1  : Cookie nicht gefunden (D0.l = LÑnge des bisherigen Jars)
  34. 
  35.000025C2' 48E7 7080                change_cookie:  movem.l D1-D3/A0,-(SP)
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  30
Source File: C:\PC\MAGNUM\HIMEM.S

  36.000025C6' 2400                                     move.l  D0,D2           ;gesuchten Namen merken
  37.000025C8' 2601                                     move.l  D1,D3           ; neuen Wert merken
  38.000025CA' 2038 05A0                                move.l  _p_cookies.w,D0 ;Zeiger auf das Cookie Jar holen
  39.000025CE' 67 0E                                    beq.s   change_cookie2  ;ist leer => nix gefunden
  40.000025D0' 2040                                     movea.l D0,A0
  41.000025D2' 2218                     change_cookie1: move.l  (A0)+,D1        ;Namen eines Cookies holen
  42.000025D4' 2018                                     move.l  (A0)+,D0        ;und den Wert holen
  43.000025D6' B282                                     cmp.l   D2,D1           ;Eintrag gefunden?
  44.000025D8' 67 0C                                    beq.s   change_cookie4  ;Ja! =>
  45.000025DA' 4A81                                     tst.l   D1              ;Ende der Liste?
  46.000025DC' 66 F4                                    bne.s   change_cookie1  ;Nein! => weiter vergleichen
  47.000025DE' 72FF                     change_cookie2: moveq   #-1,D1          ;N-Flag=1, d.h. nix gefunden
  48.000025E0' 4CDF 010E                change_cookie3: movem.l (SP)+,D1-D3/A0
  49.000025E4' 4E75                                     rts
  50.000025E6' 2103                     change_cookie4: move.l  D3,-(A0)
  51.000025E8' 60 F6                                    bra.s   change_cookie3
  52. 
  53.                                   ;Cookie mit dem Namen D0.l suchen.
  54.                                   ;Parameter:  D0.l : Name des Cookies
  55.                                   ;            D0.l : Wert des gefundenen Cookies
  56.                                   ;             N=1  : Cookie nicht gefunden (D0.l = LÑnge des bisherigen Jars)
  57. 
  58.000025EA' 48E7 6080                hunt_cookie:    movem.l D1-D2/A0,-(SP)
  59.000025EE' 2400                                     move.l  D0,D2           ;gesuchten Namen merken
  60.000025F0' 2038 05A0                                move.l  _p_cookies.w,D0 ;Zeiger auf das Cookie Jar holen
  61.000025F4' 67 0E                                    beq.s   hunt_cookie2    ;ist leer => nix gefunden
  62.000025F6' 2040                                     movea.l D0,A0
  63.000025F8' 2218                     hunt_cookie1:   move.l  (A0)+,D1        ;Namen eines Cookies holen
  64.000025FA' 2018                                     move.l  (A0)+,D0        ;und den Wert holen
  65.000025FC' B282                                     cmp.l   D2,D1           ;Eintrag gefunden?
  66.000025FE' 67 06                                    beq.s   hunt_cookie3    ;Ja! =>
  67.00002600' 4A81                                     tst.l   D1              ;Ende der Liste?
  68.00002602' 66 F4                                    bne.s   hunt_cookie1    ;Nein! => weiter vergleichen
  69.00002604' 72FF                     hunt_cookie2:   moveq   #-1,D1          ;N-Flag=1, d.h. nix gefunden
  70.00002606' 4CDF 0106                hunt_cookie3:   movem.l (SP)+,D1-D2/A0
  71.0000260A' 4E75                                     rts
  72. 
  73.                                   ;eigenen Cookie in das Cookie jar
  74.                                   ;Parameter:  D0.l : Name des Cookies
  75.                                   ;            D1.l : Wert des Cookies
  76.                                   ;            D2.l : LÑnge eines eventuell einzurichtenden Cookie Jars (Langworte)
  77.                                   ;            A0.l : Adresse eines eventuell einzurichtenden Cookie Jars
  78.                                   ;            D0.w : 0 - alles ok, Cookie wurde eingetragen
  79.                                   ;                    1 - wie (1), aber nun resetfest, d.h. resident bleiben
  80.                                   ;                    2 - wie (2), aber nicht resetfest eingeklinkt
  81.                                   ;                   <0 - Fehler aufgetreten, Cookie nicht eingetragen
  82. 
  83.0000260C' 48E7 3C40                insert_cookie:  movem.l D2-D5/A1,-(SP)
  84.00002610' 2A02                                     move.l  D2,D5           ;LÑnge einer evtl. Liste merken
  85.00002612' 2638 05A0                                move.l  _p_cookies.w,D3 ;Zeiger auf das Cookie Jar holen
  86.00002616' 67 1C                                    beq.s   insert_cookie_s ;ist leer => Liste einrichten
  87.00002618' 2243                                     movea.l D3,A1
  88.0000261A' 7800                                     moveq   #0,D4           ;Anzahl der Slots
  89.0000261C' 5244                     insert_cookie_h:addq.w  #1,D4           ;Slotanzahl erhîhen
  90.0000261E' 4CD9 000C                                movem.l (A1)+,D2-D3     ;Namen und Wert eines Cookies holen
  91.00002622' 4A82                                     tst.l   D2              ;leeren Cookie gefunden?
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  31
Source File: C:\PC\MAGNUM\HIMEM.S

  92.00002624' 66 F6                                    bne.s   insert_cookie_h ;Nein => weiter suchen
  93.00002626' B883                                     cmp.l   D3,D4           ;alle Slots belegt?
  94.00002628' 67 24                                    beq.s   insert_cookie_n ;Ja! => neue Liste anlegen
  95.0000262A' 48E9 001F FFF8                           movem.l D0-D4,-8(A1)    ;neuen Cookie & Listenende einfÅgen
  96.00002630' 7000                                     moveq   #0,D0           ;alles ok!
  97.00002632' 60 38                                    bra.s   insert_cookie_x ;und raus
  98. 
  99.00002634' 7802                     insert_cookie_s:moveq   #2,D4
 100.00002636' B484                                     cmp.l   D4,D2           ;weniger als 2 EintrÑge?
 101.00002638' 65 10                                    blo.s   insert_cookie_e ;das ein Fehler! (Liste zu klein!)
 102.                                   ;                move.l  resvector.w,old_resvector
 103.                                   ;                move.l  resvalid.w,old_resvalid ;alten Reset-Vektor merken
 104.                                   ;               move.l  #cookie_reset,resvector.w
 105.                                   ;                move.l  #$31415926,resvalid.w ;und eigenen einsetzen
 106.0000263A' 21C8 05A0                                move.l  A0,_p_cookies.w ;Cookie Jar initialisieren
 107.0000263E' 7600                                     moveq   #0,D3           ;Markierung: Ende der Cookie-List
 108.00002640' C543                                     exg     D2,D3           ;Anzahl der Slots nach D3
 109.00002642' 48D0 000F                                movem.l D0-D3,(A0)      ;Namen und Wert des Cookies einsetzen
 110.00002646' 7001                                     moveq   #1,D0           ;Liste resetfest eingerichtet, alles ok
 111.00002648' 60 22                                    bra.s   insert_cookie_x ;und raus
 112. 
 113.0000264A' 70FF                     insert_cookie_e:moveq   #-1,D0          ;Fehler, Cookie nicht eingetragen
 114.0000264C' 60 1E                                    bra.s   insert_cookie_x ;und raus
 115. 
 116. 
 117.0000264E' B885                     insert_cookie_n:cmp.l   D5,D4           ;reicht der Platz?
 118.00002650' 6F F8                                    ble.s   insert_cookie_e ;Nein => Fehler und raus
 119.00002652' 2278 05A0                                movea.l _p_cookies.w,A1 ;Anfang der Liste erneut holen
 120.00002656' 21C8 05A0                                move.l  A0,_p_cookies.w ;neuen Cookie Jar eintragen
 121.0000265A' 5544                                     subq.w  #2,D4           ;Ende nicht kopieren (-1 fÅr DBRA)
 122.0000265C' 20D9                     insert_cookie_m:move.l  (A1)+,(A0)+     ;EintrÑge der Liste kopieren
 123.0000265E' 20D9                                     move.l  (A1)+,(A0)+
 124.00002660' 51CC FFFA                                dbra    D4,insert_cookie_m
 125.00002664' 2605                                     move.l  D5,D3           ;Anzahl der Slots
 126.00002666' 48D0 000F                                movem.l D0-D3,(A0)      ;eigenes Element eintragen + Listenende
 127.0000266A' 7002                                     moveq   #2,D0           ;alles ok, resident bleiben
 128.0000266C' 4CDF 023C                insert_cookie_x:movem.l (SP)+,D2-D5/A1
 129.00002670' 4E75                                     rts
 458 00002672'                          		BSS
 459 00000000"                          machine:	ds.l	1
 460 00000004"                          		ds.l	100
 461 00000194"                          new_stack:	ds.l	1
 462 00000198"                                          END
PASM 68040 Macro Assembler  Version Dec 18 1992  (C) 91 Pure Software  Page  32
Source File: C:\PC\MAGNUM\HIMEM.S



Symbols:
========

Name                  Value      Scope      Relocation base

BLK1_LEN              00080000   File       EQUATE
BLK1_START            00E80000   File       EQUATE
BLK2_LEN              00080000   File       EQUATE
BLK2_START            00F20000   File       EQUATE
COOKIE                484D454D   File       EQUATE
MAGIC1                4D41474E   File       EQUATE
MAGIC2                5741524D   File       EQUATE
_alt_ram_len          0000000A   File       TEXT
_alt_ram_start        00000006   File       TEXT
_p_cookies            000005A0   File       EQUATE
berr_vec              00000008   File       EQUATE
change_cookie         000025C2   File       TEXT
change_cookie1        000025D2   File       TEXT
change_cookie2        000025DE   File       TEXT
change_cookie3        000025E0   File       TEXT
change_cookie4        000025E6   File       TEXT
cookie1               000020F2   File       TEXT
cookie1a              00002116   File       TEXT
cookie1b              0000212E   File       TEXT
cookie2               00002130   File       TEXT
cookie2a              0000215C   File       TEXT
cookie2b              000021A6   File       TEXT
cookie2c              000021B0   File       TEXT
cookie_space          0000000E   File       TEXT
do_test2              0000224C   File       TEXT
do_test3              000022EE   File       TEXT
do_test4              0000232A   File       TEXT
do_test4a             0000235A   File       TEXT
do_test5              0000230E   File       TEXT
hextab                000020E2   File       TEXT
hunt_cookie           000025EA   File       TEXT
hunt_cookie1          000025F8   File       TEXT
hunt_cookie2          00002604   File       TEXT
hunt_cookie3          00002606   File       TEXT
init_text             0000256D   File       TEXT
insert_cookie         0000260C   File       TEXT
insert_cookie_e       0000264A   File       TEXT
insert_cookie_h       0000261C   File       TEXT
insert_cookie_m       0000265C   File       TEXT
insert_cookie_n       0000264E   File       TEXT
insert_cookie_s       00002634   File       TEXT
insert_cookie_x       0000266C   File       TEXT
is_inst               00002094   File       TEXT
is_inst2              00002098   File       TEXT
is_inst_txt           000024DF   File       TEXT
machine               00000000   File       BSS
machine_err           0000208E   File       TEXT
machine_txt           00002541   File       TEXT
maddalt_error         00002082   File       TEXT
maddalt_txt           000024A7   File       TEXT
mem_err_addr          00002436   File       TEXT
memctrl               00000424   File       EQUATE
memtest               00002214   File       TEXT
memtest2              00002226   File       TEXT
memtest3              00002364   File       TEXT
mt_long               00002380   File       TEXT
mt_long2              00002382   File       TEXT
mt_long3              00002390   File       TEXT
mt_long4              000023A6   File       TEXT
mt_refresh1           000023B0   File       TEXT
mt_refresh1a          000023B2   File       TEXT
mt_refresh2           000023D8   File       TEXT
mt_refresh2a          00002420   File       TEXT
mt_refresh2b          000023DA   File       TEXT
new_cookie_num        0000242E   File       TEXT
new_stack             00000194   File       BSS
no_magnum             00002088   File       TEXT
no_magnum_txt         00002509   File       TEXT
not_res               000020A2   File       TEXT
ok_txt                000024A2   File       TEXT
patch_space           00001F56   File       TEXT
phystop               0000042E   File       EQUATE
print                 000020A8   File       TEXT
print2                000020AA   File       TEXT
print_hex             000020C8   File       TEXT
print_hex2            000020CC   File       TEXT
putc                  000020B2   File       TEXT
putc2                 000020C6   File       TEXT
res_len               00002432   File       TEXT
resvalid              00000426   File       EQUATE
resvector             0000042A   File       EQUATE
reverse_off           0000249E   File       TEXT
reverse_on            0000249B   File       TEXT
save_magic            0000243A   File       TEXT
sleep                 ********   External   
start                 00000000   File       TEXT
start2                00001F5A   File       TEXT
start2a               00001FB6   File       TEXT
start3                00001FF4   File       TEXT
sup_ret               0000242A   File       TEXT
test_m_berr           0000220A   File       TEXT
test_m_end            00002200   File       TEXT
test_magnum           000021B2   File       TEXT
testtxt               0000244A   File       TEXT
testtxt3              0000246A   File       TEXT
testtxt4              00002484   File       TEXT
the_cookie            00000004   File       TEXT
