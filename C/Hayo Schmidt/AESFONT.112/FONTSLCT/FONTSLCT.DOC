072020303090000144004006006018000
11
21
F0000000001
9   [.......................................................]0110
ÄV1.1           08.05.95

   LiebeATARI-Freunde,

Der FONTselectoristBestandteildesAES Font Loader-Paketes.DasPaket
istzuprivatenZweckenfreikopierbarunddarfweitergegebenwerden.
DiedauerhafteNutzungerfordertdieZahlungderSHAREWARE-GebÅhrfÅr
AESFONT.

Der FONTselectoristeinkombiniertesAccessory/Programm,d.hSie
kînnenesalsACCoderalsPRGstarten.

Der FONTselectorermîglichtdieAuswahlvongeladenenGDOS-Fonts.

Der FONTselectorarbeitetauflîsungsunabhÑngig.

Der FONTselectorwurdeinPure-Cgeschrieben.

Å
HiernuneinekurzeBeschreibungderElementedesDialogfensters:
Ä----------------------------------------------------------------- 
 
DasFONTselector-FensterfunktioniertimGrundsatzgenausowiedas
Kontrollfeld,d.h.SiekînnendieBoxinnerhalbdesBildschirmsbelie
bigverschieben.

ZusÑtzlichisteineTastatursteuerungintegriert.

Im'ÅFONT #Ä'-FeldwirddieFont-IdentifikationdesFontseingestellt.
DazusinddiePfeileanzuklicken.
ÑTasten:Cursorlinks/rechtsÄ.

DeraktuelleZeichensatzkanngleichfallsÅberdasPopup-MenÅdes
ÅFONTselectorÄ-Imageeingestelltwerden.
ÑTaste:F5Ä

Mit'ÅPOINTSÄ'wirddieZeichengrîûeeingestellt.
ÑTasten:Cursorhoch/runter.Ä

ImÅBeispieltextÄ(grauesFeldrechtsoben)wirdderaktuelleFontmit
deneingestelltenTextattributenGrîûeangezeigt.
DarunterstehtderÅNamedesFontsÄ.
DurchDoppelklickaufdasFeldwirdeineTabelledesangezeigtenFonts
gezeigt.
ÑTaste:F1.
ÄFONTselector 1.1beherrschtdieFONT_CHANGED-MessagegemÑ·Font-
Protokoll Rev. 3 von Christian Grunenberg.Man mu· lediglich dasObjekt
mit dem Beispieltext auf dasFenster einerAnwendungziehen,diedas
Protokollbeherrscht.WenngleichzeitigeineShifttastegedrÅcktwird,
ÅbernehmenalleFensterderApplikationdenneuenFont.

DurchDoppelklickaufdasÅFONTselector-LogoÄerhÑltmaneineTabelle
desDefault-System-Fonts.
ÑTaste:F3.Ä

Ä'ÅFontsladenÄ'fÅhrteinvst_load_fonts()fÅrdieVDI-Workstationvon
FONTSLCTdurch.
ÑTaste:Insert.
Ä
'ÅFontsentladenÄ'fÅhrteinvst_unload_fonts()durch.
ÑTaste:Delete.
Ä
'ÅSPEZIALEFFEKTEÄ'stelltdieTexteffektewieÑkursivÄundÅfettÄein.
ÑTasten:ersterBuchstabe.
Ä
'ÅEINSTELLENFöRÄ'stelltdenaktuellenFonteinals
Å'ResourceÄ'fÅrMenÅsundGEM-Dialoge.Istdisabled,
          wenndieGrîûedesFontsnichtstimmt.
ÑTaste:R.Ä
'ÅApplikationÄ'-SetztimZusammenhangmitAESFONTeinenneuen
DefaultFontfÅrneugeîffnetevirtuelleWorkstations.Der
WertwirdbeimSichernvonAESFONT.DNFmitgespeichert.
ÑTaste:Return.Ä
'ÅConsoleÄ'-meldetmitv_fontinit()einen8Pixelbreiten,fixen
FontalsConsole-Fontan.
ÑTaste:C.Ä

Im'ÅMODUSÄ'-Feldwirdeingestellt,obdieEinstellungim'ÅpointsÄ' mode
(vst_points())oderim'ÅabsoluteÄ' mode(vst_height())erfolgensoll.
Mitdemselektierten'ÅpointsÄ'-KnopfkanneinPopupmitdenverfÅgbaren
Punktgrî·endesaktuellenFontsaufgerufenwerden.
ÑTasten:ersterBuchstabe.Ä

öber'ÅMenÅs...Ä'werdenweitereFeaturesdesFONTselectorerreicht.
Ñ   Taste:F4Ä
Ñ
TextInqiry...                                         Taste:^I
          InquireAttributes  Ä   RÅckgabewertevonvqt_attributes()Ñ
          InquireFontinfo    Ä   RÅckgabewertevonvqt_fontinfo()Ñ
          ------------------
          AuszÅgeneg.LineA    ÄwichtigenegativeLineA-VariablenÑ
Ä          ÑaktuellerFontheaderÄ   DatenausdemaktuellemFontheader
         Ñ ----------------------
          AbbruchÄ
    Ñ --------------Ä
     ÑaktuellerFont     Ä         TabelleeingestellterFontÑTaste:F1Ä
     ÑSystemfont      Ä            TabelleDefaultSystemfontÑTaste:F3Ä
    Ñ ConsoleFont     Ä           TabelleConsoleFont       ÑTaste:F2Ä
    Ñ --------------Ä
    Ñ Parameter..Ä.                ParameterdialogFONTselectorÑTaste:^PÄ
    Ñ Hilfe Ä                                                  ÑTaste:HELPÄ
     Ñ--------------Ä
     ÑAESFONT...  Ä               EinstellungsdialogAESFONTÑTaste:F6Ä
     Ñ--------------Ä
     ÑAbbruchÄ


   ÅParameterdialogÄ
Ñ  'Neg. Line A und v_fontinit verwendenÄ'istnurbeiVerwendungeines
Standard-VDIsinnvoll.MitNVDIsolltederEintragdeselektiert
Äsein.IndiesemFalleistauchderConsole-Buttonnichtmehr
vorhanden.
Ñ'DauerhaftesMalloc(actPDanpassen)Ä'istnurmiteinemSingle-TOSund
ohneVerwendungvonAESFONTsinnvoll.MitdiesemHackkannder
FONTselectordortGDOS-Fontsdauerhaftladen.
Ñ'GDOS-FontsfÅrdasAESÄ'brauchennurgeladenwerden,wennkeinAESFONT
lÑuftundderStandard-AES-FontgegeneinenFontgleicherGrîûe
ersetztwerdensoll.
Ñ'GDOS-FontsautomatischladenÄ'heiût,daûbeimStartdesFONTselector
einvst_load_fonts()durchgefÅhrtwird.
Ñ'Redraw-BufferÄ'beschleunigtdenRedrawderZeichentabellenetwasund
kostetimGegenzugetwasSpeicherplatz.
     Ñ'Cookie-InstallationÄ'
          Ñ'automatischÄ'FOse-Cookiewirdautomatischinstalliert
         Ñ 'nachfragen' Ä Alert-Nachfrage
          Ñ'nein'ÄeswirdkeinCookieinstalliert
FÅrdenBetriebalsHilfsprogrammfÅrAESFONTistderFOse-Cookienicht
notwendig.

 Å  EinstellungsdialogAESFONTÄ
ÑGeschwÑtzigkeit    Ä         setztAF_VERBOSE
    Ñ appl_getinfo berichtigen Ä   setztAF_GETINFOPATCH
    Ñ work_out[45-48]anpassen    ÄsetztAF_1STWPATCH
     Ñwork_out[10]berichtigenÄ   setztAF_NOWORK10
     Ñvst_load_fontimmer<>0Ä   setztAF_LOADHACK
     ÑFensterpositionanpassenÄ   setztAF_WINDOWPATCH
    Ñ FixenderDesktopResourceimRAMÄstelltdieseOptionanoderaus
ÑAES-Font    Ä                setztWertedesgroûenAES-Fonts
     ÑSMALL-Font Ä                 setztWertedesIcon-Fonts
  ÑFliegendeDialoge AP  Ä   setztAF_FLYHACKÅ(AÄbsolute/ÅPÄointsmode)
     ÑVerzîgerungszahl Ä          setztAF_CHAMHACK
DieEinstellungkannmitSicherninAESFONT.CNFgespeichertwerden,mit
OKvorÅbergehendÅbernommenodermitAbbruchverworfenwerden.

DieÅHelpÄ-TasteÅÄlieferteinigeSeitenHilfstext.

DieÅEscÄ-TastezeichnetdasFONTselector-Fensterneu,ÅShift-EscÄfÅhrt
einenRedrawfÅrdengesamtenArbeitsbereichdesBildschirmsaus.

MitdemÅSchlieûfeldÄdesFensterswirddasFenstergeschlossen.
ÑTasten:ÄCtrl-U,Ctrl-C

DiemeistenObjektederResourcekînnenmiteinemRCSgesetztwerden.
SiewerdenbeimErststartalsFONTselector-Voreinstellungenbeachtet.
In'FONT#'und'POINTS'stehendiejeweiligenMaximalwertedes
Nummernkreises.DerMODUSunddieSCHRIFTARTwerdenbeachtet.

âDieDatenstrukturvonFONTselectorà
Ä
DerFONTselectorbesitzteineinterneDatenstruktur,aufdieaus
anderenProgrammenherauszugegriffenwerdenkann.DiefolgendeDoku
mentationhatmehrhistorischenCharakter,aberwennesschondrinist,
warumsollichesrauswerfen.Anwendungsprogrammierersolltenlieber
aufdieFontselekorenmitUFSL-,xFSL-odervollstÑndigerDrag&Drop-
Fontprotokoll-SchnittstellezurÅckgreifen.
Ä
BeiAccessory-BetriebkanndieAdressedieserStrukturÅberdieMessage
0xF05EundSub-msgcode1inWort3desÅbergebenenBuffersabgefragt
werden(mittelsappl_write()).ManerhÑltdanndieMessage0xF05E
zurÅckmitSub-msgcode2undderAdresseinWort4und5.

DerCookiemitderKennung'FOse'wirdvomProgrammFOSEINST.PRG
installiert,dasambestenausdemAuto-Ordnergestartetwird.Das
ProgramminstalliertzusÑtzlichdieDatenstrukturresident.Ansonsten
startetderFONTselectordasProgrammnach,wennesimAuto-Ordner
oderimFONTSLCT-Ordnerzufindenist.DasProgrammistnichtzwingend
notwendig,wennmanaufdenCookie-Eintragunddieresidente
SpeicherungderDatenstrukturverzichtenkann.DerCookie'FOse'und
enthÑlteinenZeigeraufdieprogramminterneDatenstruktur.

AufdieStrukturkannausanderenProgrammenherauszugegriffen
werden.DadurchkanninanderenProgrammenÅberFONTSLCTein
bestimmterFontundeineGrîûeausgewÑhltwerden.Auûerdemistdiese
DatenstrukturdasElefantengedÑchtnis,wennSiedenFONTselectornur
alsProgrammverwenden-alleEinstellungenbleibenauchnach
Programmendeerhalten.

WennSiedasDialogfensteraneinerbestimmtenStelleerscheinen
lassenwollen,dannkînnenSiedieX-undY-KoordinatedesDialogfel
des-entsprechenddenKoordinatendesArbeitsbereichesdesFensters-
manipulieren.

Offset    Typ  Zugriff      Inhalt    Bedeutung

 0       LONG   readonly    "FOse"    Kennung-zuröberprÅfung
                                        derGÅltigkeitdesZeigers. 
4        LONG   readonly    $00010000 Versionsnummer.


    8        WORDreadonly   $....     Font-IDdesimBeispiel-
fensterdargestelltenFonts.
   10        WORD   read only    $....     Fonthîhe.

  12        WORD   read/write   $....     Texteffekt.
                                               
   14        WORD   read/write$0001      Modus:points=1
                              o. $0000       absolute=0.
                                           
   16        WORD   read         $....     Font-IDdesApplication-
                                           Fonts.
   18        WORD   read         $....     Fonthîhe.

   20        WORDread         $....       Texteffekt.

   22     WORD   read         $0000       Modus.
                              o.$0001       

˚Ä   24        WORDreadonly   $....     Font-IDdesResource-Fonts.
                                             
   26        WORD   read only    $....     Fonthîhe.

   28        WORDreadonly    $....       Texteffekt.


   30WORDread/write   $....       X-KoordinatederDialogbox.

   32WORDread/write   $....       Y-Koordinate.

   34WORDreadonly   $....       Breite.

   36WORDreadonly   $....       Hîhe.


38WORDread/write$....VDI-HandlevonFONTSLCT.

   40WORD   readonly    $....       HandledesFensters.


                                
BeidenTexthîhenmodigiltderWert1fÅrdenpointsmode,0fÅrden
absolutemode.AlleanderenWertefÅhrendazu,daûderaktuelleStatus
der'MODUS'-Buttonsgilt.FÅrResourcenistderModusnatÅrlichimmer
absolute.

AufdieDatenstruktursollausanderenProgrammenzugegriffenwerden.
EsbleibtdabeidemProgrammiererÅberlassen,oberdenangezeigten
BeispielfontoderdengewÑhltenApplication-Fontverwendet.

Diemit'write'gekennzeichnetenWertekînnenauchexterngesetzt
werden.NachVerÑnderungderWerteisteinRedrawauszulîsen.

DerVDI-HandlekannaufdeneinesanderenProgrammesumgebogen
werden,wodurchderFONTselectordefactoaufeinerfremdenVWorksta
tionarbeitet.DerHandlekanndurchdenWert-1wiederzurÅckgesetzt
werden.DerVDI-HandleistbeimSchlieûenderVWorkstationaufjeden
FallrÅckzusetzten.

WennFONTSLCT.PRGmitpexec()gestartetwird,kanndurchdieöbergabe
desKommandos'X'(1Zeichen)dieAusgabedermeistenMeldungen
unterdrÅcktwerden.HierzugehîrtinsbesonderederAlert,wennsieden
VDI-HandlevomFONTselectoraufdeneigenenumbiegen.Diemîglicher
weisegeladenenGDOS-Fontswerdenbeimterminierennichtentladen.

AlsBeispielkînnenSiesichdasProgrammFOSEEXMP.GFAansehen.

˜ÄDaalleGDOS-VersionenunterAMCGDOS4.0dieWanzeenthalten,daûmit
vst_load_fonts()erstmaliggeladeneFontsinderSpeicherverwaltung
diegeradegeladeneHauptapplikationalsOwnerverpaûtbekommen,biegt
FONTSLCT.ACCvordemAufruf'loadfonts'denaktuellenProzeûdeskriptor
aufdieeigeneBasepage(waslautAtariillegalist),wenndasim
Parameter-Dialogentsprechendeingestelltwurde.AnsonstenwÅrdenunter
Single-TOSnachdemVerlassenderHauptapplikationdieSpeicherbereiche
mitdenFontswiederfreigegebenunddieseÅberschrieben,wasnatÅrlich
beimnÑchstenAusgabeversuchmitdiesenFontszumAbsturzfÅhrte.

Warnung:
-------- 
FONTselectordarfmitdemAccessory'The Chameleon'installiertwer
den.JedochkannderFONTselectorauûerhalbdesGEM-Desktops
FOSEINST.PR?nichtnachladen,daesdannzumAbsturzkÑme.Alsoist
FOSEINSTvorherzustarten.
AufmeinerKonfiguration(TOS1.4)stÅrzteindiesemFalljedelau
fendeHauptapplikationab,nichtjedochderFONTselector.DerGrund
dafÅrliegtimDunkelndesTOS,abereswirdwohlnichtohneGrund
davorgewarntpexec()ausAccessoriesaufzurufen.
DesgleichenstÅrztdasSystemab,wennzweiAccessoriesinder
Bootphaseeinpexec()durchfÅhren(vermutlichdeswegen!?).

ImfolgendeneinZitatdesAtariProgrammierersAllanPratt:

ÇC. Kaernbach's question was why his accessory, which basically did
a Pexec from a file selector, didn't always work.  The answer is that
it works when used within a program which has returned enough memory to
the OS for the child.  Why might it bomb?  Because if a program has
returned a *little* memory to the OS (only about 2K), a bug in Pexec 
shows up that breaks the memory manager.  äAccessories are strange beasts
Çäanyway, so for the most part combining two strange beasts (Accessories
Çäand Pexec) is bad news.Ç

/----------------------------------------------\
| Opinions expressed above do not necessarily  | --Allan Pratt, Atari Corp.
| reflect those of Atari Corp. or anyone else. |   ...lll-lcc!atari!apratt
\----------------------------------------------/    (APRATT on GEnie)
Ä
Esmuûhierzugegebenwerden,daûFOseINSTindasletzteobere
KilobytedesSpeichergequetschtwird,umeineSpeicherfragmentierung
zuvermeiden.DassindetwasfragwÅrdigeOptimierungsversuche
meinerseitsgewesen,aberesfunktioniertnachwievor.
DemnachistbeiAbstÅrzendiesesAccessoriesinderBootphaseimmer
zunÑchsteinVersuchmitFOseINSTimAuto-Ordnerzumachen.

Disclaimer:
----------- 
FÅrdieFunktionsfÑhgkeitdiesesSoftware-Produkteswirdwedereine
GewÑhrgegeben,nochkanneineHaftungfÅreventuellauftretende
SchÑdenanIhrerHard-undSoftwareÅbernommenwerden.

ÚÄAdresse:
-------- 
HayoSchmidt
Grotiusweg1
22587Hamburg

EMail:
------
MausNet:HayoSchmidt@HH

Bankverbindung:
--------------- 
DeutscheBankHamburg,Bankleitzahl20070000,Konto-Nr.5662671


---------------------------------------- 
[˝FONTselectorisatrademarkofHayoSoft]

