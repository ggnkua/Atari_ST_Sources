% ASCREEN-3.2-HANDBUCH --- Kapitel 2 (ASCREEN starten)
% Copyright (C) 1992 by Anselm Lingnau
%
\chapter{\ASCREEN\ starten} \label{k:starten}

\section{Das Programm aufrufen}

Sie kînnen \ASCREEN\ ganz einfach aufrufen,
indem Sie es auf dem Desktop zweimal anklicken.
Nach einer kurzen Weile prÑsentiert sich Ihnen
die MenÅleiste von \ASCREEN\
(der unmiûverstÑndlichen Titel links oben verrÑt es).
Jetzt kînnen Sie mit dem MenÅpunkt \M{Datei îffnen}
im MenÅ \M{Datei} eine \DVI-Datei aussuchen,
deren erste Seite dann wenig spÑter in einem Fenster angezeigt wird.

Von einer kommandoorientierten Shell wie der {\em Mupfel\/} aus
kînnen Sie \ASCREEN\ genauso Åber den Programmnamen, {\tt ascreen},
starten.
Da \ASCREEN\ ein GEM-Programm ist,
also die graphische BedienoberflÑche des Atari-Computers benutzt,
kann es bei manchen Shells nîtig sein,
ein Kommando wie
\begin{typed}
gem ascreen
\end{typed}
zu geben.
Darauf weisen wir im folgenden nicht jedesmal hin.

Wenn Sie eine Shell benutzen,
werden Sie Åblicherweise den Namen der \DVI-Datei,
die \ASCREEN\ zeigen soll,
gleich beim Aufruf mit angeben.
\begin{typed}
ascreen foo
\end{typed}
zeigt etwa die Datei {\tt foo.dvi} an.
Die \DVI-Datei sucht \ASCREEN\ in demjenigen Verzeichnis,
das in der \M{Pfade}-""Dialogbox bzw.\ in der Setupdatei
als \DVI-Pfad angegeben wurde.
Sie kînnen aber auch einen kompletten Dateinamen (mit Pfad) angeben,
die Voreinstellung wird dann ignoriert.
Insbesondere sollten Sie etwas sagen wie
\begin{typed}
ascreen .\foo
\end{typed}
wenn Sie die Datei {\tt foo.dvi} im aktuellen Verzeichnis meinen,
Ihr \DVI-Pfad aber auf etwas anderes zeigt.

\begin{aha}
Wenn Sie einen modernen Desktopersatz wie GEMINI verwenden,
kînnen Sie \ASCREEN\ auch als Icon auf dem Bildschirmhintergrund ablegen.
Dann kînnen Sie Dateien anschauen,
indem Sie die betreffenden Icons auf das \ASCREEN-Icon ziehen.
\end{aha}
\begin{aha}
Was GEMINI angeht, so habe ich von Leuten gehîrt,
die eine Datei {\tt DVI.MUP} als Applikation fÅr alle Dateien anmelden,
deren Namen mit {\tt .DVI} aufhîren.
{\tt DVI.MUP} sieht ungefÑhr so aus:
\begin{typed}
d:\tex\ascreen &d:\tex\ascreen.set $*
\end{typed}
Dadurch wird \ASCREEN\ automatisch gestartet,
wenn Sie eine \DVI-Datei doppelt anklicken.
(Dieser Tip wurde von Cornelius Krasel beigesteuert.)
\end{aha}

\begin{attention}
Damit \ASCREEN\ funktionieren kann,
braucht es eine passende {\em Resourcedatei}.
In dieser Datei, typischerweise {\tt ASCREEN.RSC} genannt,
sind die Elemente der graphischen BedienoberflÑche definiert.
\ASCREEN\ sucht diese Datei mit der Åblichen GEM-Methode.
Wenn Sie also die Resourcedateien aller Ihrer GEM-Programme
in einem besonderen Verzeichnis sammeln,
dann sollte das auch mit \ASCREEN\ funktionieren.
Normalerweise sind Sie aber auf der sicheren Seite,
wenn die Resourcedatei im selben Verzeichnis steht wie {\tt ASCREEN.PRG}.
\end{attention}
\begin{aha}
\ASCREEN\ ist so geschrieben,
daû sÑmtliche landessprachlichen Zeichenketten in der Resourcedatei stehen.
Daher ist es einfach,
auslÑndische Versionen von \ASCREEN\ zu machen,
denn man muû nur die Resourcedatei Ñndern.
Kapitel~\ref{k:tricks} hat hierzu einiges zu sagen.
In der Tat enthÑlt die Distribution
eine fertige Resourcedatei fÅr eine englische BedienoberflÑche
(hallo Herbert!)
Um die englische Version zu benutzen,
kînnen Sie zum Beispiel das (deutsche) {\tt ASCREEN.RSC}
in {\tt ASCREEN.GER}
und das (englische) {\tt ASCREEN.ENG} in {\tt ASCREEN.RSC} umbenennen.
Oder Sie tun den Dateinamen der englischen Resourcedatei
in die Umgebungsvariable {\tt ASCREENRSC}:
\begin{typed}
setenv ASCREENRSC d:\tex\ascreen.eng
\end{typed}
\ASCREEN\ sucht nÑmlich in Wirklichkeit nur nach einer Datei {\tt ASCREEN.RSC},
wenn die Umgebungsvariable {\tt ASCREENRSC} nicht definiert ist,
sonst wird ihr Inhalt direkt als Dateiname benutzt.
Die zweite Variante macht es Åbrigens mîglich,
beide Sprachen gleichzeitig auf demselben Rechner zu installieren
und zu benutzen.
\end{aha}

\section{Die Setupdatei}

Beim Programmstart liest \ASCREEN\ nicht nur die Resourcedatei,
sondern auch eine {\em Setupdatei}.
Diese enthÑlt Voreinstellungen fÅr viele Aspekte der Funktion von \ASCREEN,
zum Beispiel
\begin{itemize}
\item Pfadangaben fÅr \DVI-Dateien, {\tt IMG}-Graphiken,
	Protokoll\allowhyphens- und Zeichensatzlistendateien
\item Suchpfade und Namensschablonen fÅr ZeichensÑtze
	und Zeichensatzbibliotheken
\item Parameter fÅr die Speicher- und Zeichensatzverwaltung
\item Voreinstellungen fÅr die Gestalt und Funktion der BedienoberflÑche
\end{itemize}
und einiges mehr.
Alle einstellbaren Parameter und Optionen,
die innerhalb des Programms Åber Dialoge zugÑnglich sind,
kînnen Sie in einer Setupdatei permanent ablegen.

Der Name der Setupdatei, die \ASCREEN\ beim Programmstart liest,
kann auf eine von drei Arten festgelegt werden:
\begin{enumerate}
\item Sie tun gar nichts Besonderes.
	Dann sucht \ASCREEN\ im selben Verzeichnis,
	wo auch die Programmdatei {\tt ASCREEN.PRG} steht,
	nach einer Datei namens	{\tt ASCREEN.SET} 
\item Sie legen den vollstÑndigen Pfadnamen Ihrer Setupdatei
	in der Umgebungsvariablen {\tt ASCREENSET} ab,
	wie im Kapitel Åber die Installation beschrieben.
	Dieser Name hat Vorrang gegenÅber dem fest eingebauten Namen
	{\tt ASCREEN.SET}.
\item Sie geben den Dateinamen auf der Kommandozeile an,
	und zwar als erstes Argument unmittelbar hinter einem
	kaufmÑnnischen Undzeichen ({\tt\&}). Etwa so:
\begin{typed}
ascreen &special.set foo
\end{typed}
	(Die Endung {\tt .SET} wird von \ASCREEN\ {\em nicht\/}
	selbstÑndig hinzugefÅgt.)
	Wenn Sie gut mit \TeX\ Bescheid wissen,
	kennen Sie diese Syntax schon von den Formatdateien,
	in denen Voreinstellungen fÅr \TeX\ abgelegt werden.
	Wie \TeX\ erkennt \ASCREEN\ dies nur,
	wenn die Angabe als allererstes Argument erscheint.
	Ein so angegebener Name hat Vorrang
	gegenÅber dem Inhalt von {\tt ASCREENSET}.
\end{enumerate}
\begin{aha}
Die letzte Methode ist vor allem sinnvoll,
wenn Sie eine Setupdatei haben, die Sie gewîhnlich benutzen
(und deren Name zum Beispiel in {\tt ASCREENSET} steht),
aber gelegentlich eine andere einsetzen mîchten.
Zum Beispiel kann \ASCREEN\ ein Dokument auch mit Ihren DruckerzeichensÑtzen
anzeigen, wenn Sie mal etwas ganz genau ÅberprÅfen wollen.
Die dafÅr nîtigen Voreinstellungen tun Sie einfach in eine andere Setupdatei,
deren Namen Sie bei Bedarf direkt im Aufruf nennen.
Siehe hierzu auch Abschnitt~\ref{a:dfonts}.
\end{aha}

Die Einstellungen in der Setupdatei haben Vorrang
gegenÅber den entsprechenden
im Programm fest vorgegebenen Standardwerten.
Was die Setupdatei konkret enthÑlt
und wie die diversen Voreinstellungen angegeben werden,
erfahren Sie im Kapitel~\ref{k:setup}.

\section{Kommandooptionen}

Auûer dem Namen der Setupdatei und dem der \DVI-Datei
kînnen Sie im Aufruf von \ASCREEN\ diverse {\em Kommandooptionen\/} angeben,
die es Ihnen gestatten,
die Funktion von \ASCREEN\ zu beeinflussen.
Kommandooptionen mÅssen zwischen dem Namen der Setupdatei (falls vorhanden)
und dem Namen der \DVI-Datei stehen.
Sie bestehen immer aus einem Minuszeichen gefolgt von einem Buchstaben.

Es gibt zwei Arten von Kommandooptionen:
solche, die als {\em Schalter\/} funktionieren
und andere, die einen {\em Parameter\/} nach sich ziehen.
Schalteroptionen kînnen gesammelt hinter einem einzigen Minus angegeben
werden:
\begin{typed}
ascreen -AIv
\end{typed}
ist Ñquivalent zu
\begin{typed}
ascreen -A -I -v
\end{typed}
Die letzte Option in einer solchen Gruppe darf sogar einen Parameter haben.

\begin{aha}
Sollte der Name Ihrer \DVI-Datei mit einem Minuszeichen beginnen
(pfui, pfui),
so kînnen Sie mit einem doppelten Minus das Ende der Optionenliste
bekanntgeben:
\begin{typed}
ascreen -- -punkt
\end{typed}
zeigt die Datei {\tt -punkt.dvi} an.
\end{aha}

Die Kommandooptionen machen es mîglich,
alle in der Setupdatei enthaltenen Voreinstellungen
auch auf der Kommandozeile zu treffen.
Kommandooptionen haben dabei Vorrang
gegenÅber den Einstellungen in der Setupdatei.
Insbesondere gilt fÅr Schalteroptionen,
daû sie den betreffenden Schalter immer {\em umlegen}.
Ein Schalter, der in der Setupdatei eingeschaltet wird,
wird durch die entsprechende Kommandooption also ausgeschaltet
und umgekehrt.
(Tritt die Kommandooption zweimal auf,
so heben die beiden Male sich gegenseitig weg.)
Bei Optionen mit Parameter gilt der letzte Wert,
falls dieselbe Option auf der Kommandozeile mehrfach auftaucht.
Damit kînnen Sie \TeX-Shells austricksen,
die hartnÑckig eigene Ideen darÅber haben,
welche Optionen ein Previewer erwartet.
Auch die Kommandooptionen werden im Kapitel~\ref{k:setup} aufgezÑhlt.

\begin{attention}
Unter normalen UmstÑnden kînnen Kommandozeilen auf dem Atari
eine LÑnge von hîchstens 125~Zeichen haben.
Das ist nicht allzu viel,
und darum wurde vor einiger Zeit von Atari ein Verfahren definiert,
das diese Grenze umgeht.
\ASCREEN\ unterstÅtzt selbstverstÑndlich dieses sogenannte ARGV-""Verfahren
und kann deshalb in Zusammenarbeit mit geeigneten Shells,
zum Beispiel {\em GEMINI/Mupfel},
Kommandozeilen von nahezu beliebiger LÑnge Åbernehmen.
\end{attention}

\section{Probleme}

Vor allem Leute mit \TeX-Shells unterschiedlicher Provenienz
klagen ab und zu Åber Schwierigkeiten beim Aufrufen von \ASCREEN.
Das liegt in den allermeisten FÑllen nicht an \ASCREEN,
sondern an unterschiedlich schlimmen "`Hirn"-schÑden"'
der betreffenden Shells.
(Das Problem mit {\tt-p=a4} in der Strunkschen {\em CTEX\/}-Shell
haben Sie ja schon im vorigen Kapitel kennengelernt.)
Die HKM-\TeX shell zum Beispiel besteht darauf,
jedem Treiber die Option {\tt-J} zu Åbergeben,
ohne daû man das abschalten kînnte.
\ASCREEN\ ignoriert diese Option daher ohne Fehlermeldung,
um un"-nî"-ti"-ge Verwirrung zu verhindern.
Wenn Ihre \TeX-Shell nicht so mitspielt, wie Sie das gerne hÑtten,
dann sollten Sie zunÑchst mit einem Programm wie
\begin{typed}
#include <stdio.h>
int main(int argc, char **argv) {
    while (*argv)
        printf("%s\n", *argv++);
    return 0;
}
\end{typed}
(oder etwas équivalentem in einer anderen Programmiersprache als C)
anstelle des richtigen \ASCREEN\ nachschauen,
was genau \ASCREEN\ von Ihrer Shell als Kommandozeile Åbergeben bekommt.
Meist kînnen Sie so das Problem eingrenzen
und entweder selbst etwas dagegen tun
oder den Autor von \ASCREEN\ [mich] (oder den der Shell)
mit einem detaillierten Fehlerbericht beglÅcken (siehe Anhang~\ref{a:kontakt}).

\begin{chapterquote}
--- I can call spirits from the vasty deep.
\medskip
--- Why, so can I, or so can any man;
But will they come when you do call for them?
\author WILLIAM SHAKESPEARE, {\sl King Henry IV, Part~1\/} (1598)
\end{chapterquote}

