OBJS = parser.o scanner.o hash.o
CFLAGS = -O
TARGET = mit2mot.ttp

$(TARGET): $(OBJS)
	$(CC) $(CFLAGS) -o $(TARGET) $(OBJS)

parser.o ytab.h: parser.y
	$(YACC) -d parser.y
	$(CP) ytab.c parser.c
	$(CC) $(CFLAGS) -c parser.c
	$(RM) ytab.c
	$(RM) parser.c

scanner.o: scanner.l
	$(LEX) scanner.l
	$(CP) lexyy.c scanner.c
	$(CC) $(CFLAGS) -c scanner.c
	$(RM) lexyy.c
	$(RM) scanner.c

scanner.o hash.o: global.h ytab.h
parser.o: global.h
