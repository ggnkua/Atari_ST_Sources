
                  W i n L u p e  6.70 - faster than light
                  ---------------------------------------
                  (inkl. Sourcen in Pure C und Assembler)


                           Ein Programm von ...

                           Christian Grunenberg
                              Traminerweg  5
                             D-71717 Beilstein

                           Tel.: 07062 - 5287

              E-Mail: Christian Grunenberg @ S2 (Mausnet)
                      Christian_Grunenberg@S2.maus.de (Usenet)

In der Maus Stuttgart 2 (@S2) liegt immer die neueste Version der WinLupe.

WinLupe ist ein kleines Utility, welches nach dem Freeware-Prinzip verteilt
wird. Dies bedeutet, daû jeder das Programm inkl. der Sourcen kopieren, be-
nutzen und weitergeben darf, auûer es handelt sich um PD-Versender, denn diese
mÅssen sich bei mir eine schriftliche Genehmigung einholen. Eine kommerzielle
Verwendung der WinLupe ist allerdings untersagt bzw. muss mit mir abgesprochen
werden. Ebenso ist es verboten, verÑnderte Versionen der Sourcen bzw. unvoll-
stÑndige Archive zu verbreiten. Bei vorhandenen Fehlern sollte man sich statt-
dessen immer mit genauen Fehlermeldungen an mich wenden.

FÅr das einwandfreie Funktionieren des Utilities oder eventuell entstehender
SchÑden Åbernehme ich keinerlei Garantie bzw. Verantwortung.

Sollte Ihnen das Programm dennoch gefallen oder Sie wollen die neueste
Version der WinLupe, so senden Sie mir einfach eine beliebige PD-Diskette
(als Anerkennung) und einen frankierten RÅckumschlag (fÅr die neue Version)
zu.

GrundsÑtzlich ist das Programm sauber programmiert. Es sollte also unter allen
TOS-Versionen und auf allen (MEGA) ST(-Book)/STE/TT/FALCON-Computern laufen,
da es keinerlei Annahmen bezÅglich des Bildschirmaufbaus macht, was bedeutet,
daû es auch Groûbildschirme, Grafikkarten und True-Color-Darstellung unter-
stÅtzt. Eventuell bzw. wahrscheinlich lÑuft es somit auch unter ST-Emulatoren
fÅr MS-DOS und den Amiga.

WinLupe lÑût sich sowohl als Programm als auch als Accessory durch einfaches
Umbenennen starten. Die Funktionen des Programmes sollten eigentlich fÅr sich
sprechen bzw. sind in der integrierten Hilfe ausreichend erklÑrt worden.

Der Speicherbedarf des Programms wurde so niedrig wie mîglich gehalten,
wobei jedoch auf die Geschwindigkeit der Vergrîûerung RÅcksicht genommen
werden muûte, so daû das Programm ca. 8 Kb fÅr interne Tabellen benîtigt.
Insgesamt benîtigt die WinLupe im Grundzustand etwa 68 KB Speicher (inkl.
Programmcode/Daten). Ebenso braucht es zwei Bildschirmpuffer fÅr die
Vergrîûerung, sofern das Fenster geîffnet ist. Dies sind auf einem ST max.
96 KB, auf einem TT max. 456KB und auf einem Falcon/030 bei max. Auflîsung
ca. 2 MB. Aber ich glaube nicht, daû jemand die WinLupe im Overscanned- &
Interlaced-True-Color-Modus (768*576*65536 Farben) startet, sofern das das
AES Åberhaupt ermîglicht. Bei 640*480*256 Farben sind es dann 'nur' noch
912 KB.

Legt man Wert auf ein Maximum an Geschwindigkeit, sollte man die Optionen
'Fenster runden' und 'Mauszeiger mitvergrîûern' aktivieren und die 'Echt-
zeitschieber' deaktivieren. Ebenso sollte man eine der vorgegebenen Ver-
grîûerungen (2/4/8/16) wÑhlen und die Vergrîûerungsfrequenz auf 100 Hz
stellen. Auch empfiehlt es sich, sofern der Grafikaufbau der Grafikkarte bzw.
des Computers bekannt ist, den Standard-, Pixelpacked- oder Interleaved-Modus
zu aktivieren, wobei Geschwindigkeitssteigerungen zwischen 150% und 3000%
gegenÅber der sauberen Vergrîûerung Åber VDI-Transform erreichbar sind.
Dennoch (!) findet kein direkter Zugriff auf den Bildschirm statt.
Der Standard-Modus arbeitet in allen Auflîsungen, bei denen der Bildschirm-
aufbau mit dem VDI-Standard-Format Åbereinstimmt, also z.B. ST- und TT-High.
Der Pixelpacked-Modus arbeitet auf denjenigen Grafikkarten, bei denen die
einzelnen Bits der Pixel nicht in Planes, sondern direkt hintereinander im
Speicher organisiert sind. Dies ist z.B. bei vielen Grafikkarten im
8/15/16/24/32-Bit-Modus der Fall, was einer Farbanzahl von je 256,32768,65536
oder 16.7 Millionen entspricht. Ebenso gibt es den Interleaved-Modus, der bei
einem Grafikaufbau, der denjenigem des ST/TT entspricht, funktioniert, d.h.
die Planes der Pixel liegen verschachtelt hintereinander im Speicher. Dies
funktioniert in allen ST- und TT-Auflîsungen sowie in allen Falcon-Grafik-Modi
auûer dem True-Color-Modus, bei dem in den Pixel-Packed-Modus geschaltet
werden muû.

Die Option 'KompatibilitÑts-Modus' aktiviert den an sich notwendigen
wind_update()-Aufruf. Nur bei deaktivierter Option erfolgt auch bei aktiven
Dialogen, in der MenÅleiste oder beim Verschieben von Desktopelementen bzw.
Fenstern eine Vergrîûerung im Fenster. Dabei kann es zu Redraw-Fehlern kommen,
wenn sich das WinLupe-Fenster und ein Dialog/MenÅ Åberlappen bzw. wenn ein
Fenster Åber das WinLupe-Fenster geschoben wird.

Bei deaktivierter Option 'Mauszeiger an-/ausschalten' wird nur dann der
Mauszeiger korrekt an-/ausgeschaltet, wenn entweder die Echtzeitvergrîûerung
deaktiviert ist oder der Mauszeiger Åber einem sichtbaren Teil des Fensters
steht. Dies verhindert in der Regel ein Flackern des Mauszeigers, kann aber in
Ñuûerst seltenen FÑllen zu minimalen Redraw-Fehlern fÅhren, welche aber kurz-
fristig sind und nur an den RÑndern von Fenstern auftreten kînnen. Auûerdem muû
man fÅr diesen Fall den Mauszeiger mit maximaler Geschwindigkeit Åber den
Schirm bewegen, d.h. im normalen Anwendungsalltag kommt es zu keinerlei
Problemen.


WinLupe wurde mit Pure C 1.1 von Application Systems Heidelberg und meiner
eigenen, erweiterten Dialog-Library EnhancedGEM programmiert.


Hinweis : Die Infofiles der verschiedenen Versionen sind nicht kompatibel
          zueinander, d.h. es mÅssen bei jeder neuen Version die Einstellungen
          neu vorgenommen und danach ein Infofile erstellt werden.

          Wichtig :
          Benutzt man ein altes Infofile weiter, so kann es entweder zu
          einer Fehlermeldung oder AbstÅrzen kommen !!!


Geschwindigkeit der WinLupe : (alle Zeiten in ms)
=================================================

Die u.a. Zeiten wurden in der ST-High-Auflîsung gemessen, wobei das
WinLupe-Fenster so groû wie der Bildschirm war und die Option 'Fenster
runden' ausgeschaltet war. Dies bedeutet, daû die Zeiten die langsamsten
AnwendungsfÑlle darstellen, denn die Geschwindigkeit der Zoomroutinen
kommt erst bei aktivierter 'Fenster runden'-Option zur Geltung. Auch
profitieren sie sehr stark von einem Blitter, wodurch bei optimal
eingestellten Parametern der WinLupe und vorhandenem Blitter die
Geschwindigkeit bis zu 3 mal so hoch ist wie in den unten angegebenen
FÑllen. Bei einer Fenstergrîûe von etwa einem Viertel des Bildschirms
sind Vergrîûerungsraten von Åber 25 Hz auf einem ST ohne Blitter,
Åber 35 Hz mit Blitter und Åber 60 Hz auf einem MEGA/STE erreichbar.

Die WinLupe dÅrfte auf einem TT in ST-Auflîsungen etwa die zwei- bis
dreifache Geschwindigkeit des MEGA/STE erreichen. In TT-Auflîsungen
wird etwa die gleiche Geschwindigkeit erreicht, da das zu vergrîûernde
Datenvolumen entsprechend grîûer ist.


Vergrîûerungsmodus : VDI-Transform
----------------------------------

Vergrîûerung |      ATARI ST     |   MEGA/STE&NVDI   |
-------------+-------------------+-------------------+
             |  Zoom   |   All   |  Zoom   |   All   |
-------------+---------+---------+---------+---------+
      2      |    50   |   325   |   30    |   110   |
      3      |    40   |   275   |   25    |    95   |
      4      |    30   |   265   |   20    |    85   |
      6      |    25   |   250   |   20    |    80   |
      8      |    20   |   240   |   15    |    75   |
     16      |    20   |   260   |   15    |    85   |


Vergrîûerungsmodus : Standard
----------------------------------

Vergrîûerung |      ATARI ST     |   MEGA/STE&NVDI   |
-------------+-------------------+-------------------+
             |  Zoom   |   All   |  Zoom   |   All   |
-------------+---------+---------+---------+---------+
      2      |    50   |   280   |   30    |    60   |
      3      |    40   |   230   |   25    |    55   |
      4      |    30   |   210   |   20    |    45   |
      6      |    25   |   205   |   20    |    45   |
      8      |    20   |   185   |   15    |    40   |
     16      |    20   |   190   |   15    |    40   |

Zoom -> eigentliche Vergrîûerungsroutine
All  -> kompletter Bildaufbau

Die Vergrîûerungszeiten des Interleaved-Modus sind etwas schlechter
als die des Standard-Modus, hingegen sind die des Pixel-Packed-Modus
meistens um einige Faktoren besser, wobei man allerdings bedenken
muû, daû das Datenvolumen im Pixel-Packed-Modus um ein Vielfaches hîher
ist als in monochromem Auflîsungen.

Allgemein sind die optimierten Routinen ohne VDI-Transform besonders
dann sinnvoll, wenn weder ein Blitter oder Grafikprozessor noch NVDI
vorhanden sind. Ebenso hÑngt die Geschwindigkeit der Pixel-Packed-
Routinen stark von der Grafikkarte ab. Bei 2,4 oder 16 Farben sind die
Zeiten mit denen des Standard-Modus Ñquivalent, bei mehr Farben sind
teilweise entschieden hîhere Geschwindigkeiten mîglich.

Hier einige Beispiele :
ST-High/TT-High (evtl. mit Overscan) : Standard
monochrome Grafikkarten              : Standard
ST/TT-Low/Mid   (evtl. mit Overscan) : Interleaved
Falcon-True-Color-Modus              : Pixel-Packed
Grafikkarten mit mind. 4 Farben      : Pixel-Packed


Viel Spaû,
Criss ...


P.S: Falls jemand nicht weiû, wofÅr er die WinLupe gebrauchen kann, hier
     ein paar Einsatzgebiete :
        - Programme,bei denen es auf exakte Mauspositionierung ankommt, also
          z.B. Grafik- und Zeichenprogramme, aber auch DTP
        - öberprÅfung von eigenen Grafik- und Zeichenroutinen
        - Grafikprogramme, die keine eigene bzw. eine zu langsame
          oder unbrauchbare Lupenfunktion besitzen
        - genaues Betrachten von Grafiken/Icons,um diese fÅr eigene Ideen
          verwenden zu kînnen
