
CKBD Deluxe v1.4
G‚n‚rateur de caractŠres compos‚s et acc‚l‚rateur de souris flexible.


L'extension ultimative pour tout ordinateur … systŠme d'exploitation 
TOS de
Pascal Fellerich.

Ce programme est 'freeware'



Pr‚face
Le problŠme est bien connu: vous voulez taper un texte allemand sur un 
clavier fran‡ais. Ca va bien jusqu'au premier 'umlaut' - alors vous 
remarquerez que vous, ou plut“t votre ordinateur, manque de caractŠres.
ú	Suggestion num‚ro 1: installez une table de caractŠres pour 
clavier allemand. Mais dans ce cas votre clavier AZERTY sera transform‚ 
en clavier QWERTZ - si ‡a vous plaŒt, tant mieux.
ú	Suggestion num‚ro 2: Vous mettez les caractŠres suppl‚mentaires 
sur le clavier num‚rique. Cette solution donne des r‚sultats 
satisfaisants mais n'est pas trŠs pratique - il faut s'habituer … 
d‚placer la main droite sur le clavier num‚rique pour tout caractŠre 
sp‚cial.
ú	Suggestion du chef: CKBD Deluxe! Avec ce programme il est 
possible d'acc‚der tous les caractŠres contenus dans la police de 
caractŠres avec un systŠme logique et simple … la fois. En plus CKBD 
Deluxe peut ˆtre configur‚ de fa‡on qu'il est mˆme possible d'avoir des 
polices de caractŠres totalement diff‚rentes - par exemple ISO.

Comme vous vous servez d'un environnement graphique sur votre 
ordinateur vous utilisez ‚galement une souris. Mais l'interface pour la 
souris qui est dans TOS est trŠs simple, donc beaucoup de gens 
utilisent un acc‚lerateur de souris. En g‚n‚ral ces acc‚lerateurs sont 
des utilitaires simples et rudimentaires, ils n'offrent qu'une position 
d'acc‚l‚ration, l'acc‚l‚ration est trop vite ou trop lente, l'angle de 
mouvement de la souris est chang‚ et les souris a r‚solution ‚lev‚ 
deviennent incontr“lables. Avec CKBD Deluxe, cette histoire est finie. 
Il vous offre une acc‚l‚ration parfaite, modifiable et beaucoup 
d'autres options:
ú	Acc‚l‚ration douce et parfaite bas‚e sur un polyn“me du 
troisiŠme degr‚, avec une r‚solution interne de 0.004 pixel.
ú	L'angle de mouvement de la souris n'est pas falsifi‚.
ú	Les boutons de la souris peuvent ˆtre interchang‚s, parfait 
pour les gauchers.
ú	L'angle de mouvement de la souris peut ˆtre chang‚ d'un facteur 
constant.
ú	Ind‚pendant de la r‚solution d'‚cran avec adaptation 
automatique.
ú	Adaptable … des souris allant de 50 … 400 dpi.
ú	Editeur de courbe d'acc‚l‚ration comfortable


En general...
CKBD Deluxe est du 'freeware'. €a veut dire que le programme peut ˆtre:
ú	utilis‚ sans obligation de payement
ú	distribu‚ dans des collections DP et dans des BBS (Bulletin 
Board Services).
Il est par contre d‚fendu de:
ú	vendre ce programme
ú	modifier ce programme de quelque forme ce soit. Donc seulement 
l'archive autod‚comprimant CKBD_14.TOS peut ˆtre distribu‚.
CKBD Deluxe peut ˆtre distribu‚ avec du soft commerciel seulement avec 
permission de l'auteur. A pr‚sent ceci est seulement vrai pour Papyrus 
de R.O.M. Software. Si vous consid‚rez … distribuer CKBD avec votre 
programme contactez moi. Mon adresse:
Pascal Fellerich
45, rue des Genˆts
L-3482 Dudelange
Luxembourg

Si vous trouvez des erreurs dans CKBD ou si vous avez d'autres id‚es ou 
suggestions, n'hesitez pas … me contacter.


Installation
Ce logiciel consiste de 3 piŠces.
ú	Le programme TSR (Terminate and Stay Resident) appel‚ CKBD.PRG.
ú	Le module CPX COMPOSE.CPX qui sert … configurer le clavier.
ú	Le module CPX MOUSE.CPX qui sert … configurer la souris.
Le programme resident CKBD.PRG doit ˆtre copi‚ das le r‚pertoire AUTO 
sur votre disque dur. Si vous utilisez un programme d'interfa‡age pour 
clavier MF/2 faites attention … ce que CKBD.PRG est lanc‚ aprŠs. Les 
modules CPX ne peuvent ˆtre utilis‚s qu'avec XCONTROL(**	Si vous 
n'avez pas encore ce nouveau panneau de contr“le essayez de l'obtenir 
chez un revendeur Atari. Xcontrol fonctionne comme ACC et PRG … partir 
de TOS 1.4.**) d'Atari. Si vous avez install‚ XCONTROL il vous ne reste 
que de copier les deux modules CPX dans le r‚pertoire CPX. Relancez 
alors l'ordinateur pour que CKBD soit activ‚. C'est d‚j… tout!

Avant de continuer:
ú	Avec l'option ®Langue¯ il est possible de changer le langange 
dans le CPX!
ú	Si vous avez configur‚ ®… mort¯ l'acc‚lerateur de souris 
pressez la touche ALT pour d‚sactiver l'acc‚l‚rateur temporairement.


Manuel d'utilisation pour COMPOSE.CPX
Le programme r‚sident CKBD.PRG est install‚ dans le systŠme et peut 
ˆtre configur‚ comme vous voulez par des deux modules CPX. Commencons 
par COMPOSE.CPX:
L'id‚e fondamentale est de construire les caractŠres sp‚ciaux a partir 
de deux caractŠres normaux, a savoir caractŠre de base(**	
normalement des caractŠres de l'alphabet latin.**) et caractŠre 
auxiliaire(**	normalement des accents et autres signes de 
'd‚coration' autour du caractŠre principal.**). Un '„' par exemple est 
pas plus qu'un 'a' avec des guillemets en-dessus. CKBD Deluxe offre en 
total cinq m‚thodes diff‚rentes de g‚n‚ration de caractŠres:
ú	Compose
ú	Deadkey
ú	Extkey
ú	ALT-<nnn>
ú	changement du layout du clavier


Compose
Cette m‚thode s'appelle Compose Character d'aprŠs le concept de DEC(**	
Digital Equipment Corporation, fabricant des ordinateurs VAX**). Ici 
vous tapez d'abord la touche 'Compose Character', ensuite vous entrez 
les deux caractŠres. Alors vous obtenez le nouveau caractŠre. Donc: 
Compose, [a], [e]  donne [‘]. Pour l'Atari ceci se pr‚sente un peu 
diff‚remment: tapez ALTERNATE(**	Sur les terminaux du type VT200 
il y a au c“t‚ gauche de la barre d'espace, l… o— l'Atari a la touche 
ALT, la touche 'Compose Character'.**) comme s'il s'agissait d'une 
touche de caractŠre quelconque, [a], ensuite [e]  donne alors [‘]. Si 
vous pressez ALT trop long ou avec une autre touche CKBD ne la 
reconnaŒt pas comme 'Compose'. Ceci ‚vite que la fonction Alternate 
soit d‚rang‚e - point trŠs important pour les programmes qui utilisent 
des combinations avec alternate.
Si une s‚quence … ‚t‚ initi‚e avec succŠs ceci vous sera signal‚ avec 
un clic - le mˆme que le clic du clavier. Ce clic s'entend toujours, 
mˆme si vous avez inactiv‚ le clic normal.
Si une s‚quence ‚tait invalide ('z' et 'x' ne donne pas de caractŠre 
compos‚) vous entendez le fameux 'system bell'.
Une s‚quence lanc‚e peut ˆtre termin‚e seulement avec ESC ou BackSpace 
ou toute autre touche qui ne g‚nŠre pas de code ASCII - comme par 
exemple les touches curseur, les touches de fonction etc. L'ordre des 
deux caractŠres … combiner ne joue pas de r“le, mais cette propri‚t‚ 
peut ˆtre chang‚e … votre gr‚.

CPX: L'option 'Compose' met en marche ou arrˆte la fonction. Le bouton 
'Modifier' apelle un autre dialogue qui vous donne l'occasion de 
modifier d'autres paramŠtres:

mode de compose:
Change entre le mode DEC VT200 et MultiChar. Dans le mode DEC toute 
s‚quence de composition est finie aprŠs deux charactŠres. En mode 
MultiChar par contre une s‚quence de composition n'est arrˆt‚e que si 
une combination est reconnue invalide. De cette fa‡on il est possible 
d'avoir des combinations en s‚rie, donc: Compose, [o], ['] donne [¢], 
et alors [`] donne [“]. Mais avant que vous essayez cette combination: 
elle n'existe pas dans cette forme das les tables standard. Vous devez 
cr‚er uner table sp‚ciale.

ordre de composition:
En g‚n‚ral l'ordre des deux caractŠres … combiner n'est pas important 
parce que l'utilisateur a lanc‚ le mode compose volontairement, et 
alors il veut avoir le mˆme r‚sultat s'il tape [o], ["] ou bien ["], 
[o]. Pour le cas o— vous avez d‚fini des caractŠres diff‚rents pour ces 
deux cas il est important de fixer l'ordre des caractŠres.


Deadkey
Lorsque vous entrez un texte plus long vous remarquerez que Compose 
Character fonctionne assez bien mais qu'il est pas pratique de taper 
toujours sur la touche ALT. C'est pourquoi j'ai impl‚ment‚ la fonction 
Deadkey. Alors quelque touches sont d‚finies comme caractŠres morts - 
il s'agit des touches qui g‚nŠrent les 'caractŠres auxiliaires' comma 
par exemple ['], [`], [^] et ["]. Si vous tapez une de ces touches rien 
ne se passe. Mais CKBD essaie de combiner ce caractŠre avec celui que 
vous tapez le suivant. Si cette combination est valide, comme par 
exemple [^] et [o] vous obtenez  "“". Si la combination est invalide 
les deux caractŠres sont retourn‚s, par exemple [^] et [x] donnent 
"^x". Pour avoir le caractŠre mort lui-mˆme, il suffit de taper deux 
fois sur cette touche ou bien de taper un espace aprŠs une telle 
touche. En tout cas, essayez de jour un peu avec cette fonction, parce 
qu'il faut se familiariser avec ce systeme comme il est toujours actif, 
contrairement … Compose qui doit ˆtre lanc‚ volontairement.
CPX: Le bouton 'Deadkey' met en marche ou arrˆte la fonction. Avec le 
bouton 'Modifier' vous arrivez dans un deuxiŠme dialogue qui vous donne 
la possibilit‚ de d‚terminer vous-mˆme les caractŠres qui seront 
interpr‚t‚s comme caractŠres morts. Mais attention - tous les 
caractŠres sont accept‚s, donc le systŠme est totalement … vous.



ExtKey
Le proc‚d‚ connu du programme 'EXTKEY' par Alex Esser et de 
'JAMES.ACC'. L'id‚e est toujours la mˆme: un caractŠre sp‚cial se 
compose d'un caractŠre de base et un caractŠre auxiliaire. Avec Extkey 
vous entrez d'abord le caractŠre de base et ensuite le caractŠre 
auxiliaire avec le touche Control enfonc‚e. Alors le caractŠre de base 
dispara“t et est remplac‚ par le caractŠre compos‚. Donc: [o] et 
CONTROL-[^] donne [“]. Avec Extkey il faut toujours respecter l'ordre 
caractŠre de base, caractŠre auxiliaire. Il n'est donc pas possible de 
produire un [–] avec la s‚quence [^], control-[u]. Comme ‡a il est 
parfaitement possible d'utiliser des commandes come control-U(**	
^U = fermer une fenˆtre dans des applications GEM.**) tout en gardant 
la fonctionnalit‚ ExtKey. Mais il faut aussi remarquer que la fonction 
ExtKey est la plus incompatible car GEM ne sait pas d‚tecter l'‚tat des 
touches Shift/Control/Alt avec la pr‚cision requise. Essayez!


ALT-<nnn>: DOS-Matic...
Pour les amis de MS-DOS: avec la touche ALT enfonc‚e tapez le code 
ASCII que vous d‚sirez sur le clavier num‚rique. Comme cette fonction 
est aussi int‚gr‚e dans le TOS 2.06/3.06 il est parfaitement normal 
qu'elle ne se laisse pas d‚activer dans le CPX parce que TOS reprend si 
CKBD ne r‚agit pas.


Changement du layout du clavier
Mˆme si cette m‚thode pr‚sente des inconv‚nients elle peut eatre utile 
de temps en temps. Avec le module CPX il est possible de charger des 
fichiers du type '*.KBD' ainsi que '*.CKB'. Les fichiers du type KBD 
ont exactement 384 octets et contiennent les tables de d‚finition pour 
le clavier en mode normal, shift et capslock. Il existent des 
programmes en domaine public qui sont … mˆme de cr‚er et d'‚diter ces 
fichiers.
Les fichiers du type CKB sont plus flexibles et contiennent les trois 
tables mentionn‚es ci-dessus ainsi qu'une table avec les combinations 
possibles, et en plus quelques informations auxiliaires comme par 
exemple le nom de la table et des donn‚es de configuration. Comme il 
n'existe pas d'‚diteur pour ce type de tables … pr‚sent j'ai inclus les 
sources en assembleur de la table 'ISO'.
Si une table a ‚t‚ charg‚e il faut d‚terminer la validit‚ pour cette 
table. Pourquoi ‡a? Imaginez qu'on vous avez un fichier CKB qui 
contient des combinations int‚ressantes, mais la table pour le clavier 
a ‚t‚ faite pour un clavier allemand. Alors vous mettez la validit‚ sur 
'Compose' seul. Ainsi le layout de votre clavier reste inchang‚. Mais 
normalement vous avez la validit‚ sur  'Clavier & Compose'.


Le reste du module CPX...
La plupart des fonctions du module CPX ont ‚t‚ expliqu‚s. Ici encore 
quelques d‚tails:
ú	Dans la ligne d'informations en bleu l'identification du 
programme r‚sident apparaŒt. Donc "CKBD Deluxe v1.4". Un clic sur cette 
ligne fait apparaŒtre un message avec le num‚ro de version du CPX.
ú	Avec le pop-up sous le titre 'Langue' vous pouvez changer la 
nationalit‚ des textes dans le CPX. Ceci n'affecte que le CPX lui-mˆme. 
AprŠs avoir fait votre choix n'oubliez pas de sauver vos pr‚f‚rences!
ú	'Sauver' ne sauvegarde les informations actuelles que dans le 
CPX. Si vous d‚sirez avoir un setup modifi‚ permanent vous devez garder 
Xcontrol avec le CPX correspondant comme accessoire.


Manuel d'utilisation de MOUSE.CPX
Il y a un tas d'acc‚l‚rateurs de souris mais jusqu'… pr‚sent il n'y 
avait pas d'acc‚l‚rateur simple … utiliser mais quand mˆme 
super-flexible pour l'Atari(**	Un tel acc‚l‚rateur n'existe mˆme pas 
pour MacIntosh ou PC!...**). Mais mainenant il y a CKBD Deluxe!
Si vous invoquez MOUSE.CPX vous arrivez dans le menu principal, page 
num‚ro 1. Ici vous trouvez un pop-up qui permet d'activer 
l'acc‚l‚rateur ou bien de le d‚sactiver.  En-dessous de cette option 
vous trouvez un autre menu pop-up avec qui vous pouvez changer les 
boutons de la souris - ce qui est id‚al pour les gauchers. Ce 
changement est actif mˆme si l'acc‚l‚rateur est d‚sactiv‚!
Le champ rotation: 0ø d‚termine la rotation du repŠre de la souris. Si 
vous avez tendance … tenir la souris un peu tourn‚ contre le sens des 
aiguilles d'une montre vous pouvez compenser cette tendance simplement 
en donnant une valeur n‚gative pour la rotation. Personellement j'ai 
les meilleurs r‚sultats si je travaille avec un angle n‚gatif de -6 … 
-7 degr‚s.
Le champ r‚solution: 100 dpi d‚termine la r‚solution de la souris. La 
souris standard de l'Atari a une r‚solution d'environ 100 dpi. Si vous 
utilisez une souris avec une r‚solution ‚lev‚e vous devez changer cette 
valeur, sinon la courbe d'acc‚l‚ration change totalement. Si vous 
voulez d‚terminer la r‚solution de votre souris proc‚dez comme suit:
ú	Desactivez l'acc‚l‚rateur.
ú	Positionnez le pointeur graphique au bord gauche de l'‚cran.
ú	Guidez la souris … l'aide d'un lineal jusqu'au bord droit de 
l'‚cran.
ú	Multipliez le nombre de pixel en direction horizontale (pour 
ST-high et TT-mid 640) avec 2.54 et divisez ce nombre par la distance 
parcourue par la souris en cm. Le resultat est alors la r‚solution de 
la souris en dpi.
Le bouton ‚diteur de polyn“me active la page d'‚dition du polyn“me 
d'acc‚l‚ration. Ici vous trouvez la repr‚sentation graphique du 
polyn“me y=axþ+bxý+cx ainsi que les trois facteurs correspondants. Vous 
pouvez entrer les facteurs directement et les essayer en cliquant sur 
le champ d'‚dition graphique. Mais vous pouvez aussi d‚placer les 
quatre points de repŠre sur la courbe. Alors le CPX calcule le polyn“me 
qui passe par les quatre points et vous donne les facteurs n‚cessaires. 
Comme cette m‚thode produit des facteurs un peu sp‚ciales la courbe 
r‚sultante n'est pas install‚ directement. Vous devez d'abord cliquer 
dans le champ d'‚dition pour pouvoir tester la nouvelle 
caract‚ristique. Ou bien vous quittez le dialogue avec OK ou vous 
fermez la fenˆtre de Xcontrol. Si la souris est devenue incontr“lable 
il est possible de d‚sactiver l'acc‚l‚rateur en enfon‡ant la touche ALT.
Ensuite le pop-up presets vous offre cinq diff‚rentes courbes 
d'acc‚l‚ration pr‚d‚finies.
Retournons au menu principal: Il y a encore plus de trucs … configurer! 
Avec un clic sur le symbole de souris … gauche de la fenˆtre vous 
entrez dans la page numero deux du menu principal. L… vous trouvez le 
champ Pixel w/h = 256:256. Ce rapport repr‚sente le rapport largeur sur 
hauteur d'un pixel de l'‚cran. Pour ST-High, ST-Low, TT-High et TT-Mid 
les pixel sont carr‚s, donc le rapport est ‚gal … 1:1 ce qui correspond 
… 256:256. En ST-Mid vous avez un rapport 2:1, donc 256:128!
Ensuite vous avez le champ r‚solution: 71 dpi. Comme il y a un symbole 
d'‚cran … gauche  il devrait ˆtre clair qu'ici la r‚solution de l'‚cran 
est donn‚e. Pour ST-Low elle est d'environ 25 dpi tandis que dans les 
autres r‚solutions elle est d'environ 70 dpi, la valeur exacte 
d‚pendant bien s–r du moniteur utilis‚. Quand ces deux valeurs sont 
exactes, CKBD Deluxe peut r‚aliser une caract‚ristique d'acc‚l‚ration 
ind‚pendante de la r‚solution. Mais comme il est fastidieux de modifier 
ces valeurs aprŠs tout changement de r‚solution vous avez l'option 
auto-d‚tection. Avec cette option le CPX demande au systŠme 
d'exploitation les valeurs exactes et les passe … CKBD Deluxe.
En dernier lieu il ne me reste qu'… vous indiquer le pop-up Langue avec 
lequel vous pouvez d‚terminer la langue utilis‚e dans le CPX. Les 
autres boutons sont standard et ne n‚cessitent aucune explication.


Remarques...
Avant de fermer ce manuel lisez encore les remarques suivantes:
ú	Il est recommand‚ d'‚liminer ou au moins de d‚sactiver des 
utilitaires qui ont la mˆme fonctionnalit‚ que CKBD Deluxe. Ainsi vous 
‚vitez des effets secondaires comme par exemple une surcharge de 
l'interruption ikbdsys. Eliminez donc MACCEL & Co!
ú	Pour que vous puissiez utiliser la fonction Compose, Extkey et 
Deadkey plus effectivement il est recommand‚ de regarder un peu les 
tables en annexe. Ils montrent toutes les combinations possibles.
ú	Il y a toujours des programmes qui n'acceptent pas des 
caractŠres g‚n‚res par CKBD Deluxe. Ceci est alors un problŠme du 
programme en question, et non pas de CKBD Deluxe.
ú	Le panneau de contr“le modulaire XCONTROL n‚cessite au moins un 
TOS 1.4.
ú	CKBD.PRG tourne sur toutes les versions de TOS. Comme 
l'interface entre les CPX et CKBD est bien defini et document‚ il 
devrait ˆtre facile d'‚crire un accessoire de configuration pour CKBD...
ú	Si ce programme vous pla“t, n'hesitez pas de m'informer! (par 
une carte postale par exemple....)


Cas speciaux...
Il n'existe pas de programme sans problŠmens ou incompatibilit‚s! Par 
exemple la fonction auto-d‚tection du MOUSE.CPX ne fonctionne pas 
correctement avec des TOS plus anciens - simplement parce que le VDI de 
ces versions TOS ne donne pas d'informations exactes!! Considerons par 
exemple les trois r‚solutions standard du ST:







On voit que le TOS du TT - et peut-ˆtre aussi le TOS 2.06 - donne des 
valeurs correctes, au moins pour le rapport largeur sur hauteur des 
pixel. Il est clair que le systŠme d'exploitation est incapable de 
donner des valeurs exactes pour la r‚solution de l'‚cran comme il ne 
sait pas la grandeur de l'‚cran utilis‚.


Histoire:
Compose-CPX:
v1.01:	(1.1.1996) 3D-look, cosmetics...
v1.00:	(26.3.1994) nouvelle surface d'utilisation, nouveau code!
v0.8:	version sans erreurs v0.7:	ne trouve pas les pathnames
v0.1:	test, Motto: my first CPX.

Mouse-CPX:
v1.01:	(1.1.1996) 3D-look, cosmetics...
v1.00:	(26.3.1994) nouveau CPX, premiŠre version

TSR:
v1.4:	(janvier 1996)
		ú NVDI 3 Ïjumping mouseÐ fix
		ú nouvelles tables de compose pour NVDI 3
		ú flag sp‚cial 'order-sensitiveness' pour les tables
		ú modifications dans Deadkey
		ú Autoload ‚limin‚ (TSR plus petit)
v1.3:	Modification dans Deadkey (suggestion de M. Papyrus)
v1.2:	(mars 1994) Version officielle avec acc‚l‚rateur de souris
v1.1:	test, tout … fait autre chose....
v1.0:    version sans erreurs de janvier 1992
v0.9:	sous TOS 1.0..1.4 le systŠme se plante de temps en temps si on 
touchait ALT. Cause: une erreur (code malprogramm‚) dans les 
function-dispatcher de TOS. Avec KAOS 1.4.x et TOS 1.6 pas de problŠmes.
v0.8:	Pointeurs mal initialis‚s.
v0.7:	premiŠre version officielle.

_____________________________________

½1992-1996 by Pascal Fellerich
