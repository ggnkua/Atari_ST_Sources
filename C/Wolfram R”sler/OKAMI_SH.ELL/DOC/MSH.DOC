
	===============================================

	     OKAMI SHELL VERSION 1.0 - MICROSHELL

	===============================================
		      Stand: 25.03.90


Zum Lieferumfang der Okami-Shell gehîrt eine Mini-Shell, deren Aufgabe
es ist, die Hauptshell aufzurufen. Die Notwendigkeit dazu ergibt sich
aus dem folgenden Dilemma:

1. Damit von der Shell aus GEM-Programme gestartet werden kînnen, muû
   die Shell vom Desktop aus als PRG gestartet werden.
2. Die Shell lÑdt die Datei profile nur dann, wenn ihr als Parameter
   ein Minuszeichen Åbergeben wird (Login-Shell, wie in Unix).
3. Beim Aufruf vom Desktop als PRG ist die Eingabe eines Parameters nicht
   vorgesehen
4. Also kann man keine Login-Shell aufrufen, von der der Start von GEM-
   programmen mîglich ist.
   
Zu diesem Zweck gibt es die Microshell, die, wenn sie als PRG aufgerufen
wird und dann ihrerseits die Okami-Shell aufruft, den Start von GEM-Pro-
grammen ermîglicht.

Die Microshell erfÅllt allerdings nicht nur diesen Zweck, sondern sie ist
ein Werkzeug zur Kontrolldatei-gesteuerten AusfÅhrung mehrerer Programme
mit jeweiligen Parametern. Dazu wird eine Datei angelegt, in der die Namen
der aufzurufenden Programme und die zu Åbergebenden Parameter angefÅhrt
sind.

Die Microshell befindet sich in der Datei msh.tos. Durch Umbenennen oder
Kopieren nach msh.prg ist es mîglich, GEM-Programme zu starten.
Der Quellcode der Microshell gehîrt zum Lieferumfang.

Nach dem Start der Microshell als MSH.TOS oder MSH.PRG wird die Kontroll-
datei MSH.INF benutzt. Wenn die Microshell als MSH.TTP aufgerufen wird,
ist die Eingabe des Namens einer Kontrolldatei mîglich.

Die einzelnen Zeilen der Kontrolldatei haben folgende Bedeutung:

1) Leerzeilen und Zeilen, die mit einem '#' (Doppelkreuz) beginnen, gelten
   als Kommentarzeilen.
2) Wenn eine Zeile nur aus einem Pluszeichen besteht, wird der Kommentar-
   Modus eingeschaltet. Im Kommentarmodus wird der Name und die Parameter
   jedes aufgerufenen Programmes auf dem Bildschirm ausgegeben. Nach dem
   Start der Microshell ist der Kommentarmodus eingeschaltet.
3) Wenn eine Zeile nur aus einem Minuszeichen besteht, wird der Kommentar-
   modus abgeschaltet.
4) Wenn die Zeile aus dem Wort echo, gefolgt von einem Leerzeichen und einem
   beliebigen String, besteht, so wird der String auf dem Bildschirm aus-
   gegeben.
5) Alle anderen Zeilen werden als Kommandozeilen der Form
   Name Parameter
   interpretiert. Es wird die Datei Name aufgerufen. Der String Parameter
   wird als Parameter Åbergeben. Durch das Betriebssystem ist die LÑnge
   des Parameterstrings auf 39 Zeichen beschrÑnkt.
   
Beispiel: die Kontrolldatei zum Start der Okami-Shell:




# Microshell Kontrolldatei fÅr Okami-Shell

echo Aufruf der Okami-Shell
-
sh.ttp -
sh.ttp cursor -v




   
Es wird die Okami-Shell als Login-Shell (mit dem Parameter "-") aufgerufen.
Anschlieûend wird die Shell nochmals aufgerufen, um den Cursor abzuschalten.
Vor dem Aufruf der Shell wird die Meldung "Aufruf der Okami-Shell" auf den
Bildschirm geschrieben.



Die Microshell kann auch anstelle des Auto-Ordners benutzt werden.
Dazu kopiert man sich alle Programme, die beim Systemstart geladen werden
sollen, in einen eigenen Ordner auf der Diskette, z.B. in den Ordner
a:\startup. In den eigentlichen Auto-Ordner kopiert man nur die Datei
msh.prg. Unter dem Namen a:\msh.inf wird eine Datei angelegt, die die
Namen der zu startenden Programme in der gewÅnschten Reihenfolge enthÑlt.
(Im einfachsten Fall erzeugt man diese Datei von der Okami-Shell aus
mit dem Kommando:
	ls a:\startup\*.prg >a:\msh.inf
)
Auûerdem kann die inf-Datei Kommentare und echo-Zeilen erhalten.
NatÅrlich ist von der Microshell aus auch der Aufruf von Programmen
aus beliebigen anderen Ordnern mîglich.
WICHTIG: die Datei msh.inf muû im Wurzelverzeichnis von a: liegen und
nicht im Auto-Ordner, da beim Systemstart das Wurzelverzeichnis das
aktuelle Directory ist, auch bei der AusfÅhrung der Programme im Auto-
Ordner.

