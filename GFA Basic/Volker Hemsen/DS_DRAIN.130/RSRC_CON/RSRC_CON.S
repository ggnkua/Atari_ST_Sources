; RSRC_CONV dient zum Einbinden einer Resource-Datei in ein ST-Pascal plus
; Programm. Dieser assemblierte Code wird als Linkdatei eingefgt.

; Aufruf:  function rsrc_conv(mode:integer):integer;
;            external:

;      1.  mode=0
;      2.  irgendeinen AES-Aufruf in Pascal t„tigen
;      3.  mode><0


                GLOBAL MAKE_POINTER
MAKE_POINTER::  movea.l (SP)+,A5        ;verwandelt einen dialog_ptr
                move.l  (SP)+,D0        ;in einen 'normalen' Pointer
                jmp     (A5)            ;Pascal l„t gren!!!

                GLOBAL RSRC_CONV
RSRC_CONV::     movea.l (SP)+,A5        ;Rcksprungadresse
                move.w  (SP)+,D0        ;mode
                tst.w   D0
                bne.s   second
                pea     fir(PC)
                bra.s   supexec

second:         movea.l global(PC),A0   ;Adresse des GLOBAL-Feldes
                move.l  #rs_trees,10(A0) ;Resource anmelden
                pea     sec(PC)
supexec:        move.w  #38,-(SP)
                trap    #14
                addq.l  #6,SP
                move.w  rsh_nobs,D0
                jmp     (A5)

fir:            move.l  $88.w,old       ;alten Vektor merken
                move.l  #rout,$88.w     ;neuen Vektor setzen
                rts

sec:            move.l  old(PC),$88.w   ;alten Vektor wieder einsetzen
                rts

rout:           movea.l D1,A0           ;alternativer AES-Aufruf
                move.l  4(A0),global    ;GLOBAL-Pointer merken
                rte

old:            DS.L 1
global:         DS.L 1


; und jetzt die vom Desert Drain umgewandelten Resourcen



;Desert Drain V1.20   68000 Disassembler  09.12.1991 15:27:46
;FILE: AES_INST.RSC   1258 Bytes
;TEXT:      0   $00000
;DATA:   1258   $004EA
;BSS:       0  $000000
;SYMBOLE: 38
                DATA
rsh_vrsn:       DC.B $00,$00
rsh_object:     DC.B $03,'Ζ'
rsh_tedinfo:    DC.B $03,''
rsh_iconblk:    DC.B $03,'l'
rsh_bitblk:     DC.B $03,'^'
rsh_frstr:      DC.B $00,$00
rsh_string:     DC.B $00,'$'
rsh_imdata:     DC.B $00,'|'
rsh_frimg:      DC.B $00,$00
rsh_trindex:    DC.B $04,'ζ'
rsh_nobs:       DC.B $00,$0C
rsh_ntree:      DC.B $00,$01
rsh_nted:       DC.B $00,$02
rsh_nib:        DC.B $00,$01
rsh_nbb:        DC.B $00,$01
rsh_nstring:    DC.B $00,$00
rsh_nimages:    DC.B $00,$00
rsh_rssize:     DC.B $04,'κ'
rs_st0:         DC.B '______',$00
rs_sm0:         DC.B 'Gebe ein: ______',$00
rs_ss0:         DC.B 'XXX999',$00
rs_o2:          DC.B 'Icon:',$00
rs_it0:         DC.B $00
rs_o4:          DC.B 'Image:',$00
rs_o6:          DC.B 'EXIT',$00
rs_o9:          DC.B 'Radio 1',$00
rs_o10:         DC.B 'Radio 1',$00
rs_st1:         DC.B 'Dies ist ein Text!',$00
rs_sm1:         DC.B $00
rs_ss1:         DC.B $00,$00
rs_im0:         DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,'8'
                DC.B $00,$00,$00,$00,$00,'8',$00,$00,$00,$00,$00
                DC.B '8',$00,$00,$00,$00,$00,'|',$00,$00,$00,$00
                DC.B $00,'|',$00,$00,$00,$00,$00,'ώ',$00,$00,$00
                DC.B $00,$00,'ώ',$00,$00,$00,$00,$01,'',$00,$00
                DC.B $00,$00,$01,'',$00,$00,$00,$00,$01,'',$00
                DC.B $00,$00,$00,$00,'ώ',$00,$00,$00,$00,$01,''
                DC.B $00,$00,$00,$00,$03,'€',$00,$00,$00,$03
                DC.B '€',$00,$00,$00,$03,'€',$00,$00,$00,$03
                DC.B '€',$00,$00,$00,$07,'ΐ',$00,$00,$00,$07
                DC.B 'ΐ',$00,$00,$00,$07,'οΐ',$00,$00,$00,$07
                DC.B 'ΐ',$00,$00,$00,$1F,'π',$00,$00,$00,$1F
                DC.B 'π',$00,$00,$00,$1F,'π',$00,$00,$00,$0F
                DC.B 'ΰ',$00,$00,$00,'?ψ',$00,$00,$00,'?ψ',$00
                DC.B $00,$00,'?ψ',$00,$00,$00,$1F,'π',$00,$00
                DC.B $00,'ό',$00,$00,$00,'~|ό',$00,$00,$00,'x'
                DC.B '|<',$00,$00,$00,$00,'|',$00,$00,$00,$00
                DC.B $00,'|',$00,$00,$00,$00,$00,'|',$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00
rs_id0:         DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$10,$00,$00,$00,$00,$00
                DC.B $10,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00
                DC.B $00,'(',$00,$00,$00,$00,$00,'(',$00,$00,$00
                DC.B $00,$00,'T',$00,$00,$00,$00,$00,'|',$00,$00
                DC.B $00,$00,$00,'',$00,$00,$00,$00,$00,'(',$00
                DC.B $00,$00,$00,$00,'D',$00,$00,$00,$00,$00,'D'
                DC.B $00,$00,$00,$00,$00,'’',$00,$00,$00,$00,$01
                DC.B '«',$00,$00,$00,$00,$00,'Δ',$00,$00,$00,$00
                DC.B $01,'’',$00,$00,$00,$00,$01,'-',$00,$00,$00
                DC.B $00,$02,'Δ€',$00,$00,$00,$01,'‚',$00,$00
                DC.B $00,$00,$01,'',$00,$00,$00,$00,$02,'’€',$00
                DC.B $00,$00,$0D,')`',$00,$00,$00,$01,'E',$00
                DC.B $00,$00,$00,$03,'ƒ€',$00,$00,$00,$06,'’ΐ'
                DC.B $00,$00,$00,$19,')0',$00,$00,$00,$02,'ξ€'
                DC.B $00,$00,$00,$07,')ΐ',$00,$00,$00,$0C,'(`'
                DC.B $00,$00,$00,'0(',$18,$00,$00,$00,$00,'(',$00
                DC.B $00,$00,$00,$00,'(',$00,$00,$00,$00,$00,'('
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00
rs_bb0:         DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,'?'
                DC.B '€',$00,$00,$00,$01,'π',$00,$00,$00,$07
                DC.B 'ΐ|',$00,$00,$00,$1E,$00,$0F,$00,$00,$00
                DC.B '8',$00,$03,'€',$00,$00,'p',$00,$00,'ΐ',$00
                DC.B $00,'x',$00,$08,'ΐ',$00,$00,'ά',$00,$10,'`'
                DC.B $00,$00,'Ξ',$00,$0A,'`',$00,$01,'‡',$00,')'
                DC.B '0',$00,$01,'ƒ€',$15,'0',$00,$01,'ΐ',$0E
                DC.B '0',$00,$03,$00,'ΰ',$02,$18,$00,$03,$00,'p'
                DC.B $00,$18,$00,$03,'?υ',$18,$00,$03,'8',$1C
                DC.B $1F,$18,$00,$03,'?υ',$18,$00,$03,$00,$07
                DC.B $00,$18,$00,$03,$00,$03,'€',$18,$00,$01,'€'
                DC.B $01,'ΐ0',$00,$01,'€',$00,'ΰ0',$00,$01,'€'
                DC.B $00,'p0',$00,$00,'ΐ',$00,'8`',$00,$00,'ΐ'
                DC.B $00,$1C,'`',$00,$00,'`',$00,$0E,'ΐ',$00,$00
                DC.B '`',$00,$07,'ΐ',$00,$00,'8',$00,$03,'€',$00
                DC.B $00,$1E,$00,$0F,$00,$00,$00,$07,'ΐ|',$00
                DC.B $00,$00,$01,'π',$00,$00,$00,$00,'?€',$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B $00,$00,$00,$00,$00,$00,$00,$00,$00
rs_o5:          DC.L rs_bb0
                DC.B $00,$06,$00,')',$00,$00,$00,$00,$00,$01
rs_o3:          DC.L rs_im0
                DC.L rs_id0
                DC.L rs_it0
                DC.B $10,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
                DC.B '0',$00,')',$00,$00,$00,$18,$00,'0',$00,$08
rs_o1:          DC.L rs_st0
                DC.L rs_sm0
                DC.L rs_ss0
                DC.B $00,$03,$00,$06,$00,$00,$11,'€',$00,$00,''
                DC.B '',$00,$07,$00,$11
rs_o11:         DC.L rs_st1
                DC.L rs_sm1
                DC.L rs_ss1
                DC.B $00,$05,$00,$06,$00,$00,$11,$00,$00,$00,''
                DC.B '',$00,$13,$00,$01
rs_t0:          DC.B '',$00,$01,$00,$0B,$00,$14,$00,$00,$00
                DC.B $10,$00,$02,$11,$00,$00,$00,$00,$00,$00,'*'
                DC.B $00,$0D,$00,$02,'',$00,$1D,$00,$08,$00
                DC.B $00
                DC.L rs_o1
                DC.B $00,$02,$00,$01,$00,$10,$00,$01,$00,$03,''
                DC.B '',$00,$1C,$00,$00,$00,$00
                DC.L rs_o2
                DC.B $00,$05,$00,$04,$00,$05,$00,$01,$00,$04,''
                DC.B '',$00,$1F,$00,$00,$00,$00
                DC.L rs_o3
                DC.B $00,$0D,$00,$04,$00,$06,$09,$02,$00,$05,''
                DC.B '',$00,$1C,$00,$00,$00,$00
                DC.L rs_o4
                DC.B $00,$16,$00,$04,$00,$06,$00,$01,$00,$06,''
                DC.B '',$00,$17,$00,$00,$00,$00
                DC.L rs_o5
                DC.B $00,$1C,$00,$04,$00,$06,$09,$02,$00,$07,''
                DC.B '',$00,$1A,$00,$07,$00,$00
                DC.L rs_o6
                DC.B $00,$03,$00,$0B,$00,$08,$00,$01,$00,$08,''
                DC.B '',$00,$1B,$00,$00,$00,$00,'ZύρA',$00
                DC.B $12,$00,$08,$00,$09,$00,$04,$00,$0A,$00,$09
                DC.B $00,$09,$00,$14,$00,$00,$00,$00,$00,$00,$11
                DC.B $00,$00,$1D,$00,$08,$00,$0A,$00,$03,$00,$08
                DC.B '',$00,$1A,$00,$11,$00,$00
                DC.L rs_o9
                DC.B $00,$00,$00,$01,$00,$08,$00,$01,$00,$0B,''
                DC.B '',$00,$1A,$00,$11,$00,$01
                DC.L rs_o10
                DC.B $00,$1D,$00,$08,$00,$08,$00,$01,$00,$00,''
                DC.B '',$00,$15,$00,' ',$00,$00
                DC.L rs_o11
                DC.B $00,$15,$00,$02,$00,$12,$00,$01
rs_trees:       DC.L rs_t0
                END
