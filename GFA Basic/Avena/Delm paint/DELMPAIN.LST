'
'              >>> dELMPAinT v4.0û 1994 by mr.coke of avena <<<
'
'
'
'                                  + los +
'
'       OOOooOooOo   OOooOooOOO  ooOOOoOoOo   ooOooooooOo OOOo     oooo
'      ooooooooooOO oOooooOoooOO OooOooooooo  ooooooooooo oOOOo    oOoo
'      OooO    Oooo OooO    OOOo oooo   ooooo oooo        oooooo   oooo
'      oOOO         ooOo    oOoo OooO    ooOO OooOOOo     OoOo OO  oooo
'      Oooo         oooo    oooo oooO    oOoo OOoOooo     oOoo  oo ooOo
'      OOOo    oooo oooo    oooo ooOo   OOooo oooo        oOOO   Oooooo
'      oooooooooOOO OOoOOooooooO OOOoooooooo  ooooooOooOo OOoo    OOOoo
'       ooooooOOOO   OOOOoooooo  OoOoOOoooo   ooOOOOooooo oooo     oooo
'
'                              !!! dU sAU !!!
'
'
' ___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___
'    \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//
'
'
'            ____  _____    _____  _________  ____    _____  ____
'           /    \ \    \  /    /\/    ____/\/    \  /    /\/    \
'          /      \ \    \/    / /    /___ \/      \/    / /      \
'         /        \ \        / /    ____/\/            / /        \
'        /    /\    \ \      / /    /___ \/    /\      / /    /\    \
'       /____/ /\____\ \____/ /________/\/____/ /\____/ /____/ /\____\
'       \____\/  \____\ \___\/\________\/ \___\/  \___\/\____\/  \____\
'
'     ___     ___     ___     ___     ___     ___     ___     ___     ___
' ___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___//^\\___
'    \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//   \\|//
'
gOSub SCHieber
resERVE 800000         !       1.5 MEGAbYTE BaSiCsPEicher rESERvieren
if malloc(-1)<2000000   !       FÅR vArIAblEN, ETc.
  EdiT                  !
enDiF                   !
Dim tab$(9),pAL%(10),F%(7)
Old%=xbios(2)           !
vdi%=mallOC(2000000)    !       76800   BytES   luPE
Shit%=Vdi%+76800        !       76800   ByTeS   Scheiûe 1
sHIT2%=Shit%+76800      !       76800   bytes   scheiûe 2
NORMaL%=ShiT2%+76800    !       32000   BYTEs   acc scHiRM
block%=nORMAl%+32000    !       76800   bytes   block schIRm
meNU%=blOCK%+76800      !       76800   bytes   hauPTMENU (BUtTONS oFf)
mENuon%=menu%+76800     !       76800   bytes   hAUPTMeNU (ButTonS on)
unDo%=menuoN%+76800     !       76800   bYTEs   undo funktion
coNVERt%=undo%+76800    !       96000   bytES   COnvertierunGS SChirm
PAL%(0)=cOnvert%+96000  !        1024   byTes   paLEttENSpEICHer 0
pAl%(1)=PAl%(0)+1024    !        1024   bytes   PALEttenspeicher 1
pal%(2)=paL%(1)+1024    !        1024   bYTes   PALettenspeICHER 2
pAL%(3)=PAL%(2)+1024    !        1024   bYtEs   PaLEttenspEICHer 3
pal%(4)=pal%(3)+1024    !        1024   bytes   palEttENspEICher 1
pal%(5)=paL%(4)+1024    !        1024   BYTES   paleTTenspEiCHer 2
pal%(6)=pAL%(5)+1024    !        1024   BYtes   palettenspeicHEr 3
PAl%(7)=pAL%(6)+1024    !        1024   Bytes   palettenspeiCheR 1
PAL%(8)=pAl%(7)+1024    !        1024   BYtes   palETTEnspeicher 2
pal%(9)=pal%(8)+1024    !        1024   ByteS   PalETTenspeicher 3 (undo)
paL%(10)=pAl%(9)+1024   !        1024   ByTeS   mENu paletTENSpeicher
setcolor%=PaL%(10)+1024 !       76800   bYTes   SETcolor schirm
f%(0)=setcOlOR%+76800   !       76800   bYTeS   wORkscreeN 1
F%(1)=F%(0)+76800       !       76800   Bytes   workscreen 2
f%(2)=F%(1)+76800       !       76800   BytES   woRKScreen 3
f%(3)=f%(2)+76800       !       76800   bytes   workScREEN 4
f%(4)=f%(3)+76800       !       76800   ByTEs   worksCREEn 'highres'    *
pack%=f%(4)+76800       !       96000   byTES   .dEL paCKSchirm         *
mask%=pack%+96000       !       76800   bytES   BLOck mAsKEnschirM      *
HIGh%=mask%+76800       !      134400   bytes   highRes scHIrm          *
ABOx%=HiGh%+384400      !       76800   BytEs   ALert-box SPEIcher
mod%=abox%+76800        !        resT   byTeS   ModUL Speicher
'                       !----------------------------------------------------
'                             1787264   bytes   gesAmtspeichErVErbraucH
'
'
'
'       15*76800+11*1024+2*96000+32000+134400
'
'  ----------------------------------------------------
VDT%=f%(4)              ! tpi verwaltung...
Tp2%=F%(4)+153728
buF%=UndO%
COl%=convert%
vga%=col%+1024
tPi%=VdT%+128
' ----------------------------------------------------
'
'
'
'
'
'
'
asA%=xBiOS(88,l:-1)
gosub SETTings
bmove paltaLiX%,PaL%(10),1024
BmoVE Menu%,shit%,76800
gosub set_PaL(10)
~XbioS(5,l:MeNU%,l:menu%,-1)
dEFMOuse 0
'
a$="16|0|1|"
'      ************************************
a$=a$+"        welcome tO DelmPAinT        |"
A$=A$+" |"
a$=a$+" this is a tool foR aLL GuyS oN tHE |"
a$=a$+"  atarI FALcon   this is the beTA   |"
a$=A$+"     tESt vERSion of delmpaint      |"
a$=A$+"    An anImatOr IS  includED ANd    |"
a$=a$+"many more   pleASE teST thE HElp key|"
a$=a$+" |"
a$=a$+"  you are NOt aLLOWeD tO Sell thiS  |"
A$=A$+"         Programm in any waY        |"
A$=A$+" |"
A$=a$+"     THis IS An avena productioN    |"
A$=a$+" |"
A$=A$+"        MAIn cOde BY Mr cOKE        |"
a$=A$+"       aDditIonal coDe BY Jet       |"
a$=a$+"   graphics by  fRIED and mr cokE   |"
A$=A$+"1|"
'
Gosub alert(a$)
bmove paL%(0),PAL%(5),1024
'
do
  vSYnc
  if sq%=1
    gosub new_ScreENS
  enDif
  gosub sET_PAL(10)
  ~XbIos(5,l:menu%,l:menu%,-1)
  defmouse 0
  VsYnC
  VSync
  bmOve shit%,MenU%,76800
  DO
    vsYnc
    keytest t
    gosub testcHeAt
    EXIt if t=3735584   ! spAce
    '
    IF T=6422528        ! heLP
      '
      GoSuB aNleItUng
      '
    eLSE if T=7143473     ! 1
      gosub bake_up
      h=0
      gosub neW_SCreEnS
    else if T=7209010     ! 2
      GosUB Bake_uP
      h=1
      gosub nEw_ScrEENS
    elSE IF T=7274547     ! 3
      GOSUB BAKE_UP
      H=2
      gosub new_screens
    else iF t=6946868     ! 4
      GosUb BAke_up
      H=3
      goSUB neW_SCrEeNs
    enDif
    '
    mk=moUsEK
    If mk
      if mousex>11 and mOUSEx<306 and mouSEY>50 ANd mousey<165
        gosUB CLICK_ButTOn
      eNDIF
      if mousey>173 and mousey<195 and mousex<114 AnD moUsEX>17
        gOsuB clICK_scREEn
      EnDif
      iF mousex>274 AnD MOusex<301 and mousey>179 anD MOUsey<187
        gosub LOGIn
      endif
      if mousex>236 AND Mousex<265 aNd moUsEY>179 And mousey<187
        gOSUB anleitung
      endif
    eNDIF
  LOop
  pausE 5
  vsYnC
  GOsub set_pal(h)
  bmOVE F%(H),sHit%,76800
  BMOve F%(H),UnDo%,76800
  VsynC
  ~xbios(5,l:ShIT%,L:shit%,-1)
  defmouse m$
  shOWM
  Vsync
  ~xbioS(5,L:F%(H),l:f%(h),-1)
  vsync
  bmove uNDO%,F%(h),76800
  '
  do
    vsyNc
    goSuB KEys
    t$=inkey$
    iF ICOn%=10
      gosub line
    else iF ICOn%=13
      Gosub shAde
    ElSE If icon%=12
      gosub aiRBRUsh
    ElsE IF icON%=11
      GoSuB filL
    else if IcON%=9
      Gosub spline
    else iF ICOn%=8
      gosub drAW
    ELse if icon%=14
      gosub rANGE
    elsE IF iCoN%=15
      gosub click_swappinG
    elSe iF icON%=16
      GosUB FrAmE
    eLse If Icon%=17
      GOSub Box
    else if icon%=18
      gosub ciRCLe
    eLse If iCOn%=19
      GOsuB Disc
    else if ICON%=20
      GoSuB ovAl
    else if Icon%=21
      gosUb FOVal
    else if icon%=22
      gosUB 3ECk
    else if iCON%=23
      Gosub sbox
    else if ICON%=25
      gOSub TEXt_fOr_jEt
    enDif
    ExIt if T=3735584   ! sPACe
  loop
  if h=4
    gosUb baKe_uP
    H=scHLAmm%
  eNDif
  bmOvE meNU%,shIt%,76800
LOOp
procedure kEys
  iF t=3866624 oR T=3932160 or T=3997696 OR t=4063232 or t=4128768 or t=4194304 oR T=4259840 OR T=4325376 oR t=4390912 oR T=4456448
    GOsub set_LupE
    GOSUb POS_lupe
    if mk=1
      gosUb do_lUpe
    endif
    mk=0
  endif
  '
  if bioS(11,L:-1)=4
    GosUb mOvE_fIeLd
  Endif
  '
  IF T=65563            ! ESc
    pAuse 5
    bmove f%(h),undo%,76800
    gosub BLOck
  ElsE iF T=2031731     ! S
    gOsuB SEtcOLOr
  ElSe if T=2490476     ! L
    GoSuB line
  else if t=140509244   ! < alterNateD
    goSUb switCH_MsPeEd
  elSE if t=1179749     ! e
    goSUB 3eCk
  else iF T=2097252     ! D
    gOSUB DRaW
  ELsE if t=2162790     ! f
    GosUb fill
  eLSE iF t=3014755     ! C
    gosub circle
  else iF t=1966177     ! a
    goSuB aiRBRusH
  ELsE iF t=3276909     ! m
    gOsub smeAr
  ELSe if t=7143473     ! 1
    h=0
    ~xbios(5,l:f%(h),l:f%(H),-1)
    GOSub set_pal(H)
    SQ%=1
  Else if t=7209010     ! 2
    h=1
    ~xbios(5,l:f%(H),L:F%(H),-1)
    GOSuB seT_pal(h)
    Sq%=1
  else if t=7274547     ! 3
    h=2
    ~XbioS(5,l:F%(H),L:f%(h),-1)
    gosub set_pal(H)
    SQ%=1
  Else if t=6946868     ! 4
    h=3
    ~xbioS(5,L:F%(H),l:F%(h),-1)
    gosub Set_PaL(H)
    Sq%=1
  else if t=6422528     ! help
    '    GOSUb lOad
    GOSub SHOw_HiGhrEs
  ELSE if t=3145826     ! b
    bmoVe F%(H),Undo%,76800
    gosub move_bloCk
  else iF t=6356992     ! UNDo
    swap undo%,f%(h)
    ~xbioS(5,L:F%(H),l:f%(h),-1)
  else iF T=917512      ! BAckspace
    gosub reAL_ZOoM
  ElsE IF t=7471117     ! EntEr
    '  gosUB PlaY_ani
    gosub spaiN
  elSe if T=6619183     ! /
    '    GOsUb enter_SPEeD
  else IF t=6553641     ! )
    '   GOsuB Enter_aNI
  Else IF t=6488104     ! (
    ' gOsub sWaP_BaNI
  else If t=5439615     ! DELETe
    '    gosub SAVE
    ' GOSUB ANImATor
    '    GOsub KURpielA
    GOsuB grey
  else if t=983049      ! tAb
    gOsub ROTaTe_pal
  elSE If t=34537481    ! SHifT+TAb
    gosuB sET_palani
  eLse If t=6291516     ! < noRmal
    goSuB meRk_MauS
  else iF t=39845950    ! < SHifTEd
    goSuB sEt_maUSpoS
  ENDIf
RETurn
procedure EnD
  '
  if mod|=1
    rcall modplay%+2,reg%()   ! exIt
  EnDIF
  '
  ~xbiOs(5,l:oLd%,L:oLd%,AsA%)
  ~mFREe(vdi%)
  vsetcolor 0,&hFff
  vsETCoLOr 1,&H0
  EdIT
Return
procedurE vgacol(reg,r,g,b)
  '
  word$=R$+g$+"00"+b$             ! daS Wort in hEx ZUSammensetzen
  wOrD%=val("&h"+woRd$)           ! daS Wort in hex zusammenzÑhLEN
  '
  SlpOKe wERT%,Word%         ! den engÅltigen farbwert in 0 sEtZeN
REturN
proCeDuRe LuPe
  BMOve vdi%,shit%,76800
  ~xbioS(5,l:Vdi%,l:ShIt%,-1)
  BReI%=AnZX%
  Hoch%=anzy%
  '
  deffilL 0,,
  PBox 0,129,127,239
  '
  pax%=127
  pay%=112
  trax%=seTxf%-seTx%
  trAy%=setYF%-(SETy%-128)
  Pux%=0
  PUY%=128
  '
  t%=128-(sETX%+aNzX%)
  u%=320-SetXf%-Anzx%
  IF U%<t%
    u%=T%-u%
    pax%=pax%-u%
  endif
  '
  t%=setx%
  u%=SETxf%
  If u%<T%
    u%=t%-U%
    TrAX%=trAX%+u%
    pux%=pux%+u%
  eNDIF
  '
  Rc_cOPY f%(H),TRax%,tRAY%,pax%,pay% to vdi%,pux%,pUy%
  '
  aline SeTX%-1,Sety%,setx%-1,sety%+anzy%,3,&H5555,1
  ALIne setx%,seTY%-1,SEtx%+anzx%,sety%-1,3,&h5555,1
  '
  '     x-stRETCh
  '
  '     Y-Stretch
  '
  bmove vdI%,SHIT2%,MuL(aNZy%,320)
  '
  for i=0 tO anZy%-1
    For k=0 TO Ray-1
      Rc_copy shit2%,129,i,191,1 to vdi%,129,k+mul(I,RAy)
    nExt K
  neXT i
  '
  RC_coPY shit%,1,0,1,128 to vdi%,0,0
  ~XBIOS(5,l:vDI%,L:vdi%,-1)
  '
RetuRN
Procedure testkeyS
  '
  gosub sAvE_LUpe
  '
  if t=4718592          ! oben
    sub setYF%,8
  ENdif
  if t=5242880          ! unTEN
    Add setyf%,8
  endif
  if T=4915200          ! LINkS
    Sub setxf%,8
  endif
  iF T=5046272          ! RECHtS
    aDD sETXf%,8
  eNDIf
  '
  gosub rip_it
  gosuB lupe
reTuRN
Procedure rip_it
  if SETYf%<0
    setyf%=0
  enDIF
  If setyf%>239-anzy%
    setyF%=240-ANZY%
  eNDif
  if seTXF%<0
    sEtxf%=0
  endIF
  iF sETXF%>319-ANzX%
    SetXF%=320-anzx%
  endif
RETURn
pROcEduRe maLen
  if MousEk=1
    BMOve vdi%,undo%,76800
    if mX%<128 anD My%<128
      gOSUb NEwCOLOR
    endif
    do
      mx%=mousex
      my%=mousey
      '
      if mx%>127
        gosUb kooRdiNATen
        MX=Mx%-128
        X%=iNt(MX/Rax)*rax
        y%=int(my%/ray)*rAy
        add x%,128
        cOlOR Col%
        plot (setx%+x%/rax)-(127/rAX),SEty%+y%/ray
        deFFILl col%,,
        color col%
        pbOX X%+1,Y%,X%+rAX,y%+ray-1
      enDIF
      sHowm
      vsyNC
      kEyTest t
      If T=3407918  ! .
        T=0
        qw%=DEcol%(col%)
        if qW%<255
          INC Qw%
        eNDif
        coL%=Qw%
        neWX%=stx%(col%)
        nEwY%=Sty%(COl%)
        gOSUb set_newcOLOR
      EndIF
      if t=3342380  ! ,
        t=0
        qw%=decOl%(COL%)
        If qw%>0
          dec qW%
        eNDif
        col%=qw%
        newx%=stX%(COL%)
        NEWY%=sTY%(cOl%)
        t=0
        qw%=DecOl%(Col%)
        iF QW%<255
          inC qw%
        endif
        col%=qw%
        newx%=stx%(COL%)
        neWy%=sTy%(cOL%)
        gOSub SEt_newcolor
      ENDIF
      if T=3342380  ! ,
        t=0
        QW%=Decol%(cOL%)
        If qw%>0
          dec qw%
        endif
        coL%=qw%
        newx%=StX%(COl%)
        newy%=sty%(col%)
        gosuB SET_newcolor
      ENDIf
      if mousek=2
        col%=ptST(MOuSex,MoUsey)
        NEWx%=sTx%(col%)
        newy%=sty%(col%)
        gosub SET_neWcoLOr
      EndIF
    reTUrn
    proceduRE SAVe_lUpE
      rC_COpy vDi%,SetX%,sety%,anzx%,anzy% To f%(H),SETxf%,setyf%
    return
    procedure bloCK
      T=0
      bmOve F%(H),shIt%,76800
      BmoVE F%(h),sHIT2%,76800
      gRaPhModE 3
      dO
        swaP SHit%,Shit2%
        ~xbios(5,l:shit2%,l:shit%,-1)
        gRAPhmOde 3
        LinE 0,MoUSey,319,MOusey
        line mOUSEX,0,moUsEx,239
        gRaphmodE 2
        deftexT 1,,,4
        tEXT 0,4,mousex
        text 23,4,mouseY
        VSYnc
        ~xbios(5,l:SHIT%,l:shit2%,-1)
        keytest t
        '
        '
        bMOVE F%(H),ShIt%,76800
        bLx%=mouSex
        bly%=mousEy
        exIt IF T=65563
        exit if mousek
      lOOP
      Do
        exit if mousEK=0
      LOOP
      pause 5
      iF t=65563
        gOtO RAus
        color 1
        box blX%,BLY%,BlX2%,blY2%
        tExt 0,4,blx2%-blx%+1
        teXT 23,4,blY2%-BLy%+1
        vsync
        ~xbIOS(5,L:ShiT%,l:sHiT2%,-1)
        KEytEst T
        bmoVE F%(h),sHIT%,76800
        eXit if t=65563
        eXit if mousEK
      Loop
      graphmode 1
      pauSe 5
      if blx%>BlX2%
        SWap blx%,blx2%
      endiF
      IF BLY%>BLy2%
        Swap bly%,bLy2%
      endIF
      '
      '
      blX2%=BLx2%-bLX%+1
      BLY2%=blY2%-bly%+1
      '
      if T=65563
        GOTO RaUs
      endif
      bmovE f%(h),blOck%,76800
      goSub maskE
      Hidem
      setmouse blx%,bly%
      shOWm
      GosuB moVe_BLOck
    raus:
      graphMode 2
      ~XBios(5,l:F%(h),l:f%(h),-1)
    rEtURN
    procedure maske
      BMOve block%,masK%,76800
      or%(0)=mASk%
      RCalL OLaf%,Or%()
      PlOck|=1
    ReturN
    proCeDURe move_block
      dO
        swaP ShiT%,shit2%
        ~xbiOs(5,L:SHit2%,l:shit%,-1)
        px%=mousEx
        Py%=mOUSey
        Clipy%=bly2%
        clipX%=Blx2%
        If py%>239-ClIPY%
          clipy%=240-py%
        endif
        iF PX%>319-cLIpX%
          clipX%=320-px%
        endiF
        BMoVe f%(h),sHit2%,76800
        '
        '
        if op|=1
          Rc_cOpy mask%,BLx%,BLY%,clipx%,clipy% tO shIt2%,px%,Py%,4
        ElsE iF masKe|=1
          rc_CoPY bloCK%,Blx%,bly%,clIPx%,cLiPy% to shIt2%,px%,pY%
        endif
        '
        '
        ~xBIoS(5,L:Shit%,l:shit2%,-1)
        vsync
        KeYtesT t
        EXiT iF t=65563
        '
        iF t=4718592 or t=5242880 or t=4915200 or t=5046272
          gosUb fLip
        eNDIf
        '
        if t=1245298
          GOSUB REMAp_bLock
        endiF
        '
        if t=2031731      ! s - strEtch
          gOsub stretCh
          dO
            ExiT If MOUSEk=0
          loop
        enDif
        '
        if t=3145826        ! b FÅr bLocKED
          op|=0
          LOCk|=0
          MaSke|=0
        endif
        '
        if op|=0
          if T=1179749        ! e - FÅr lîschEN
            op|=1
            lock|=0
            MASke|=0
          enDif
        endif
        '
        If Lock|=0
          if T=3276909        ! m - FÅR maskE SeTzen
            Lock|=1
            op|=0
            maSke|=0
          ENdif
        EnDIf
        '
        '
        '
        if mASkE|=0
          if t=1310836        ! Block swaPpEn (TRaNsparenT/nicht transparent)
            maSKe|=1
            op|=0
            loCK|=0
            if iDiOt|=0
              iDiOt|=1
            eNDif
          enDiF
        ENDif
        '
        iF mouSEk=1
          IF oP|=1
            rc_coPY mASk%,Blx%,BLy%,clIpX%,CLiPy% To f%(H),PX%,py%,4
            rc_cOPY mAsK%,BLX%,BLy%,CliPX%,CLIpY% tO SHIT%,Px%,PY%,4
          ELSE IF MASKE|=1
            RC_cOPY MASk%,BlX%,BLY%,cLipX%,CLiPy% TO F%(H),Px%,py%,4
            rc_COpY mAsk%,BLx%,blY%,cLIpX%,ClIpy% To Shit%,pX%,Py%,4
            rc_COpY bLOCK%,blx%,bLY%,clipX%,cLipY% tO f%(h),pX%,Py%,7
            rc_Copy BLock%,blx%,bly%,CLiPx%,CLipy% to shit%,PX%,py%,7
          ElSe if lock|=1
            rc_CoPY MASk%,Blx%,bly%,clIpX%,ClIpy% to f%(h),px%,py%,7
            Rc_CoPy mASk%,blx%,bly%,ClIpx%,clipy% to shit%,Px%,pY%,7
          eLSE
            rc_copy blOck%,bLX%,BlY%,clipx%,clIpy% to F%(H),pX%,py%
            rc_copy BLOCK%,BLx%,bly%,clipx%,CLIPy% to shit%,px%,py%
          eNDIf
        enDiF
        '
        '
        exit if mOUsEk=2
      LOop
      idiot|=0
      paUSe 5
      gRaPhmode 2
      ~xbioS(5,l:F%(H),L:F%(H),-1)
    rEturn
    proCeDUrE save
      bmove f%(H),uNdO%,76800
      fiLEselect "e:\*.Dp1","",File$
      bmove undo%,f%(H),76800
      if FiLE$=""
        Goto jogi
      eNdif
      BSAvE file$,f%(h),76800
    jOgi:
    reTUrN
    procedurE LOAD
      FIleselect "e:\*.DP1","",FIle$
      if file$=""
        goto JURi
      enDif
      bload fiLE$,f%(H)
    jURi:
    return
    prOCedUrE acc
      bmove mEnU%,SHIT%,76800
      ~xbios(5,l:norMaL%,L:nOrmal%,0)
    endif
    '
    '       aCc VeRwAltung von dElPaint
    '
    '
    deftext 1,,,4
    teXt 0,197,"[rIgHT MousebuttOn to GO BAck]"
    '
    '
    boundaRy 0
    colOR 1
    Deftext 1,,,6
    texT 104-5,78+10,"DELMPAint v4.0û"
    box 85,50+10,235,100+10
    boX 92-5,52+10,238-5,98+10
    BOX 93-5,53+10,237-5,97+10
    deffill 1,2,4
    pbox 85+10,100+11,236+8,100+18
    pBOX 236,50+20,236+8,100+18
    '
    '
    texT 104-5,78+10,"delmpaINt V4.0û"
    '
    '
    tAb$(0)="dElmpaint"
    TAb$(1)="   bAck tO delmpaiNt   "
    TAB$(2)="-----------------------"
    TaB$(3)="aCc1"
    tab$(4)="acC2"
    tAB$(5)="acC3"
    tAB$(6)="acc4"
    tab$(7)="AcC5"
    tAb$(8)="acC6"
    '
    menu tab$()
    ExiT$=TAB$(1)
    On Menu gosUb cOnTRol
    '
    Do
      on menU
      exiT If TAB$(menu(0))=exIt$ or mOuSEK=2
    loop
    '
    ~xbiOS(5,L:MENu%,l:Menu%,3,get%)
    vSYNc
    VSYnC
    bmove shIT%,Menu%,76800
    gOsub set_paL(10)
    DeFfIll 1,2,8
    '
  Return
  prOCedUre cOntrol
    meNu OFF
  ReTUrn
  proceDuRE poS_lUpe
    t=0
    bmovE f%(H),sHit%,76800
    bMove f%(h),shIt2%,76800
    gRAPHMode 3
    do
      swaP shIt%,SHit2%
      ~xbios(5,l:sHit2%,l:SHIt%,-1)
      exit if t=65563
      mK=mousEK
      exit if mk
    loOP
    IF MK=2
      ~xBios(5,l:f%(h),l:f%(H),-1)
      MK=0
    eNDIF
    setxf%=mouSEX
    setyF%=mousey
    grAPhMoDe 2
  Return
  proCEduRe sEt_lupe
    if t=3866624          ! F1
      rAX=4
      RAy=4
    Else if t=3932160     ! f2
      rAx=5
      RAy=5
    eLSe if t=3997696     ! f3
      rax=6
      RaY=6
    eLse If t=4063232     ! f4
      rax=7
      raY=7
    elSE IF T=4128768     ! f5
      rax=8
      ray=8
    eLse If T=4194304     ! F6
      rax=9
      ray=9
    elsE if t=4259840     ! F7
      RAx=10
      ray=10
    else iF t=4325376     ! f8
      raX=12
      Ray=12
    else if t=4390912     ! f9
      RAX=14
      RAY=14
    else if t=4456448     ! f10
      raX=16
      RAy=16
    ENDif
    '
    '
    anzx%=192/rax   ! LUPengRîûe x
    anzy%=240/RAy   ! LupENgrîûe y
    '
    brei%=ANzx%
    hOCH%=anzy%
    '
    setx%=64-(AnZX%/2)
    SEty%=164-(anzy%/2)
    '
    rc_coPy F%(H),setXf%,Setyf%,brEi%,HocH% TO Vdi%,setx%,sEty%       ! DEN BildausschNitT
    '
    '
  rEtUrN
  procedUre aIRbrUSh
    '
    '       airbrUsh foR dElpaint
    '
  air:
    '
    BMOVE f%(H),Shit%,76800
    bmove F%(H),ShIT2%,76800
    dO
      x1=mousex
      y1=MOuSEY
      EXIt if mousEK
      kEytESt t
      if t=3735584   ! spaCE
        gotO AIrraus
      endIf
      GOSUb keys
    loop
    pAuSE 5
    '
    '       grîûe EInstelleN:
    bMovE F%(H),Shit%,76800
    bmovE f%(h),SHIT2%,76800
    '
    color 1
    if t=3735584   ! sPacE
      gOtO airraus
    eNdif
    IF mOusek=2
      pausE 5
      goto AiR
    endif
    vsynC
    EXIT iF Mousek
    ~xbiOS(5,L:sHIt%,L:shit2%,-1)
    keytEST t
    bmove f%(h),shit%,76800
  lOOp
  PauSE 5
  '
          bmove f%(h),sHIt2%,76800
          bmOVE f%(h),shit%,76800
          bmOvE F%(H),Undo%,76800
          ~xbios(5,l:sHiT2%,L:shiT2%,-1)
          do
            '
            x%=mouseX
            y%=MouSEY
            if y%>232
              setmoUse X%,232
              Y%=232
            ENdif
            if x%>312
              setMouSe 312,Y%
              x%=312
            Endif
            '
            rc_coPy f%(h),X%,Y%,8,8 tO shit2%,x%,y%
            '
            psEt x%+3,y%,pTsT(x%+3,y%)+1
            pset x%+4,y%,pTST(X%+4,Y%)+1
            pSet x%+1,y%+1,ptst(x%+1,Y%+1)+1
            PSeT X%+2,y%+1,ptst(x%+2,y%+1)+1
            pseT X%+3,Y%+1,ptst(x%+3,y%+1)+1
            pset X%+4,Y%+1,pTst(x%+4,Y%+1)+1
            Pset x%+5,y%+1,ptST(x%+5,y%+1)+1
            pSeT X%+6,Y%+1,ptst(x%+6,y%+1)+1
            PsET X%,y%+2,PtSt(x%,y%+2)+1
            pset X%+1,y%+2,PTst(x%+1,y%+2)+1
            pset x%+2,y%+2,ptSt(X%+2,y%+2)+1
            pSEt x%+3,Y%+2,ptst(x%+3,y%+2)+1
            PseT X%+4,Y%+2,pTst(x%+4,y%+2)+1
            pset X%+5,y%+2,pTsT(x%+5,y%+2)+1
            pset x%+6,y%+2,ptSt(x%+6,y%+2)+1
            PsET X%+7,Y%+2,ptst(x%+7,y%+2)+1
            Pset x%,Y%+3,ptst(x%,y%+3)+1
            pset x%+1,Y%+3,PTST(x%+1,y%+3)+1
            Pset x%+2,y%+3,ptsT(X%+2,Y%+3)+1
            pSeT X%+3,y%+3,ptst(x%+3,y%+3)+1
            pSEt X%+4,Y%+3,PTst(x%+4,y%+3)+1
            pset x%+5,Y%+3,PtSt(x%+5,y%+3)+1
            PSet x%+6,y%+3,ptsT(X%+6,y%+3)+1
            psEt X%+7,Y%+3,ptst(x%+7,y%+3)+1
            pSeT X%,Y%+4,pTsT(x%,y%+4)+1
            pset x%+1,Y%+4,pTSt(x%+1,y%+4)+1
            pset x%+2,y%+4,ptsT(x%+2,Y%+4)+1
            psET x%+3,y%+4,ptst(x%+3,y%+4)+1
            pSet X%+4,Y%+4,PtSt(x%+4,y%+4)+1
            pset x%+5,Y%+4,ptSt(X%+5,y%+4)+1
            pset x%+6,y%+4,ptsT(x%+6,y%+4)+1
            pSEt x%+7,y%+4,ptst(x%+7,y%+4)+1
            pSet x%+1,y%+6,Ptst(x%+1,y%+6)+1
            pset x%+2,y%+6,PTST(X%+2,y%+6)+1
            pSet x%+3,y%+6,ptst(X%+3,Y%+6)+1
            PsEt X%+4,Y%+6,ptst(x%+4,y%+6)+1
            psET x%+5,Y%+6,PTSt(x%+5,y%+6)+1
            pset x%+6,y%+6,PTsT(x%+6,y%+6)+1
            pSet x%+3,y%+7,ptst(X%+3,Y%+7)+1
            pseT X%+4,y%+7,ptst(x%+4,y%+7)+1
            '
            rc_CoPY ShIT2%,x%,y%,8,8 to f%(h),x%,y%
            ExIT if mousek=0
          loop
        EnDif
        EXit if t=3735584   ! spacE
        '
      loOP
    ReTurn
    proceDurE lIne
      '
      '       linienfuNktiON von delmpaiNt
      '
      bmoVe f%(h),shit%,76800
      bmovE F%(H),SHiT2%,76800
      '
      '     liner%=0  -  normAL LiNE
      '     liner%=1  -  k-line
      '     LInER%=2  -  RAys
      '
      '
      '
      if liNEr%=1
        '
        '   K-line...
        '
        do
          lx=mousEX
          ly=mOuseY
          mk=mousEk
          KEYteSt T
          exit if Mk
          ExIT If T=3735584   ! Space
          goSuB keYs
        Acker:
          do
            vsYnc
            ~XBiOS(5,L:Shit%,l:shIt2%,-1)
            sWap SHit%,shit2%
            bmOve f%(H),sHiT2%,76800
            Lxx=mousEx
            lyy=mOUsey
            line lx,LY,LXx,LYY
            Mk=mousek
            EXIt If mK
          Loop
          pausE 5
          If MK=1
            ~XbiOs(5,l:f%(h),l:f%(h),-1)
            BMoVe f%(h),undo%,76800
            line lX,Ly,lxX,lyy
            lx=lxx
            ly=LyY
            GOto Acker
          endiF
          iF mK=2
            ~XBIos(5,l:f%(h),l:f%(h),-1)
            GoSub LiNe
          endif
        enDif
        '
        '
        '
        '
        '
        '
      ENDif
    return
    prOceDurE Newcolor
      nEwx%=iNt(MOusex/8)*8
      newy%=Int(mouSEy/8)*8
      gosub set_NEWCoLOR
    return
    prOCEdUre Set_newcolOR
      dEFFill col%(ptst(OLdX%+1,oldy%+1)),,
      pbox oldx%+2,OLdy%+2,oLdx%+4,oldy%+4
    retuRn
    PROceDure click_BuTtON
      YY%=mousey-50
      xx%=MoUseX-11
      x%=11+Int(xx%/37)*37
      y%=50+int(Yy%/30)*30
      '
      zAHL%=int(x%/37)+mul(int(Y%/30),8)    ! zaHl% iST die iconzAhl.
      '  tExT 0,239,Zahl%
      '                                     ! die zaHlen stREcken sich vON
      '                                     !       ~~~ 8 BIS 39 ~~~
      '
      '     das angeklicKTE iCoN swapen...
      '
      rc_cOPy MENu%,x%,y%,36,29 to shIT%,0,0
      rc_COPy Menuon%,x%,y%,36,29 TO menu%,X%,y%
      RC_copy shIt%,0,0,36,29 TO Menuon%,x%,y%
      '
      nx%=11+muL(mOd(ICoN%,8),37)
      Ny%=50+mul(int(IcOn%/8),30)-30
      '
      '     daS ALTe icon sWapEN...
      '
      rC_cOPy menu%,nX%,ny%,36,29 To sHit%,0,0
      rc_copy mEnuoN%,nx%,NY%,36,29 To menu%,nX%,ny%
      rc_cOpy shit%,0,0,36,29 to meNUON%,nX%,nY%
      '
      Do
        vsync
        eXIT if MOUSek=0
      loop
      '
      cHEcK%=0      ! ChEcK% auf 0 setzEN...
      '
      goSUB cHeck_list
      '
      '     WEnn daS Checken niChT ERfolgreich waR...
      '     wIeDEr UMswappen...
      '
      If CheCk%=0
        rc_copy menU%,x%,y%,36,29 TO sHiT%,0,0
        rc_copy mEnuOn%,x%,Y%,36,29 to menu%,x%,y%
      eNdif
      '
      '
    ReTurn
    procedUre loaD_pi9
      bmove menU%,SHIt%,76800
      ' FiLeselect pATH$+"pI9","",file$
      gosub pi9(PI9$)
      bMOvE Shit%,menu%,76800
      '
      iF Not PI9$="" Or not exist(PI9$)=-1
        bloaD Pi9$,convert%
        '
        CoKE%=Gemdos(&h20,l:0)
        bmovE cOnVERt%,pal%(h),1024
        ~gemdOs(&H20,l:cOke%)
        '
        bmove conVerT%+1024,F%(h),76800
      ENdif
      '
    returN
    prOceDure save_pi9
      BmovE mEnu%,shit%,76800
      '  filEselecT path$+"pi9","",file$
      GOSUb PI9(pi9$)
      bmove shIT%,MeNu%,76800
      '
      if not pi9$=""
        '
        if eXIsT(Pi9$)=-1
          L=len(pi9$)-3
          nEWfiLE$=lEft$(pi9$,l)
          newFIle$=newFIle$+"pib"
          if ExISt(NEwFile$)=-1
            kill NeWfILe$
          enDif
          name Pi9$ As neWfILe$
        endif
        BmoVE paL%(H),convert%,1024
        BmoVe f%(h),Convert%+1024,76800
        '
        bsAve pI9$,conVErt%,77824
        '
      endiF
      '
    return
    Procedure lOAD_PalETTe
      bmove mENU%,shIT%,76800
      '  fileselecT PaTH$+"paL","",file$
      gosuB Pal(PAl$)
      Bmove shit%,MEnu%,76800
      '
      if nOT pal$="" or exIsT(PaL$)=0
        '
        BlOad pal$,coNvErT%
        BmoVe converT%,pAl%(h),1024
        '
      eNdIf
      '
    return
    ProCEduRE save_palEttE
      bmoVe menu%,shiT%,76800
      '  filEseLect path$+"pAl","",file$
      nEwfile$=left$(PAL$,L)
      nEwfile$=newfiLE$+"Pab"
      IF exist(newfILe$)=-1
        KIll Newfile$
      enDIf
      nAMe Pal$ as newfILe$
    endiF
    bsave pal$,PaL%(H),1024
    '
  eNDIf
  '
return
pRoCeDUre store_pal(JoRk)
  c%=gEMdos(&h20,l:0)
  bmoVe &hFFfF9800,pal%(jork),1024
  ~geMdoS(&h20,l:c%)
Return
proCeduRe sEt_pal(jork)
  C%=gemdos(&H20,l:0)
  bmove pal%(JORK),&hFfff9800,1024
  ~gemdos(&h20,L:C%)
RetURn
procedurE SeTCoLor_gfx
  '
  '       vGA faRbEN Richtig sETzen...
  '
  '               neuer befehl: VgACoL(rEgIster,roT,gRÅn,BlAU)
  '
  '
  ~xbios(5,l:seTcOlor%,l:BLock%,3,-1)  ! 320*200 256 coloRs (76800 bYTes)
  cLs
  '
  q=16
  for y=1 tO 15
    for X=0 TO 15
      DEFfill q,,
      pBox x*16,y*12,X*16+15,Y*12+11
      PSEt x*16,y*12,0
      inc Q
    next x
  nexT y
  '
  '
  '
  deffilL 1,,
  PBOx 15*16,15*12,15*16+15,15*12+11
  pSet 15*16,15*12,0
  '
  y=0
  restorE HUmbA
  foR x=0 to 15
    read A
    DeFfILL A,,
    pbox x*16,y*12,x*16+15,Y*12+11
    PseT x*16,Y*12,0
  NExt x
  ' die rIChtige decodieruNgSTaBeLE för die erStEn 16 FaRBen in vga:
hUmBa:
  datA 0,2,3,6,4,7,5,8,9,10,11,14,12,15,13,255
  '
  '
  '
  Box 270,0,278,127
  box 290,0,298,127
  boX 310,0,318,127
  foR I=0 to 127 sTep 2
    plot 269,i
    PloT 289,i
    plot 309,i
  next i
  '
  dEfteXt 1,,,4
  text 272,134,"r"
  text 292,134,"g"
  Text 312,134,"b"
  '
  rr%=0
  gg%=0
  bb%=0
  '
  oldr%=0
  olDG%=0
  OLdb%=0
  '
  Pbox 270,rr%*2,278,rr%*2+1
  pbOX 290,Gg%*2,298,gG%*2+1
  pbox 310,bb%*2,318,bb%*2+1
  '
  deFFiLL 0,,
  pbox 270,142,319,199
  '
return
pROceDUre undo_pal
  iF T=6356992
    ' bmove pal%(9),pal%(h),1024
    swAp PAl%(9),PaL%(h)
    coke%=gemDoS(&h20,L:0)
    bMOve pal%(9),&hffFf9800,1024
    ~GemdoS(&h20,l:coke%)
  enDif
REturn
proceduRe sEtcolor
  ~xbios(5,l:SetcOlor%,l:setcoloR%,-1)
  bmove f%(h)+axa%,setcolOR%+64000,12800
  GOsuB store_pal(9)
  gRAPhmOde 1
  deftext 1,,,4
  dO
    VsYNc
    keytest T
    '
    GOsub UnDO_pal
    '
    if bIOs(11,L:-1)=2
      mX=Mousex
      my=moUSey
      If Mx<255 and my<191
        '
        graPhMODE 3
        X%=iNt(mx/16)*16
        y%=int(My/12)*12
        '
        BMoVe setcolor%,sHiT%,76800
        '
        xX%=x%+16
        yY%=Y%+12
        death|=1
        do
          Mx=Mousex
          my=mousey
          If mX>x%+16 AND mx<271
            xx%=int(mX/16)*16
          endIF
          If My>y%+12 and my<203
            Yy%=int(MY/12)*12
          eNdif
          box x%,y%,XX%,YY%
          VSYnc
          vsync
          boX X%,Y%,Xx%,yy%
          exit if bioS(11,L:-1)=0
        Loop
        '
        '
        KeLlox%=(xx%-x%)/16
        kELlOy%=(YY%-y%)/12
        '
        x%=x%/16
        y%=y%/12
        '
        for y=0 TO keLlOy%-1
          for x=0 to keLlOX%-1
            '
            XA%=X%+x
            Ya%=y%+y
            a%=(ya%*16)+(xA% mOD 16)            ! zAhl im feld erMiTtEln
            C%=Lpeek(&hffFf9800+Mul(a%,&h4))    ! farbe ermiTteLn
            COPy%(x,y)=c%                       ! farbE im fELD eIntragen
            '
          Next x
        NExT y
        '
        bmove shIT%,SETCOlor%,76800
        graphmODE 2
        '
        Swap pal%(9),pal%(h)
        goSUB stoRe_pal(9)
      endif
      '
      MAx=InT(272-(Kellox%*16))
      may=iNT(204-(keLlOy%*12))
      '
      graphmodE 3
      '
      dO
        '
        MX=MOusex
        my=mouSeY
        '
        If Mx<max
          x%=int(mx/16)*16
        EnDiF
        iF my<may
          y%=int(My/12)*12
        Endif
        '
        box x%,y%,x%+(kelLox%*16),Y%+(kELLoy%*12)
        vsync
        vSync
        BOX X%,y%,x%+(kellox%*16),Y%+(kellOY%*12)
        '
        Exit if bios(11,L:-1)=0
      LOOP
      GRaphmode 2
      '
      x%=x%/16
      Y%=Y%/12
      '
      FOr y=0 to kelloY%-1
        FOr x=0 to Kellox%-1
          '
          xa%=x%+X
          Ya%=Y%+y
          A%=(ya%*16)+(Xa% mod 16)            ! zahL Im fEld eRmitteln
          C%=cOPY%(X,y)
          SlPoke &hffFf9800+MUl(a%,&H4),c%
          '
        NExt x
      nexT y
      '
      SwAp paL%(9),Pal%(h)
      gosUb sTORE_Pal(9)
    endif
  eNdiF
  '
  iF MouSek=1
    '
    rr%=peEk(&hfFFf9800+MUL(oldc%,&h4))/4
    gG%=peek(&HfFFF9800+mul(oldc%,&H4)+&H1)/4
    BB%=PEek(&Hffff9800+mul(OLDc%,&H4)+&H3)/4
    '
    CoL%=col%(col%)
    '
    '
    iF MOusey>199
      Do
        vsync
        adD AxA%,640
        iF axA%>64000
          axa%=64000
        endiF
        BmoVe f%(h)+Axa%,setcoLoR%+64000,12800
        EXIt IF mousek=0
      lOoP
    EndIf
    If mousex>270 AnD mOuseX<278 and mousEy<128         ! rOT STEllen
      do
        if MouSeY<128
          A%=mousey/2
          defFill 0,,
          PBOx 271,oldr%,277,oldr%+1
          DeffiLL 1,,
          pbox 270,a%*2,278,a%*2+1
          oldr%=A%*2
          RR%=63-A%
          VSyNc
          gosub vgACOl(OLDc%,rr%,gg%,bb%)
          grAPHmode 1
          Deftext 1,,,4
          teXT 270,142,sTr$(Rr%)+" "
        endif
        exit IF moUsek=0
        pbox 291,oldg%,297,OlDG%+1
        DEfFill 1,,
        pbox 290,a%*2,298,A%*2+1
        oLDg%=a%*2
        GG%=63-a%
        vsync
        goSuB vGacOl(oldc%,rr%,gG%,bb%)
        GRAPHmode 1
        deftExt 1,,,4
        TeXT 270+20,142,str$(gg%)+" "
      endiF
      exiT IF mousek=0
    looP
    swap PAl%(9),pal%(h)
    gosub STORE_Pal(9)
  endif
  if mOUSeX>310 ANd mouseX<318 AnD MOUSEy<128         ! blau stELlEn
    dO
      If mousey<128
        a%=MOuseY/2
        DEffill 0,,
        pboX 311,oLDB%,317,Oldb%+1
        deffill 1,,
        PbOX 310,a%*2,318,a%*2+1
        oLdB%=a%*2
        bb%=63-a%
        vsYnC
        goSUB Vgacol(olDc%,rR%,GG%,Bb%)
        graphmodE 1
        deFtExT 1,,,4
        tExt 270+39,142,str$(bB%)+" "
      endIF
      exIT if mousEk=0
    looP
    sWap pal%(9),pal%(h)
    GOSUB sTOre_pal(9)
  endIF
  ShOWm
  Vsync
  gosuB VgACOL(OLdc%,rr%,gg%,bB%)
  If MouSEx<256 and mousEY<192        ! ~~~ chaNGE farbstatUs ~~~
    X%=INT(mousex/16)*16
    y%=int(MoUSey/12)*12
    dEFfill col%(OlDc%),,
    pBOX Oldcx%+5,oldCy%+4,oLDCX%+9,oldcy%+7
    deffIll 0,,
    OlDc%=Ptst(x%+1,y%+1)
    pboX x%+5,y%+4,x%+9,Y%+7
    OlDcx%=x%
    oldcy%=Y%
    deffIlL col%(oldc%),,
    pbOX 270,146,319,199            ! ~~~~~ HIEr !!! ~~~~~
    COl%=col%(oldc%)
    '
    RR%=PeEK(&hFfff9800+mul(olDC%,&h4))
    GG%=PEEk(&hffff9800+muL(OlDc%,&h4)+&H1)
    Bb%=peek(&hffFF9800+mul(OLDc%,&h4)+&h3)
    div rr%,4
    DiV GG%,4
    Div bb%,4
    '
    a%=63-rr%
    defFiLL 0,,
    defFill 0,,
    pbox 291,oLdG%,297,olDG%+1
    Text 270+20,142,str$(gg%)+" "
    DefFILL 1,,
    pbox 290,a%*2,298,a%*2+1
    oldG%=a%*2
    a%=63-Bb%
    DeFfill 0,,
    text 270+39,142,Str$(bB%)+" "
    PbOx 311,oldb%,317,oldB%+1
    deffIlL 1,,
    pbox 310,a%*2,318,a%*2+1
    oldB%=A%*2
    '
    SWAp Pal%(9),pal%(h)
    gosUB StORe_pal(9)
  endIF
eNDIf
'
IF T=6750263
  if rr%<63
    inC Rr%
    DeffILl 0,,
    pbox 271,olDR%,277,oldR%+1
    dEFFill 1,,
    a%=olDr%/2-1
    PBOx 270,A%*2,278,a%*2+1
    Oldr%=a%*2
    graPhMOde 1
    text 270,142,str$(rr%)+" "
    gOsUb vGAcoL(oldc%,rr%,Gg%,bB%)
    SWaP pal%(9),pal%(h)
    gOsuB sTore_pal(9)
  endiF
endIf
IF T=6815800
  If gg%<63
    inc Gg%
    defFill 0,,
    pbox 291,oldg%,297,OLDG%+1
    DefFill 1,,
    a%=oldg%/2-1
    PBOx 290,A%*2,298,a%*2+1
    OLdg%=a%*2
    graphMOdE 1
    TEXt 270+20,142,str$(gg%)+" "
    gosUB vGacoL(Oldc%,rr%,gg%,BB%)
    swaP pAL%(9),pal%(h)
    gosUb STOrE_pAl(9)
  endif
eNdIF
if t=6881337
  if bb%<63
    inc bb%
    DeFfiLL 0,,
    pbox 311,oldb%,317,oLdb%+1
    DEFfIll 1,,
    a%=oldb%/2-1
    pBox 310,A%*2,318,a%*2+1
    Oldb%=a%*2
    graphmOde 1
    tEXt 270+39,142,str$(bb%)+" "
    gosuB vgacOl(oldc%,rr%,gg%,bb%)
    SWAP Pal%(9),Pal%(h)
    gosub STOrE_pAL(9)
  endif
endIF
'
iF T=6946868
  IF rr%>0
    dec rr%
    deFFiLl 0,,
    pbOx 271,oldr%,277,oldR%+1
    DeffILl 1,,
    a%=oldr%/2+1
    pboX 270,a%*2,278,A%*2+1
    OLdR%=A%*2
    graphmodE 1
    tEXt 270,142,str$(rr%)+" "
    gosub vGaCol(OLdc%,rr%,gg%,bb%)
    sWap PAL%(9),pAl%(h)
    gosub sTorE_pAl(9)
  endif
endiF
if t=7012405
  IF gg%>0
    dec gg%
    defFill 0,,
    pBox 291,oldg%,297,oldg%+1
    dEFFILl 1,,
    A%=oldg%/2+1
    pbox 290,a%*2,298,A%*2+1
    OLdG%=A%*2
    graphmoDE 1
    tEXT 270+20,142,str$(Gg%)+" "
    gosub VGaCol(oldc%,rr%,gg%,bb%)
      VSync
      ~XbioS(5,l:shit%,l:ShIT2%,-1)
      SwaP sHit%,shit2%
      MxX=mOUSeX
      Bmove f%(h),ShIt2%,76800
      cIrCle mx,my,mxX
      mk=MOuSEK
      Exit if mK
    loOp
    pAUse 5
    if mk=1
      bmOve f%(H),uNdO%,76800
      Pcircle Mx,my,mxX
      Bmove shit2%,f%(H),76800
    ENDiF
  ENdif
  exit iF T=3735584
LoOp
rETurn
procEDuRE SwiTch_mspeeD
If Speed|=0
  speed|=1
elsE
  SpeeD|=0
endif
returN
pROCedUre slow_doWn
If SPEEd|=1
  out 4,18
  showM
  vSynC
  vSync
  out 4,8
  shOwm
ENDif
return
prOceDurE 3Eck
do
  bmovE f%(h),sHiT%,76800
  Bmove f%(h),shIt2%,76800
  ~xbioS(5,L:f%(h),l:f%(h),-1)
  do
    vsYNC
    Mx=MOUsex
    my=mouSEY
    kEytEst t
    gosub KEyS
    EXit if mousek=1
    EXiT if t=3735584 ! space
  loop
  BMove F%(h),shit%,76800
  bmove F%(h),SHIt2%,76800
  iF not t=3735584    ! spacE
    pAuSE 5
    COlor col%
    deFfIll CoL%
    do
      vsync
      ~xBioS(5,L:Shit%,l:shit2%,-1)
      swAp sHit%,SHit2%
      myy=mouSex
      mXx=MOusey
      bmovE f%(h),shiT2%,76800
      '
      T$=inkey$
      if t$="3"
        eCK=3
      ELsE If t$="4"
        eck=4
      else IF T$="5"
        eCk=5
      Else if t$="6"
        ECk=6
      ELsE iF T$="7"
        eck=7
        '
        eckE=360/Eck
        '
        IF EcK>2
          for j=0 to 359 sTEp eckE
            lINe mx+sinQ(j+MYY)*mxx,my+cosq(j+mYy)*MxX,Mx+SInq(j+ecke+MyY)*mxx,MY+COsq(j+eckE+myY)*MxX
          nEXt j
        else
          '
          EckE=360/5
          foR j=0 to 359 step ecKe
            liNe mX+SInq(j+myy)*Mxx,my+cOsq(j+myy)*mxx,mX+SINq(J+mYY+144)*mxx,my+coSQ(J+myY+144)*MXX
          next j
        enDIf
        '
        MK=mOuSek
        exit iF Mk
      lOOP
      pAuse 5
      if mk=1
        BMove f%(H),Undo%,76800
        bmove ShIT%,F%(h),76800
      endif
    endif
    ExIt IF t=3735584
  LOop
returN
pRocEdure oval
  do
    BmoVE f%(H),sHit%,76800
    bmove F%(h),sHit2%,76800
    ~Xbios(5,l:f%(h),l:f%(H),-1)
    do
      vSyNc
      mx=mousex
      My=mousEy
      keytest t
      gOSUB kEyS
      exit if moUSEk=1
      Exit if t=3735584 ! space
    LOoP
    BmOVe f%(h),shit%,76800
    bMOve F%(H),Shit2%,76800
    if not t=3735584    ! SPace
      pAUse 5
      color cOl%
      DEFfill col%
      do
        vsYnC
        ~xBIOs(5,l:shit%,l:shIt2%,-1)
        SwaP shit%,shit2%
        mxX=moUSeX
        Myy=mousey
        BmoVe f%(H),shit2%,76800
        ellipSe mx,My,Mxx,myy
        mk=moUsek
        exIt if mk
      loop
      pAUSE 5
      iF Mk=1
        bmove f%(h),uNDO%,76800
        bMove shit%,f%(H),76800
      EnDIf
    eNdif
    exit iF T=3735584
  loOP
rEturn
procEDure foVAl
  do
    bmovE f%(H),ShIT%,76800
    bMove f%(h),shIt2%,76800
    ~XbIOs(5,l:f%(H),l:f%(h),-1)
    do
      vSyNc
      mx=MoUSex
      my=moUseY
      KeyTEst t
      gosuB keYs
      exIt if mouseK=1
      exiT if t=3735584 ! SPace
    looP
    bmove f%(H),shit%,76800
    bmove F%(H),SHit2%,76800
    IF Not t=3735584    ! spacE
      PAusE 5
      Color col%
      deFFiLL coL%
      do
        vsync
        ~xBIos(5,L:ShIt%,l:shit2%,-1)
        swAP shit%,sHIt2%
        mxx=mouSeX
        MyY=MoUsey
        bmovE f%(H),sHIt2%,76800
        eLlipse mx,My,Mxx,mYy
        Mk=mousek
        ExiT If mK
      Loop
      pausE 5
      if Mk=1
        bmOve f%(h),undo%,76800
        PellIpsE mx,my,mxx,mYy
        bmove Shit2%,f%(h),76800
      endiF
    ENDiF
    exit if t=3735584
  looP
REtuRN
procedure LOaD_Pi1
  bMove menu%,sHIt%,76800
  fILeSelect patH$+"Pi1","",file$
  Bmove shit%,MeNU%,76800
  '
  iF NOt file$="" or eXiSt(FIle$)=0
    bload filE$,cOnveRT%
    ~xbios(5,l:f%(h),L:f%(h),-1)
    CLs
    '
    Pal%=convert%+2
    Pi1%=cOnveRt%+34
    franz=0
    gbOy=0
    '
    '   diE riChtigen faRben auf Vga setzen...
    '           iCH GLaUbe das beste ERGebNIs erzieLT mAn DADUrch,
    '           die aLTen 32 ByTES auszuleSEn und auf 1024 bytes
    gpAl$="00"+GPaL$
  eLsE if len(gPaL$)=2
    gPaL$="0"+Gpal$
  endif
  Xr=Val(miD$(Gpal$,1,1))           ! rotwErt  ERmitTeln
  xg=vaL(mid$(GPAL$,2,1))           ! GRÅnwert eRmittELN
  XB=val(mid$(Gpal$,3,1))           ! blauwErt ermitTELN
  xr=Xr*8                           ! rotwert  aNPAssEn
  xG=xg*8                           ! grÅnweRT aNpASSEn
  xb=xb*8                           ! blAUweRt ANPassen
  '
  goSUb vgacol(franz+gbOy,XR,xG,xB) ! Vga-farbe SeTzEn
  INc franz
  if FrAnz=4
    frANz=0
    add gboY,16
  enDIf
neXt i
coke%=gEmdOs(&h20,l:0)
bmove &hfffF9800,pal%(H),1024
~gemdos(&h20,l:cokE%)
'
for i=0 to 31996 step 4
  bmove pI1%+I,F%(H)+i*2,4          ! 4 pLanes an 8 plaNES anPassen
next i
'
GOsUB set_pal(10)
~xbios(5,L:MenU%,l:MEnu%,-1)
'
endif
'
rETurn
procedure scHiEBeR
'
iF xbios(89)=0
ediT
eNdIf
'
S%=Xbios(2)
~xbioS(5,l:S%,l:s%,1)
vsYnc
vsetcoLor 0,0,0,0
VSetcolor 1,15,7,0
vsetColOr 2,0,7,15
vsetcolor 3,15,15,15
clIp 0,0,640,200
'
deFtext 1,,,6
y=6
text 0,y,"wArnig from delmpainT!"
ADD y,8*2
dEftext 2,,,
text 0,Y,"THis Painting tool is written in gfa basic on the falcon 030."
add y,8
text 0,y,"please start this program in: 256 colors low-res."
add y,8
text 0,y,"if you start this program in any resolution it will work, but"
add y,8
text 0,y,"not perfetly."
add y,8*2
deftext 1,,,
tExt 0,y,"the copyright:"
add y,8*2
deftext 2,,,
text 0,y,"delmpaint is written by:    joerg tobergte (delmenhorst/germany)"
add y,8
text 0,y,"so i have the full copyright. nobody is allowed to sell this program"
add y,8
text 0,y,"in any way."
add y,8
text 0,y,">> you are allowed to put this program in any mailbox or pd libary. <<"
add y,8
text 0,y,"please copy this usefull tool to everybody you know. (don't sell!)"
add y,8*2
deftext 1,,,
text 0,y,"you have any idea:"
add y,8*2
deftext 2,,,
text 0,y,"if you have some ideas to delmpaint write me a letter and i will inClude it."
add y,8*2
deftext 3,,,
text 0,y,"my adress:      joerg tobergte / mr.coke (avena)"
add y,8
text 0,y,"                adalbert-stifter-strasse 10"
add y,8
text 0,y,"                27753 delmenhorst/germany"
add y,8
text 0,y,"                tel: germany/(04221)52595"
'
x=inp(2)
if x=113 or x=81
edit
endif
'
if xbios(89)=1 or xbios(89)=3
if x=54
  ~xbios(88,l:0)
endif
endif
'
'
'
'
'
return
procedure flip
if t=4915200 or t=5046272          ! x-flip
'
bmove block%,undo%,76800
for i=0 to clipx%-1
  rc_copy undo%,blx%+clipx%-i-1,bly%,1,clipy% to block%,blx%+i,bly%
next i
gosub maske
bmove f%(h),undo%,76800
'
else if t=4718592 or t=5242880     ! y-flip
'
bmove block%,undo%,76800
for i=0 to clipy%-1
  rc_copy undo%,blx%,bly%+clipy%-i-1,clipx%,1 to block%,blx%,Bly%+i
next i
gosub maske
bmove f%(h),undo%,76800
'
else if t=1376378     ! z-flip (rotate)
'
'     ich mache hier spÑter irgendwann weiter, aber nicht jetzt !!!
'
'                     1993 by mr.coke
'
mmx=mousex
mmy=mousey
'
colo1=col%(ptst(oldcx%,oldcy%))
colo2=col%(ptst(mmx,mmy))
'
mmx%=mmx/16
mmy%=mmy/12
'
'     0123456789
'     01234*6789              x=80
'     0123456789              y=12
'
'             zahl=(x/16)+(y/12)*10
'
zahl1=(oldcx%/16)+((oldcy%/12)*16)
zahl2=mmx%+(mmy%*16)
'
if zahl1>zahl2
  swap zahl1,zahl2
endif
'
abstand=zahl2-zahl1
'
wert%=&hffff9800+mul(&h4,zahl1)
rrr1%=peek(wert%)
ggg1%=peek(wert%+&h1)
bbb1%=peek(wert%+&h3)
'
wert%=&hffff9800+mul(&h4,zahl2)
rrr2%=peek(wert%)
ggg2%=peek(wert%+&h1)
bbb2%=peek(wert%+&h3)
'
div rrr1%,4
div ggg1%,4
div bbb1%,4
div rrr2%,4
div ggg2%,4
div bBb2%,4
'
if not zahl1=zahl2
  rw=(rrr1%/abstand)-(rrr2%/abstand)
  gw=(ggg1%/abstand)-(ggg2%/abstand)
  bw=(bbb1%/abstand)-(bbb2%/abstand)
  '
  for i=0 to abstand
    start=zahl1+i
    x=start mod 16
    y=int(start/16)
    '
    x=x*16
    y=y*12
    '
    r%=rrr1%-rw*i
    g%=ggg1%-gw*i
    b%=bbb1%-bw*i
    '
    if r<0
      r=0
    endif
    if g<0
      g=0
    endif
    if b<0
      b=0
    endif
    if r>63
      r=63
    endif
    if g>63
      g=63
    endif
    if b>63
      b=63
    endif
    '
    gosub vgacol(start,r%,g%,b%)
    '
    '
    bmove f%(h),shit2%,76800
    ~xbios(5,l:f%(h),l:f%(h),-1)
    do
      vsync
      mx=mousex
      my=mousey
      keytest t
      gosub keys
      exit if mousek=1
      exit if t=3735584 ! space
      if t=6684714
        bmove f%(h),shit%,76800
        input "> ",z%
        bmove shit%,f%(h),76800
      endif
    loop
    bmove f%(h),shit%,76800
    bmove f%(h),shit2%,76800
    if not t=3735584    ! space
      pause 5
      deffill 1,
      do
        vsync
        ~xbios(5,l:shit%,l:shit2%,-1)
        swap shit%,shit2%
        mxx=mousex
        myy=mousey
        bmove f%(h),shit2%,76800
        box mx,my,mxx,myy
        mk=mousek
        exit if mk
      loop
      bmove f%(h),shit2%,76800
      ~xbios(5,l:shit2%,l:shit2%,-1)
      for y=my to myy
        for x=mx to mxx
          pset x,y,ptst(x,y)+z%
        next x
      next y
      pause 5
      if mk=1
        bmove f%(h),undo%,76800
        bmove shit2%,f%(h),76800
      endif
    endif
    exit if t=3735584
  loop
return
procedure kurpiela
  bmove f%(h),shit%,76800
  bmove f%(h),shit2%,76800
  x=0
  y=0
  deffill 0,,
  gosub gcol
  graphmode 1
  hidem
  deftext 1,,,4
  do
    ~xbios(5,l:shit%,l:shit2%,-1)
    vsync
    keytest t
    swap shit%,shit2%
    bmove f%(h),shit2%,76800
    x=mousex
    y=mousey
    if x>238
      x=238
    endif
    if y>111
      y=111
    endif
    if t=4718592        ! oben
      if cy>0
        sub cy,5
      endif
    else if t=5242880   ! unten
      if cy<75
        add cy,5
      endif
    else if t=4915200   ! links
      if cx>0
        sub cx,5
      endif
    else if t=5046272   ! rechts
      if cx<75
        add cx,5
      endif
    else if t=6750263   ! 7
      if r<63
        inc r
      endif
      gosub vgacol(w%,r,g,b)
    else if t=6815800   ! 8
      if g<63
        inc g
      endif
      gosub vgacol(w%,r,g,b)
    else if t=6881337   ! 9
      if b<63
        inc b
      endif
      gosub vgacol(w%,r,g,b)
    else if t=6946868   ! 4
      if r>0
        dec r
      endif
      gosub vgacol(w%,r,g,b)
    else if t=7012405   ! 5
      if g>0
        dec g
      endif
      gosub vgacol(w%,r,g,b)
    else if t=7077942   ! 6
      if b>0
        dec b
      endif
      gosub vgacol(w%,r,g,b)
    else if t=5111851   ! +
      if r<63
        inc r
      endif
      if g<63
        inc g
      endif
      if b<63
        if g>0
          dec g
        endif
        if b>0
          dec b
        endif
        gosub vgacol(w%,r,g,b)
      endif
      setmouse x,y
      rc_copy kurpi%,0,0,82,89 to shit2%,x,y
      pbox x+cx+2,y+cy+2,x+cx+3,y+cy+3
      if r>9
        text x+2,y+86,"r="+str$(r)
      else
        text x+2,y+86,"r=0"+str$(r)
      endif
      iF G>9
        text x+29,y+86,"g="+str$(g)
      else
        text x+29,y+86,"g=0"+str$(g)
      endif
      if b>9
        text x+56,y+86,"b="+str$(b)
      else
        text x+56,y+86,"b=0"+str$(b)
      endif
      exit if mousek
      x%=cx/5
      y%=cy/5
      w%=(y%*16)+x%
      col%=col%(w%)
      if t<>0
        gosub gcol
      endif
    loop
    showm
    pause 5
    ~xBiOs(5,L:F%(H),L:f%(h),-1)
  reTurn
  procedure new_screens
    toLdcx%=17+(moin%*25)
    new%=int(h*25)+17
    '
    '  toldcx%=(moin%*25)+17
    '  new%=int(h*25)+17
    '
    '     alte zahl swapen...
    '
    rc_copy menu%,toldcx%,173,26,46 to shit2%,0,0
    rc_copy menuon%,toldcx%,173,26,46 to menu%,toldcx%,173
    rc_copy shit2%,0,0,26,46 to menuon%,toldcx%,173
    '
    '     neue zahl swappen...
    '
    rc_copy menu%,new%,173,26,46 to shit2%,0,0
    rc_copy menuon%,new%,173,26,46 to menu%,new%,173
    rc_copy shit2%,0,0,26,46 to menuon%,new%,173
    sq%=0
    '
    bmove menu%,shit%,76800
    '
    '  rc_copy menu%,toldcx%,173,26,46 to shit%,0,0
    '  rc_copy menuon%,toldcx%,173,26,46 to menu%,toldcx%,173
    '  rc_copy shit%,0,0,26,46 to menuon%,toldcx%,173
    '
    '     neue zahl swappen...
    '
    '  rc_copy menu%,new%,173,26,46 to shit%,0,0
    '  rc_copy menuon%,new%,173,26,46 to menu%,NeW%,173
    '  RC_COPy shiT%,0,0,26,46 to menuon%,new%,173
    '
    '
    moin%=h
    '
    '
    '
    '
    '
  return
  ProCEdure gcol
    r=peek(&hffff9800+mul(w%,4))
    g=peek(&hffff9800+mul(w%,4)+&h1)
    b=peek(&hffff9800+mul(w%,4)+&h3)
    div r,4
    div g,4
    div b,4
  return
  procedure testcheat
    '
    '     hidden cheat - type 'lock' in the mainmenu...
    '
    '
    if t=2490476  !l
      x=inp(2)
      if x=111   ! o
        x=inp(2)
        if x=99   ! c
          x=inp(2)
          if x=107   ! k
            gosub login
          endif
        endif
      endif
    endif
    '
  return
  procedure meditor
    '
    '       the delmpaint mouse editor
    '
    bmove menu%,shit%,76800
    ~xbios(5,l:normal%,l:normal%,0)
    '
    vsetcolor 0,0
    vsetcolor 1,&hfff
    '
    cls
    input "give me your name> ",name$
    cls
    '
    color 1
    deffill 2,2,8
    boundary 0
    pbox 136,7,142,136
    pbox 0,136,279,143
    pbox 272,7,279,136
    '
    arrayfill bf|(),0
    '
    '       feldaufbau:     0=hintergrund
    '                       1=spritepunkt
    '                       2=maskenpunkt
    do
      if mousek=1
        mx=mousex
        my=mousey
        if mx<135 and my<135 and my>7 and mx>7
          x%=mx/8
          y%=my/8
          deffill 1,2,8
          pbox x%*8,y%*8,x%*8+6,y%*8+6
          pbox x%*8+136,y%*8,x%*8+6+136,y%*8+6
          bf|(x%-1,y%-1)=1
          pset 63+x%,166+y%,15
          pset 203+x%+17,166+y%,15
        endif
        if mx>143 and mx<271 and my<135 and my>7 and mx>7
          x%=mx/8
          y%=my/8
          deffill 3,2,8
          pbox x%*8,y%*8,x%*8+6,y%*8+6
          pbox x%*8-136,y%*8,x%*8+6-136,y%*8+6
          bf|(x%-18,y%-1)=2
          pset 63+x%-17,166+y%,0
          pset 203+x%,166+y%,0
        endif
      endif
      if mousek=2
        mx=mousex
        my=mousey
        if mx<135 and my<135 and my>7 and mx>7
          x%=mx/8
          y%=my/8
          deffill 0,2,8
          pbox x%*8,y%*8,x%*8+6,y%*8+6
          pbox x%*8+136,y%*8,x%*8+6+136,y%*8+6
          bf|(x%-1,y%-1)=0
          pset 63+x%,166+y%,0
          pset 203+x%+17,166+y%,15
        endif
        if mx>143 and mx<271 and my<135 and my>7 and mx>7
          x%=mx/8
          y%=my/8
          deffill 0,2,8
          pbox x%*8,y%*8,x%*8+6,y%*8+6
          pbox x%*8-136,y%*8,x%*8+6-136,y%*8+6
          bf|(x%-18,y%-1)=0
          pset 63+x%-17,166+y%,0
          pset 203+x%,166+y%,15
        endif
      endif
      exit if inkey$=" "
    loop
    '
    cls
    '
    deftext 1,,,4
    text 130,4,190,"  >>> set the hotspot <<<  "
    '
    line 128,0,128,128
    line 0,128,128,128
    for y=0 to 15
      for x=0 to 15
        if bf|(x,y)=1
          deffill 1,2,8
          pbox x*8,y*8,x*8+6,y*8+6
        else if bf|(x,y)=2
          deffill 3,2,8
          pbox x*8,y*8,x*8+6,y*8+6
        endif
      next x
    next y
    '
    deffill 7,2,8
    pbox 0,0,6,6
    '
    kolx|=0
    koly|=0
    '
    do
      mx=mousex
      my=mousey
      if mousek=1
        if mx<128 and my<128
          x%=mx/8
          y%=my/8
          if bf|(kolx|,koly|)=0
            deffill 0,,
            pbox kolx|*8,koly|*8,kolx|*8+6,koly|*8+6
          else if bf|(kolx|,koly|)=1
            deffill 1,2,8
            pbox kolx|*8,koly|*8,kolx|*8+6,koly|*8+6
          else if bf|(kolx|,koly|)=2
            deffill 3,2,8
            pbox kolx|*8,koly|*8,kolx|*8+6,koly|*8+6
          endif
          deffill 7,2,8
          pbox x%*8,y%*8,x%*8+6,y%*8+6
          kolx|=x%
          koly|=y%
        endif
      endif
      exit if inkey$=" "
    loop
    '
    cls
    text 0,6,"save Your MOUSeIcoN..."
    fILESElect "f:\*.dmp","",file$
    '
    if not file$=""
      open "o",#1,filE$
      priNT #1,"'"
      PRiNt #1,"'           fRoM the delmpaint mouseeditor..."
      print #1,"'"
      PrINt #1,"'"
      pRInT #1,"'   NAMe Of editor: "+name$
      print #1,"'"
      print #1,"m$=mki$(";x%;")+mki$(";y%;")+mki$(1)+mkI$(0)+Mki$(1)"
      PRINT #1,"'"
      '
      '     ZUeRst die maske:
      '
    endif
  next x
  print #1,")"
next y
'
'     dann die biLdDATEN:
'
pRint #1,"'"
fOr y=0 TO 15
  print #1,"m$=m$+mki$(&x";
  fOr x=0 TO 15
    IF BF|(X,Y)=0 OR bf|(x,y)=2
      pRint #1,"0";
    ELse IF BF|(x,Y)=1
      prINt #1,"1";
    enDiF
  NEXt x
  print #1,")"
next y
print #1,"'"
PRInt #1,"'"
prINT #1,"'"
ClOse #1
'
cls
print "ok, now you havE tO give me (mr.coke)"
priNT "yOUr *.DMp file... then i will"
print "include it In Your spEcIAL dElMpAINT."
~inp(2)
'
endif
'
~xbios(5,L:menU%,L:MEnU%,3,&h100+&h10+&H3)
bMOVE SHit%,menu%,76800
'
retuRN
procedure range
do
BmovE F%(H),ShIt%,76800
bMoVe F%(H),shit2%,76800
~xbios(5,l:f%(H),l:f%(h),-1)
do
  Vsync
  mx=mousex
  My=moUSEY
  kEytEsT t
  GOsUb keys
  exit If MOusek=1
  exit if t=3735584 ! spacE
  if t=6684714
    GOSUb Set_CoLrangE
  endif
loop
bmove f%(H),SHIT%,76800
bmove f%(h),sHit2%,76800
iF NOT t=3735584    ! SpaCe
  PausE 5
  Color 1
  deffill 1,
  do
    vsync
    ~xbIos(5,l:shit%,l:shiT2%,-1)
    SWAP ShiT%,sHIT2%
    mxx=mOuseX
    myY=MOUsEy
    bmove f%(h),shiT2%,76800
    bOx Mx,my,Mxx,myy
    Mk=MoUsEk
    exit iF mK
  LOOP
  Bmove F%(h),shit2%,76800
  ~xbios(5,l:shit2%,l:shit2%,-1)
  '
  '
  '
  '
  '
  if RanGeL%=0
    '
    '         Y - rAnge !!!
    '
    '
    x%=(Sx-3)/12
    y%=(sY-8)/12
    Hms|=y%*16+X%     ! farbStArT
    '
    X%=(eX-3)/12
    Y%=(ey-8)/12
    HME|=y%*16+X%     ! FArbende
    '
    pogo=0
    '
    if mx>mxx
      swap mx,mxx
    endiF
    iF mY>MyY
      SwaP My,mYY
      Pogo=1
    endif
    '
    '
    hmc|=hme|-hms|    ! farben insgesaMt
    AnY|=myy-My
    if any|=0
      any|=1
    endif
    stEpr=HMc|/aNy|       ! stEpRATe
    TC=hms|
    if pogo=0
      for y=mY tO mYY
        '
        coLOr col%(Int(tc))
        line mx,y,mxx,y
        add tc,stEPr
        '
      nEXt y
    eLse
      fOr Y=MyY tO mY step -1
        '
        color cOl%(inT(tC))
        Line Mx,Y,mxx,y
        add tc,sTepr
        '
      next y
    endif
    '
    hMS|=y%*16+x%     ! FarbstaRt
    '
    X%=(eX-3)/12
    Y%=(EY-8)/12
    hme|=y%*16+X%     ! fArbeNDe
    '
    pogo=0
    '
    if mx>mxx
      swap mX,MXx
      poGo=1
    EndiF
    iF MY>MYy
      Swap my,myy
    endif
    '
    '
    hmc|=hme|-hmS|    ! fArben insgesamT
    any%=mxx-mx
    if any%=0
      aNY%=1
    endif
    stEpr=hmc|/any%       ! stepratE
    tc=hMs|
    iF pOgO=0
      For X=MX to mxx
        '
        color col%(int(tc))
        line x,my,x,myy
        aDd Tc,stePR
        '
      next x
    ELSE
      fOr x=mxx to mx step -1
        '
        color col%(int(tc))
        linE x,my,x,mYY
        add tC,STEPr
        '
      Next x
    endif
    '
  endif
  '
  '
  '
  '
  pause 5
  if Mk=1
    Bmove f%(h),undo%,76800
    bmovE sHIT2%,F%(H),76800
  Endif
Endif
exit if t=3735584
loop
return
prOcEduRe SeT_ColranGE
~XBiOs(5,l:shit%,l:shit%,-1)
'
gosub newline
'
deftexT 1,,,6
gRAphMOde 3
teXT SX,Sy,"S"
text ex,ey,"e"
'
'
'
'
'
'
do
vsync
t$=inkeY$
'
If mouSek=1
  IF mousex<192 AnD MOUSEy<192
    x%=moUsex/12
    y%=mousey/12
    text sx,sy,"s"
    sx=x%*12+3
    sY=y%*12+8
    TexT sX,sY,"S"
  endif
ENDIf
If mousek=2
  if mousex<192 and mousey<192
    x%=mousEX/12
    Y%=mouSEy/12
    texT EX,EY,"e"
    Ex=x%*12+3
    ey=y%*12+8
    text ex,ey,"e"
  endif
enDIF
'
exIt iF T$=" "
loop
'
pogO=0
iF EX<SX
Swap eX,sx
pogo=1
endif
if ey<sy
swap ey,Sy
PogO=1
eNdIF
'
graphMODE 2
~xBios(5,l:f%(h),l:f%(h),-1)
return
procedure set_pAlanI
~xbIOs(5,l:shIT%,L:SHiT%,-1)
'
gosub newline
'
deftext 1,,,6
gRaphmoDE 3
TexT psx,psy,"S"
tEXT PEX,pey,"e"
'
Do
vsync
t$=inkey$
'
text psx,psy,"s"
EnDif
EnDiF
If mousEK=2
IF mOusex<192 and mousey<192
x%=mousex/12
y%=mousey/12
teXt pex,pEY,"e"
pex=X%*12+3
PEY=Y%*12+8
tExt pex,pey,"e"
endif
endif
'
exIt If t$=" "
loop
'
gosub calC_aNI
'
GRAPhmodE 2
~xbios(5,l:f%(h),l:f%(h),-1)
return
procedURe cAlc_anI
X%=(psx-3)/12
y%=(pSY-8)/12
HMs|=Y%*16+x%     ! farbstart
'
x%=(pex-3)/12
y%=(pey-8)/12
hme|=y%*16+x%     ! farbenDe
'
PAnz%=(HMe|-hms|)*4       ! ANZAHl Der farben
'
ps%=val("&h"+hex$(&hfffF9800+Hms|*4))         ! faRbsTArtadreSsE
PE%=VAL("&h"+hex$(&Hffff9800+hme|*4))         ! farbendadresse
'
reTURn
PROceDUre newLINE
cLs
'
boundary 0
'
q=0
for y=0 to 15
for x=0 to 15
deffilL col%(Q),,
pbOX x*12,y*12,x*12+11,y*12+11
PSET X*12,y*12,0
Inc q
next x
next y
return
pRoceduRE SwaP_colors
'
'     IdEA BY CArnerA (thanx a lot)
'
'
hefe:
graphmode 2
~xBIOs(5,L:SHit%,L:Shit%,-1)
'
goSUB NeWline
'
deftext 1,,,6
graphmode 3
'
for i=0 to 255
'
if oRT|(I)=1
texT Psx2%(i),pSY2%(I),"S"      ! SoUrce
endif
'
next i
'
text pex2,pEY2,"D"      ! deStiNAtion
'
do
vSyNC
T$=INKey$
if Upper$(t$)="c"
arrayfill ort|(),0
ort|(0)=1
arRAYfILL psx2%(),0
arRAyfill psy2%(),0
if mOuSEX<192 and mouSeY<192
X%=MOUSex/12
y%=mOusey/12
'
psx2%=x%*12+3
psy2%=y%*12+8
w|=x%+y%*16
'
'
'
'
if ort|(w|)=0
  iF pcOuNt|<254
    Ort|(w|)=1
    psX2%(w|)=psx2%
    Psy2%(w|)=PsY2%
    inC pCoUNt|
    Text PsX2%,pSy2%,"S"
  Endif
else
  if pcounT|>1
    oRT|(W|)=0
    DEC pcouNt|
    text psx2%,psy2%,"s"
  endif
endif
'
'        TexT pSx2%,Psy2%,"s"
'
'
'
'
paUse 5
enDif
eNdIf
iF mOuSEk=2
If moUsEx<192 AnD Mousey<192
x%=mousex/12
y%=moUsEY/12
TEXT pex2,pEy2,"d"
pex2=x%*12+3
pey2=y%*12+8
text pex2,pey2,"d"
eNdiF
eNdIf
'
exit If t$=" "
loOp
'
x%=(pSx2-3)/12
Y%=(psY2-8)/12
sOu|=Y%*16+X%     ! sOurcE fArBe
'
X%=(Pex2-3)/12
y%=(pey2-8)/12
des|=y%*16+x%     ! dEstiNatION Farbe
'
graphmode 2
~xbios(5,l:f%(h),l:f%(h),-1)
return
PrOcedurE click_swapping
Do
BmOve f%(h),sHit%,76800
bmove f%(h),shit2%,76800
~xbIOS(5,l:F%(h),l:f%(h),-1)
dO
vSYNC
MX=mousEx
my=mousey
keytest t
gosub KeyS
iF T=6684714
gOsUb swAp_COLoRS
endif
exit if mousEk=1
exIT if t=3735584 ! SpAce
LoOp
BMoVe f%(h),ShIT%,76800
BmOVe f%(h),shit2%,76800
if not t=3735584    ! spAcE
PAUSE 5
coloR 1
do
vsync
~xbios(5,l:shit%,l:shit2%,-1)
SwaP sHIt%,Shit2%
mXx=moUSex
MYY=MouSeY
bMOve f%(h),ShIT2%,76800
BOX Mx,my,mXx,myy
mk=mousek
exit if mk
loOp
~xBiOs(5,L:shit%,l:Shit%,-1)
bMove F%(h),shiT%,76800
pAuSE 5
iF mk=1
fOr y=mY tO Myy
  for x=mx to mxx
    farBE%=pTSt(x,y)
    If ort|(farbe%)=1
      pset x,y,des|
    endif
  nexT X
nexT Y
bmove F%(h),UnDo%,76800
BmOve SHit%,f%(h),76800
endif
endif
exit if t=3735584
loOP
retuRN
procEdure Get_bOb
'
do
eXiT iF MoUseK
Loop
Do
EXit If mousek=0
loop
'
~xbios(5,l:shit%,l:shit%,-1)
clS
'
Do
vsync
ExIT IF MOusek
Loop
'
~xbios(5,l:shit%,l:shit2%,-1)
'
'     spÑteR malîWeITerMAcheN !!!
'     (mIT MIcHi)
'
return
procedure real_zOom_old
'
bmove f%(h),shIt%,76800
bmOve f%(h),ShIt2%,76800
~xbios(5,l:shit%,L:shiT%,-1)
VsYNc
'
VX%=0
vy%=0
foo%=16       ! zoomweiTe
ofF%=FoO%*4
HlF%=Off%/2
'
do
x%=mousex
y%=mOusey
if x%>320-off%
x%=320-off%
seTmoUSe X%,y%
Endif
IF y%>200-OFf%
y%=200-off%
setmouse X%,y%
endif
bx%=x%+foo%-1
by%=y%+FOo%-1
'
q=0
For x=X% to bx%
T=X%+q*4
rc_cOpY f%(h),x+hlf%,y%+hlf%,1,Foo% to Shit2%,t,y%
Rc_copy f%(h),x+hlf%,y%+Hlf%,1,fOo% to sHit2%,T+1,Y%
rc_copy f%(h),x+hlf%,y%+Hlf%,1,fOo% TO shit2%,t+2,y%
Rc_copy f%(h),x+hlf%,y%+hlf%,1,foo% to shit2%,t+3,y%
inc Q
nExT x
'
Q=FOO%-1
FoR y=by% downto y%
t=y%+q*4
rc_copy shIt2%,x%,y,off%,1 to shit2%,x%,T
rC_copY SHIt2%,x%,y,off%,1 to shit2%,x%,t+1
rC_copY sHiT2%,X%,y,OFf%,1 to shit2%,x%,t+2
rC_COpy shIT2%,X%,Y,off%,1 to shit2%,x%,t+3
dec q
next y
'
~xbios(5,l:shit2%,L:sHit2%,-1)
vsync
rC_CoPY f%(H),Vx%,vy%,off%,off% to shit%,vx%,vy%
'
vx%=mousex
VY%=MouSEy
iF vx%>320-oFF%
VX%=320-OFf%
enDif
if vy%>200-off%
vY%=200-off%
ENdIF
vBX%=Vx%+foo%-1
vby%=vy%+foo%-1
'
Q=0
for x=vx% to vbx%
t=vx%+q*4
Rc_Copy f%(h),X+hlf%,vY%+HlF%,1,Foo% To ShIT%,t,vy%
rc_CoPY F%(h),x+hLf%,VY%+HLf%,1,foo% to shit%,T+1,vy%
rC_CoPY f%(H),x+Hlf%,vy%+hlf%,1,foo% to Shit%,t+2,vy%
rc_copy f%(H),x+HLf%,vy%+hlF%,1,fOO% To shIt%,T+3,VY%
Inc q
next x
'
q=fOo%-1
For y=VbY% Downto vy%
t=vy%+q*4
rc_coPy shIt%,vX%,y,oFF%,1 tO shit%,vx%,t
rc_Copy ShiT%,VX%,Y,oFf%,1 to shit%,vx%,t+1
rc_copy shit%,vX%,y,off%,1 to shit%,vx%,t+2
rC_copy shit%,vx%,y,off%,1 To sHIt%,vx%,T+3
dEc Q
nExT Y
'
~xbiOS(5,l:shit%,l:shit%,-1)
vsync
'    rc_copy f%(h),x%,y%,off%,OFf% to shiT2%,x%,Y%
EXIT If mouSek
loop
~xbios(5,l:f%(h),l:f%(h),-1)
returN
proCeDUre REal_zOoM
'
BMOvE f%(h),shit%,76800
bmove f%(h),shit2%,76800
'
~xbioS(5,l:shit%,l:shit2%,-1)
coloR 1
mx%=mOusex
My%=Mousey
px%=(mx%-160)/faK%
py%=(mY%-100)/FaK%
If MX%-160=1
px%=1
endif
if mx%-160=-1
pX%=-1
endIF
iF My%-100=1
PY%=1
endif
if my%-100=-1
py%=-1
enDif
add qx%,px%
add qy%,py%
KeyTEsT t
'
If qx%<305 aND qY%<225 And qx%=>0 and qy%=>0
'
for x%=0 To 14
rc_copy f%(h),qx%+x%,qy%,1,15 tO ShiT%,x%*4,0
rc_Copy f%(H),Qx%+x%,qy%,1,15 To Shit%,x%*4+1,0
rc_copy F%(h),qx%+x%,Qy%,1,15 to shIt%,x%*4+2,0
rc_copy f%(h),qx%+X%,qy%,1,15 tO shit%,X%*4+3,0
neXT x%
for y%=14 downto 0
rc_Copy ShIT%,0,y%,60,1 to shiT%,0,y%*4+3
rc_copy shit%,0,y%,60,1 to shit%,0,y%*4+2
rc_copy shit%,0,Y%,60,1 tO sHiT%,0,Y%*4+1
RC_CoPy shit%,0,y%,60,1 to shit%,0,y%*4
next y%
'
box 27,27,32,32
'
Swap shit%,shit2%
vsYnC
~xbiOS(5,L:Shit%,l:shit2%,-1)
'
endif
'
if MousEk=1
PsET qX%+7,Qy%+7,col%(col%)
rc_cOPY shit%,QX%+7,QY%+7,1,1 to f%(h),qx%+7,qy%+7
rc_copy shit%,qx%+7,qy%+7,1,1 to shit2%,qx%+7,Qy%+7
Else if mouSEk=2
COl%=PTst(qx%+7,qy%+7)
endif
'
exit if t=917512
'
loop
'
showM
~xbioS(5,L:F%(h),l:F%(h),-1)
PAUse 10
'
'
'
'
'       EINe vERnÅnftige sloWdraW FUNKTion...
'
' Hidem
' x%=0
' y%=0
' '
' fak%=4  ! sLow-fAKtOR
'
' dO
' '
' SEtmouse 160,100
' vsync
' mX%=mousex
' my%=mousey
'
' pX%=(mX%-160)/fak%
' py%=(My%-100)/fak%
'
' ADd X%,Px%
' aDd Y%,pY%
'
' PboX x%,y%,X%+4,y%+4
'
' OOP
'
'
'
'
'
retUrN
PROcedure koorDiNATen
IF KooR|=1
If mousex<>ol1% oR mouSEy<>OL2% aNd Mx%>128
ol1%=mousex
ol2%=mOusey
lkox%=setxf%+InT((Mx%-128)/rAx)
lKoY%=SEtyf%+InT(MY%/Rax)
lkox2%=int((mX%-128)/rAx)
lkOy2%=INt(my%/rax)
text 0,199,str$(lkOx%)+"  "+stR$(lkOy%)+"  "
tEXt 0,192,Str$(lkox2%)+"  "+str$(Lkoy2%)+"  "
ShoWM
ENdIf
rc_copy block%,blx%,bly%,cliPx%,clipy% to shit%,0,0
rc_Copy block%,blx%,bly%,CliPX%,cliPy% To PaCk%,0,0
NEwx%=cLIpx%
newy%=clipy%
'
color 1
do
mx%=mousex
my%=MOuseY
'
SWap shIT%,SHiT2%
~xbios(5,l:shit%,l:shit2%,-1)
vsync
bmove f%(h),shit%,76800
BoX 0,0,mx%,my%
exit if mousek=1
loop
gosub ZOOmblOCK
'
ReTurn
procedure ZOombLoCK
'
~XBiOs(5,l:shit2%,l:shit2%,-1)
vsync
cls
~xbIos(5,l:shit%,l:shit%,-1)
vSync
CLS
~XBIOs(5,L:shit%,l:block%,-1)
vsync
rc_cOpy pack%,0,0,newx%,newy% to Shit2%,0,0
'
Mx%=MOUSEx
My%=mousey
'
adx=clipx%/mx%
ady=clipy%/mY%
'
X=0
FOR X%=0 TO mx%
rc_cOPy SHiT2%,X,0,1,clIpy% to shit%,x%,0
add x,adx
next x%
bmOve ShIt%,shiT2%,76800
clS
Y=0
FoR Y%=0 tO My%
rC_copy shit2%,0,y,mX%,1 to shit%,0,y%
add y,adY
nEXt y%
'
bmovE shit%,block%,76800
blx%=0
blY%=0
Blx2%=MX%
bly2%=My%
newX%=Mx%
newY%=my%
'
return
'
procEdure ani_menu
'
a$="1|5|1|"
'      ************************************
a$=A$+"           AniMator ToOl            |"
a$=a$+"CuT sPRiTe size|"
a$=a$+"graB sPrites|"
A$=a$+"SEt Speed of animation|"
a$=a$+"edit sprite liST|"
a$=a$+"play AnImAtIoN|"
a$=a$+"0|"
'
GOsub alert(a$)
'
if bock%=10
gosub cuT_it
ElSe If bock%=11
gosub grab_it
else iF Bock%=12
elsE iF bOcK%=13
eLse IF bock%=14
goSub play_it
endif
'
reTurN
pROcEdure cut_it
'
'     nach dem mcflY Und stalLion MIr GEHîRIG IN dEN ARsch getreten haben,
'     werde Ich jetzt einen animator in delmpaint ab v1.5 schreiben...
'
'             vorschLÑge:
'
'                     mc fly:         -
'
'
'
'
'                     stallion:       -       Freie angabe der aBspielge-
'                                             schwindiGkeit
'                                     -       freie angabe DEr spritegîûen
'                                             (z.b. 8x8, 8x16, 16X16 Usw.)
'                                     -       anzeige alleR spriteanimationEn
'                                             nebeneinander aUf Dem screen
'                                             bzw. meHrEren screens bei SEhr
bmove shit%,shiT2%,76800
'
~Xbios(5,l:shit%,l:shit%,-1)
GOSub set_pal(h)
'
grapHMOde 3
do
vsync
swaP shit%,shit2%
~xbios(5,l:sHit%,l:shit2%,-1)
mx=mousex
My=mOusey
bmove f%(h),sHit%,76800
Text 0,6,str$(mx)+","+str$(mY)+"   "
lIne 0,my,319,my
line mx,0,mX,239
eXit if mousek=1
looP
pAUse 5
do
vsync
swaP sHIt%,shit2%
~xbios(5,l:sHIt%,l:shit2%,-1)
mxx=mouseX
Myy=mousey
bmove f%(H),ShIt%,76800
text 0,6,str$(mxx-mX)+","+StR$(myy-my)+"   "
box mx,my,MXX,myy
exit if mousEK=1
Loop
pause 5
'
spb%=mxX-MX
Sph%=myy-my
spx%=mx
SPY%=My
spsc%=h
'
~xbios(5,L:menu%,l:menu%,-1)
bmove pAck%,menu%,76800
gosub set_pAl(10)
'
grAphmode 2
'
returN
proCedure grab_it
'
BmoVe menu%,pack%,76800
bmoVe f%(Spsc%),shit%,76800
bmove ShiT%,Shit2%,76800
~xbios(5,l:shIt%,l:SHit%,-1)
gosub set_pAl(Spsc%)
'
graphmode 3
x=SpX%
y=spy%
setmouse x,Y
hIdEm
do
vsync
swaP sHiT%,shit2%
~xbios(5,l:sHiT%,L:shit2%,-1)
bmove f%(spSc%),SHit%,76800
mx=int(mouseX/sPB%)*Spb%
my=int(mousEy/SPH%)*sph%
'
x=(spx% mod sPB%)+mx
y=(spy% mod sph%)+my
'
TExt 0,199,"buffer: "+str$(bufFEr%)
bOx x,y,x+spb%,y+sph%
IF buFfer%<99
if mousek=1
PAuSe 5
spxb%(buffer%)=x
SPyB%(buffer%)=y
inc buFFeR%
Endif
endif
if BUfFEr%>0
if mousek=2
paUSE 5
dec buffer%
endiF
ENdif
'
exit if inkeY$=" "
LOoP
pause 5
~xbios(5,l:MENu%,L:menu%,-1)
bmove paCK%,MEnu%,76800
gosub set_paL(10)
SHOwm
'
return
procEDURE play_it
'
bmove MENU%,Pack%,76800
bmove f%(h),sHIT%,76800
BMove shit%,shIt2%,76800
BMOVE f%(spsc%),mask%,76800
GoSUB SEt_pal(h)
'
or%(0)=maSk%
RCALL olaf%,or%()
'
~xbIos(5,L:SHIT%,l:shit%,-1)
q=0
'
faK=1
'
do
'
VSYNC
swap shit%,ShiT2%
~XBIOs(5,l:shit%,l:sHIt2%,-1)
BMOVE f%(h),shit%,76800
mx=MOuSEX
MY=mousey
'
t$=iNKeY$
'
RC_COpy mask%,sPxb%(q),SPYB%(Q),spb%,sph% tO shiT%,MX,MY,4
rc_copy f%(Spsc%),SPXB%(Q),spyb%(q),spB%,sPh% TO SHIt%,mx,my,7
adD q,FaK
IF Q>Buffer%
elSe If T$="-"
IF FAk>0.1
sub fak,0.1
ENdiF
ENDIf
'
exit if MOusEK
EXIt if t$=" "
'
looP
PauSE 5
T$=""
'
~XBios(5,l:menU%,L:MeNU%,-1)
BMOve pack%,mENU%,76800
gOSUB Set_pal(10)
'
reTURn
PROCEdure liSt_it
'
bMOVE Menu%,pacK%,76800
~xbioS(5,L:SHIt%,l:shit%,-1)
Cls
goSUB SEt_pal(spSc%)
'
'
'     fÅR sPÑTER.....
'
'
Return
'
pRocEdURE SWap_bani
If aNi|=1
GRAPHmode 3
'
foR y=0 To zY%
LINE 0,y*ay%,zx%*aX%,y*Ay%
nEXT Y
For x=0 to zX%
lIne X*AX%,0,X*Ax%,zy%*ay%
nExT X
'
' fOR Y=0 TO zy%
' for x=0 To ZX%
' pLOT X*Ax%,y*ay%
' neXt X
' NeXT Y
'
'
GRaphmodE 2
EndiF
RETUrn
procEDure ENTER_ani
~xbiOS(5,l:shIT%,L:SHit%,-1)
do
clS
InPuT "STARt of aniMAtIoN >",SANI%
input "eND oF aNIMATion >",eanI%
EXit IF SANi%=>0 and saNI%<Num% AND EAni%=>0 and eANI%<nuM% AND Eani%>sanI%
PRInT "ERROr! start HAD To BE SMAller thAN ENd."
LOOP
'
~Xbios(5,l:F%(h),l:f%(h),-1)
rETURN
proceDure enTER_SPeed
~xbIos(5,l:shIT%,L:SHit%,-1)
cls
For i=SaNI% TO Eani%
prInt "sPrITE("+STr$(i)+") had To waIt >";
INPUT "",wait|(i)
NexT i
~xBIOS(5,L:f%(h),l:f%(h),-1)
RetUrn
PROCEdure pLay_Ani
IF ANI|=1
'
'
bmove F%(0),shIT%,76800
bMOVE F%(h),mask%,76800
'
Or%(0)=mASk%
RCALL olaf%,oR%()
'
~xbIOs(5,L:SHIT%,l:shit%,-1)
BmOve f%(0),SHIT%,76800
Mx%=mousEx
My%=moUSEY
Endif
rC_cOpy f%(0),MX%,MY%,Ax%,ay% to ShIt%,Mx%,MY%
RC_Copy maSk%,X%,y%,Ax%,AY% TO Shit%,mx%,My%,4
Rc_CoPY SCReen%,x%,y%,Ax%,AY% to SHIT%,Mx%,my%,7
t$=iNkEY$
foR K=0 TO Wait|(i)
vSyNC
neXT K
EXit if t$=" "
NeXT I
eXIT IF t$=" "
loop
'
~XbIOS(5,l:F%(H),L:F%(H),-1)
'
endif
ReTURn
'
PROCEdure mERk_mauS
MMXX%=mouseX
Mmyy%=mOUSEY
returN
ProceDURE Set_mauSPos
HiDEM
SEtmousE MmxX%,mMYY%
SHowm
reTUrn
PrOCEDUre shaDE
'
iF plOCK|=1
BMove maSK%,cOnvERT%,76800
'  BMove maSK%,sHit%,76800
'
NO%=CONvert%
sO%=MaSK%
aH%=SHIT%
'
bb%=cliPX%
hH%=ClIPY%
'
BX%(0)=bb%          !  breITe IN pIXEL
Bx%(1)=hh%          !  hoEHE in pIXEL
Bx%(2)=1           ! anzaHL PlanES
BX%(3)=1           ! VorderGRUndfARBE
Bx%(4)=1           ! hiteRGRuNd F.
BX%(5)=6           ! LOgischE VEr
Bx%(6)=0           ! X OFFSet
bx%(7)=0           ! y OFFsEt
BX%(8)=SO%         ! AdressE SOUrcE
BX%(9)=16          ! OFfset nEXT PlaNE
BX%(10)=320        ! Offset NEXT liNE
BX%(11)=2          ! Plane bREITE
bX%(12)=0          ! X OFFset
bx%(13)=0          ! Y OFFSeT
BX%(14)=0      ! ADressE DEST.
Bx%(15)=16         ! OFFSEt nexT PLANE
bX%(16)=320        ! OFFSet nExT LINE
bX%(17)=2          ! PLANe brEiTE
'
' ZEIgER  AUF fueLL MUSTEr
' OFFSEt auF MASK RAsTER
' OFfsEt nEXT COlOR
' LINe wIe hLINE
' OfFSET 24 BytEs
T=0
DO
SHOwM
MK=MOusEk
KEYTESt T
GOSUb kEYs
IF MK
Do
HIDEM
keYTeST T
IF mOUSEX<320-(clIPX%-BLX%)
X%=MoUSEX
ElsE
X%=320-(CLIPX%-BlX%)
ENDIf
If moUSEY<200-(ClIPY%-BLy%)
Y%=mouSEY
BX%(2)=1           ! aNZAHL pLanES
BX%(5)=3           ! LOgISCHE vEr
bX%(6)=BLX%           ! X OfFSET
Bx%(7)=BlY%          ! y OFFSEt
BX%(8)=SO%     ! AdReSsE SOURcE
BX%(12)=0          ! X OfFsET
BX%(13)=0          ! Y OFfSET
BX%(14)=nO%   ! aDRESSE DeST.
BITbLT bx%()
FOR I%=0 To 7
'
BX%(0)=BB%         !  BrEIte IN PIXeL
BX%(1)=HH%         !  hOEhE IN PIXeL
BX%(2)=1           ! ANzAHl PLANES
bX%(5)=3           ! LOGIsCHE vER
BX%(6)=X%         ! x OFFSEt
BX%(7)=Y%           ! y OFFSEt
BX%(8)=F%(H)+I%*2  ! aDRESSE SOUrCE
BX%(12)=0          ! X oFFSET
BX%(13)=0          ! Y OfFSET
BX%(14)=ah%  ! adRESSE dEST.
BITblt bX%()
'
BX%(0)=BB%         !  bREITE In piXEL
BX%(1)=Hh%         !  HOEHE In piXEL
BX%(2)=1           ! AnZAHL PLanEs
BX%(5)=6           ! LOGiSCHE VEr
bX%(6)=0           ! x OFFSEt
BX%(7)=0           ! Y OFFseT
BX%(8)=NO%     ! ADrESSE SOurCE
BX%(12)=X%         ! X OfFSET
BX%(13)=y%          ! Y ofFSET
Bx%(14)=F%(H)+I%*2   ! ADReSse DEST.
BiTBLT BX%()
'
bX%(0)=bB%         !  BREITe IN PIXEl
Bx%(1)=HH%         !  HOEHe IN PIXEl
BX%(2)=1           ! aNZAHL pLANES
If MK=2
  bX%(5)=4           ! LOGIsCHE VER
eLSE
  BX%(5)=1
ENDiF
BX%(6)=0           ! X OFfSET
BX%(7)=0           ! Y OFfSET
BX%(8)=AH%     ! adrESSE SoURCE
BX%(12)=0          ! X offSET
BX%(13)=0          ! y OFFSET
Bx%(14)=nO%   ! ADRESsE DEST.
BItbLT BX%()
NExT I%
EXIT If MoUSEK=0
ExIT IF T=3735584 ! SPaCe
LOOP
EnDIF
EXIT iF T=3735584 ! SPACE
lOOP
'
SHOWm
'
ENDIF
REtURN
PROCEduRE ALErT(A$)
'
'             DIE TREnnUNG IM sTRING WIRd DURCH EiN | ANGEGEBeN.
'
'     ALERT sTRING:   1)      ANZAhL DER TeXTREIHEN (1-3)     0 = NiX
NEXT i
ENDIF
'
if leu%>0
'
y=(54-leu%*6)+120
'
for i=1 to leu%
x=15
'
rc_copy abox%,186,75,12,12 to abox%,x,Y
'
x=31
'
do
b$=mid$(a$,a,1)
inc a
exIt if b$="|"
'
c=asc(b$)-65
rc_copY abox%,186+c*4,1,4,5 to abox%,x,y+3
adD x,5
'
loop
s=a
'
'
add y,14
'
next I
'
Endif
'
'
'
if but%=1
do
b$=miD$(A$,a,1)
inc a
exit if b$="|"
lOop
c1=val(mid$(a$,s,a-2))
'
rc_cOpy abox%,186,13+c1*16,52,13 to abox%,66,103+120
s=a
'
ElSe if but%=2
do
b$=mid$(a$,A,1)
iNc a
exit if b$="|"
loop
C1=Val(mid$(a$,s,a-2))
rc_copy ABox%,186,13+c1*16,52,13 to abox%,35,103+120
s=a
do
b$=MID$(a$,a,1)
inc a
exit if b$="|"
LOOp
c2=val(mid$(a$,s,a-2))
rC_copy abox%,186,13+c2*16,52,13 to abox%,97,103+120
S=a
else if but%=3
do
b$=miD$(a$,a,1)
Inc a
exit if b$="|"
loOp
c1=Val(mid$(a$,s,a-2))
rc_coPy Abox%,186,13+c1*16,52,13 to abox%,6,103+120
s=a
dO
b$=Mid$(a$,a,1)
inc a
exit iF b$="|"
LOop
c2=val(mid$(a$,s,a-2))
Rc_COpy abox%,186,13+c2*16,52,13 to aboX%,66,103+120
S=a
do
b$=mid$(a$,a,1)
endif
'
'     67,40
'
RC_copy menu%,67,40,185,120 to shit2%,0,0
RC_cOpy abox%,0,120,185,120 to menu%,67,40
'
SHoWm
do
vsync
'
t$=inkEY$
Mx=mousex-67
my=mousEY-40
'
Gosub check_abutTON
If leu%>0
gosub cheCK_ALeuchte
endif
Exit if t$=" "
'
loop
'
'     rÅckmeLdungen der alertbOx:     (boCk%)
'
'            -1 = fehler aufgEtreTen.
'             0 = kein fehleR
'             1 = buTton 1
'             2 = button 2
'             3 = butTon 3
'            10 = Lampe 1
'            11 = lampe 2
'            12 = lamPe 3
'            13 = lAMpe 4
'            14 = lampe 5
'            15 = lampE 6
'
rc_COpy shit2%,0,0,185,120 to menU%,67,40
rEturn
procedure ChEck_abutton
if buT%=1
'
iF mOusek=1
if mx>66 and My>103 AnD mx<66+52 and my<103+13
  rc_coPy ABox%,239,13+c1*16,52,13 to menu%,66+67,103+40
  do
    eXiT If mousek=0
  loop
  bOcK%=1
  T$=" "
  Rc_copy abox%,186,13+c1*16,52,13 tO mENU%,66+67,103+40
endif
endif
'
eLSe if but%=2
'
if mousek=1
IF mx>35 and my>103 and mx<35+52 anD My<103+13
  rC_copy abox%,239,13+c1*16,52,13 to MEnu%,35+67,103+40
  Do
    exit if mousEK=0
  lOop
  bock%=1
  t$=" "
  rc_copY AbOx%,186,13+c1*16,52,13 to menu%,35+67,103+40
endiF
'
If MX>97 and my>103 and mx<97+52 aND mY<103+13
  Rc_copy abox%,239,13+c2*16,52,13 tO MEnu%,97+67,103+40
  do
    exit if mouSEK=0
  loop
  bock%=2
  t$=" "
  rc_coPY AbOx%,186,13+c2*16,52,13 to menu%,97+67,103+40
endIF
EnDif
'
else if but%=3
'
IF MOusek=1
if mx>6 and mY>103 AND mx<6+52 and my<103+13
  rc_copY ABOX%,239,13+c1*16,52,13 to menu%,6+67,103+40
  do
    if MX>66 AND my>103 and mx<66+52 and mY<103+13
      RC_COpy abox%,239,13+c2*16,52,13 to meNU%,66+67,103+40
      DO
        Exit iF mousek=0
      LOOP
      Bock%=2
      t$=" "
      Rc_copy aBOX%,186,13+C2*16,52,13 To menU%,66+67,103+40
    endif
    '
    iF MX>126 ANd my>103 And mx<126+52 and MY<103+13
      RC_Copy Abox%,239,13+c3*16,52,13 to mENU%,126+67,103+40
      DO
        exiT if mouseK=0
      LOOP
      bocK%=3
      T$=" "
      rc_copy ABOX%,186,13+C3*16,52,13 to mENu%,126+67,103+40
    endif
  ENDIF
  '
endIF
return
PROCEduRe check_alEUCHTe
iF mousek=1
  '
  ' +120
  '
  y=(54-lEU%*6)
  '
  FOR i=1 tO leu%
    x=15
    '
    if mx>X AND Mx<x+11 AnD my>y and MY<Y+11
      '
      RC_coPy Abox%,197,75,12,12 to mENU%,X+67,Y+40
      do
        ExIt if mouSEK=0
      LOop
      '
      BOck%=i+9
      t$=" "
      '
      rc_cOPY ABox%,186,75,12,12 TO menu%,x+67,y+40
      '
    eNDIF
    '
    Add Y,14
    '
  Next i
  '
  '
  '
  '
endIF
RETurN
PRocedurE REMAp_bLOCk
'
do
  vsyNC
  T$=INkeY$
  EXit if t$="1"
  eXIT IF t$="2"
  Exit if t$="3"
  exiT IF T$="4"
LoOp
t%=val(t$)-1
'
pal1%=PAL%(T%)
PaL2%=pal%(h)
'
'     block%  - ADRESsE deS schirmS (ZU REmAppEn)     d0
'     pal1%   - aDRESSe Der Palette (SOURCe)          D1
'     pAl2%   - adressE DER PaLeTte (destiNATIOn)     D2
'
'
' aRrayfill REG%(),0
'
'  REg%(0)=BlOCk%
'  reg%(1)=paL1%
'  REG%(2)=PaL2%
'
'
'  cOKe%=gemdoS(&H20,L:0)
'
'
'
'
'  RC_cOpY Block%,blX%,BLY%,ClIPx%,clipy% to SHIT2%,Px%,PY%
'
'
'
' for y%=0 to clIPY%-1
' FOr X%=0 To clipx%-1
' ~xbIOS(5,L:BlOCk%,F%(t%),-1)
' sc%=ptsT(BLX%+X%,bLY%+y%)
' Rr%=peek(pAL%(T%)+MUl(SC%,&h4))/4
' Gg%=peek(pAL%(T%)+MUl(SC%,&H4)+&h1)/4
' bb%=peek(PAL%(T%)+MuL(SC%,&h4)+&h3)/4
' ~xbios(5,L:BLOCk%,L:BLock%,-1)
' i%=0
' z%=0
' do
' R%=PEEK(pAL%(H)+Mul(i%,&h4))/4
' g%=pEEK(PAl%(H)+MUL(i%,&h4)+&h1)/4
' b%=peEK(PAL%(h)+MUL(I%,&h4)+&h3)/4
' if r%=rR%
' IF G%=GG%
' if b%=bb%
' pset bLX%+X%,BLY%+y%,i%
' z%=1
' endif
' enDIF
' ENDif
'  inc i%
'  exit IF Z%=1
'  EXIt if I%=256
' loop
' neXT X%
' NEXt y%
'
rEturn
'
prOCEDURe loAd_gif
vsYNC
BMOve Menu%,shit%,76800
BMOVE MenU%,shit2%,76800
bmoVE MENU%,unDo%,76800
vsync
@lOADGIF
if NOt error%=-1
  @GLOBALvaRS
  @globalINFO
  @IMagEVars
  @imaGEINFO
  @uNpackgif
  @gIFPIC
EnDif
vsync
~xBIOS(5,L:MeNu%,l:menu%,3,&h100+&h10+&H3)
VSYNC
vSyNc
gosub SET_PAL(10)
bMoVe shit%,mENU%,76800
BMOvE uNdo%,menu%,76800
RETURN
pROcedure lOADGIF
gIF%=gifstarT%
@FILESeL(F$)
if not f$=""
  iF EXIST(f$)
    OPEn "i",#1,f$
    lof%=LOF(#1)
    CLOsE #1
    IF lof%>sizEBUF%
      PRiNT "Not enouGH MEMORy to load thIS PICTUre!"
      error%=-1
    elSE
      BLOAD f$,gif%
      error%=0
    ENDIF
  ELse
    Print "fiLE NOT FOunD!"
    error%=-1
  eNDIF
ELSe
  eRror%=-1
endIF
LX%=PEEk(Gif%+6)+peek(gIF%+7)*256
LY%=PEEk(Gif%+8)+peek(gIF%+9)*256
BITS_PiXel%=(peek(gIF%+10) AND &X111)+1
LeT Colors%=2^bITS_PIXEl%
GLobal_cm%=-BTST(PEEk(GIf%+10),7)
bits_cR%=SHR(PEEK(gif%+10) and &x1110000,4)+1
aDD GIF%,6+7
IF Global_cm%
  bMOVE GIF%,V:col|(0,0),colorS%*3
  ADD GIF%,CoLors%*3
endIF
ENDIF
ReTurn
proCEDURE GLoBalinfo
HIDEM
IF ERror%=0
prinT AT(1,1);"-- GLOBAL info --"
priNT
PRINT "LEngth ";f$;": ";loF%
PRINT "VERSion:";verSION$;
IF VERSion$<>"gif87A" AND VERSIOn$<>"gif89a"
  PRINT "GIF VERsion nOT RECOGNIZEd."
  out 2,7
ElSE
  PRINT
ENDif
prInT "WIDTH:  ";LX%
PRint "hEIGHT: ";LY%
PRINT "globAL COLORMAP: ";YN$(gloBal_CM%)
PRINT "COLors: ";ColORS%
PRINT "BIts oF cOLOR RESOLUTion: ";BiTS_CR%
ENDIF
REturN
PrOCEDURE IMAgevARs
IF ERROR%=0
WHIle gIF%<GIFSTART%+LOF% and PEEK(GIF%)<>ASC(",") AND peEk(giF%)<>ASC(";")
  IF PEEK(giF%)=asc("!")
    ADD GIF%,2
    WHILe pEek(GIF%)>0 AND GIF%<GIfsTarT%+LOF%
      ADD GIF%,PeeK(gIf%)+1
    WEND
  ENDIF
  Inc GiF%
wEND
INC GIF%
If gIf%>=GIFSTART%+LOF%
  PriNt "CAN NOT FIND IMagE DesCRIPTOR"
  ERRor%=-1
ENdiF
IF ERROR%=0
  ISx%=pEEk(GIF%)+PEEK(GIF%+1)*256
  Isy%=PEeK(GIF%+2)+PEEK(GIF%+3)*256
  ilX%=PEeK(GIF%+4)+PEEK(GIf%+5)*256
  iLY%=PeEK(GIF%+6)+PEEK(Gif%+7)*256
  LOCAL_CM%=-BTST(PEEk(gIF%+8),7)
  ORDER%=-BTST(PEEk(Gif%+8),6)
  biTS_PIXELI%=(PEeK(gif%+8) aND &X111)+1
  LET COLOrSi%=2^biTS_PIXELI%
  ADD gIf%,9
  if LOCAL_CM%
    BMOVe Gif%,V:cOL|(0,0),COLORSI%*3
    AdD giF%,cOLORSI%*3
  ENDIf
  PriNT "Y-POS  IMAGE: ";IsY%;"   "
  prINT "WIDTH  IMAGe: ";IlX%;"   "
  prINT "HEIGHT ImAgE: ";ilY%;"   "
  PRINT "FORMaT iMaGE: ";
  IF ORDER%=0
    PRiNt "SeQUENTIAL ORDeR"
  eLSe
    PRINT "INTERlAcED oRDER"
  ENDIF
  PrInT "BITS PER PIXEL:";bItS_PIXELR%
  PRINT "LoCAl coLOR MAP: ";YN$(LOcAL_cm%)
  iF LOCAL_CM%
    PRiNT "coLORS: ";COLORSI%
  eLSe
    pRINT SPACE$(20)
    LEt COlOrSI%=COLORS%
  ENdIF
eNdIF
RETURN
PRoCEdURE UNPACKGIF
iF ErROR%=0
  IF ILX%*ILY%>SiZEBuf%
    PRINT "NOT ENoUGH meMORY TO UNPAcK THiS PICTURE!"
    ERRoR%=-1
  ELsE IF ILY%>1024
    PRINT "sIZE Y tOO LARGE"
    ERRoR%=-1
  ELSe
    print "unpacking gif.....";
    r%(8)=gif%
    r%(9)=v:token&(0)
    r%(10)=v:lastnode&(0)
    r%(11)=v:nOdes&(0)
    r%(13)=pic%
    rcall unpAckgif%,r%()
    lepic%=r%(13)-piC%
    print "length: ";lepiC%;" (max. ";ilx%*ily%;")"
    if lepiC%<>Ilx%*ily%
      out 2,7
      print "wARning: gif incorrEct length"
    endif
  enDif
endif
return
prOcEdure gifpic
priNt "Converting to stANdard picture-forMAt...."
old_sc%=xbios(2)
rlx%=MAX(320,((ilx%+15) div 16)*16) ! afgeronDE Lx van plaatje
bPl%=320
ly%=200
lelx%=rlx%
r%(8)=v:seqUence%(0)
r%(9)=convpic%
r%(0)=orDer%
R%(1)=lelx%
r%(2)=ily%
rcalL giFinter%,r%()
r%(11)=v:sequEnCe%(0)
r%(13)=pic%
r%(0)=colorsi%
R%(6)=iLx%
r%(7)=ily%
r%(8)=v:col|(0,0)
rcaLl GIf_tt%,r%()
'
~xbios(5,l:olD_sC%-150000,L:old_sc%-150000,3,3)       ! tijdeliJK groot scherm
vsyNC
vsync
eb%=lelx%-320
if eB%<0                              ! MeEr pixels dan op HEt Scherm passen ?
  eB%=0                               ! NEe, dus extra breeDTE op 0
else                                  ! anders:
  '
  eB%=(EB%+15) Div 16                 ! nieuwe breeDTE Berekenen
  '
endIf
sdpoke &hffff820e,eb%*8               ! Extra breedte aangEven
For l%=0 to colorsI%-1                ! palEtte opbouwen
  SdpOke &hffff9800+l%*4,col|(1,l%)+256*Col|(0,L%)
  spoke &hffff9803+l%*4,cOl|(2,l%)
NExt l%
i%=0
vsync
goSub STore_pal(h)
x=0
y=0*0.72
mmY%=iNt(y*myf)*(320+eb%*16)+int((x*mxF)/16)*16   ! oFfset berekeninG
~xBiOs(5,l:convpic%+mmY%,l:CoNvpic%+mmy%,-1)                ! hardWaRE offset+scherm ZeTTen
for i=0 to 239
  if x=319
    mMy%=INT(y*myf)*(320+eb%*16)+int((320*mxF)/16)*16   ! oFFSet berekeninG
  Else
    mmy%=int(y*myf)*(320+eB%*16)+Int((x*mxf)/16)*16   ! offset beREkeNing
  endif
  bmoVE coNvpic%+mmy%,f%(0)+i*320,320
  adD Y,0.72
nExt i
'
myf=(ily%-200)/200                ! facTOr Voor y * muisy berEKeNEn
mxf=(ilx%-320)/320                ! factOR vOOr x * muisx bereKENen
x=320
y=0*0.72
mmy%=int(y*myF)*(320+EB%*16)+int((x*mxf)/16)*16   ! offset BEReKening
~xbios(5,l:CONvPic%+mmy%,l:convpIC%+MMy%,-1)                ! hardware offSET+Scherm zetten
fOR I=0 TO 239
  if x=319
    mmy%=int(y*mYF)*(320+EB%*16)+Int((320*mxf)/16)*16   ! offset BEREKening
  else
    mMY%=INT(Y*myf)*(320+eb%*16)+int((x*mXF)/16)*16   ! OFFSet berekeniNG
  ENDIf
  bmove conVpIC%+MMY%,f%(1)+i*320,320
  add y,0.72
nexT i
'
MYF=(ILy%-200)/200                ! factor voOr Y * MUISy berekeneN
MXF=(ILX%-320)/320                ! factor vooR X * MUISX berekenen
X=0
Y=240*0.72
MMY%=INt(y*myf)*(320+eb%*16)+iNt((x*MXF)/16)*16   ! OFfset bereKenING
~XBios(5,l:convPic%+MMY%,L:Convpic%+mmY%,-1)                ! hARDWARe offset+sChERM ZETten
for i=0 tO 239
  iF X=319
    MMY%=Int(y*myf)*(320+eb%*16)+INt((320*MXF)/16)*16   ! OFfset bereKEnING
  ELse
    mmy%=int(Y*MyF)*(320+EB%*16)+INt((x*mxf)/16)*16   ! offSET BEREKening
  endIF
  BMOVE Convpic%+mmY%,F%(2)+I*320,320
  ADD Y,0.72
Next i
'
myf=(Ily%-200)/200                ! fACTOR voor y * muIsy bEREKEnen
mxf=(iLx%-320)/320                ! faCTOR Voor x * muiSx bEREKENen
x=320
y=240*0.72
mmy%=Int(Y*MYF)*(320+EB%*16)+int((x*mxf)/16)*16   ! OffSET BERekening
~XbIoS(5,L:CONvpic%+mmy%,L:cOnVPIC%+Mmy%,-1)                ! hardwArE oFFSET+scherm zEtTEN
FOR I=0 to 239
  if x=319
    mmY%=iNT(Y*MYF)*(320+Eb%*16)+int((320*mxf)/16)*16   ! OfFSET BERekening
  ELse
    MMY%=INt(y*myf)*(320+eb%*16)+INt((x*MXF)/16)*16   ! OFfset berEKenING
  ENdif
  bmovE CoNVPIC%+Mmy%,f%(3)+i*320,320
  add Y,0.72
NeXT I
'
GOSub store_PAl(0)
GOSUB Store_pal(1)
GOSuB STORe_pal(2)
gosUB StORE_PAl(3)
'
'
'
else
rePEAt
  IF ILY%>200                         ! plaatje HOGER DAN 200 Lijnen ?
    myF=(ILY%-200)/200                ! FACTOr voor y * mUISY BEREKenen
  elSe                                ! andERS:
    MYf=0                             ! factoR is 0 duS GEEN y scrolL
  endiF
  IF ILx%>320                         ! plaatJe brEDER DAn 320 pixelS ?
    mxf=(ILX%-320)/320                ! FACtor vooR x * muISX BERekenen
  ElsE                                ! aNDERS:
    mxf=0                             ! facTor Is 0 DUS GEen x scrOll
  EnDIF
  IF x=319
    mmy%=inT(y*mYF)*(320+EB%*16)+INT((320*mxf)/16)*16   ! offSet BEREKENing
  elsE
    if G=239
      Y=240*0.72
    ELSE
      Y=g*0.72
    endif
    If Inp?(2)
      I%=INP(2)
    Endif
  unTiL i%=27 oR I%=32 OR I%=13
  '
  '
  '     ~~~~~~~~~~~~
  '     hier koPiEreN !!!!
  '     ~~~~~~~~~~~
  '
  VSYNc
  if eb%=0
    bMoVe CONVPIc%+mmy%,f%(h),76800
  ElSe
    FOR I=0 TO 239
      '
      if x=319
        mmy%=InT(y*MYF)*(320+EB%*16)+Int((320*mxf)/16)*16   ! oFfSEt BEREKening
      eLsE
        MmY%=INT(Y*myf)*(320+eb%*16)+iNt((X*MxF)/16)*16   ! OFFSet bereKeNING
      ENDIf
      bmove CoNVPIC%+MMY%,f%(h)+i*320,320
      '
      add Y,0.72
      '
    nEXT I
  ENDIf
endif
'
'
'
'
'
'
IF i%=27
  erROR%=TRue
endiF
VsynC
SDPOke &hfffF820E,0                   ! extRA BREedte veRWijDEREN
Showm
reTUrn
PROCEDure filESel(VAR F$)
FIleseleCT lEfT$(F$,MAX(rinstr(F$,"\")-1,0))+"\*.GiF",mID$(F$,RInstr(f$,"\")+1),f$
REtUrN
'
PROCedure dEL(vAR DEL$)
FIleseleCT lEFT$(DEL$,Max(rinsTR(dEL$,"\")-1,0))+"\*.DEL",MId$(del$,riNSTr(dEL$,"\")+1),DEL$
return
PROceDURE Pi9(var pi9$)
FILesELECT left$(pi9$,MAX(rINSTR(Pi9$,"\")-1,0))+"\*.pi9",mid$(PI9$,RiNSTR(PI9$,"\")+1),pi9$
retuRN
PrOCEDURe pal(vaR PAL$)
fILESElect leFT$(PAl$,MAX(RInstr(paL$,"\")-1,0))+"\*.PAL",mID$(PAL$,rinstr(PAL$,"\")+1),PAL$
RETUrn
procEDURE DPH(VAr dph$)
fiLESELECT LEft$(dph$,MAX(RINSTR(DPh$,"\")-1,0))+"\*.dph",mID$(DPH$,RINSTR(dph$,"\")+1),dPh$
RETURN
'
PROCedurE mOVE_FIELD
'
IF h=4
  gosUB BAKE_UP
ELSE
  bmovE F%(H),SHIT%,76800
ENDIF
~xbiOs(5,l:SHIT%,L:SHIT%,-1)
'
'
Do
  '
  vsYnc
  ~XBIOS(5,L:SHIT%,l:shIt2%,-1)
  SWAP SHIT%,SHIt2%
  '
  '
  x=mOuSEX
  Y=MOUSEY
  '
  '
EndiF
If Y>0 AND X>0
  RC_COPy f%(3),0,0,x,Y To SHIT2%,320-X,240-Y
ENDIf
'
exIT IF NOT BIOS(11,L:-1)=4
Loop
OVX%=X
OVY%=Y
'
IF H<4
SChlAmm%=h
ENDIF
H=4
GOSUb sTore_PAL(4)
BMOVE SHit2%,F%(h),76800
~xBIOS(5,L:F%(H),L:F%(H),-1)
RetUrn
PROCEDURE SHow_HiGhRES
'
'     &100
'
IF H=4
GOSUb bAkE_uP
ENDIF
'
'
HIDEm
'
~xBiOS(5,L:PACK%,L:PACK%,3,&h100+&h8+&H3)
vSYNC
'
HIDEM
GOSub SEt_pAL(H)
'
FOR I=0 TO 239
'
BmoVE f%(0)+i*320,PACK%+I*640,320
BMOVE f%(1)+i*320,PAcK%+320+I*640,320
BMOVE F%(2)+I*320,PAck%+153600+I*640,320
BmOVE F%(3)+I*320,PACK%+153600+320+I*640,320
'
NexT I
'
'     *PaIN*
'
' SLPOKE &HFffF8282,&H1Fe016A
' SLPOKE &HFFff8286,&H75006B
' SLPOKE &HFFFF828A,&h11c01B2
' SLPOKE &HFFFF82A2,&H270025b
' SlpokE &HFFFF82A6,&H350056
' SLpOke &hfFFF82AA,&H236026B
' SDPoKe &hfFFF820A,&H200
' SDPOKE &hFfff82C0,&H182
' SDPOKE &HFFfF8266,0
' sdPoKE &HFFFF8266,&H10
' SDpOke &HfFFF82C2,&H6
' SDPOKe &HffFF8210,&H140
'
'
DO
'
VSYNC
T$=InKey$
IF T$="1"
  GOSUB SET_PaL(0)
eLse IF T$="2"
  GOSUB SEt_PaL(1)
elSE IF T$="3"
  GOSUB sEt_PaL(2)
ELSE IF T$="4"
  GOSuB sEt_PAL(3)
ENDIF
EXIt If T$=" "
'
LoOP
'
'
PAUSE 5
'
'
VSYnC
~xBIoS(5,L:SHIT%,L:SHIt%,3,&H100+&h10+&H3)
HIDEM
VSYNC
VSyNc
GOSUB SET_PAL(H)
ShOWm
~xbIOS(5,L:F%(H),L:F%(H),-1)
VsYNc
reTURN
PROCEDuRE baKE_UP
X=OVX%
Y=OVy%
RC_coPY F%(4),0,0,320-X,240-Y TO F%(0),X,Y
Rc_COpY f%(4),320-X,0,X,240-Y TO F%(1),0,Y
RC_CoPY f%(4),0,240-Y,320-x,Y TO F%(2),X,0
RC_COPy F%(4),320-X,240-y,X,Y TO F%(3),0,0
RETURN
PrOCeDURE SHOW_HIGHrES_TruECOLOR
'
'     &100
'
IF H=4
GoSUB baKE_UP
'
O=0
OR%(0)=640*2
OR%(8)=F%(o)
OR%(9)=PaCK%
OR%(10)=PAL%(O)
'
RCAlL SHoWTRUE%,OR%()
'
'
~INP(2)
PaUSE 5
'
VsYNC
~XBIOS(5,L:ShIT%,L:Shit%,3,&h100+&h10+&h3)
hidem
gosub set_pal(h)
vsync
showm
~xbioS(5,l:f%(h),l:f%(h),-1)
vsync
retuRn
'
procedure save_Over
'
bmove menu%,shiT%,76800
'  fileselect "f:\*.hig","",fILe$
gosub dph(dph$)
bmOVe shit%,menu%,76800
'
if noT dph$=""                                  ! abbruch
  '
  if exiSt(dph$)=-1
    l=len(dph$)-3
    newfIlE$=left$(dph$,l)
    newfiLe$=Newfile$+"dph"
    if exISt(newfile$)=-1
      kill neWFile$
    endif
    name dpH$ AS newfile$
  endif
  '
  '
  hIDEm
  hallo%=pack%
  paCk%=f%(4)+40
  '
  bmove pal%(0),f%(0)-1024,1024
  hallO2%=f%(0)
  f%(0)=f%(0)-1024
  '
  vsync
  len0%=c:ca_pAck%(L:f%(0),l:pack%)
  vsync
  lEn1%=c:Ca_pack%(l:f%(0)+32000,l:pack%+LeN0%)
  vsync
  len2%=c:ca_paCk%(L:f%(0)+32000*2,l:pack%+len0%+len1%)
  vSyNC
  len3%=c:ca_pack%(l:f%(0)+32000*3,L:pACk%+len0%+len1%+len2%)
  vsYNc
  len4%=c:ca_pack%(l:f%(0)+32000*4,l:PAck%+len0%+len1%+len2%+len3%)
  VSyNc
  len5%=c:ca_pack%(l:F%(0)+32000*5,L:pAck%+len0%+len1%+len2%+lEN3%+Len4%)
  vsync
  len6%=c:ca_PACk%(l:f%(0)+32000*6,l:pack%+len0%+leN1%+LEN2%+len3%+len4%+len5%)
  vsyNC
  LEn7%=c:ca_pack%(l:f%(0)+32000*7,l:Pack%+len0%+len1%+len2%+len3%+Len4%+len5%+len6%)
  vsync
  leN8%=c:ca_Pack%(l:f%(0)+32000*8,l:pack%+lEn0%+leN1%+len2%+len3%+len4%+leN5%+leN6%+len7%)
  vsync
  len9%=c:Ca_pAck%(l:f%(0)+32000*9,l:pack%+len0%+Len1%+LEn2%+len3%+len4%+len5%+lEn6%+lEN7%+len8%)
  '
  showm
  lpoKe Pack%-40,len0%
  lpoke paCk%-36,Len1%
  lpoke pack%-32,leN2%
  lPoKe pack%-28,len3%
  lpoKe PaCk%-24,len4%
  lpoke paCk%-20,LEn5%
  lpoke pack%-16,leN6%
  lPOke pack%-12,len7%
  lpoKe PACk%-8,len8%
  lpoke paCk%-4,LEN9%
  '
  len%=len0%+len1%+leN2%+Len3%+len4%+len5%+len6%+len7%+LEn8%+len9%+40
  '
  pack%=pack%-40
  '
  bsAVe dPh$,pack%,len%
  '
  pacK%=HalLo%
  f%(0)=f%(0)+1024
  '
endif
retURn
Procedure load_OVeR
bmove menu%,shiT%,76800
GoSUb dph(dph$)
bmovE ShIT%,menu%,76800
'
'
'  swap f%(4),paCK%
' Add pack%,40
'
'
hallo%=paCK%
Pack%=f%(4)+40
'
'
if not dph$="" oR EXiSt(dph$)=0
  '
  bload dpH$,PAcK%-40
  '
  s0%=lpeek(pack%-40)
  s1%=LPEEk(pack%-36)
  s2%=lpeek(pACK%-32)
  S3%=lpeek(pack%-28)
  s4%=lpEEK(PAck%-24)
  s5%=lpeek(pacK%-20)
  S6%=LPEek(pack%-16)
  s7%=lpeeK(PACK%-12)
  s8%=lpeek(pack%-8)
  s9%=LPEEK(pack%-4)
  '
  hallo2%=cONVERT%
  convert%=f%(0)-1024
  ~c:cA_UNPACk%(l:pack%+s0%+s1%+s2%,l:CONVERt%+32000*3)
  ~c:ca_unpacK%(l:PACK%+S0%+s1%+s2%+s3%,l:conveRt%+32000*4)
  ~C:CA_UNpack%(l:pack%+S0%+s1%+S2%+S3%+S4%,L:Convert%+32000*5)
  ~c:ca_UNPACK%(L:pack%+s0%+s1%+s2%+s3%+s4%+S5%,L:CONVErt%+32000*6)
  ~c:ca_unpaCK%(L:PACK%+s0%+s1%+s2%+s3%+s4%+s5%+s6%,l:ConVERT%+32000*7)
  ~C:ca_unpack%(L:paCK%+S0%+S1%+S2%+s3%+s4%+s5%+s6%+s7%,l:coNveRT%+32000*8)
  ~C:CA_unpack%(l:pAcK%+S0%+S1%+S2%+S3%+S4%+s5%+s6%+s7%+s8%,l:conVeRT%+32000*9)
  '
  SHOWm
  '
  bmove coNvERT%,PAL%(0),1024
  bmove conVErT%,PAL%(1),1024
  Bmove convERt%,PAL%(2),1024
  BMove conveRT%,pAL%(3),1024
  BMOve converT%,PAL%(4),1024
  BMOVe convert%+1024,F%(0),76800
  BMOVE COnvert%+1024+76800,f%(1),76800
  bmOVE CONVErt%+1024+76800*2,f%(2),76800
  bmovE conVERT%+1024+76800*3,F%(3),76800
  bmove coNverT%+1024+76800*3,F%(4),76800
  '
  CONvert%=halLo2%
  '
enDIF
'
PAck%=hallo%
'
RetURN
'
PROcedure pLay_MOD
BMOve menu%,sHit%,76800
GET%=XBIos(88,-1)
'
if xbiOs(89)=1 Or XBIOS(89)=3
  ~xbios(5,l:nOrMaL%,L:NORmal%,1)
else
  ~XbIoS(5,L:NORmal%,l:norMaL%,2)
ENDIF
'
Print "loaD pROTRACKer modulE..."
fILESELEct "c:\*.mod","",mOD$
if NOT MOd$=""
  bload mOD$,moD%
  '
  IF MOd|=0
    '
    reg%(8)=mod%
    RCalL MODPlay%,reg%()     ! pLAy
  ELSE
    '
    RCall modpLAy%+2,REG%()   ! EXIt
    '
    reg%(8)=mod%
    RCaLL MODPlay%,reg%()     ! pLAY
    mOD|=1
    '
  ENDif
endif
'
'
~XBIoS(5,L:MENu%,l:menu%,3,gET%)
VsYNC
VSync
bmovE SHIT%,MENU%,76800
gosub seT_PAL(10)
'
'
RETURn
'
procedURE LOAD_TPi
'
bmove Menu%,sHIT%,76800
CLs
'
print "ChoosE YOUR truecoLor imAGE..."
FIleseleCt "","",fiLE$
CLS
'
Penny|=0
if RighT$(FILE$,3)="Trp"
  vdt%=vDt%+120
  peNNY|=1
ELSe if rigHt$(fIlE$,3)="TPI"
  Penny|=1
loOp
lOp%=128-OFF%
VDt%=vdt%+loP%
enDiF
'
BLOAd file$,vDt%
'
cLS
'
'
PRINT "clear bUffER..."
'
FOR X%=0 To 65535
byte{bUf%+x%}=0
NEXT X%
'
'
PRint "scaN cOloRS..."
'
'
'
FOR y=0 to 239
for X=0 tO 319
  r%=mUL(X,2)+MUl(y,640)
  w%=carD{tPi%+r%}
  BYTE{Buf%+w%}=1
  carD{tP2%+r%}=W%
NEXT X
next y
'
pRiNt "NUMBER colors..."
'
CoU%=0
fOR X%=0 TO 65535
T%=byte{buF%+x%}
IF t%=1
  INC COu%
endif
NeXT x%
'
BULL%=0
If cou%>255
buLl%=1
PRiNT "SORry more ThAN 256 COLORS..."
~inp(2)
endIf
'
IF BULL%=0
PRint "creAtE VGA-COLOrs..."
'
z%=0
c%=0
foR X%=0 to 65535
  t%=BYTE{Buf%+x%}
  if t%=1
    TExt 100,100,x%
    R%=(X% AND &hf800)/&h800           ! 0-31
    g%=(x% aND &h7e0)/&h20             ! 0-63
    B%=(X% AND &h1f)                   ! 0-31
    r%=r%*2
    b%=b%*2
    SPokE COL%+C%,R%*4
    spoke cOL%+c%+&h1,G%*4
    SPOKE col%+c%+&h3,b%*4
    SPokE BUF%+X%,Z%
    add c%,4
    inC Z%
  eNdIF
NEXt x%
endiF
PrInT "READy...!"
~inp(2)
'
~xbIOs(5,L:f%(H),L:F%(H),-1)
'
Coke%=gemDOs(&H20,L:0)
VSYNC
bmove cOL%,&hFFFF9800,1024
~GEMdos(&h20,l:cOKe%)
'
FOR Y=0 TO 239
For x=0 to 319
  r%=MUL(x,2)+mUL(Y,640)
  W%=Card{tpi%+R%}
  M%=BytE{BUF%+W%}
  pset x,y,M%
NExt X
NEXT y
'
'
'
'
bmove SHIt%,MENU%,76800
VSync
~xbiOS(5,L:mENU%,L:MEnu%,-1)
'
retuRN
'
PrOCEDURe text_fOR_JEt
'
JET%=6
BMove f%(h),sHIT%,76800
BmOVE F%(H),shit2%,76800
teXT$=""
'
TExT$=""
'
DO
EXit if moUSEK=0
LOOP
GRaphmodE 2
'
DO
DEFTEXT col%,,,jEt%
VSYNC
SWAP Shit%,sHiT2%
~XBIOS(5,L:SHIt%,l:sHit2%,-1)
BMOVE F%(H),SHIt%,76800
teXt mOUSEX,MOUSEy,teXT$
'
t$=INKEY$
IF T$="+"
  IF jet%<32
    BMoVE F%(H),SHIT%,76800
    INc jEt%
    t$=""
  eNDIF
ELSE IF t$="-"
  iF jet%>4
    BMOVE F%(H),SHIt%,76800
    dEc JeT%
    T$=""
  ENDIF
ENDif
'
Mk=MoUSEK
EXIT IF t$=cHR$(13)
exIT IF MK=2
EXIT if MK=1
'
if T$=CHR$(8)
  L=LEN(TExt$)
  TEXt$=LEFT$(TEXT$,L-1)
  T$=""
enDIF
'
iF T$<>""
  TEXT$=TEXT$+t$
Endif
'
'
LOOP
'
BMOVE F%(h),Undo%,76800
iF NOT MK=2
BMOVe ShiT%,f%(H),76800
ENDIF
~XBIOs(5,L:f%(h),L:f%(H),-1)
'
DO
EXIT IF MoUsEk=0
lOOP
'
ENDIF
'
KEyTeSt t
EXIT IF T=3735584   ! SPAcE
gOSuB KEYS
LOOP
GrApHMoDE 1
RETURN
PRoCEdurE SPLINE
DO
'
SpLX(0)=0
splY(0)=0
SPLX(1)=0
SPLY(1)=0
SpLX(2)=0
sPlY(2)=0
SPLX(3)=0
SPLY(3)=0
'
BmOVe F%(h),SHIT%,76800
BMOVE F%(h),SHIt2%,76800
~xBIOS(5,L:SHIT%,L:sHIT%,-1)
'
do
VSYNC
KEYTEsT T
EXiT IF T=3735584   ! SPACE
GoSUB KeYS
'
X=MOUSEX
Y=Mousey
'
EXIT IF MOUSEk=1
loop
'
BMOVE F%(H),UNDO%,76800
'
splX(0)=x
SPLY(0)=Y
'
EXIT IF t=3735584   ! spAcE
SPLX(1)=80
SPLY(1)=50
SPlx(2)=240
SplY(2)=150
'
'
SPLX(3)=MOUSEX
spLy(3)=mOUSEY
'
FOR I=0 TO 3
coLOr 1
BOX SPLX(I)-2,SPLy(i)-2,SPlX(I)+2,SPLY(I)+2
PLOT sPlx(i),SPLY(I)
NEXT I
'
CoLor cOL%
CURVE SPLX(0),sPlY(0),sPLX(1),SPLY(1),SPLX(2),sPlY(2),sPLX(3),SPLY(3)
'
LOOP
bMOve SHIT%,SHIT2%,76800
~XBIoS(5,L:shIT%,L:SHIT%,-1)
'
DO
W=-1
Do
'
VSYnC
SHOWM
X=MOUSeX
Y=MoUSEY
'
MK=MOUSEK
'
if mk=1
'
IF X>SPLX(0)-2 AND X<Splx(0)+2 aND Y>SPLY(0)-2 AND Y<SplY(0)+2
  w=0
ENDIF
IF X>SPLX(1)-2 anD x<SPLX(1)+2 AND Y>SPLY(1)-2 aNd y<SPLY(1)+2
  W=1
ENDIF
IF x>SplX(2)-2 AND X<SPLX(2)+2 AND y>SPlY(2)-2 AND Y<SPLY(2)+2
  W=2
ENdIF
iF X>SPLX(3)-2 AND X<SPLx(3)+2 anD Y>SPLY(3)-2 AND Y<SPLy(3)+2
  w=3
eNDIF
'
ENDIF
'
EXIT iF w=0
EXIT IF W=1
EXIT IF w=2
ExIT IF W=3
EXIT IF MK=2
'
LooP
'
IF MK<>2
'
DO
SWAP SHIt%,sHIT2%
VSync
~xbiOs(5,l:shit%,l:sHit2%,-1)
bmove F%(h),shit%,76800
'
splx(w)=mousex
SPLY(W)=MOusey
'
for i=0 tO 3
  If W<>I
    color 1
    box sPlx(I)-2,SpLy(I)-2,Splx(i)+2,splY(I)+2
    plot spLx(i),sply(i)
  endif
next i
'
color coL%
CurVe SPlx(0),sply(0),splx(1),SplY(1),SPlx(2),sply(2),splx(3),SpLY(3)
'
Exit if mousEk=0
'
loOP
FOr i=0 to 3
coLor 1
BOX splX(i)-2,sply(i)-2,SplX(I)+2,spLy(I)+2
plot splx(i),sPlY(I)
NExt i
endif
'
~xBIOS(5,L:SHit%,l:shiT%,-1)
exit iF MK=2
'
Loop
'
~xbioS(5,l:F%(h),l:f%(h),-1)
'
color col%
curvE spLx(0),sply(0),splx(1),sply(1),splx(2),sply(2),splx(3),sply(3)
exiT If mk=2
'
loop
'
return
PRocedure polyfiLl
'
bMove f%(h),shit%,76800
bmoVE f%(h),shit2%,76800
do
lx=mousEX
LY=mousey
mk=mouSek
Keytest t
exit iF mK
eXit if t=3735584   ! space
gOSub Keys
vsync
'
arrAYFill x(),0
arrayfill Y(),0
X(0)=LX
Y(0)=ly
q=1
if mk=1
'
do
'
pOlyfIll q,x(),y()
'
loop
'
prOceDuRe login
'
vx=8
vy=5
'
BmOve menu%,shit%,76800
bouNdArY 0
Deffill 2,,
pbox 50+Vx,80+VY,250+Vx,120+vy
box 50+vx,80+vy,250+vX,120+Vy
grAphmode 2
deftEXt 1,,,6
TeXt 60+vx,103+vy,"login:"
X=110+VX
y=103+vy
a=0
do
t=inp(2)
exiT IF t=13
W%(A)=t
inc a
text x,Y,"*"
ADD X,8
loop
pbox 50+vx,80+Vy,250+vx,120+vy
Box 50+vx,80+vy,250+vx,120+vY
do
dEffill 2,,
pbox 100+vx,90+Vy,200+vx,110+VY
Exit if inp?(2)
fOr k=0 To 35
  Vsync
  exit if Inp?(2)
NExT k
exit if inP?(2)
gRaphmode 2
text 120+vx,103+Vy,"LocKEd!"
for k=0 to 35
  vsYnC
  eXIt if inp?(2)
next K
eXIt iF inp?(2)
loop
do
DeFFIll 2,,
pbox 50+vx,80+vy,250+vX,120+vY
BOX 50+Vx,80+vy,250+vx,120+vy
grAPhmodE 2
text 60+vx,103+vy,"lOGin:"
X=110+vx
y=103+vy
for i=0 to A-1
  T=inP(2)
  O%(I)=t
  exit if t=13
  tEXt X,y,"*"
  Add x,8
next i
buLL%=0
hANs%=0
For i=0 to a-1
  if w%(I)<>O%(I)
    bull%=1
  endif
  if o%(i)<>K%(I)
    HanS%=1
  Endif
next i
EXIt If Bull%=0
exit if HANS%=0
loop
bmove shiT%,MENu%,76800
REturn
proceDURE ANleitung
'
bmOve menu%,shit2%,76800
'
vsync
~Xbios(5,l:SHit%,l:shit%,1)
vSync
cLS
'
clip 0,0,640,200
'
vsetcOlor 0,0
Vsetcolor 1,0,7,15
vseTcolOr 2,9,9,9
VSetcolor 3,6,6,6
'
'
bOundARY 0
graphmode 2
'
DefFill 2,2,8
pbox 0,192,639,199
defteXt 3,,,6
tExt 0,198," |  SCroll up '+'  |  scRolL dOwN '-'  |  exit 'esc'  |         1994 bY mr.COke"
'
locate 1,1
for I=0 to 23
PRiNT bap$(i)
next I
'
q=19
qQ=0
Q$=InKey$
next i
'
iF x=208 oR X=45
IF Q<333
add q,1
add qQ,1
rC_copY shit%,0,8,640,152+8*4 to shiT%,0,0
dEffIll 0,2,8
pbox 0,152+8*4,639,191
locaTe 1,24
For I=0 TO 0
  print bap$(Q+i+4)
NeXt i
Endif
else If X=200 oR x=43
IF qq>0
sub qq,1
sUb Q,1
rC_COpy shit%,0,0,640,152+8*4 to sHiT%,0,8
Deffill 0,2,8
pbox 0,0,639,7
loCaTE 1,1
foR i=0 to 0
  print bAp$(QQ+i)
NeXt i
endif
eNdIF
'
eXIT if x=27
exit iF x=32
'
LOOp
'
'
'
vSync
~xbios(5,L:mENU%,l:MEnu%,3,&h3)
vsync
GoSUB SeT_pal(10)
bmove ShIT2%,MENU%,76800
'
clip 0,0,320,240
'
'
anleITung:
daTa
data *************************************************************************
datA
Data                      --- dELmpaint inFOrmaTiOn ---
data
datA *************************************************************************
Data
DATa
data               delMPaiNt aNleitung v4.0û
DAta
DaTA - einleituNG -
daTA   dElmpaint kOMmt AUS DelmenhorST uNd wuRde von mir (JîRg T) geSChrieben.
dATa   WiE kommt dieseR NaMe ZUstande? ganZ EiNFach  ich konntE EiNFacH keinen
daTA   aNDeREn name finDEn UND sO haben wir GEsAGT  Das programM KOmmt aus
data   delMENhorsT  also -> delmPAInt !
dATa   delmpaiNT Ist Ein leistungSTArkES grafikproGRAmm WOMit ein proFI OdEr
data   einen aMATeUr Seine eigenEN IdEeN Sammeln unD IN dIE grafik verwIRKlIChEn
data   kanN. DElMPAint ist keiN KLaSSISches bildBEARbeiTungsprogRAMM  soNdern
data   eHER Ein SOganannteS DADdElprogramm. mAN KAnN striche zieHEN  LiNiEn
data   und ZUM ScHLuû alles in dER LUpENFunktion bEARBEiten. fast jedER GUTe
dAta   grafikER ARBeiTet nach diESEM PrInzip. natÅrlICH BRaUCht man aucH ETWAs
DAta   erfahrUNG FÅR Diese sache  aBER DAS kommt nach eINIGER zEit ganz voN
DATA   AlLeine. also WER LUST hat sich etWAS MIT Der vga grafIK ALS GRafiker
datA   ZU BESCHÑftigen isT MIT DELMpaint am bESTEN BERaten. es giBT AUCH ANdere
data   PROGRAMMe in dieseR ART  ALSO bleibt deM GRAFIKEr die letZte entscheidung
daTA   SELBER ÅberlasseN.
DATA
DATa - technisCHE DATEN -
data   delmPAINT IST zwar in gfA BASIC PRogrammieRT  ABER ES ist dennoCH SCHNELl
data   komFORTABEl und einfaCH ZU BEDienen.
data   + DER GIF Loader ist eINER DEr SchnellstEN Z.ZT. AuF diesem sySTEM !!!
DAta     (kein andeRES PROgramm lÑdt giFBILDeR Schneller ALS MEiNEs.
data      an dIESER sTelle danke ICH BOnuS of dba aus HOLLAnd DafÅr!!!!!!)
data   + dAS DEL format ist eiN SEHr SCHnelles unD GUT kOMprimierteS MEDiUm.
Data     (es ist LEIDeR kein standaRTFOrMat  weil ich eS SELbsT Entworfen HABE)
daTa   + das dph isT ÑHNLich Wie das del JEDoCH IN hoher aufLîSUnG
DAta   + einige fUNKtIOnEn sind aus GRÅNdEN der geschwiNDIgKeIT im turbo aSSEmBlEr
data     gescHRIeBen.
data   + delmpAINt iST Kein truecOLOr mALprogramm. iCH HabE es absichtlICH nicHT
data     in trUEColor GeschriebEN  Weil man fÅr rgb riCHtIGE 6 Bit (64 stufen)
dATa     FARbAuflîsung. wENn DEr GRafiker eiN BiLD geZeichnet hAT uND hinterher
daTA     fEsTStellt  daû er EIgEnTlich den falSChEn fARbton erwiSChT hat  Braucht
daTA     er NUR Die jeweilIGe fARbE Ñndern und NIchT dIR ganze graFIk nAchBe-
data     arbEIten.
DATa - mîgliche FEhleR iN dieser veRSion -
dATa   ich versUChe natÅRlich alle MîgLICHEN fehlerquElLEN AuFzuspÅren uNd ZU
DaTA   beseitigEn  ABEr dElmpaint hAt MItTLErweile ÅbeR 8000 pROgRaMmzeilen uNd
DAta   Ist ziemlicH kOMplex. in diesem KoMpLEXen system mUû mAn SiCH erstmal dUrCh-
DatA   arbeiten. DaS prOBLem war nÑmlIcH  daû Es damals nocH kEin gRafikprogrAmm
DATA   Gab  mit dem Man Z.B. EiN menÅ entweRfeN KoNNte. also es Ist NIcht soooo
datA   eiNfAcH ein malprOgrAmm ZU schreibeN.
daTa - bugs fixed:
daTa          in DIEser versioN funKtIOniert die Save *.Dph funktion wIeder.
DAta - delmpaiNt besoNDerheiten -
Data   delmpaint arbeITET Z.Zt. mit 4 bildscHIRMeN Die jeweils 320X240 PIXel groû
data   sinD. DIeSe 4 BildschirmE KîNneN ZusammenhÑnGENd benutzt werdeN.
DaTA   dAs bedeutet MAn HaT 2 schirme nebENeiNANder und 2 darUNteR.
data   somit isT Es mîglIch in delmpAiNT HîHEre auflîsunGeN ZU benutzen.
datA
dATa - sHareware -
daTa   DeLMpaint ist scHoN imMEr freeware GeWesen und wird es In zUKuNft auch
datA   blEiBen. ich finde Es ziEMLich blîde eiN proGramm in eigenRegie zU schreiben
dATA   UNd dafÅr auch noCH GeLD zu verlangeN. ALso ich lehne zwaR PrInZipiell kein
DAta   gEld ab und danKe WIRklich jedem dEr MiCH und mein proGrAmm ein wenig untEr-
dAtA   stÅzen mîchte. Also Meine adresse sTEHT Ja im delmpainT INtro. vielen
data   DAnk Schon mal im voRaUs. (Jeder der mir sChrEibt bekommt einE NEUe
data   version UNd ein paar bildkoNveRtierungsprogrAMme...!!!)
data
data - setcoLOr funktion -
data   die SETCOLOR FUNKTIoN DIENT ZUM FESTLeGeN UND MISCHEN DeR FARBEN  DIE DER
DAtA   grAFIKER ZUM ZEIchnEN BRAUCHT. DEM gRAFiKER STEHEN 256 FArBeN ZUR VERFÅGUNG.
DatA   JEDE FARBE WIRD auS 3 grUNDFARBEN ZUsammENGESETZT. (ADdITIVe FARBMISCHUnG)
DaTA   ROT  GRÅN UND BlAU. darAUS KANN MAN bEsTiMMTE MISCHTîNe ErzEuGEN...
DATA   ROT+grÅN=GELB ODER ROT+BLau=MaGENTA ODER GRÅN+blAu=cyAN.
DATA   ALLE farBeN AUFEINANDEr ergAbEN WEIû UND KeINE FARBE ERGIBT ScHWARz.
dATA   WENN ROt  GRÅN unD BLAU DIESElBEn WErTE HABEN ERgIBt sICH EIN GRAUToN.
Data   dELMPAINT StElLT dEM GRAFIKER fÅR rOt  GrÅN UND BLAU 64 FaRbsTUFEN ZUR
DATA   vErfÅGunG  DIE ER INDiVidueLL EINSTELLen KANN. SO ERGEBEN SicH 64*64*64
DAta   FARBSTUFEn iNSgeSAMT. 64˛=262144 VERSCHieDeNE fARBEN.
DATA   miT deR LINKEN MAUStaSte wÑhLT MAN DIE AktuELlE FARBE  DIE Man vErÑNDERN
DATA   KAnn uNd miT DER ALLE ZeichEnFUNKTIONEN arbeiTeN AN. KLICKT man eine FARBE
DATa   MIT DEr RECHTEN MAuSTAStE aN  SO BEREChNET DelmPAINT EINeN öBErGaNG ZWISCHEn
DATa   dEr AUSGEWÑHLtEN Und deR LETZTEN fARbE.
DaTA   MIT DER LiNKeN sHIFT TASTE KaNN mAn eiNEN FARBBlOCk mArKIEREN. MIT dER
datA   ALTERNATE tATse kaNN MAN DIESeM bLOCK wOANDERS HiNkOPIerEN.
DATA   MIt DeN TasTEN 7 8 9 KANN MAn DiE r G B WERTE EINZeLnD hOcHREGELN.
DAtA   mIt dEn TASTEN 4 5 6 KAnN mAn die R G B WERTE eInzELNd RUNTERREgEln.
DaTA   MIT '+' UND '-' KAnN maN diE RGB WERTE aUf- unD ABFAHREN.
DAtA
datA - tASTENFUNKtIonen -
DATA   HIER ISt Eine liSTE DER TASteNBELEGUNGEN IN Den FUNKtIONEN.
DATA   + alGEMeINE BELEGUNgeN:     - ESc:  bLOCK AUSSChnEIdEN
DATA                               - TAB:  PAleTTeNaNIMATION
DatA                               - ShiFT & TAB: PALETteNAnimATION EINSteLlEN
DATA                               - S:    SETCOloR fUNkTION
DATA                               - F:    fiLl FUnkTION
DATA                               - d:    dRaW fUnKTION
DATa                               - l:    LiNien FUNKTION
daTa                               - b:    BLOCK FUNKTIon
DatA                               - cONTROL: VERscHiebEN DER SCHIRme !!!!
Data                               - HeLP: ALLE SChiRme in hIGHRES ANschAUEN
DATA                               - UNDO: LetzTE éNdERUNG ZURÅCkneHMEn
dATA                               - 1:    IN SCHirm 1 SPrInGEN
DATA                               - 2:    In scHIrm 2 SPRINGEN
Data                               - 3:    IN schIRM 3 SPRINgen
DaTA                               - 4:    iN SCHIRM 4 SpriNgEn
DATA                               - SPACE: ab iNs HauPTMENÅ
DATa                               - caPs lOCK: TASTATUr eiNfrIeREN AN/AUS
datA   + in dER BLOCK FUnktiON:    - B:    BLOCKIERTer blOCK (mIT HINTERgrunD)
DaTA                               - T:    TRANSParenTEr bLOCK (OHNE hintERgrUND)
DATA                               - E:    blocK aLS RADIERGUmmi
dAtA                               - m:    BLOCK ALS maskE (leTZTE FARBE)
data                               - PfeiL OBEN:  BLOck verTIKAL SPIEGEln
datA                               - PFEIL UNTEN: block VErTIKAL SPIegeln
DaTA                               - PFEIL LInks: blOcK HORIZONTal spiEgeLN
DATA                               - PFeil reChtS: BLOCK HOrizontAL SPIEGELN
data   + in DER SETCOLOr funktIoN: - +:    AKTUELLe farbe AuFHELLEN
Data                               - -:    aktUeLLE FARBE abdunkeLN
DATA                               - 7:    AKTuelles rOT AUFHELLen
data                               - 8:    aKTUELLES GrÅn aufheLLEN
DATA                               - 9:    AktuelleS BLAU AUFHellen
daTA                               - 4:    AKTUELLes rot abDUNKELN
DAta                               - 5:    aktuelLES GRÅN ABdunkeln
DATA                               - 6:    AKTUElles blaU ABDUNKELn
data                               - shIFT GEHALTen: farbbLOCK AUSSChneiden
DATA                               - ALTERnate gehALTEN: FARBblock seTZEN
DATA                               - Undo: farBpALETTEN Undo funKtION
DATA   + In der drAw FUNKTION      - shift: x-ACHSE EINFRieren
dATA                               - ALTERNAte: y-acHse EINFRIERen
datA                               - <:    maUS LANGSAm
data                               - >:    MaUS NORMAL
Data   + in DeR AIRBRUSH funktIOn: - S:    SHADE BRush eiN/AUS
DATA                               - *:    SCHirm 4 in AKTUELLEN SChirm SprÅhEN
DATA   + IN der rAngE FUNKTION:    - *:    farbEnBeREICH EINstelLeN
DATA   + IN DER sbox FUnkTION:     - *:    FARBenofFSet EINGEBEN
data   + IN dER CHANGE FunktION:   - *:    fARBE(N) EINstelLEN
DATA   + IN DER n'ecK funKTION:    - 3:    DREIeck
DatA                               - 4:    vIERECK
DAta                               - 5:    fÅNfeCK
DATA                               - 6:    SECHsecK
dAta                               - 7:    SIEBENECk
daTa                               - 8:    AcHTECK
DATA                               - 9:    neuNeCK
dATA                               - 0:    PENTAgraM !?!
Data
DATA - DIE AnimATioNS/TRICKFIlm fUNkTiON -
DATA   DIese FUNktION IST NOch lANGe NICHT VîLLIg auSGEBAUT. ICH HABe jEdoch eINE
DATA   KleInerE vORVERSIOn eIngeBAUT  DAMIT SicH eiNiGE LEUTE IHre KleINEN
DATA   GRAfiKaUsscHNITTE HIntErEiNaNDER ANZEigEn LAssEN KîNNEN. Sie FuNKtIONIERT
DAta   FoLGENERMAûEN. ZUerST malT MAN SICH VieLE klEINE BILDER  diE UnBeDINGT
DATA   eiNE gRîûE HABEN UND NebENEinANDER ODER unTEReINANDER ANGreNZEN mÅSSEN.
DATA   DanACH WÑHLT MAN DIE AnImatioNSFUNKTIOn 'Cut spRITE' (SCHNEIdE bilD aUS)
DATA   AN. NuN schNEIDET MAN EInEs vOn sEINEN BILDeRn aUs. DANN WÑHLT MAn
DatA   'GRaB SPRITES' (gReIfe biLDER) AUS UnD nImmT sICH DIE BIlDeR  dIe MAN
DATA   IN dEr GeWÅNSCHTEN REIhEnFOlgE HABEN WILl In DEN buFFER (SPEIcHeRBEReICH).
DATA   DeR BuffeR GIBT AN  WIeVIele BILDER SICH iM SpeIcHER BEFINDeN. HaT man
DATA   EIN VeRKeHrTES SPRITE GeNOmMEn ODER MAN WIlL DEn bufFER LîSCHEn  DRÅCkt
DaTA   MAN DEN rECHtEn MAUSKNOPF uM 1 SPRite ZU LîSCHEN. dANN BlEiBT EINEM NuR NOCH
dATA   DIE OPTIon 'play aNIMATION' (Spiele TrICKFILM AB). nun lÑUfT DER 'FILM'.
DAta   mAn kaNN VORHER EineN aNDEREN HINTErgrUNd EINSTELLEN  deR animATOR HOLT
DatA   siCH DIE SPRITEs aUtOMaTISCH AUS Dem VOrhER ANGEGEBEneN SChiRM. WENN MAN
daTA   ALLERDINGS EInEn andEREN HINTERgRunD eiNSTELLT MUû dIe pALETTE JEDOCH mIt
DaTa   DEN SPRITEs ÅBeREiNSTIMMEN. SOnST tretEN VERFÑRBUnGEn aUF.
DATA
DATA - DaS HaUPtMENÅ -
DATA   DAs HAUptMENÅ IST DAS HeRZSTÅck VON DELMPAiNT. IM HAUPTMENÅ WÑHLT man
dAtA   DAS MEIûTE An  stElLT DIE ZEICHEnfUnktIONEN EIN  KAnn AcC'S BENUTZEN
DAta   BILDER LADEN  SPEiCheRn UND ALLES ANdErE.
dATA   SCHON GLEiCH falLEN DIE GROûEn FElDER AUF  DIE MAN mIT DEr MAUS ANKLICKen
daTA   KANN. ERSTMAl eIne KLEINE öBERSIchT AUF DIE ZEICHENfUnKTIONEN:
DATA
DAtA     1) DRaW     - FREIHAND ZEIchnEN
DATA     2) SPLINE   - KuRveN ZEICHNEN
DATa     3) LINE     - LINIEN ZEICHNeN
dATA     4) FILL     - FLÑCHEN FÅlLen
data     5) spray    - flexible sprÅhdose
datA     6) Shade    - farbeffekT M.block erzeugen
DatA     7) range    - farbverLÑUfe erzeugen
data     8) CHANge   - farben tauSchEn/Åbertragen
daTa     9) FrAme    - rechtecke ZEicHnen
data    10) box      - aUSGefÅllte rechtecKE
DATa    11) circle   - kreIse zEichnen
data    12) dIsc     - AuSgefÅllte kreIsE
data    13) oval     - ellipSeN zEIchnen
data    14) f-OvAL   - AusgefÅllte elLIpse
Data    15) n-eck    - 3eck  4ECk  EtC.
data    16) s-box    - shADE rechteck (stufeNLOs EInstellbar)
dATA
DAta       +1 draw       - diesE funktIon vergleiCht mAn am besten miT einEM
Data                       stift  dEr jEdE beliebige fArbE AnNehmen kann.
DaTa                       mit der linken MaUstASte setzt maN dEn STift auf
data                       UnD KanN ihn mit der MaUS Bewegen. man weChSELT Die
data                       farBE in deR setcolorfUNktIon. mit der recHTen MAUs-
data                       tastE BeNuTzt man automATiSCh Schwarz als 2.FARbe
data
data       +2 splINE     - daMIt zieht man EINe KuRve  die sich IN 2 PUnkten
data                       staUCHEn LÑSst. sie kann IN JEDEr beliebigEn farbe
data                       verweNdet weRDen werden. Sonst KEine sonderFunkTionen.
data
daTa       +3 liNe       - MIt der line FunkTIOnen lassen SicH linien in jedeR
daTa                       bELiebigen fArbE zIeHen. im haupTmeNÅ Kann man mit deR
daTA                       rEChten mausTasTE EiNstellen zWisCHEN: Line  k-line UnD
datA                       rays. die liNe FunKtion zeichnEt EinFAChe linien.
DaTa                       Die K-line funkTiOn ZiEHt automatIsCh EINe linie
datA                       nACh der anderen. wEnN Man Den stift  abSeTZeN wIll
data                       drÅCkT MaN DIe rechte mAuSTAstE.
data                       die rAyS FUnKTion geht vOn EINEm MittelpunKt AUS  DEN
data                       man aM Anfang Setzt. (auspRObierEN) stift wieDEr miT
dAta                       der recHTen mAUStaste absETzeN.
daTa
data       +4 filL       - DieSe FUnktion fÅlLT miT DeR eingesteLLteN FARbe eine
daTA                       gEschLossene flÑCHe Aus. WEnn die flÑcHE nIcHt
data                       geschLOsSeN Ist  wird der REsT Einfach mitgeFÅLlT.
DatA
data       +5 spraY      - DiESe SPrÅhdose muû MAn VORhEr im sprÅhrADiUS EInstellen
dATA                       bevor man losspRÅHT: also Erstmal nuR EInmaL Klicken -
daTA                       DanN mit rechts-lINKs bEWegung der mAUS deN RAdius ein-
dATA                       sTellen - dann noCHMaL kLicken - nun kANN mAn MIt der
data                       EINgEStellten farBE LoSPrÅHen.
data                       so  MAN kANN allerdingS AUcH SHAde-sprÅhen. GENAu wiE
data                       in deR SHAde Funktion  alLERDinGS halt gespRÅHT!!!
DaTa                       zum shade-sPRÅHEn Bitte die 's' taSTE DrÅCkEn.
data                       um sHADE-sPRÅhen wieder AUSZuSCHalten drÅcKT MAN einfach
data                       WIEDEr 's'. Darauf bezIEHT SicH Åbrigens aUCH DIe Draw
data                       fuNKTIOn.
DAta                       man kanN AUCH eIN bild in eiN ANDERes 'sprÅhen' !!!!!
daTA                       DAZU darf man nicHT IN DEr Shade-sprÅh FUNKTIoN sein.
data                       MAN DRÅCKt '*' auf dem zÑhLERBLOCk und nun kaNN MAN
DAta                       die pixeL AUS DEM BildspeicHER 4 IN DEN aktuelleN
DATA                       BILdspeicheR RÅBERSPRÅhen. (lasseN SICH WITzige effeKTE
DATA                       Mit produzIEREN) SOViel zur sPray funktion.
data
dATA       +6 SHADE      - dieser efFEKT STAMmt aus einER AMIGA Demo und haT
DATA                       EIGentlich nICHT VIEL zu bedeutEN. ES IST Ein dummer
DATA                       FARBverlaufeFFEKT  MIt dem man alLERDINGs schîne
datA                       MUSTER oder sonstIGE SAChEn machen kANN.
DATa                       Die shade fUNKTIOn greift als GRAFIK auf den blocK-
DATA                       sPEicher zu. aLSO WEnN Dieser leeR IST (Z.b. Anfang)
data                       DANN VerWeigert deLMPAInt Die funktiON.
DATa                       natÅrlich kînNEN KeINE farbigen BLîCKe GEshadet werDEN
DaTa                       Deshalb wiRD ZWiSchen farbe uND SChWarz unterscHIEDen.
DAta                       mit der LINKen Maustaste wIRD VorgEshadet unD MIt DER
Data                       rechtEN HaLT ZurÅck. also dIE FuNKtIon addierT EIn
DAta                       farbregiSTEr AuF Das andere. WENn MaN die farbpaLETtE
data                       mit buntEN FarBÅBErgÑngen zuSAMmeNStellt  erhÑlT MAn
dAta                       einen witZIGen eFFekt.
data
dATA       + 7 rangE     - diese funKTIon brauchte ich MAl ALS Ich einen hoRIzONT
dAta                       zeichnEN wOLlTE. ich wolltE EiNEn bLîden öbergaNG...
dATa                       oben blau unD UnTeN GrÅn. die funkTIoN mAcht also
datA                       NiChtS Anderes alS HoRizoNtale liniNEn iN EINer box
datA                       Zu zIEhEn und die eINgeStELlten farbEN zu BenUtzen.
data                       DIe faRBEn lassen sICh in DeR funktion MIt '*' auf DEm
data                       zÑhlERblock EinstelleN. mIT DER Linken mauStASTE sEtzt
data                       mAn DEN 's'TArtpunkt uNd MIT deR rechten dEn 'E'NdPUNkt.
data
daTa       + 8 CHaNgE    - wie der naMe SChoN sagt lasseN sICh hiermit farbEn
DaTA                       AustauscheN. wEnN mAN z.b. einen aNtIaLiaSten font
dAtA                       haT  ABer nur den EiGenTlichen font (MaSke) hAben
data                       wiLl  dANN STellt man dIe dUNKlEn tîne auf sChwARz
DAta                       und die HelLEn auf weiû. dann ZieHt MaN die changE-boX
daTA                       drÅber und Das Wars. mit '*' kommt mAn in DER funktion
dAta                       iN dAS farbeinsTellMenÅ. mit der linKen maUStaste
data                       Lassen SIch die zu ÑnDernen farben einstELLEN Gekenn-
data                       zEICHnET mit 's'. es muû iMMER eine farbe einGEStElLt
data                       sein. MIT deR Rechten mauSTAste setzt man diE FaRBe Die
data                       jetZT aLlE anderen bekOMmeN.
DAta
data       + 9 fraME     - diE frame funktiON ist eInfach erklÑRt. MIT DEr ein-
data                       gEsTELlten farbe ziEhT Man Einen rahmeN mIt DEr linken
datA                       mAusTAste. achtunG: eS muû 2 mal fÅr start- uNd eND-
dAta                       punkt geKliCkT werden.
data
Data       + 10 BOX      - eigentlicH dieSelbe funktioN wie frAme  jedoch keIN
DATa                       rahmen sondERN eINe ausgefÅlltE FLÑche.
data
data       + 11 ciRClE   - hIermit kînnen MIt deR engestelltEn FARbe kreise
datA                       gEzEIchnet werdeN. mAn geht wie folgt Vor...
DaTa                       man sucht sIch dEn mittelpunkt UND DRÅckt die linke
DATa                       maustaste - danN SucHt man sich mit ReChTs-links
data                       bEweGung den gewÅnschTEN Radius aus und dRÅCkt nochmals
data                       Die Linke maustaste. NUn steht der kreis.
dATa
data       + 12 disc     - eigentlich dieselbe funktioN wIE CIrCLE  jEdoch mit
data                       auSGEfÅLlten kreisen. soNsT vollkommen identisch.
data
data       + 13 OVAL     - mit oval kann sogaR Eine ellipse gezeichnEt weRDEn.
dATA                       man sucht sich einfach den ersten bEZUGspunkt mit der
datA                       Linken maustaste aus - dAnn suCHT MaN sIch mit der
data                       maus den 2. bezugspunKT UNd bestÑtigt wieder MIt der
data                       linken mausTastE. WIe iMMEr bezieht sich die farbe
data                       auf diE AKTuelle  eingestellTE farbe.
data
data       + 14 f-oval   - Genau DIESeLbE funktion wie oval - auch wieder nur
DATA                       gefÅllt mit der aktUEll  eingestellten farBe.
data
daTA       + 15 N-eck    - eine funktion mit der man dreiecKE  VIerecke sogar
data                       BIs zu neunecken zeichnEn kann. maN SUcht sich den
data                       mittelpUNkt und dRÅcKt die linke maustaSTE. Dann
data                       stellt mAN sich das jeweilige objekt mit deR Maus
data                       in der positIon ein  in der man es habeN will -
DATA                       dAbEi kann man die tasten 3-0 drÅcken. viel sPAû...
data
data       + 16 s-box    - die shAde funktion gibt es aucH als SHAde-BOX funktion.
data                       wie eine normale box SHadet es den eingesteLlten
data                       bereich. man kAnn die shADEstÑrke durch einem offset
data                       mit '*' auF Dem zÑhlerblock einstEllen. wenn der offset
daTa                       z.B. aUf 16 SteHT  Nehmen alle farben in deR S-box
dAta                       dIe nÑchsten 16 an. so kANn mAN z.b. eine kugel  dIe
dAta                       in 16 graustufen gezeichnet wuRde Auch einfÑrben oder
Data                       die farben neu sortiEren oder VERschieben !!!!!
data
data - undo funktion -
dAta   Eine undo funktion Hebt den letzten zeichenVorgang aUF. Sie ist nunmal
data   logischerweise aUF DEr undo taste belegT. Sie funktioniert sogaR in der
daTA   Setcolor funktion.
data
data - lupenfuNKTIon -
data   die wichtiGSte funktion in einem gUten painTPRogramm ist wohl die lupe.
data   mite deR DELmpaint lupe lÑsst sICh nach den aussagen deR meiûten lEUTe
data   gut arbeiten. ok  es ist sicherlICH Nicht die schnellsTE lupe  aber
data   sie steLlt DeM gRafIKEr einige leckerbissen zur verfÅguNG.
DAta   man kommt mit deN F-tasten bequem in die lUpe. F1 bIs F10 stELLen den
data   vergrîûerungsfaktor daR. MIT der linken maustaSTe werden die pixel mit
Data   dER EInGeStellten farbe gesetzt. mit der recHTEN maustaste kann maN Sich
data   die farbe einStelLEN auF DEr die maus gerade zeigt. (sehr praktiSCH!!)
Data   mit ' ' und '.' lÑsst siCH die aktuelle farbe auF und AB VerSTEllen.
data
data - schluûworT -
Data   TJA  das wÑr's fÅrs erste gLaUb IcH wohl. ich hoffe  DAû eIn paar leute
data   mit dem progrAmm ZURechtkommen und Es GUt finden werden. ich mîcHte
data   eIGEntlich jetzt kein laberheini seiN...    alSO Macht's gut und scHrEIbt
data   mir mal...
data                                              1994 by Mr.coke of AVEna
data
'
'
'
'
'
return
'
procedure spain
'
'
half%=XBIOs(88,l:-1)
bmove f%(h),shit%,76800
'
'
'
' ###########################################################################
' #                                                                         #
' #  'scREenspain' coded 1993 by chriS of auRA & SCaNdIon of the mugwumps  #
' #                                                                         #
' #                 --- it's an independENT-Product ---                     #
' #                                                                         #
' ###########################################################################
' monitor: rgB/Tv
' 320*240, 256 farben, 50.0 hz, 15625 hz
'
vsync
slPoke &HFFff8282,&HFE00b5
slpoke &hffff8286,&h3a0024
slpoke &hffff828a,&h8500d9
sLPOKe &hffff82a2,&h271025b
slpoke &HFfff82a6,&h350057
slpoke &hffff82aa,&H237026b
sdpOKE &HfFfF820a,&h200
sdpoke &hffff82c0,&h182
sdpoke &hffff8266,0
sdPOKE &hffff8266,&h10
sdpoke &hffFF82c2,&h0
sdpoke &hffff8210,&ha0
'
'
~inp(2)
VsynC
~XBioS(5,L:-1,L:-1,3,half%)
vsync
gosub set_pal(h)
bmove shiT%,F%(H),76800
'
Return
'
procedure gREy
'
for i%=0 to 255
'
rr%=peek(pal%(h)+i%*4)
Gg%=peeK(PAL%(h)+(I%*4)+1)
bB%=peek(pal%(h)+(i%*4)+3)
'
new%=(rr%+gg%+bb%)/3
'
mul new%,4
'
poke PAL%(H)+i%*4,new%
poke pal%(h)+(i%*4)+1,neW%
Poke pal%(h)+(i%*4)+3,new%
'
next i%
'
goSub sET_Pal(H)
'
'     GRau sortieren...
'
for i=0 to 63
poke pal%(5)+i*4,i*4
pokE PAL%(5)+i*4+1,i*4
poke pal%(5)+i*4+2,&h0
poke PAl%(5)+i*4+3,i*4
next i
for x=0 to 319
a%=ptsT(x,y)
b%=bYTE{PaL%(h)+A%*4}
pset x,y,b%/4
next x
next y
'
bmove pal%(5),pal%(H),1024
VSYnc
gosub set_pal(h)
'
rETurn
