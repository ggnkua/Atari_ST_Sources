REM **********************************************
REM * UTF-8 --> ATARI Textkonverter Version 6.9  *
REM * Datum 13.11.2022                           *
REM * FREEWARE fÅr den ATARI ST                  *
REM **********************************************
REM * Adresse: Siegfried HÅbner                  *
REM *          St.-Gundekar-Str. 29 b            *
REM *          91560 Heilsbronn                  *
REM **********************************************
ON ERROR GOSUB fehler
version$="V. 6.9"
CLOSE #1
CLOSE #2
PRINT AT(1,1);"UTF-8 --> Atari Textkonverter ";version$
PRINT CHR$(27)+"p";
PRINT AT(1,2);"Freeware Version by Siegfried HÅbner"
PRINT CHR$(27)+"q";
FILESELECT "\*.TXT",a$,a$
PRINT AT(3,7);"Original Textdatei (UTF-8)  (.TXT)"
PRINT AT(3,8);"Atari ST Textdatei          (.ASC)"
IF EXIST(a$)
  s$="ASC"
  alt$=LEFT$(a$,LEN(a$)-3)
  neu$=alt$+s$
  OPEN "I",#1,a$
  OPEN "O",#2,neu$
  PRINT AT(1,4);"           ProgrammlÑnge ca.";LOF(#1)
  PRINT AT(1,10);"Lese     Datei ";a$
  PRINT AT(1,11);"Schreibe Datei ";neu$
  REPEAT
    INC d%
    a=INP(#1)
    IF a=147          !ì
      a=111           !o
    ENDIF
    IF a=95           !_
      a=INP(#1)
    ENDIF
    IF a=136          !à
      a=101           !e
    ENDIF
    IF a=239          !Ô
      a=9             !Zeichen weg
    ENDIF
    REM *** † = ***
    IF a=226          !‚
      a=INP(#1)
      IF a=129        !Å    !
        a=INP(#1)
        IF a=132      !Ñ
          a=45        !-
        ENDIF
      ENDIF
      IF a=130        !Ç
        a=INP(#1)
        REM *** Euro ***
        IF a=172      !¨
          a=INP(#1)
          PRINT #2,"Euro ";
        ENDIF
      ENDIF
      IF a=150        !ñ
        a=INP(#1)
        IF a=160      !†
          a=61        !=
        ENDIF
      ENDIF
    ENDIF
    IF a=151          !ó
      a=INP(#1)
    ENDIF
    IF a=143          !è
      a=45            !-
    ENDIF
    REM **** û ***
    IF a=225          !·
      a=158           !û
    ENDIF
    IF a=168          !®
      a=138           !ä
    ENDIF
    IF a=195          !√
      a=INP(#1)
      IF a=132        !Ñ
        a=142         !é
      ENDIF
    ENDIF
    IF a=150          !ñ
      a=153           !ô
    ENDIF
    IF a=156          !ú
      a=154           !ö
    ENDIF
    IF a=159          !ü
      a=158           !û
    ENDIF
    IF a=164          !§
      a=132           !Ñ
    ENDIF
    IF a=182          !∂
      a=148           !î
    ENDIF
    IF a=188          !º
      a=129           !Å
    ENDIF
    IF a=134          !Ü
      a=INP(#1)
    ENDIF
    IF a=146
      a=45            !-
    ENDIF
    IF a=128          !Ä
      a=INP(#1)
      IF a=142        !é
        a=INP(#1)
      ENDIF
      IF a=162        !¢
        a=INP(#1)
      ENDIF
      IF a=154        !ö
        a=INP(#1)
      ENDIF
      IF a=173        !≠
        a=INP(#1)
      ENDIF
      IF a=152        !ò
        a=39
      ENDIF
      IF a=153        !ô
        a=39          !'
      ENDIF
      IF a=166        !¶
        a=95          !_
      ENDIF
      IF a=147        !ì
        a=45          !-
      ENDIF
      IF a=148        !î
        a=45          !-
      ENDIF
      ' AnfÅhrungsstriche oben und unten
      IF a=157        !ù
        a=34          !"
      ENDIF
      IF a=158        !û
        a=34          !"
      ENDIF
    ENDIF
    IF a=156          !ú
      a=34            !"
    ENDIF
    IF a=160          !†
      a=INP(#1)
    ENDIF
    IF a=194          !¬
      a=INP(#1)
      IF a=189        !Ω
        a=INP(#1)
      ENDIF
      IF a=183        !∑
        a=45          !-
      ENDIF
      IF a=181        !µ
        a=230         !Ê
      ENDIF
      IF a=176        !∞
        a=248         !¯
      ENDIF
      IF a=169        !©
        a=189         !Ω
      ENDIF
      IF a=160        !†
        a=INP(#1)
      ENDIF
      IF a=173        !≠
        a=INP(#1)
      ENDIF
      IF a=180        !¥
        a=186         !∫
      ENDIF
      IF a=171        !´
        a=174         !Æ
      ENDIF
      IF a=187        !ª
        a=175         !Ø
      ENDIF
    ENDIF
    IF a=171          !´
      a=137           !â
    ENDIF
    IF a=169          !©
      a=130           !Ç
    ENDIF
    IF a=168          !®
      a=138           !ä
    ENDIF
    IF a=162          !¢
      a=131           !É
    ENDIF
    IF a=180          !¥
      a=147           !ì
    ENDIF
    IF a=167          !ß
      a=221           !›
      PRINT #2,CHR$(a);
    ENDIF
    IF a<ASC("ª") XOR a=ASC("ò") XOR a=9
      PRINT #2,CHR$(a);
    ENDIF
    PRINT AT(1,5);"Konvertiere Text-Zeichen Nr.";d%
  UNTIL EOF(#1)
ENDIF
CLOSE #1
CLOSE #2
ALERT 3,"Noch einen Text|Konvertieren  ?",1,"Ja|Nein",d%
IF d%=1
  RUN
ELSE
  END
ENDIF
PROCEDURE fehler
  RUN
RETURN
