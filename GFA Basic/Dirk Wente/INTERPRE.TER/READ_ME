          ANMERKUNGEN zu Funktioninterpreter V1.3a
          ========================================

Das Programm 'Funktioninterpreter V1.3' (FINTERP2.LST) und das 
Demo-Programm 'FIP_DEMO.BAS' sind Public Domain und dÅrfen frei
kopiert werden, solange keine énderungen an den Programmen 
gemacht werden.

Wie der Name Funktioninterpreter schon sagt, handelt es sich bei 
diesem Programm um einen Interpreter, der Funktionen auf 
korrekte Syntax untersucht und anschlieûend den Funktionswert 
berechnet. 
Hiermit ist es nun endlich mîglich Funktionen in laufende 
Programme einzugeben und diese berechnen zu lassen. Anwendungen
kînnen zum Beispiel Funktionplot und Kurvendiskussion sein.



Es werden folgende Operatoren und Funktionen akzeptiert:
--------------------------------------------------------

(,),*,/,+,-,^,.(Dezimalpunkt)
abs, atn, cos, sin, tan, ep (fÅr exp), int, ln, log, sgn, sqr, 
sec, csc, arcsin, sinh, cosh, tanh, sech, csch, coth, arcsinh,
arccosh, arccsch, arccos, arctan 

Der Interpreter beherrscht die 'Punktrechnung vor Strichrechnung'
Regel.



Funktioninterpreter in eigene Programme einbinden
-------------------------------------------------

Der Funktioninterpreter ist in GFA-Basic V2.0 geschrieben und 
kann ohne groûe MÅhe in alle GFA-Basic Programme eingebunden 
werden.

1. Man 'merget' das File 'FINTERP2.LST' ans Ende des eigenen
   Progamms.

2. Man fÅgt den Befehl 'GOSUB fip_initialisierung' als erste 
   Zeile ein (Initialisierung der vom Programm  benîtigten
   Felder und Variablen). Diese Zeile sollte nur einmal beim
   Start des Programms durchlaufen werden, da es sonst zu einer
   Fehlermeldung kommt und das Programm abgebrochen wird.

3. Man liest im eigenen Programm die zu berechnende Funktion mit
   dem Befehl 'INPUT var_funktion$' ein.

4. Nachdem die Funktion eingelesen wurde ruft man den Parser mit 
   dem Befehl 'GOSUB fip_parser' auf. Dieser ÅberprÅft die 
   Funktion auf korrekte Syntax.

5. Man ÅberpÅft den Inhalt der Variable 'var_fehlerzeiger%' um zu
   sehen ob die Funktion korrekt eingegeben und akzeptiert wurde.  
   Ist der Wert der Variable Null, so wurde die Funktion falsch
   eingegeben. EnthÑlt sie den Wert eins, ist die Eingabe 
   korrekt.
   Z.B.:     IF var_fehlerzeiger%=0 THEN
               PRINT "UnzulÑssige Eingabe"
               END
             Else
               .
               .   ! { Hier geht das Programm weiter }
               .   ! {    die Eingabe war korrekt    }

6. Wurde die eingegebene Funktion akzeptiert, so kann sie nun
   berechnet werden. Hierzu Åbergibt man der Variable 'x' den
   Wert des Arguments der Funktion, ruft den Interpreter mit dem
   Befehl 'GOSUB fip_berechnung' auf und erhÑlt das Ergebnis, als 
   Wert der Variable 'y', zurÅck.
   Z.B.: 
             x=5
             gosub fip_berechnung
             ergebnis=y

   Mîchte man die Funktion mehrmals berechnen, so genÅgt es 
   Schritt 6. erneut zu durchlaufen. 



Das Programm 'FIP_DEMO.BAS' ist ein Demo-Programm welches einfach
zeigt wie man den Funktioninterpreter in Programme einbindet und
benutzt. Um Åberschneidungen mit Variablen und Prozeduren zu ver-
meiden ist dort eine Liste aller globalen Variablen und aller 
Prozeduren aufgefÅhrt, die vom Funktioninterpreter benutzt 
werden. Alle Variablen, auûer 'x' und 'y', beginnen mit 'var_'
und alle Prozeduren beginnen mit 'fip_', sodaû öberschneidungen
leicht vermieden werden kînnen.



Erweiterung des Funktioninterpreters
------------------------------------

Die maximale LÑnge einer Funktion betrÑgt 255 Zeichen, kann aber
durch éndern der DIM-Anweisungen fÅr 'var_funktion$()' und
'var_berechnung_fkt$()' in der Prozedur 'fip_initialisierung'
erweitert werden.
Mîchte man den Funktioninterpreter um eigene Funktionen 
erweitern, so ist dies leicht mîglich. Man fÅgt den Namen (darf 
kein 'x' enthalten) der neuen Funktion in die DATA-Liste der
Prozedur 'fip_initialisierung' ein, erhîht die DIM-Anweisung fÅr
das Feld 'var_eingabezeichen()' um 1, und fÅgt die Funktion
in die Prozedur 'fip_einopberechnung',vor dem Block mit den
'ENDIF' Anweisungen, wie folgt ein:
z.B.:  (uvw sei die neue einzufÅgende Funktion)

 IF var_berechnung_fkt$(jk%-1)="uvw"
   var_berechnung_fkt$(jk%-1)=STR$( 'Berechnung der FKT' )+"@"
 ELSE
 ENDIF
  .
  .
  .



Bemerkung
---------

Funktioninterpreter V1.3a wurde sorgfÑltig und lange getestet,
sodaû zum heutigen Zeitpunkt keine Fehler mehr bekannt sind. Da
man aber nie ausschlieûen kann daû ein Programm ganz fehlerfrei
ist, bitte ich darum eventuelle Fehler zu dokumentieren und mir
zu senden, damit diese durch eine Åberarbeitete Version behoben 
werden kînnen. 




Dirk Wente                                     Oktober 1990
Hinterstraûe 1
4750 Unna-LÅnern

Tel.:02303/4708

