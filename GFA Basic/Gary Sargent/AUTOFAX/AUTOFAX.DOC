The facsimile (or just FAX, for short) mode of communications 
continues to increase in use on the HF bands.  A number of 
additional government and commercial stations transmit a variety 
of information ranging from weather satellite to press photo's.  
Something interesting to copy can be found most hours of the day 
on many frequencies.

My earlier programs for the  Atari 800/800XL/130XE and the 
Commodore 64 and 128 computers ( December 1985 and October 1986 73 
Amateur Radio, respectively) work very well, but can receive only 
one chart at a time and can not automatically save charts to disk. 
One thing FAX isn't is fast. Normal FAX charts can take 10 to 15 
minutes to receive.  Initially it's fun to watch the charts be 
displayed on the computer but after awhile one wishes the charts  
could be recorded over a period of time (say a day or more) and 
reviewed at leisure later.  
  
AUTOFAX TO THE RESCUE

My latest computer program, AUTOFAX, solves these problems.  It 
provides numerous features to enhance receiving FAX signals, 
including:

   COMPUTER CONTROLLED UNATTENDED RECEPTION OF CHARTS.  The user 
   can construct a program schedule containing up to 20 steps 
   including date, time, disk file name, and all other parameters 
   associated with receiving a chart.

   
   OPTIONAL CONTROL OF RECEIVER FREQUENCY.  If you are using a 
   Kenwood TS440 or R5000 receiver and connect it to the 
   computer's serial port as described in the article "Control 
   Your Rig from a PC" in the August 1989 issue of 73, AUTOFAX 
   will control the receive frequency as well.

   FLEXIBLE FAX RECEIVE PARAMETERS.  AUTOFAX will receive FAX 
   signals using speeds of 60, 120, and 240 lines per minute.  
   Charts may be 320, 640, or 1280 pixels wide and 1600 lines long 
   (at 320 pixels per line).

   CONVENIENT VIEWING OF CHARTS.  The received charts are viewed 
   on the computer's monitor.  The operator has full control over 
   the display by course and fine horizontal and vertical 
   scrolling of the display.  Both the color monitor (in medium 
   resolution) and the superb monochrome monitors are supported.
   
   CHARTS SAVED TO DISK FILES.  Charts may be saved to disk files 
   in two different formats.  One format is compatible with the 
   popular drawing program DEGAS.  DEGAS will allow additional 
   processing of the chart including adding color, animation, and 
   hardcopy on numerous printers. 

   SIMPLE INTERFACE CIRCUIT.  A simple two IC circuit  is required 
   to connect your receiver to the Atari ST's serial port.  All 
   circuit components are easily obtained and any normal 
   construction technique may be used.

   SIMPLE OPERATION.  AUTOFAX uses the Atari ST's MacIntosh like 
   mode of operation to good advantage.  Most operations are 
   controlled via 'pull down' menu's.  See Figure 4 for an 
   example.  No complicated commands need be learned.  The user 
   simply uses the computer's mouse to point at an option and 
   'click' the mouse button to select the option.


SYSTEM COMPONENTS

The components of this system are shown in the block diagram in 
Figure 1 and consist of a suitable HF receiver, a tone detector, 
an Atari ST computer, and the program AUTOFAX.  Also shown is an 
optional RS232 to TTL converter in case you wish to have the 
computer control the frequency of your Kenwood receiver.

RECEIVER REQUIREMENTS  The receiver you use should be a stable, 
good quality, general coverage receiver with SSB capability.  If 
your receiver provides acceptable  ease of tuning and frequency 
stability for SSB voice signals, it should be suitable for 
facsimile reception.  I primarily use a Kenwood TS440S 
transceiver, but have also used a Sony ICF2010 receiver.

TONE DETECTOR.  The tone detector is a simple circuit that 
connects between the receiver audio output and the computer's 
RS232 serial port.   The circuit, shown in Figure 2, is based on 
two IC's.  The NE565 phased locked loop IC functions as a simple 
tone detector. The 50k potentiometer (marked 'TUNE') is used to 
adjust the PLL center frequency.  The LM324 quad op-amp IC is used 
as a low pass filter and level convertor to provide a 12 and 5 
volt output signals.  We use the 12 volt output here to drive the 
Atari ST computer.  The 5 volt output is suitable for computers 
requiring a TTL level signal (Commodore 64/128, Atari 
800/800XL/130XE, etc.) and is not used with the Atari ST.  The LED 
is used for tuning purposes.  Note that two op-amps within the 
LM324 are not used in this circuit.  They could be used for 
additional filtering or other functions.

The circuit uses only simple, commonly available components.  Your 
friendly local Radio Shack or other suppliers should be able to 
provide all of the components.  The resistors are all 1/8 watt and 
10% tolerance components.  All capacitors are ceramic disks and 
are in microfarads, except for the two electrolytics (shown with 
the polarity '+' marker) which are rated for 20 volts.

Since only low frequencies are used, any construction technique 
may be used to put the circuit together ... a circuit board, 
point-to-point, etc.

ATARI ST COMPUTER.  The Atari ST computer and the program AUTOFAX 
are the heart of the system and control all aspects of its 
operation.  The ATARI ST is a very capable computer system that 
uses the Motorola 68000 microprocessor and may have from .5 to 4 
megabytes of memory.  The ST features a mode of operation very 
similar to the MacIntosh's thus it is very 'user friendly' for 
this application.

All connections to the ST are via the RS232 serial port.   The 
tone detector circuit's output is connected to pin 22 and ground 
to pin 7. Additional pins of this connector are used if you use 
the optional RS-232 to TTL converter.
  
RS232 TO TTL CONVERTER.  This optional circuit (see Figure 3) is 
used to convert the computer's RS232 serial port's voltages to the 
TTL levels required by the Kenwood TS440 transceiver and R5000 
receiver.  The connections to the Atari are via pins 1 through 7 
of the serial port.  Radio connections are via the 6 pin DIN 
connector, ACC1.  The circuit was originally presented in the 
August 1989 issue of 73 Amateur Radio.  Please refer to that 
article for more information.  Note that this circuit is only 
required if you wish to have the ST able to control your receive 
frequency.


AUTOFAX PROGRAM OPERATION

AUTOFAX uses the graphical user interface capabilities totally to 
result in a sophisticated program that does not require a PHD in 
computer science to operate!  All operations are via the ST's pull 
down menus.  Figures 4 to 7 are sample print outs of the ST's 
screen with each of the pull down menus highlighted.  The ST's 
mouse is used to point at a desired menu and operation from the 
menu.  'Clicking' the mouse button will then invoke the operation.  
The following is a brief discussion of major functions of the 
menus.

DATA FILES.  These menu options (Figure 4) provide capabilities 
related to the storage and retrieval of received FAX charts.  The 
first two options (Load and Save File) are used to load and save 
FAX buffer contents to and from the attached disk drive.  The FAX 
buffer is 128,000 bytes long ... suitable for receiving charts up 
to 1280 pixels wide and 1600 lines long! The Load and Save DEGAS 
File options are used to load and save a single screens worth of a 
chart to or from a disk file that is compatible with the popular 
drawing program named DEGAS.  DEGAS provides the ability to touch 
up charts, add color, add animation, and print a hardcopy to 
dozens of supported printers.

The last three options provide disk file management utility 
functions. Set Path is used to set the default disk drive to be 
used for all disk file operations.  This option will be especially 
useful if you happen to have a hard disk drive.  

The Directory option will provide a listing of the names of the 
files currently on disk, followed by the amount of free space on 
the drive.  

The Delete File option allows the permanent removal of a disk file 
that is no longer required.

SET UP MENU (Figure 5).  

The SET UP menu provides the ability to specify the lines per 
minute (LPM) receiving rate, pixels per line, and other options  
for the Manual FAX mode of reception. To choose the desired LPM 
receive rate, simply use the mouse to pull down the SET UP menu, 
then high light the desired rate (60, 120, and 240 LPM are 
available), then click the left mouse button.  The next time you 
pull down this menu the selected rate will have a little check 
mark to its left to indicate the present rate.

In a similar manner, three chart widths are available: Normal - 
640 pixels per line, Wide - 1280 pixels per line, and Narrow - 320 
pixels per line.  Selection of the desired width is the same as 
described above.

The Line Skip option may be used to specify how many lines are to 
be skipped between lines that are displayed.  It is used to 
control the aspect ratio of received charts.  Its value will vary 
with the chart being received and the present width setting.  I 
usually find that a skip value of 1 or 2 is correct for a normal 
width.  When this option is chosen , the computer will ask you to 
enter a value of 0 to 9, and then press Return.  The next time the 
SET UP menu is pulled down, the skip value will be displayed.  
  
The last SET UP menu option is the Clear Buffer option which, when 
selected, will clear the memory chart buffer.  The buffer has room 
to for the following lines of chart:

                          Receive minutes at 120 LPM vs. skip
     Width     Lines      0   1   2   3   4   5   6   7   8   9
     -------   -----     --- --- --- --- --- --- --- --- --- ---
     Normal    1600       13  26  40  53  66  79  93 106 119 133
     Wide      800         6  13  20  26  33  40  46  53  60  66
     Narrow    3200       26  53  80 106 133 160 186 213 240 266

Also shown in the above table is the number of minutes of 
reception that the buffer can hold for the various skip count 
values.  For example, the buffer can hold over two hours of chart 
using a width of narrow and a skip count of four!  This is great 
for unattended monitoring a frequency to look for FAX 
transmissions.

MAN. FAX MENU (Figure 6)

This menu provides various options for the control of the manual 
mode of FAX reception.

The Start option will start the process of the reception of a 
chart by the computer using the parameters as set up by the SET UP 
menu.  The chart is stored in the memory buffer starting at the 
beginning of the buffer, overwriting any existing chart.

The Stop option will halt the receive process until the next Stop 
or Continue option.  While halted, the present synchronization 
state and memory buffer position are maintained.

The Continue option will resume the reception of a FAX chart from 
the point where the Stop option was selected. 
  
The Sync option may be used to synchronize the computer reception 
of a chart with the station transmitting the chart.  After 
starting the reception during the first part of a chart, select 
this option.  The computer will display the received chart and 
direct you to point the mouse to the desired left margin of the 
chart (usually a white vertical bar during the first portion of 
each chart) and click the left mouse button.  The remainder of 
this chart will be received properly centered on the computer's 
display.  The Reset option may be used to reset to the top of the 
memory buffer without altering the synchronization.

Finally, the View Chart option may be selected to view the 
contents of the memory buffer on the computer's display.  The 
chart will be displayed until the left mouse button is clicked, 
which will return to the menu mode of operation.  While the chart 
is being displayed, extensive options are available to control the 
portion of the chart to be displayed.  The options are controlled 
by the following keys:

  KEYS USED          RESULTING ACTION
  ------------------ -------------------------------------------   
  Up arrow           Move up in the buffer 1/4 inch.
  Down arrow         Move down in the buffer 1/4 inch.
  Right arrow        Move to right in buffer 1/4 inch.
  Left arrow         Move to left in buffer 1/4 inch.
  Clr-Home           Move to top of current window of buffer.
  Shift-Up arrow     Move to next window up in buffer.
  Shift-Down arrow   Move to next window down in buffer.
  Shift-Right arrow  Move to right side of a wide width buffer.
  Shift-Left arrow   Move to left side of a wide width buffer.
  Shift-Clr-Home     Move to top of memory buffer.
  Left mouse button  Discontinue chart display.  Return to menu.

Use these chart scrolling options to select the portion of a chart 
to be saved during the next Save Degas File option from the DATA 
FILES menu.  The Save Degas File option will save exactly the 
contents of the computer display.

AUTO FAX MENU (Figure 7)
 
This final menu provides the powerful, automatic FAX reception 
features for which this programmed is named.  AUTOFAX is centered 
around the concept of a reception schedule that may be up to 20 
steps long with each step specifying the following items:

  Frequency, in khz., that the attached Kenwood TS440 or R5000
  receiver is to be set to.  If a receiver is not directly   
  connected to the computer, this is simply a memo field.
  Mode of receiver operation.  The choices are U=USB, L=LSB, 
  A=AM.

  Comment field to be used as desired.  Examples are the call and
  location of the station to be received.

  Date to start reception.  Date formats are xx/xx/19xx.  The 
  special date value of TODAY my be used to start reception
  regardless of the actual date.

  Time to start reception.  Time formats ar xx:xx.  The special
  time format of NOW may be used to start reception regardless
  of the actual time.

  Minutes to record a chart.  Values may be from 001 to 999,
  although the longest practical length is the length of time
  that can be accommodated in the memory buffer using the
  following Width, LPM, and Skip values.  See the chart presented
  in the SET UP menu discussion.

  Width of chart.  The values may be Normal, Narrow, or Wide.

  LPM receive rate.  The values may be 60, 120, or 240.

  S or desired Skip value.  The skip value can be 0 to 9.

  File Name.  The disk file will be used to hold the contents of
  the memory buffer after the specified number of minutes of chart
  are received. 

The Load Schedule and Save Schedule AUTO FAX menu options will 
load and save a receive schedule to and from a disk file, 
respectively.  Any number of receive schedules may be saved on 
disk.

The Edit Schedule invokes a full screen editor to allow the entry 
and/or edit of a the current receive schedule.  The editor 
displays the schedule headings and all 20 schedule steps.  The 
arrow keys are used to highlight the schedule step to be modified.  
Then the right arrow will signal you wish to change this line.  
Now all keyboard keys are active to allow the line to be changed 
or entered.  Pressing the Return key signals that you are finished 
with the line.  The Control-Insert and Control-Delete keys may be 
used to insert or delete a line in the middle of a schedule.  The 
schedule items are position dependent ... they must be lined up 
exactly under the headings shown.  When all changes are completed, 
pressing Control-Z will return to menu mode operation.

The Start Schedule will display the receive schedule and start up 
the Auto FAX mode of operation.  The computer will sequentially 
search through the schedule for the first entry that is in the 
future and will then wait for that step's starting date and time.  
The step is highlighted and the present date and time are 
displayed.  If the computer is controlling your receiver's 
frequency and mode, then those values are set appropriately per 
the schedule step values. The computer will do each step in the 
schedule, until the end is reached, where the computer will simply 
continue at the top of the schedule.  The user may halt Auto FAX 
operation at any time by simply entering Control-Z.

The View Files option of the AUTO FAX menu may be used to direct 
the computer to sequentially step through each step of the 
schedule, load in the data file holding the received FAX chart, 
and display the chart until the left mouse button is clicked.  
This provides a quick way to examine the charts after collection.

The Terminal Emulator provides a method to send characters 
directly from your computer's keyboard to your Kenwood receiver.  
This feature is handy for checking out your interface circuit or 
or using other receiver remote control features that are not 
supported by AUTOFAX.

Finally, the Set Date/Time option allows those of us who do not 
have a built in date and time chip to set the date and time after 
first running AUTOFAX.

The example receive schedule shown samples weather info from the 
Pacific ocean from NPM (Pearl Harbor), the Gulf area from WLO 
(Slidell, La.), Canada from CFH (Halifax, N.S.), continental US 
form the Air Force Weather Service (Elkhorn, Ne.), and several 
GOES satellite pictures from NAM (Norfolk, Va.)!  This entire
24 hour  schedule is conducted unattended by the computer, with 
all received charts stored on disk for later viewing. 

USING THE SYSTEM

Turn on your computer then double click on the file GFABASRO.PRG.  
This file is the run only version of the program GFA BASIC (which 
is what AUTOFAX is written in) and select file AUTOFAX.BAS when 
the file selector box appears.  AUTOFAX will then load off disk 
and run.  
  
Connect the tone detector circuit to your receiver's audio output 
and to the computers serial port.  Also connect the RS-232 to TTL 
interface circuit to the receiver and computer if you are using 
the computer control of receive frequency option.  Power up the 
receiver and the tone detector and tune in a strong FAX signal 
until the characteristic screech-screech sound is of medium pitch.  
A moderate level of receiver audio output will be required.  Now 
adjust the Tune control until the LED blinks in time with the 
received audio.  Using the mouse, select the MAN. FAX menu item 
and the Start option.  Now again select the MAN. FAX menu item and 
select the View Chart option.  You should see the chart being 
displayed horizontally from top to bottom on the computers 
display.  Fine tune the receiver and/or the tone detector for the 
sharpest copy.

WHERE TO TUNE

By far the best FAX signals at my location are from NAM out of 
Norfolk, Va.  Current frequencies are 3357, 8080, 10865, 16410, 
and 20225 khz.  Weather charts and satellite photographs of all 
types are broadcast nearly continuously.

The Air Force Weather Service broadcasts a variety of weather 
charts also nearly continuously from Offutt AFB at Elk Horn, Ne. 
on 3231, 5096, 6904, 10576, 11120, and 19326 khz.

Coastal station WLO from Slidell, La. provides weather information 
pertinent to the gulf coastal area and surrounding states.  
Frequencies are 6852, 9157, and 11145 khz.

Finally, CFH from Halifax, N.S., Canada, provides charts during 
the first 15 to 30 minutes of each hour on 4271, 6330, 10536, and 
13520 khz.  As you might expect, their information centers on 
Canada or Canadian waters.

GETTING THE PROGRAM

The program is essentially share-ware at this time.  It has been 
uploaded to GENIE and is available there.  The tone detector 
circuit diagram and other figures mentioned above are available 
for $5 from:

     Gary Sargent
     4227 Willow Run Dr.
     Dayton, Ohio  45430

For an extra $10 (or $15 total), I will include a 3.5 diskette 
containing all of the program and other files, saving you the 
download expense.

I can not accept CODs or credit cards (US funds only, please).  
Personal checks or postal money orders in U.S. funds are 
acceptable.  

Autofax is an outgrowth of the earlier VISIFAX programs for the 8 
bit Atari and the Commodore 64 computers.  Visifax packages 
(software diskette, 73 Amateur Radio magazine article reprint, and 
other info) is still available at the address above for $15 each.  
Be sure to specify the computer.

