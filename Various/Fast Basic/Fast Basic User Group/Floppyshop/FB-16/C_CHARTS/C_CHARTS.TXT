COLOUR CHARTS    version 1.32


  "COLOUR  CHARTS"  is a low-resolution program  for  drawing  and 
saving coloured barcharts and piecharts.  It is not intended as  a 
serious  business tool,  nor is it necessarily an example of  good 
BASIC programming, though I'm sure someone will find a use for it.
  At  the time I purchased my "ATARI 520ST FM"  and  "FAST  BASIC" 
cartridge my knowledge of computing was confined to the  "SPECTRUM 
128k +2" and I'd never actually written a program that was in  any 
way complete.   As "FAST BASIC" was quite unlike anything I'd seen 
before,  it seemed a good idea to to learn to use it by writing  a 
program that would use as many keywords as possible.
 Naturally,  I wanted to experiment with "ATARI" graphics  (having 
found  those  of the "SPECTRUM" rather limiting) so I  decided  to 
construct a simple piechart. At the time, I'd been checking on how 
much I had in my pockets,  in the bank, and how long it would take 
to pay for the computer; it seemed a good idea to use the piechart 
to record simple data of this type.
 This was a simple matter, though making the program user-friendly 
and  bug-free  was  extremely  time-consuming.   At  one  point  I 
installed the "Speech Module",  from the "FAST BASIC Demonstration 
Disk",  to  give a verbal verification of data as it was  entered, 
and to inform the user of mistakes,  though I eventually found the 
voice  quite irritating and decided to re-write the whole  program 
without it.
  After  some  success I wrote a  similar  incomplete  program  to 
produce  a barchart,  and it was quite a simple matter to  combine 
the  two  such that the user could input data and  toggle  between 
barchart and piechart format.
  Finally,  I began to realize that a simple file handling  system 
could be constructed, such that data could be saved and loaded. My 
understanding  of such a system is still vague,  hence the  one  I 
opted  for  is  based  on the  one  used  by  Jeremy  Rushton,  in 
"ICONED.BSC".   Despite  many  experiments  with  error   trapping 
routines I have not yet been able to eliminate one or two bugs  in 
the  file-saving process.  Basically,  if the destination disk  is 
write-protected during an attempt to save a file an alert box will 
appear,  giving  the options to re-try or cancel.  If "CANCEL"  is 
selected  the program will crash,  and I've yet to find a  way  to 
prevent this. Fortunately, as the "CANCEL" option should seldom be 
needed here, it is unlikely to present any real problem.
  All  data  files created must have a  ".DTA"  extender,  or  the 
program will not recognize them.
 Though there are one or two programs of this nature in the public 
domain,  I wrote most of this one before seeing them and thus  any 
similarity arises mainly from coincidence. My system keeps the use 
of GEM to a minimum and uses 16 colours, rather than the black and 
white patterns the others seem to use.  Unfortunately,  this  does 
impose  the restriction that only 15 data items can be  input  per 
chart,  though any more than this would probably make some of  the 
bars/segments too thin to read,  anyway.  I don't really like  the 
title "Colour Charts" but it does describe the way it differs from 
the other couple of programs.

USE OF THE PROGRAM

 The initial screen asks the user to determine whether data should 
be displayed as a barchart or a piechart;  this being  established 
by pressing either "B" or "P" respectively.  These can be of upper 
or  lower case.  Pressing keys other than "B" and "P" should  just 
result  in  nothing happening until the correct  key  is  pressed. 
  Incidentally,  successful entries are confirmed by a bell-sound, 
throughout the program.
  Once the correct key has been pressed,  to establish  the  chart 
format, the user will be presented with a second screen, asking if 
an earlier data file should be loaded. Again the decision is based 
on the press of one of two keys,  this time "Y" and  "N".  Loading 
data  is  brought-about  by pressing "Y" and will  be  dealt  with 
later.   If  data is not to be loaded a press of the "N" key  will 
generate  a new screen,  this time asking for a title for the  new 
chart; 1 to 8 characters may be entered.
  The user is then asked how many data items are to be entered  (1 
to  15).  This  is necessary such that certain  variables  may  be 
dimensioned by the computer.
 The next prompt asks for  units to specify the nature of the data 
about  to be entered (ie.  is it in feet/ miles/ pounds/  degrees/ 
pence/  cents/  etc  ?).  Units  must  be  specified  and  may  be 
represented by 1 to 3 characters.  These are used purely to  label 
the chart clearly (which will make sense when a chart is saved for 
future  use);  which characters are chosen makes no difference  to 
the program itself. ie. the program doesn't recognize any specific 
unit  (data  in "feet" will be processed in the same way  as  that 
entered in "litres",  for example) but merely needs something with 
which the axes, etc can be labelled.
 Once,  the units have been entered a new screen will be drawn and 
will  show an empty circle,or a set of axes (depending on  whether 
"P"  or "B" was pressed in the initial screen),  and a  number  of 
coloured and empty boxes.
 The first prompt asks for the name of the first data item (1 to 6 
characters),  again for the purpose of labelling.  For example, to 
make  a  chart showing average rainfall over 12 months  the  first 
data item name could be "JAN", the second "FEB",etc.
 A second prompt asks for the amount for the first item;  that  is 
to say,  the number of feet/ inches/ pence/ etc represented by the 
item.
 Thirdly,  the user is prompted to choose a colour by entering  an 
index number from 1 to 15.  The colour-boxes at the bottom of  the 
screen  show  the colours available,  together  with  their  index 
numbers;  note  that  white (0) can't  be  selected.  The  colours 
available  are  those of the "Control Panel"  accessory,  which  I 
prefer to the FAST BASIC default palette,  though the  CONTROL.ACC 
itself isn't required by the program.  I know some of the brighter 
colours tend to overlap a little (they do on my TV set,  I presume 
a colour monitor wouldn't cause this problem),  but with a  little 
experience this isn't much of a problem.
  When  a colour has been selected it will be  removed  from  it's 
colour-box,  as will it's index, as a reminder that it has already 
been  used.  It  is  not possible to use the  same  colour  twice. 
Actually,  when a colour is chosen the program reads the colour of 
a pixel in the appropriate colour-box;  if it is found to be white 
(either  because  index  0 was chosen or because  the  colour  had 
already been selected and it's box "whitewashed") an error message 
is generated.
  Once the first colour has been selected the  piechart/  barchart 
will be updated accordingly. Unfortunately, low resolution doesn't 
provide  enough  room to put a scale on the barchart,  or  to  add 
labels,  but  enough information can be read from  the  colour-key 
(table and vertical row of boxes),  which is updated as each entry 
is made.
  Subsequent entries will enter data for the  second,  third,  etc 
data  items until the chart is complete,  whereupon a single  key-
press will display an enlarged version of the chart.  The  colour-
key shows each item name in black, with it's appropriate amount in 
blue (sorry if it's difficult to read but space was limiting).
  A further key-press will generate a screen offering a  selection 
of choices. Pressing "B" or "P" will display the current data as a 
barchart or piechart respectively.
 "Q" terminates the program.
 "N" will erase the current data and begin the whole of the  above 
process again,  such that a new chart may be made. Pressing "N" or 
"Q" is final, any data cleared can not be retrieved.
 Pressing "S" will display a file selector such that the chart may 
be  saved  as a data file,  with a ".DTA"  extender.  The  default 
filename  here may be altered,  if so desired,  though the  actual 
title of the chart will remain the same when re-loaded.
  The "CANCEL" button may be used here,  though trying  to  cancel 
(from the alert box) a save  to a write-protected disk will  cause 
problems,  as mentioned earlier.  It is not necessary to have  the 
"COLOUR CHARTS" program file on the destination disk.
  Leaving the save option returns the user to the multiple  option 
screen. To load a data file at this point it is necessary to press 
"N"  to  return to the initial screen that  determines  the  chart 
format,  and  press  either  "B" or "P".  The user  will  then  be 
presented  with the screen that asks "DO YOU WISH TO LOAD  DATA?". 
If "Y" is pressed a file selector will appear,  allowing any  data 
file with a ".DTA" extender to be loaded.

"COLOUR  CHARTS" was written with "Computer Concepts  FAST  BASIC" 
and  is  Public  Domain;  it may be copied and  distributed  in  a 
non-profit-making manner.



               B. KING.      Tel: (091) 234 5369 
                                 18th Aug. 1989

