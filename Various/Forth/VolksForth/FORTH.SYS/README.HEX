volksFORTH-83 fuer ATARI ST                 Bremen, 25. Maerz 1986

Dieses  Dokument soll Ihnen den ersten Einstieg  in  volksFORTH-83 
erleichtern.  Dabei gehen wir auf einige Besonderheiten der ATARI-
Version ein,  soweit diese nicht im Handbuch erlaeutert  sind.  Im 
Handbuch beziehen sich die Kapitel Assembler, ST-spezifische Worte 
und  Tracer speziell auf Ihren Computer,  alles andere  gilt  fuer 
alle Versionen von volksFORTH-83. 

Umgang mit den Disketten
Zu Ihrem Handbuch haben Sie zwei Disketten erhalten.  Fertigen Sie 
auf  jeden  Fall Sicherheitskopien von diesen  Disketten  an.  Die 
Gefahr  eines Datenverlustes ist gross,  da FORTH Ihnen  in  jeder 
Hinsicht  freie Hand laesst - auch beim  versehentlichen  Loeschen 
Ihrer Systemdisketten !!  Auf der einen Diskette befinden sich die 
Programme FORTH.PRG,  FORTHKER.PRG, FORTH.KER, FORTH.SYS sowie ein 
File namens FORTH_83.SRC. Bei den beiden Programmen (Kennung .PRG) 
handelt  es  sich  um  Lader,  die  die  eigentlichen  FORTH-Files 
nachladen.   FORTH.PRG   laedt   FORTH.SYS,   FORTHKER.PRG   laedt 
FORTH.KER.
FORTH.KER  ist  eine  Minimalversion,   die  nur  den   Sprachkern 
enthaelt.  Damit  koennen  Sie eigene  Versionen  z.B.  mit  einem 
veraenderten  Editor  oder  anderer  Graphic  herstellen  und  mit 
SAVESYSTEM  als  fertiges System abspeichern.  FORTH.SYS  ist  ein 
komplettes System mit Editor, Assembler, Tools, Multitasking usw.
Bei  dem  File FORTH_83.SRC handelt es sich um den  Quelltext  des 
Sprachkerns.  Eben dieser Quelltext ist mit einem  Target-Compiler 
kompiliert worden und entspricht exakt dem FORTH.KER. Kopieren Sie 
sich  dieses File unbedingt auf eine leere  Diskette.  Andernfalls 
laufen Sie Gefahr,  dass Sie versehentlich die Programme oder  die 
Quelltexte ueberschreiben.  Sie muessen grundsaetzlich Daten-  und 
Systemdisketten sorgfaeltig voneinander trennen.
Die zweite Diskette enthaelt alle weiteren Quelltexte des Systems. 
Ein Verzeichnis erhalten Sie mit DIR LIST.  Auf Screen $0A gibt es 
einen  Loadscreen,  der alle Teile kompiliert,  die  zu  FORTH.SYS 
gehoeren.  Mit  diesem  Loadscreen  ist  aus  FORTH.KER  Ihr  File 
FORTH.SYS kompiliert worden.

Beachten  Sie bitte,  dass volksFORTH-83 in der  jetzigen  Version 
grundsaetzlich    nur    einseitige    Laufwerke     unterstuetzt. 
Selbstverstaendlich  koennen  Sie  auch  doppelseitige   Laufwerke 
verwenden,   allerdings   steht   Ihnen   dann   nur   die   halbe 
Diskettenkapazitaet  zur Verfuegung.  Das Disketteninterface  wird 
aber  zur Zeit ueberarbeitet und steht in einer spaeteren  Version 
zur Verfuegung.

Erster Einstieg
Legen Sie die Systemdiskette in Laufwerk A,  die Quelltextdiskette 
in Laufwerk B. (Beim Arbeiten mit einem Laufwerk werden Sie an den 
entsprechenden  Stellen zum Wechseln der  Diskette  aufgefordert.) 
Laden  Sie  FORTH.PRG wie ueblich durch Anklicken  mit  der  Maus. 
Sollte die Meldung ' Speicherbereich kann nicht belegt werden ...' 
erscheinen, haben Sie zu viele Accessories auf Ihrer TOS-Diskette, 
sodass  der  fuer  volksFORTH-83  vorgesehen  Speicherbereich  (ab 
$50000) nicht zur Verfuegung steht.  Entfernen Sie in diesem  Fall 
ueberfluessige  Accessories von Ihrer TOS-Diskette und booten  Sie 
neu. volksFORTH-83 meldet sich nun mit einer Einschaltmeldung, die 
die Versionsnummer (gegenwaertig 3.7) enthaelt.
Geben Sie jetzt ein:
     F0 L
Auf  die Aufforderung 'Enter your ID' antworten Sie zunaechst  mit 
<Return>.  Sie  befinden  sich jetzt im Editor  und  koennen  sich 
diesen  und  die folgenden Screens ansehen und  dabei  den  ersten 
Umgang mit dem Editor kennenlernen.  (Dieser Editor wird zur  Zeit 
ueberarbeitet,   es   wird   demnaechst   eine   GEM-Version   mit 
Maussteuerung und erweiterten Funktionen geben.) Blaettern Sie mit 
CTRL-N und CTRL-B durch die naechsten Screens und kehren Sie  dann 
mit  CTRL-F ins System zurueck.  Laden Sie jetzt z.B die  Graphic-
Demos mit
     LOAD" Demos"
Laufwerk  B laeuft an,  Sie sehen zuerst,  welche  Screens  gerade 
kopiliert  werden und dann einige  Graphic-Beispiele.  Nach  jedem 
Bild koennen Sie mit einer beliebigen Taste weitermachen oder  mit 
ESC abbrechen.
Sie  koennen sich jetzt auch einen freien Screen suchen und  erste 
eigene Worte schreiben. Wenn Sie einen Screen neu beschrieben oder 
geaendert  haben,  wird  er bei CTRL-F  automatisch  auf  Diskette 
zurueckgespeichert.     Dazu    muss    selbstverstaendlich    der 
Schreibschutz  entfernt sein,  benutzen Sie daher  unbedingt  eine 
Sicherheitskopie Ihrer Diskette. Solch eine Kopie koennen Sie z.B. 
mit  dem  Programm  SUPER-COPY  anfertigen,  das  sich  auf  Ihrer 
Systemdiskette  befindet.   Dieses  Programm  ist  natuerlich   in 
volksFORTH-83 geschrieben und soll unter anderem die  Faehigkeiten 
unseres Systems demonstrieren.

Herstellen eines eigenen Systems
Das  File FORTH.SYS ist als Arbeitsversion  gedacht.  Es  enthaelt 
alle wichtigen Systemteile wie Editor,  Assembler,  Tools,  Line-A 
Graphic, Decompiler, Tracer usw. Sollte Ihnen die Zusammenstellung 
nicht  gefallen,  koennen Sie sich jederzeit ein Ihren  speziellen 
Wuenschen angepasstes System zusammenstellen.  Schluessel dazu ist 
der  Loadscreen  ($0A)  der zweiten  Diskette.  Sie  koennen  dort 
Systemteile,  die  Sie  nicht benoetigen,  mit dem  Backslash  '\' 
wegkommentieren  oder  die entsprechenden  Zeilen  ganz  loeschen. 
Ebenso  koennen  Sie  natuerlich dem  Loadscreen  eigene  Routinen 
hinzufuegen.  Beachten  Sie  dabei,  dass LOAD" nur  dann  richtig 
funktioniert,  wenn der entsprechende Name im Directory (Screen 0) 
eingetragen ist.
Entspricht  der  Loadscreen Ihren  Wuenschen,  verlassen  Sie  das 
System mit BYE. Laden Sie nun FORTHKER.PRG. Geben Sie dann ein:
     B:  0A LOAD
B:  schaltet  Laufwerk B ein,  0A LOAD laedt Ihr System.  Ist  das 
System fertig kompiliert, geben Sie ein:
     SAVESYSTEM  A:FORTH.SYS
Damit  wird Ihr altes File ueberschrieben (Sicherheitskopie  !!!), 
sodass  Sie beim naechsten Laden von FORTH.PRG Ihr eigenes  System 
erhalten.

Abweichungen vom Handbuch
Den  wichtigsten  Unterschied  haben  Sie  sicher  schon  bemerkt. 
Mussten wir auf dem Commodore 64 einen Namen waehlen,  der sich in 
die Reihe der Superlativ-Programme (Turbo-,  Super-,  Hypra- etc.) 
wuerdig einreiht, so ist auf dem Atari ST vornehmes Understatement 
angesagt.
volksFORTH-83  wurde  fuer  den  Atari  ST  mit  dem   vorhandenen 
Quelltext bis zur ersten lauffaehigen Version auf einem  Commodore 
64   target-kompiliert,   wobei  natuerlich   die   Maschinencode-
Definitionen  neu  geschrieben werden mussten.  An  dieser  Stelle 
gebuehrt   nochmals   Henry   Laxen  und   Michael   Perry   unser 
ausdruecklicher  Dank.  Zahlreiche Codeworte konnten aus  dem  F83 
ohne  groessere Aenderungen uebernommen werden,  auch  der  68000-
Assembler   ist  mit  wenigen  Abweichungen  von   Michael   Perry 
uebernommen  und  zunaechst  auf dem  Commodore  64  implementiert 
worden.
Aus dem oben Gesagten wird deutlich,  dass saemtliche  Systemworte 
in allen volksFORTH-83 Versionen in ihrer Wirkung, nicht unbedingt 
im  Aufbau,  identisch sind.  Nur wenige zusaetzliche Worte  haben 
sich  als so notwendig erwiesen,  dass sie mit in  den  Sprachkern 
aufgenommen wurden.
volksFORTH-83  fuer den Atari ST ist ein 16-Bit-System und  belegt 
einen Speicherbereich von 64 kByte, also eine Speicherseite. Diese 
Speicherseite  liegt gegenwaertig im Bereich von $50000 -  $60000; 
dies wird sich aendern,  wenn das Betriebssystem im ROM  vorhanden 
ist. Mit speziellen Operatoren ist natuerlich auch ein Zugriff auf 
den gesamten Speicherbereich moeglich.  Andererseits sind 64 kByte 
fuer  ein FORTH-System mehr als reichlich,  da  FORTH  bekanntlich 
sehr  kompakten Code erzeugt und die 64 kByte nicht - wie  bei  8-
Bit-Rechnern ueblich - mit einem Betriebssystem teilen muss. Zudem 
wurden alle grossen Datenbereiche,  wie sie z.B.  von den Graphic-
Routinen des Betriebssystems benoetigt werden,  ausgelagert,  also 
in den Bereich ab $60000 gelegt. Eine Konstante namens
     mempage   ( -- n )
gibt die Speicherbank (in unserem Falle also $0005) an.

Das zweite zusaetzliche Wort ist
     even   ( addr -- addr' )
Bekanntlich  darf  beim beim 68000 nicht mit  Wortoperationen  auf 
ungerade Adressen zugegriffen werden; dies fuehrt zu einem Adress-
Error.  even  wandelt addr auf die naechsthoehere gerade Zahl  um. 
Ist addr gerade,  geschieht nichts. Uebrigens sind die Worte @ und 
!  so  ausgelegt,  dass  mit Ihnen auch ein Zugriff  auf  ungerade 
Adressen moeglich ist.
Aehnlichen Zwecken dienen die Worte
     align   ( -- )
und
     halign   ( -- )
align  justiert  den Dictionary-Pointer (dp).  sodass er  auf  die 
naechste  gerade  Adresse zeigt.  In gleicher Weise  sorgt  halign 
dafuer, dass der Heap auf einer geraden Adresse liegt.

Im  Laufe  der Entwicklung haben sich auch die  Worte  Input:  und 
Output:  gegenueber  der  Beschreibung  im  Handbuch  geringfuegig 
veraendert.  Beide werden jetzt mit ; abgeschlossen und nicht mehr 
mit [ (Compiler aus).

Wir  hoffen,  Ihnen  mit volksFORTH-83 ein  System  uebergeben  zu 
haben,  mit  dem  Sie vollstaendig  zufrieden  sind.  Mit  Fragen, 
Kritik,   Anregungen  und  natuerlich  mit  selbst   geschriebenen 
Quelltexten,  die  Sie  'public  domain'  zur  Verfuegung  stellen 
wollen, wenden Sie sich bitte an

          Dietrich Weineck
          Fleetrade 40
     2800 Bremen
          Tel. 0421 - 493090

oder an

          Forth Gesellschaft e.V.
          Schanzenstr. 27
     2000 Hamburg 6

Die Entwicklung des System hat viel Arbeit und Kosten  verursacht, 
die  auch durch den Verkauf der Dokumentation  nicht  vollstaendig 
gedeckt werden.  Daher sind Spenden in beliebiger Hoehe  jederzeit 
sehr  willkommen.  Sie koennen auch die  FORTH-Gesellschaft  durch 
Ihre  Mitgliedschaft  unterstuetzen.  Naehere  Informationen  dazu 
erhalten Sie bei der oben angegebenen Adresse.

May the volksFORTH be with you ...

