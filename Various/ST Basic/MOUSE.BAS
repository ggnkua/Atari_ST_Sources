5     A#=GB
10    CONTROL=PEEK(A#)
20    GLOBAL=PEEK(A#+4)
30    GINTIN=PEEK(A#+8)
40    GINTOUT=PEEK(A#+12)
50    ADDRIN=PEEK(A#+16)
60    ADDROUT=PEEK(A#+20)
100   CLEARW 2:FULLW 2
1070  POKE SYSTAB+24,1
1071  POKE CONTRL,122:POKE CONTRL+2,0:POKE CONTRL+6,1
1072  POKE INTIN,0:VDISYS(1)
1074  MOUSE =1
1075  GEMSYS(79)
2000  X=PEEK(GINTOUT+2)
2010  Y=PEEK(GINTOUT+4)
2020  KEY=PEEK(GINTOUT+6)
2025  IF KEY=2 THEN GOSUB 3000
2027  IF KEY=1 THEN POKE SYSTAB+24,0:END
2028  IF KEY=0 THEN GOSUB 3022
2030  GOTO 1075
3000  rem ******************************************
3010  rem draw a box using vdi
3020  rem ******************************************
3022  COLOR l,(RND*15)+1,1,RND*25,2
3024  IF NOUSE=0 THEN 3040
3030  MOUSE=0
3035  POKE CONTRL,123:POKE CONTRL+2,0:POKE CONTRL+6,0
3037  VDISYS(1)
3040  POKE CONTRL,11
3050  POKE CONTRL+2,2
3060  POKE CONTRL+6,0
3070  POKE CONTRL+10,1
3080  POKE PTSIN,X
3090  POKE PTSIN+2,Y
3095  POKE PTSIN+4,X+50
3100  POKE PTSIN+6,Y+50
3110  VDISYS(11)
3120  MOUSE=1:RETURN
3130  END
