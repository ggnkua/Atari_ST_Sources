***************************************************************************
*                                                                         *
*         Dieser disassemblierte und kommentierte Text wurde von          *
*                                                                         *
*            Sieghard Sch„fer, Jahnstrasse 33, 7400 Tbingen 5            *
*                                                                         *
*    auf ATARI ST  erstellt und bearbeitet.  Deshalb ist das folgende     *
*    komplette Listing  bis auf  weiteres  Eigentum des  o.g. Autors.     *
*    Eine  Weitergabe an  Dritte ist  deshalb  nur auf  ausdrckliche     *
*    Genehmigung des Autors gestattet.    (c) COPYRIGHT 11/89 SCHŽFER     *
*                                                                         *
*    Dieses  Listing  darf  nur  fr  private  Zwecke  verwendet  und     *
*    bearbeitet werden.  Verbesserungsvorschl„ge zum Kommentar werden     *
*    gerne entgegen genommen. (Stand : 4.November 1989)                   *
*                                                                         *
*    Dieser Textvorspann darf nicht ver„ndert oder gel”scht werden.       *
*                                                                         *
***************************************************************************

F000 : 96 88    : LDAA  0088             ask_boot -> A
F002 : 81 AA    : CMPA #AA               A = #aa ?
F004 : 27 0A    : BEQ   0A  > F010       ja, Warmstart

F006 : CC 00 80 : LDD  #0080             sonst D = #0080
F009 : 20 09    : BRA   09  > F014       Sprung

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
F00B : 7B 01 11 : TIM  #01,0011          Wake_up von T/R_CSR gesetzt ?
F00E : 26 FB    : BNE   FB  > F00B       ja, nochmal (s.Adresse FE31)
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

F010 : 0F       : SEI                    sonst IRQ maskieren
F011 : CC 00 89 : LDD  #0089             D = #0089

F014 : 8E 00 FF : LDS  #00FF             Stack zeigt auf #00ff
F017 : 4F       : CLRA
F018 : 97 00    : STAA  0000             #00 -> dir_1
F01A : 4C       : INCA
F01B : 97 03    : STAA  0003             #01 -> data_2
F01D : 97 01    : STAA  0001             #01 -> dir_2
F01F : CE FF FF : LDX  #FFFF
F022 : DF 06    : STX   0006             #ffff -> data_3
F024 : DF 04    : STX   0004             #ffff -> dir_3
F026 : 86 05    : LDAA #05
F028 : 97 10    : STAA  0010             7812.5 Bd, Bit2-Port2:Not used
F02A : 86 1A    : LDAA #1A
F02C : 97 11    : STAA  0011             RIE, RE und TE im T/R_CSR setzen
F02E : 96 11    : LDAA  0011             T/R_CSR lesen -> gltig machen
F030 : 96 12    : LDAA  0012             receive_data -> A
F032 : C1 89    : CMPB #89               Warmstart ?
F034 : 27 12    : BEQ   12  > F048       ja

F036 : 4F       : CLRA                   sonst A = 0

F037 : 4A       : DECA
F038 : 01       : NOP                    kurze Warteschleife
F039 : 26 FC    : BNE   FC  > F037

F03B : 72 01 11 : OIM  #01,0011          Wake_up von T/R_CSR setzen
F03E : 86 20    : LDAA #20               A = #20

F040 : 4A       : DECA                   kurze Pause, damit das Flag..
F041 : 26 FD    : BNE   FD  > F040       ..wieder gel”scht werden kann

F043 : 7B 01 11 : TIM  #01,0011          Wake_up von T/R_CSR gesetzt ?
F046 : 26 FB    : BNE   FB  > F043       ja, nochmal warten

F048 : 86 08    : LDAA #08
F04A : 97 08    : STAA  0008             Enable OCI im TCSR

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
F04C : 86 5A    : LDAA #5A               A = #5a, erstes Bitmuster

F04E : CE 00 00 : LDX  #0000             X = #0000
F051 : 3A       : ABX                    X = Speichertest-Startadresse

F052 : A7 00    : STAA  00,X             Speicher bis..
F054 : 08       : INX
F055 : 8C 01 00 : CPX  #0100             ..#0100 mit (A) auffllen
F058 : 26 F8    : BNE   F8  > F052

F05A : CE 00 00 : LDX  #0000             dann X wieder #0000..
F05D : 3A       : ABX                    ..bzw. Speichertest-Startadresse

F05E : A1 00    : CMPA  00,X             Speicher ok ?
F060 : 26 EA    : BNE   EA  > F04C       nein, nochmal von vorne

F062 : 08       : INX                    sonst Speicher bis..
F063 : 8C 01 00 : CPX  #0100             ..#0100 testen
F066 : 26 F6    : BNE   F6  > F05E

F068 : 81 A5    : CMPA #A5               war A = #a5 ?
F06A : 27 04    : BEQ   04  > F070       ja, RAM-Test-Ende

F06C : 86 A5    : LDAA #A5               sonst A = #a5, zweites Bitmuster
F06E : 20 DE    : BRA   DE  > F04E       das Ganze nochmal
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
F070 : 4F       : CLRA                   A = 0
F071 : CE F0 00 : LDX  #F000             X = #f000, ROM-Test

F074 : A9 00    : ADCA  00,X             A = A+(X+00)+Carry
F076 : 08       : INX                    X = X+1
F077 : 27 0A    : BEQ   0A  > F083       oberes Ende des Speichers ?

F079 : 8C FF 6F : CPX  #FF6F             nein, X = #ff6f ?
F07C : 26 F6    : BNE   F6  > F074       nein, weiteraddieren

F07E : CE FF F0 : LDX  #FFF0             sonst Interruptvektoren
F081 : 20 F1    : BRA   F1  > F074       dazuaddieren
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

F083 : 43       : COMA
F084 : 26 C6    : BNE   C6  > F04C       Checksumme ok ? (sonst nochmal..)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

F086 : C6 01    : LDAB #01               ja
F088 : D7 8A    : STAB  008A             #01 -> tast_key
F08A : 4F       : CLRA                   A = 0
F08B : 5C       : INCB                   B = #02

F08C : DD 8C    : STD   008C             D -> tast_matrix
F08E : 43       : COMA                   A -> \A
F08F : 53       : COMB                   B -> \B
F090 : D7 06    : STAB  0006             B -> data_3
F092 : 97 07    : STAA  0007             A -> data_4
F094 : 96 02    : LDAA  0002             data_1 -> A
F096 : 43       : COMA                   A invertieren
F097 : 26 0A    : BNE   0A  > F0A3       eine Taste gedrckt gehalten ?

F099 : 7C 00 8A : INC   008A             nein, inc tast_key
F09C : DC 8C    : LDD   008C             D = tast_matrix
F09E : 05       : ASLD                   Shift-Left von D
F09F : 24 EB    : BCC   EB  > F08C       Carry gesetzt ?

F0A1 : 20 2C    : BRA   2C  > F0CF       nein, dann Sprung

F0A3 : D6 8A    : LDAB  008A             tast_key -> B
F0A5 : C1 05    : CMPB #05               B >= #05 ?
F0A7 : 24 11    : BCC   11  > F0BA       ja, war richtige Taste

F0A9 : 85 01    : BITA #01               sonst Bit 0 von A testen
F0AB : 26 0D    : BNE   0D  > F0BA       gesetzt ?

F0AD : 85 F0    : BITA #F0               nein, oberes Nibble von A testen
F0AF : 27 E8    : BEQ   E8  > F099       Ctrl/li-re-Shft/Alt gedrckt ?

F0B1 : 5A       : DECB                   nein, B = B-1
F0B2 : CE F2 06 : LDX  #F206             X auf zugeh”rige Tast-Tabelle
F0B5 : 3A       : ABX                    Offset fr Taste
F0B6 : A6 00    : LDAA  00,X             Code der Taste in A
F0B8 : 20 0B    : BRA   0B  > F0C5       Sprung

F0BA : C6 01    : LDAB #01               B = #01
F0BC : 6D 58    : TST   58,X             2 Befehle auf einmal !!!
F0BE : 44       : LSRA                   A um 1 Bit rechts
F0BF : 24 FC    : BCC   FC  > (F0BD)     Carry gel”scht -> B um 1 Bit links

F0C1 : 17       : TBA                    sonst A = B
F0C2 : BD F2 F7 : JSR   F2F7             Tastencode ermitteln (in A)

F0C5 : 8A 80    : ORAA #80               Tastencode fr losgelassene Taste

F0C7 : D6 11    : LDAB  0011             T/R_CSR -> B
F0C9 : C5 20    : BITB #20               warten, bis Datenregister leer
F0CB : 27 FA    : BEQ   FA  > F0C7

F0CD : 97 13    : STAA  0013             dann A -> transmit_data

F0CF : CC FF FF : LDD  #FFFF
F0D2 : DD 06    : STD   0006             #ff -> data_3 und data_4

F0D4 : 96 11    : LDAA  0011             T/R_CSR -> A
F0D6 : 85 20    : BITA #20               warten, bis Senderegister leer
F0D8 : 27 FA    : BEQ   FA  > F0D4

F0DA : 86 F1    : LDAA #F1
F0DC : 97 13    : STAA  0013             dann #f1 -> transmit_data

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
F0DE : 4F       : CLRA                   A = 0
F0DF : CE 00 00 : LDX  #0000             X = #0000
F0E2 : D6 82    : LDAB  0082             Kaltstart ?
F0E4 : C1 A5    : CMPB #A5
F0E6 : 26 04    : BNE   04  > F0EC       nein

F0E8 : C6 80    : LDAB #80               sonst B = #80 (Kaltstart)
F0EA : 20 02    : BRA   02  > F0EE       Sprung

F0EC : C6 89    : LDAB #89               B = #89 (Warmstart)

F0EE : 3A       : ABX                    X = X+B

F0EF : A7 00    : STAA  00,X             RAM ab B mit
F0F1 : 08       : INX                    Nullen auffllen
F0F2 : 8C 01 00 : CPX  #0100             (bis #0100)
F0F5 : 26 F8    : BNE   F8  > F0EF
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

F0F7 : C6 AA    : LDAB #AA
F0F9 : D7 88    : STAB  0088             dann #aa -> ask_boot
F0FB : C6 80    : LDAB #80
F0FD : D7 8B    : STAB  008B             #80 -> 008b
F0FF : C6 01    : LDAB #01               B = #01
F101 : D7 8A    : STAB  008A             #01 -> tast_key
F103 : 5C       : INCB                   B = B+1
F104 : DD 8C    : STD   008C             D -> tast_matrix
F106 : 4C       : INCA                   A = A+1
F107 : 97 B0    : STAA  00B0             A -> 00b0
F109 : 97 B1    : STAA  00B1             A -> 00b1
F10B : 97 B2    : STAA  00B2             A -> 00b2
F10D : 97 B3    : STAA  00B3             A -> 00b3
F10F : 86 98    : LDAA #98
F111 : 97 C9    : STAA  00C9             #98 -> 00c9
F113 : 86 28    : LDAA #28
F115 : 97 CA    : STAA  00CA             #28 -> 00ca
F117 : 86 06    : LDAA #06
F119 : 97 9B    : STAA  009B             #06 -> 009b
F11B : 86 95    : LDAA #95
F11D : 97 D7    : STAA  00D7             #95 -> 00d7
F11F : 86 FE    : LDAA #FE
F121 : 97 03    : STAA  0003             #fe -> data_2
F123 : 4F       : CLRA
F124 : 97 05    : STAA  0005             #00 -> dir_4
F126 : BD FB 8E : JSR   FB8E

F129 : DC 09    : LDD   0009             Counter -> D
F12B : CB 13    : ADDB #13               B = B + #13
F12D : D1 0C    : CMPB  000C             B = out_cmp_L ?
F12F : 26 01    : BNE   01  > F132       nein

F131 : 01       : NOP                    warten

F132 : DC 09    : LDD   0009             sonst Counter -> D
F134 : C3 00 10 : ADDD #0010             D = D + #0010
F137 : DD 0B    : STD   000B             D -> out_cmp
F139 : 0E       : CLI                    IRQ freigeben

F13A : 96 CB    : LDAA  00CB             00cb -> A
F13C : 2A 03    : BPL   03  > F141       A positiv ?

F13E : BD F8 D4 : JSR   F8D4             nein

F141 : D6 C9    : LDAB  00C9             00c9 -> B
F143 : C5 02    : BITB #02               Bit 1 von B gesetzt ?
F145 : 26 2A    : BNE   2A  > F171       ja

F147 : 5D       : TSTB                   sonst B positiv ?
F148 : 2A 0D    : BPL   0D  > F157       ja

F14A : BD F1 86 : JSR   F186

F14D : 7E F3 71 : JMP   F371             Sprung

F150 : 96 CB    : LDAA  00CB             00cb -> A
F152 : 2A 1D    : BPL   1D  > F171       A positiv ?

F154 : BD F8 D4 : JSR   F8D4             nein

F157 : 7B 20 CA : TIM  #20,00CA          Bit 5 von 00ca gesetzt ?
F15A : 27 DE    : BEQ   DE  > F13A       nein

F15C : 96 C9    : LDAA  00C9             sonst 00c9 -> A
F15E : 2A 0B    : BPL   0B  > F16B       A positiv ?

F160 : 96 07    : LDAA  0007             nein, data_4 -> A
F162 : 91 07    : CMPA  0007             A = data_4 ?
F164 : 26 FA    : BNE   FA  > F160       nein

F166 : 84 F0    : ANDA #F0               sonst Bits 0-3 von A l”schen
F168 : 7E F6 81 : JMP   F681             Sprung

F16B : BD F1 86 : JSR   F186

F16E : 7E F6 81 : JMP   F681             Sprung

F171 : 96 CA    : LDAA  00CA             00ca -> A
F173 : 85 20    : BITA #20               Bit 5 von A gesetzt ?
F175 : 27 C3    : BEQ   C3  > F13A       nein

F177 : 85 03    : BITA #03               sonst Bits 0-1 von A gesetzt ?
F179 : 27 F0    : BEQ   F0  > F16B       nein

F17B : 7B 08 CB : TIM  #08,00CB          sonst Bit 3 von 00cb gesetzt ?
F17E : 26 BA    : BNE   BA  > F13A       ja

F180 : 44       : LSRA                   sonst A um 1 Bit rechts
F181 : 24 E8    : BCC   E8  > F16B       Carry gel”scht ?

F183 : 7E F8 A2 : JMP   F8A2             nein, Sprung

***************************************************************************
F186 : 96 03    : LDAA  0003             data_2 -> A
F188 : 91 03    : CMPA  0003             warten, bis sich der Zustand..
F18A : 26 FA    : BNE   FA  > F186       ..von data_2 stabilisiert hat

F18C : 84 06    : ANDA #06               nur Mausbuttons bearbeiten
F18E : D6 9D    : LDAB  009D             009d -> B
F190 : 27 15    : BEQ   15  > F1A7       B = 0 ?

F192 : C1 0A    : CMPB #0A               nein, B < #0a ?
F194 : 25 1A    : BCS   1A  > F1B0       ja

F196 : 5F       : CLRB                   sonst B = 0
F197 : D7 9D    : STAB  009D             B -> 009d
F199 : 97 C5    : STAA  00C5             A -> byt_anz
F19B : 16       : TAB                    B = A
F19C : 98 9C    : EORA  009C             A = A eor 009c
F19E : 94 9B    : ANDA  009B             A = A and 009b
F1A0 : D4 9C    : ANDB  009C             B = B and 009c
F1A2 : 1B       : ABA                    A = A+B
F1A3 : 97 9B    : STAA  009B             A -> 009b
F1A5 : 96 C5    : LDAA  00C5             byt_anz -> A

F1A7 : 91 9B    : CMPA  009B             A = 009b ?
F1A9 : 27 05    : BEQ   05  > F1B0       ja

F1AB : 97 9C    : STAA  009C             sonst A -> 009c
F1AD : 7C 00 9D : INC   009D             inc 009d

F1B0 : 96 07    : LDAA  0007             data_4 -> A
F1B2 : 91 07    : CMPA  0007             A = data_4 ?
F1B4 : 26 FA    : BNE   FA  > F1B0       nein

F1B6 : 39       : RTS
***************************************************************************

F1B7 : 86 01    : LDAA #01               A = #01
F1B9 : 97 03    : STAA  0003             A -> data_2
F1BB : DC 8C    : LDD   008C             tast_matrix -> D
F1BD : 43       : COMA                   A = \A
F1BE : 53       : COMB                   B = \B
F1BF : D7 06    : STAB  0006             B -> data_3
F1C1 : C6 FF    : LDAB #FF
F1C3 : D7 05    : STAB  0005             #ff -> dir_4
F1C5 : 97 07    : STAA  0007             A -> data_4

F1C7 : 96 02    : LDAA  0002             data_1 -> A
F1C9 : 91 02    : CMPA  0002             A = data_1 ?
F1CB : 26 FA    : BNE   FA  > F1C7       nein

F1CD : CE FF FF : LDX  #FFFF
F1D0 : DF 06    : STX   0006             sonst #ff -> data_3 und data_4
F1D2 : C6 FE    : LDAB #FE
F1D4 : D7 03    : STAB  0003             #fe -> data_2
F1D6 : 5F       : CLRB
F1D7 : D7 05    : STAB  0005             #00 -> dir_4
F1D9 : 43       : COMA                   A = \A
F1DA : 26 07    : BNE   07  > F1E3       A <> 0 ?

F1DC : D6 89    : LDAB  0089             nein, 0089 -> B
F1DE : 26 03    : BNE   03  > F1E3       B <> 0 ?

F1E0 : 7E F2 D5 : JMP   F2D5             nein, Sprung

F1E3 : 97 8E    : STAA  008E             A -> 008e
F1E5 : D6 8A    : LDAB  008A             tast_key -> B
F1E7 : C1 05    : CMPB #05               B > #05 ?
F1E9 : 24 55    : BCC   55  > F240       ja

F1EB : 5A       : DECB                   sonst dec B
F1EC : CE F1 FE : LDX  #F1FE             X = #f1fe
F1EF : 3A       : ABX                    X = X+B
F1F0 : A6 00    : LDAA  00,X             A = (X+00)
F1F2 : 97 93    : STAA  0093             A -> 0093
F1F4 : C6 04    : LDAB #04               B = #04
F1F6 : 3A       : ABX                    X = X+B
F1F7 : A6 00    : LDAA  00,X             A = (X+00)
F1F9 : 3A       : ABX                    X = X+B
F1FA : E6 00    : LDAB  00,X             B = (X+00)
F1FC : 20 0C    : BRA   0C  > F20A       Sprung

F1FE : 04 08 10 20 10 20 40 80

F206 : 1D 2A 38 36                       Scancodes fr Ctrl LShft Alt RShft

F20A : 95 8E    : BITA  008E             Bit 008e von A gesetzt ?
F20C : 27 12    : BEQ   12  > F220       nein

F20E : 43       : COMA                   sonst A = \A
F20F : 94 8E    : ANDA  008E             A = A and 008e
F211 : 97 8E    : STAA  008E             A -> 008e
F213 : 96 93    : LDAA  0093             0093 -> A
F215 : 95 89    : BITA  0089             Bit 0089 von A gesetzt ?
F217 : 26 1E    : BNE   1E  > F237       ja

F219 : 9A 89    : ORAA  0089             sonst A = A or 0089
F21B : 97 89    : STAA  0089             A -> 0089
F21D : 4F       : CLRA                   A = 0
F21E : 20 0F    : BRA   0F  > F22F       Sprung

F220 : 96 89    : LDAA  0089             0089 -> A
F222 : 95 93    : BITA  0093             Bit 0093 von A gesetzt ?
F224 : 27 11    : BEQ   11  > F237       nein

F226 : 96 93    : LDAA  0093             sonst 0093 -> A
F228 : 43       : COMA                   A = \A
F229 : 94 89    : ANDA  0089             A = A and 0089
F22B : 97 89    : STAA  0089             A -> 0089
F22D : 86 80    : LDAA #80               A = #80

F22F : D7 93    : STAB  0093             B -> 0093
F231 : 9A 93    : ORAA  0093             A = A or 0093
F233 : 5F       : CLRB                   B = 0
F234 : BD FD 34 : JSR   FD34

F237 : 96 8A    : LDAA  008A             tast_key -> A
F239 : 81 01    : CMPA #01               A = #01 ?
F23B : 26 03    : BNE   03  > F240       nein

F23D : 7E F2 D5 : JMP   F2D5             sonst Sprung

F240 : 96 11    : LDAA  0011             T/R_CSR -> A
F242 : 85 C0    : BITA #C0               Frame- oder Full-Register-Error ?
F244 : 27 0C    : BEQ   0C  > F252       nein

F246 : 85 40    : BITA #40               šbertragungsfehler ? (Frame Error)
F248 : 27 05    : BEQ   05  > F24F       nein

F24A : BD FF 40 : JSR   FF40             sonst Frame Error

F24D : 20 03    : BRA   03  > F252       Sprung

F24F : BD FF 04 : JSR   FF04

F252 : D6 8B    : LDAB  008B             008b -> B
F254 : 2B 44    : BMI   44  > F29A       B negativ ?

F256 : 86 01    : LDAA #01               nein, A = #01
F258 : D6 89    : LDAB  0089             0089 -> B
F25A : C4 03    : ANDB #03               Bits 2-7 von B l”schen
F25C : 5A       : DECB                   dec B
F25D : C1 02    : CMPB #02               B = #02 ?
F25F : 26 0A    : BNE   0A  > F26B       nein

F261 : 4F       : CLRA                   sonst A = 0
F262 : 5F       : CLRB                   B = 0
F263 : 20 06    : BRA   06  > F26B       Sprung

F265 : D6 93    : LDAB  0093             0093 -> B
F267 : 26 66    : BNE   66  > F2CF       B <> 0 ?

F269 : 5C       : INCB                   nein, inc B
F26A : 17       : TBA                    A = B

F26B : 97 93    : STAA  0093             A -> 0093
F26D : CE 00 91 : LDX  #0091             X = #0091
F270 : 3A       : ABX                    X = X+B
F271 : A6 00    : LDAA  00,X             A = (X+00)
F273 : 91 8A    : CMPA  008A             A = tast_key ?
F275 : 26 EE    : BNE   EE  > F265       nein

F277 : 09       : DEX                    sonst dec X
F278 : 09       : DEX                    dec X
F279 : A6 00    : LDAA  00,X             A = (X+00)
F27B : 95 8E    : BITA  008E             Bit 008e von A gesetzt ?
F27D : 27 07    : BEQ   07  > F286       nein

F27F : 43       : COMA                   sonst A = \A
F280 : 94 8E    : ANDA  008E             A = A and 008e
F282 : 97 8E    : STAA  008E             A -> 008e
F284 : 20 DF    : BRA   DF  > F265       Sprung

F286 : 5C       : INCB                   inc B
F287 : 53       : COMB                   B = \B
F288 : D4 89    : ANDB  0089             B = B and 0089
F28A : D7 89    : STAB  0089             B -> 0089
F28C : BD F2 E8 : JSR   F2E8

F28F : BD F2 F7 : JSR   F2F7             Tastencode ermitteln (in A)

F292 : 8A 80    : ORAA #80               Code fr losgelassene Taste
F294 : 5F       : CLRB                   B = 0
F295 : BD FD 34 : JSR   FD34

F298 : 20 CB    : BRA   CB  > F265       Sprung

F29A : 96 8E    : LDAA  008E             008e -> A
F29C : 27 37    : BEQ   37  > F2D5       A = 0 ?

F29E : C6 01    : LDAB #01               nein, B = #01
F2A0 : 20 01    : BRA   01  > F2A3       Sprung

F2A2 : 58       : ASLB                   B um 1 Bit links

F2A3 : 44       : LSRA                   A um 1 Bit rechts
F2A4 : 24 FC    : BCC   FC  > F2A2       Carry gel”scht ?

F2A6 : 17       : TBA                    nein, A = B
F2A7 : D7 93    : STAB  0093             B -> 0093
F2A9 : 53       : COMB                   B = \B
F2AA : D4 8E    : ANDB  008E             B = B and 008e
F2AC : D7 8E    : STAB  008E             B -> 008e
F2AE : D6 8B    : LDAB  008B             008b -> B
F2B0 : C4 03    : ANDB #03               Bits 2-7 von B l”schen
F2B2 : CE 00 8F : LDX  #008F             X = #008f
F2B5 : 3A       : ABX                    X = X+B
F2B6 : A7 00    : STAA  00,X             A -> (X+00)
F2B8 : 08       : INX                    inc X
F2B9 : 08       : INX                    inc X
F2BA : 96 8A    : LDAA  008A             tast_key -> A
F2BC : A7 00    : STAA  00,X             A -> (X+00)
F2BE : 5C       : INCB                   inc B
F2BF : DA 89    : ORAB  0089             B = B or 0089
F2C1 : D7 89    : STAB  0089             B -> 0089
F2C3 : BD F2 E8 : JSR   F2E8

F2C6 : 96 93    : LDAA  0093             0093 -> A
F2C8 : BD F2 F7 : JSR   F2F7             Tastencode ermitteln (in A)

F2CB : 5F       : CLRB                   B = 0
F2CC : BD FD 34 : JSR   FD34

F2CF : 96 8B    : LDAA  008B             008b -> A
F2D1 : 81 02    : CMPA #02               A = #02 ?
F2D3 : 26 C5    : BNE   C5  > F29A       nein

F2D5 : DC 8C    : LDD   008C             sonst tast_matrix -> D
F2D7 : 05       : ASLD                   D um 1 Bit links
F2D8 : 25 05    : BCS   05  > F2DF       Carry gesetzt ?

F2DA : 7C 00 8A : INC   008A             nein, inc tast_key
F2DD : 20 04    : BRA   04  > F2E3       Sprung

F2DF : 5C       : INCB                   inc B
F2E0 : D7 8A    : STAB  008A             B -> tast_key
F2E2 : 5C       : INCB                   inc B

F2E3 : DD 8C    : STD   008C             D -> tast_matrix
F2E5 : 7E FE CC : JMP   FECC             Sprung

***************************************************************************
F2E8 : C4 03    : ANDB #03               Bits 2-7 von B l”schen
F2EA : CE F2 F3 : LDX  #F2F3             X = #f2f3
F2ED : 3A       : ABX                    X = X+B
F2EE : E6 00    : LDAB  00,X             B = (X+00)
F2F0 : D7 8B    : STAB  008B             B -> 008b
F2F2 : 39       : RTS

F2F3 : 80 01 00 02
***************************************************************************

***************************************************************************
F2F7 : CE F3 11 : LDX  #F311             X zeigt auf Tastencodetabelle
F2FA : D6 8A    : LDAB  008A             tast_key -> B
F2FC : C1 05    : CMPB #05               B < 5 ?
F2FE : 25 0D    : BCS   0D  > F30D       ja

F300 : C0 04    : SUBB #04
F302 : 58       : ASLB
F303 : 58       : ASLB                   B = 8*(B-4)
F304 : 58       : ASLB
F305 : 3A       : ABX                    X = X+B
F306 : 5F       : CLRB                   B = 0
F307 : 20 01    : BRA   01  > F30A       Sprung

F309 : 5C       : INCB                   B = B+1

F30A : 44       : LSRA                   A um 1 Bit links
F30B : 24 FC    : BCC   FC  > F309       Carry gesetzt ?

F30D : 3A       : ABX                    ja, X = X+B
F30E : A6 00    : LDAA  00,X             A = (X+00)
F310 : 39       : RTS

F311 : 00 00 3B 3C 3D 00 00 00 3E 01 02 0F 10 1E 60 2C
F321 : 3F 03 04 11 12 1F 20 2D 40 05 06 13 14 21 2E 2F   Tastenscancode-
F331 : 41 07 08 15 22 23 30 31 42 09 0A 16 17 24 25 32   tabelle fr 91
F341 : 43 0B 0C 18 19 26 33 39 44 0D 29 1A 1B 27 34 3A   Tasten (ohne
F351 : 62 0E 53 52 2B 1C 28 35 61 48 47 4B 50 4D 6D 70   Ctrl,Alt,Shft_r
F361 : 63 64 67 68 6A 6B 6E 71 65 66 69 4A 6C 4E 6F 72   und Shft_l)
***************************************************************************

F371 : 84 0F    : ANDA #0F               Bits 4-7 von A l”schen
F373 : 97 C6    : STAA  00C6             A -> header
F375 : 84 03    : ANDA #03               Bits 2-7 von A l”schen
F377 : CE 00 BE : LDX  #00BE             X = #00be
F37A : 7F 00 C8 : CLR   00C8             00c8 = 0
F37D : D6 C3    : LDAB  00C3             00c3 -> B
F37F : BD F3 E3 : JSR   F3E3

F382 : 97 C3    : STAA  00C3             A -> 00c3
F384 : 96 C6    : LDAA  00C6             header -> A
F386 : 44       : LSRA                   A um 2 Bit..
F387 : 44       : LSRA                   ..nach rechts
F388 : 84 03    : ANDA #03               Bits 2-7 von A l”schen
F38A : CE 00 BF : LDX  #00BF             X = #00bf
F38D : C6 01    : LDAB #01               B = #01
F38F : D7 C8    : STAB  00C8             B -> 00c8
F391 : D6 C4    : LDAB  00C4             00c4 -> B
F393 : BD F3 E3 : JSR   F3E3

F396 : 97 C4    : STAA  00C4             A -> 00c4
F398 : 7F 00 C1 : CLR   00C1             00c1 = 0
F39B : D6 9B    : LDAB  009B             009b -> B
F39D : C4 06    : ANDB #06               nur Mausbuttons bearbeiten
F39F : 27 04    : BEQ   04  > F3A5       B = 0 ?

F3A1 : C1 06    : CMPB #06               nein, B = #06 ?
F3A3 : 26 02    : BNE   02  > F3A7       nein

F3A5 : C8 06    : EORB #06               sonst eor Bits 1 und 3 von B

F3A7 : 17       : TBA                    A = B
F3A8 : D8 C0    : EORB  00C0             B = B eor 00c0
F3AA : 27 1F    : BEQ   1F  > F3CB       B = 0 ?

F3AC : 97 C0    : STAA  00C0             nein, A -> 00c0
F3AE : D7 C5    : STAB  00C5             B -> byt_anz
F3B0 : 16       : TAB                    B = A
F3B1 : D4 C5    : ANDB  00C5             B = B and byt_anz
F3B3 : D7 C6    : STAB  00C6             B -> header
F3B5 : 54       : LSRB                   B um 1 Bit rechts
F3B6 : DA C6    : ORAB  00C6             B = B or header
F3B8 : C4 05    : ANDB #05               Bits 1 und 3-7 von B l”schen
F3BA : D7 C1    : STAB  00C1             B -> 00c1
F3BC : 43       : COMA                   A = \A
F3BD : 16       : TAB                    B = A
F3BE : D4 C5    : ANDB  00C5             B = B and byt_anz
F3C0 : D7 C6    : STAB  00C6             B -> header
F3C2 : 58       : ASLB                   B um 1 Bit links
F3C3 : DA C6    : ORAB  00C6             B = B or header
F3C5 : C4 0A    : ANDB #0A               Bits 0, 2 und 4-7 von B l”schen
F3C7 : DA C1    : ORAB  00C1             B = B or 00c1
F3C9 : D7 C1    : STAB  00C1             B -> 00c1

F3CB : 96 C9    : LDAA  00C9             00c9 -> A
F3CD : 48       : ASLA                   A um 2..
F3CE : 48       : ASLA                   ..Bit links
F3CF : 24 03    : BCC   03  > F3D4       Carry gel”scht ?

F3D1 : 7E F5 EB : JMP   F5EB             nein, Sprung

F3D4 : 48       : ASLA                   sonst A um 1 Bit links
F3D5 : 24 03    : BCC   03  > F3DA       Carry jetzt gel”scht ?

F3D7 : 7E F4 39 : JMP   F439             nein, Sprung

F3DA : 48       : ASLA                   sonst A nochmal 1 Bit links
F3DB : 24 03    : BCC   03  > F3E0       Carry jetzt gel”scht ?

F3DD : 7E F4 BA : JMP   F4BA             nein, Sprung

F3E0 : 7E F1 50 : JMP   F150             Sprung

***************************************************************************
F3E3 : C4 E0    : ANDB #E0               Bits 0-4 von B l”schen
F3E5 : 97 C5    : STAA  00C5             A -> byt_anz
F3E7 : A8 00    : EORA  00,X             A = A eor (X+00)
F3E9 : 27 49    : BEQ   49  > F434       A = 0 ?

F3EB : 81 03    : CMPA #03               nein, A = 3 ?
F3ED : 26 05    : BNE   05  > F3F4       nein

F3EF : CA 02    : ORAB #02               sonst Bit 1 von B setzen
F3F1 : 17       : TBA                    A = B
F3F2 : 20 3B    : BRA   3B  > F42F       Sprung

F3F4 : 37       : PSHB                   B auf Stack
F3F5 : E6 00    : LDAB  00,X             B = (X+00)
F3F7 : 27 07    : BEQ   07  > F400       B = 0 ?

F3F9 : C1 03    : CMPB #03               nein, B = 3 ?
F3FB : 27 03    : BEQ   03  > F400       ja

F3FD : 43       : COMA                   sonst A = \A
F3FE : 84 03    : ANDA #03               Bits 2-7 von A l”schen

F400 : 33       : PULB                   B vom Stack
F401 : 81 01    : CMPA #01               A = #01 ?
F403 : 26 0E    : BNE   0E  > F413       nein

F405 : C5 60    : BITB #60               sonst Bits 5-6 von B gesetzt ?
F407 : 27 16    : BEQ   16  > F41F       nein

F409 : 86 01    : LDAA #01               sonst A = #01
F40B : C0 20    : SUBB #20               B = B - #20
F40D : C5 60    : BITB #60               Bits 5-6 von B gesetzt ?
F40F : 27 0E    : BEQ   0E  > F41F       nein

F411 : 20 23    : BRA   23  > F436       sonst Sprung

F413 : C5 40    : BITB #40               Bit 6 von B gesetzt ?
F415 : 26 06    : BNE   06  > F41D       ja

F417 : CB 20    : ADDB #20               sonst B = B + #20
F419 : C5 40    : BITB #40               Bit 6 von B gesetzt ?
F41B : 27 19    : BEQ   19  > F436       nein

F41D : 86 C1    : LDAA #C1               sonst A = #c1

F41F : D6 C8    : LDAB  00C8             00c8 -> B
F421 : 27 0A    : BEQ   0A  > F42D       B = 0 ?

F423 : 7B 40 C9 : TIM  #40,00C9          nein, Bit 6 von 00c9 gesetzt ?
F426 : 26 07    : BNE   07  > F42F       ja

F428 : 7B 01 C9 : TIM  #01,00C9          sonst Bit 0 von 00c9 gesetzt ?
F42B : 26 02    : BNE   02  > F42F       ja

F42D : 88 80    : EORA #80               sonst eor Bit 7 von A

F42F : D6 C5    : LDAB  00C5             byt_anz -> B
F431 : E7 00    : STAB  00,X             B -> (X+00)
F433 : 39       : RTS

F434 : 17       : TBA                    A = B
F435 : 39       : RTS

F436 : 17       : TBA                    A = B
F437 : 20 F6    : BRA   F6  > F42F       Sprung
***************************************************************************

F439 : CE 00 B8 : LDX  #00B8             X = #00b8
F43C : DC AC    : LDD   00AC             00ac -> D
F43E : DD C5    : STD   00C5             D -> byt_anz/header
F440 : 96 B3    : LDAA  00B3             00b3 -> A
F442 : D6 C4    : LDAB  00C4             00c4 -> B
F444 : BD F4 88 : JSR   F488

F447 : CE 00 B6 : LDX  #00B6             X = #00b6
F44A : DC AA    : LDD   00AA             00aa -> D
F44C : DD C5    : STD   00C5             D -> byt_anz/header
F44E : 96 B2    : LDAA  00B2             00b2 -> A
F450 : D6 C3    : LDAB  00C3             00c3 -> B
F452 : BD F4 88 : JSR   F488

F455 : D6 C1    : LDAB  00C1             00c1 -> B
F457 : 27 2C    : BEQ   2C  > F485       B = 0 ?

F459 : 17       : TBA                    nein, A = B
F45A : 9A C2    : ORAA  00C2             A = A or 00c2
F45C : 97 C2    : STAA  00C2             A -> 00c2
F45E : 7B 04 B4 : TIM  #04,00B4          Bit 2 von 00b4 gesetzt ?
F461 : 27 03    : BEQ   03  > F466       nein

F463 : 7E F6 2B : JMP   F62B             sonst Sprung

F466 : 4F       : CLRA                   A = 0
F467 : C5 05    : BITB #05               Bits 0+2 von B gesetzt ?
F469 : 27 02    : BEQ   02  > F46D       nein

F46B : 8A 01    : ORAA #01               sonst Bit 0 von A setzen
F46D : C5 0A    : BITB #0A               Bits 1+3 von B gesetzt ?
F46F : 27 02    : BEQ   02  > F473       nein

F471 : 8A 02    : ORAA #02               sonst Bit 1 von A setzen
F473 : 94 B4    : ANDA  00B4             A = A and 00b4
F475 : 27 0E    : BEQ   0E  > F485       A = 0 ?

F477 : D7 B5    : STAB  00B5             nein, B -> abs_mouse
F479 : C6 05    : LDAB #05               B = #05
F47B : CE 00 B5 : LDX  #00B5             X = #abs_mouse
F47E : 0F       : SEI                    IRQ maskieren
F47F : 86 F7    : LDAA #F7               A = #f7
F481 : BD FD 34 : JSR   FD34             Mouse-Position an ST senden

F484 : 0E       : CLI                    IRQ freigeben

F485 : 7E F1 50 : JMP   F150             Sprung

***************************************************************************
F488 : C5 03    : BITB #03               Bits 0+1 von B gesetzt ?
F48A : 27 2D    : BEQ   2D  > F4B9       nein, RTS

F48C : 37       : PSHB                   sonst B auf Stack
F48D : 58       : ASLB                   B um 1 Bit links -> Carry
F48E : 16       : TAB                    B = A
F48F : 86 00    : LDAA #00               A = #00
F491 : DD C7    : STD   00C7             D -> 00c7
F493 : EC 00    : LDD   00,X             D = (X+00)
F495 : 24 09    : BCC   09  > F4A0       Carry gel”scht ?

F497 : 93 C7    : SUBD  00C7             nein, D = D - 00c7
F499 : 24 07    : BCC   07  > F4A2       war D > 00c7 ?

F49B : CC 00 00 : LDD  #0000             nein, D = #0000
F49E : 20 16    : BRA   16  > F4B6       Sprung

F4A0 : D3 C7    : ADDD  00C7             D = D + 00c7
F4A2 : DD C7    : STD   00C7             D -> 00c7
F4A4 : 93 C5    : SUBD  00C5             D = D - byt_anz/header
F4A6 : 24 0C    : BCC   0C  > F4B4       war D > byt_anz/header ?

F4A8 : DC C7    : LDD   00C7             nein, 00c7 -> D
F4AA : ED 00    : STD   00,X             D -> (X+00)
F4AC : 33       : PULB                   B vom Stack
F4AD : C0 01    : SUBB #01               B = B - #01
F4AF : C5 01    : BITB #01               Bit 0 von B gesetzt ?
F4B1 : 26 D9    : BNE   D9  > F48C       ja

F4B3 : 39       : RTS

F4B4 : DC C5    : LDD   00C5             byt_anz/header -> D

F4B6 : ED 00    : STD   00,X             D -> (X+00)
F4B8 : 33       : PULB                   B vom Stack

F4B9 : 39       : RTS
***************************************************************************

F4BA : 7F 00 C6 : CLR   00C6             header = 0
F4BD : D6 C4    : LDAB  00C4             00c4 -> B
F4BF : D7 C8    : STAB  00C8             B -> 00c8
F4C1 : 71 03 C8 : AIM  #03,00C8          Bits 2-7 von 00c8 l”schen
F4C4 : 96 BD    : LDAA  00BD             00bd -> A
F4C6 : 58       : ASLB                   B um 1 Bit links
F4C7 : 24 25    : BCC   25  > F4EE       Carry gel”scht ?

F4C9 : 90 C8    : SUBA  00C8             nein, A = A - 00c8
F4CB : 81 81    : CMPA #81               A >= #81 ?
F4CD : 24 08    : BCC   08  > F4D7       ja

F4CF : 81 7F    : CMPA #7F               sonst A < #7f ?
F4D1 : 25 04    : BCS   04  > F4D7       ja

F4D3 : 86 80    : LDAA #80               sonst A = #80
F4D5 : 97 C6    : STAA  00C6             A -> header

F4D7 : 97 BD    : STAA  00BD             A -> 00bd
F4D9 : 2A 0A    : BPL   0A  > F4E5       A positiv ?

F4DB : 40       : NEGA                   nein, neg A
F4DC : 91 B1    : CMPA  00B1             A < 00b1 ?
F4DE : 25 1F    : BCS   1F  > F4FF       ja

F4E0 : 72 02 C6 : OIM  #02,00C6          sonst Bit 1 von header setzen
F4E3 : 20 1A    : BRA   1A  > F4FF       Sprung

F4E5 : 91 B1    : CMPA  00B1             A < 00b1 ?
F4E7 : 25 16    : BCS   16  > F4FF       ja

F4E9 : 72 01 C6 : OIM  #01,00C6          sonst Bit 0 von header setzen
F4EC : 20 11    : BRA   11  > F4FF       Sprung

F4EE : 9B C8    : ADDA  00C8             A = A + 00c8
F4F0 : 81 7F    : CMPA #7F               A < #7f ?
F4F2 : 25 E3    : BCS   E3  > F4D7       ja

F4F4 : 81 81    : CMPA #81               sonst A >= #81 ?
F4F6 : 24 DF    : BCC   DF  > F4D7       ja

F4F8 : 72 40 C6 : OIM  #40,00C6          sonst Bit 6 von header setzen
F4FB : 86 7F    : LDAA #7F               A = #7f
F4FD : 20 D8    : BRA   D8  > F4D7       Sprung

F4FF : D6 C3    : LDAB  00C3             00c3 -> B
F501 : D7 C8    : STAB  00C8             B -> 00c8
F503 : 71 03 C8 : AIM  #03,00C8          Bits 2-7 von 00c8 l”schen
F506 : 96 BC    : LDAA  00BC             00bc -> A
F508 : 58       : ASLB                   B um 1 Bit links
F509 : 24 26    : BCC   26  > F531       Carry gel”scht ?

F50B : 90 C8    : SUBA  00C8             nein, A = A - 00c8
F50D : 81 81    : CMPA #81               A >= #81 ?
F50F : 24 09    : BCC   09  > F51A       ja

F511 : 81 7F    : CMPA #7F               sonst A < #7f ?
F513 : 25 05    : BCS   05  > F51A       ja

F515 : 86 80    : LDAA #80               sonst A = #80
F517 : 72 80 C6 : OIM  #80,00C6          Bit 7 von header setzen

F51A : 97 BC    : STAA  00BC             A -> 00bc
F51C : 2A 0A    : BPL   0A  > F528       A positiv ?

F51E : 40       : NEGA                   nein, neg A
F51F : 91 B0    : CMPA  00B0             A < 00b0 ?
F521 : 25 1F    : BCS   1F  > F542       ja

F523 : 72 02 C6 : OIM  #02,00C6          sonst Bit 1 von header setzen
F526 : 20 1A    : BRA   1A  > F542       Sprung

F528 : 91 B0    : CMPA  00B0             A < 00b0 ?
F52A : 25 16    : BCS   16  > F542       ja

F52C : 72 01 C6 : OIM  #01,00C6          sonst Bit 0 von header setzen
F52F : 20 11    : BRA   11  > F542       Sprung

F531 : 9B C8    : ADDA  00C8             A = A + 00c8
F533 : 81 7F    : CMPA #7F               A < #7f ?
F535 : 25 E3    : BCS   E3  > F51A       ja

F537 : 81 81    : CMPA #81               sonst A >= #81 ?
F539 : 24 DF    : BCC   DF  > F51A       ja

F53B : 72 40 C6 : OIM  #40,00C6          sonst Bit 6 von header setzen
F53E : 86 7F    : LDAA #7F               A = #7f
F540 : 20 D8    : BRA   D8  > F51A       Sprung

F542 : 96 C6    : LDAA  00C6             header -> A
F544 : 27 15    : BEQ   15  > F55B       A = 0 ?

F546 : 84 C0    : ANDA #C0               nein, Bits 0-5 von A l”schen
F548 : 26 37    : BNE   37  > F581       A <> 0 ?

F54A : 7B 08 C9 : TIM  #08,00C9          nein, Bit 3 von 00c9 gesetzt ?
F54D : 26 07    : BNE   07  > F556       ja

F54F : 7B 0F C1 : TIM  #0F,00C1          sonst Bits 0-3 von 00c1 gesetzt ?
F552 : 27 51    : BEQ   51  > F5A5       nein

F554 : 20 2B    : BRA   2B  > F581       sonst Sprung

F556 : 7B 80 D7 : TIM  #80,00D7          Bit 7 von 00d7 gesetzt ?
F559 : 26 26    : BNE   26  > F581       ja

F55B : 7B 0F C1 : TIM  #0F,00C1          sonst Bits 0-3 von 00c1 gesetzt ?
F55E : 27 45    : BEQ   45  > F5A5       nein

F560 : 7B 04 B4 : TIM  #04,00B4          sonst Bit 2 von 00b4 gesetzt ?
F563 : 27 03    : BEQ   03  > F568       nein

F565 : 7E F6 2B : JMP   F62B             Sprung

F568 : 96 C0    : LDAA  00C0             00c0 -> A
F56A : 44       : LSRA                   A um 1 Bit rechts
F56B : 8A F8    : ORAA #F8               Bits 3-7 von A setzen
F56D : CE 00 BC : LDX  #00BC             X = #00bc
F570 : 0F       : SEI                    IRQ maskieren
F571 : C6 02    : LDAB #02               B = #02
F573 : BD FD 34 : JSR   FD34             Rel. Mouse-Position an ST senden

F576 : 24 06    : BCC   06  > F57E       Carry gel”scht ?

F578 : 7F 00 BD : CLR   00BD             nein, 00bd = 0
F57B : 7F 00 BC : CLR   00BC             00bc = 0

F57E : 0E       : CLI                    IRQ freigeben
F57F : 20 24    : BRA   24  > F5A5       Sprung

F581 : 96 C0    : LDAA  00C0             00c0 -> A
F583 : 44       : LSRA                   A um 1 Bit rechts
F584 : 8A F8    : ORAA #F8               Bits 3-7 von A setzen
F586 : CE 00 BC : LDX  #00BC             X = #00bc
F589 : 0F       : SEI                    IRQ maskieren
F58A : C6 02    : LDAB #02               B = #02
F58C : BD FD 34 : JSR   FD34             Rel. Mouse-Position an ST senden

F58F : 24 06    : BCC   06  > F597       Carry gel”scht ?

F591 : 7F 00 BD : CLR   00BD             nein, 00bd = 0
F594 : 7F 00 BC : CLR   00BC             00bc = 0

F597 : 0E       : CLI                    IRQ freigeben
F598 : 7B 0F C1 : TIM  #0F,00C1          Bits 0-3 von 00c1 gesetzt ?
F59B : 27 08    : BEQ   08  > F5A5       nein

F59D : 7B 04 B4 : TIM  #04,00B4          sonst Bit 2 von 00b4 gesetzt ?
F5A0 : 27 03    : BEQ   03  > F5A5       nein

F5A2 : 7E F6 2B : JMP   F62B             Sprung

F5A5 : 7E F1 50 : JMP   F150             Sprung

***************************************************************************
F5A8 : 7F 00 C6 : CLR   00C6             header = 0
F5AB : D7 C8    : STAB  00C8             B -> 00c8
F5AD : 71 03 C8 : AIM  #03,00C8          Bits 2-7 von 00c8 l”schen
F5B0 : A6 00    : LDAA  00,X             A = (X+00)
F5B2 : 58       : ASLB                   B um 1 Bit links
F5B3 : 24 25    : BCC   25  > F5DA       Carry gel”scht ?

F5B5 : 90 C8    : SUBA  00C8             nein, A = A - 00c8
F5B7 : 81 81    : CMPA #81               A >= #81 ?
F5B9 : 24 09    : BCC   09  > F5C4       ja

F5BB : 81 7F    : CMPA #7F               sonst A < #7f ?
F5BD : 25 05    : BCS   05  > F5C4       ja

F5BF : 72 80 C6 : OIM  #80,00C6          sonst Bit 7 von header setzen
F5C2 : 86 80    : LDAA #80               A = #80

F5C4 : A7 00    : STAA  00,X             A -> (X+00)
F5C6 : 2A 0A    : BPL   0A  > F5D2       A >= 0 ?

F5C8 : 40       : NEGA                   nein, neg A
F5C9 : 91 C5    : CMPA  00C5             A < byt_anz ?
F5CB : 25 0C    : BCS   0C  > F5D9       ja, RTS

F5CD : 72 02 C6 : OIM  #02,00C6          sonst Bit 1 von header setzen
F5D0 : 20 07    : BRA   07  > F5D9       Sprung auf RTS

F5D2 : 91 C5    : CMPA  00C5             A < byt_anz ?
F5D4 : 25 03    : BCS   03  > F5D9       ja, RTS

F5D6 : 72 01 C6 : OIM  #01,00C6          sonst Bit 0 von header setzen

F5D9 : 39       : RTS

F5DA : 9B C8    : ADDA  00C8             A = A +00c8
F5DC : 81 7F    : CMPA #7F               A < #7f ?
F5DE : 25 E4    : BCS   E4  > F5C4       ja

F5E0 : 81 81    : CMPA #81               sonst A >= #81 ?
F5E2 : 24 E0    : BCC   E0  > F5C4       ja

F5E4 : 72 40 C6 : OIM  #40,00C6          sonst Bit 6 von header setzen
F5E7 : 86 7F    : LDAA #7F               A = #7f
F5E9 : 20 D9    : BRA   D9  > F5C4       Sprung
***************************************************************************

F5EB : 96 AF    : LDAA  00AF             00af -> A
F5ED : 97 C5    : STAA  00C5             A -> byt_anz
F5EF : CE 00 BB : LDX  #00BB             X = #00bb
F5F2 : D6 C4    : LDAB  00C4             00c4 -> B
F5F4 : BD F5 A8 : JSR   F5A8

F5F7 : 96 C6    : LDAA  00C6             header -> A
F5F9 : 27 10    : BEQ   10  > F60B       A = 0 ?

F5FB : 84 82    : ANDA #82               nein, Bits 0 und 2-6 von A l”schen
F5FD : 27 04    : BEQ   04  > F603       A = 0 ?

F5FF : C6 01    : LDAB #01               nein, B = #01
F601 : 20 02    : BRA   02  > F605       Sprung

F603 : C6 00    : LDAB #00               B = #00

F605 : BD F6 56 : JSR   F656

F608 : 7F 00 BB : CLR   00BB             00bb = 0

F60B : 96 AE    : LDAA  00AE             00ae -> A
F60D : 97 C5    : STAA  00C5             A -> byt_anz
F60F : CE 00 BA : LDX  #00BA             X = #00ba
F612 : D6 C3    : LDAB  00C3             00c3 -> B
F614 : BD F5 A8 : JSR   F5A8

F617 : 96 C6    : LDAA  00C6             header -> A
F619 : 27 10    : BEQ   10  > F62B       A = 0 ?

F61B : 84 82    : ANDA #82               nein, Bits 0 und 2-6 von A l”schen
F61D : 27 04    : BEQ   04  > F623       A = 0 ?

F61F : C6 03    : LDAB #03               nein, B = #03
F621 : 20 02    : BRA   02  > F625       Sprung

F623 : C6 02    : LDAB #02               B = #02

F625 : BD F6 56 : JSR   F656

F628 : 7F 00 BA : CLR   00BA             00ba = 0

F62B : D6 C1    : LDAB  00C1             00c1 -> B
F62D : 27 24    : BEQ   24  > F653       B = 0 ?

F62F : C4 03    : ANDB #03               nein, Bits 2-7 von B l”schen
F631 : 27 0C    : BEQ   0C  > F63F       B = 0 ?

F633 : 54       : LSRB                   nein, B um 1 Bit rechts
F634 : 24 04    : BCC   04  > F63A       Carry gel”scht ?

F636 : C6 05    : LDAB #05               nein, B = #05
F638 : 20 02    : BRA   02  > F63C       Sprung

F63A : C6 07    : LDAB #07               B = #07

F63C : BD F6 56 : JSR   F656

F63F : D6 C1    : LDAB  00C1             00c1 -> B
F641 : C4 0C    : ANDB #0C               Bits 0-1 und 4-7 von B l”schen
F643 : 27 0E    : BEQ   0E  > F653       B = 0 ?

F645 : 54       : LSRB                   nein, B um..
F646 : 54       : LSRB                   ..3 Bit..
F647 : 54       : LSRB                   ..rechts
F648 : 24 04    : BCC   04  > F64E       Carry gel”scht ?

F64A : C6 04    : LDAB #04               nein, B = #04
F64C : 20 02    : BRA   02  > F650       Sprung

F64E : C6 06    : LDAB #06               B = #06

F650 : BD F6 56 : JSR   F656

F653 : 7E F1 50 : JMP   F150             Sprung

***************************************************************************
F656 : 7F 00 C7 : CLR   00C7             00c7 = 0
F659 : CE F6 79 : LDX  #F679             X = #f679
F65C : 3A       : ABX                    X = X+B
F65D : A6 00    : LDAA  00,X             A = (X+00)
F65F : 81 60    : CMPA #60               A >= #60 ?
F661 : 24 02    : BCC   02  > F665       ja

F663 : 97 C7    : STAA  00C7             sonst A -> 00c7

F665 : 0F       : SEI                    IRQ maskieren
F666 : 5F       : CLRB                   B = 0
F667 : BD FD 34 : JSR   FD34

F66A : 24 0B    : BCC   0B  > F677       Carry = 0 ?

F66C : 96 C7    : LDAA  00C7             nein, 00c7 -> A
F66E : 27 07    : BEQ   07  > F677       A = 0 ?

F670 : 8A 80    : ORAA #80               nein, Bit 7 von A setzen
F672 : 7F 00 C7 : CLR   00C7             00c7 = 0
F675 : 20 EE    : BRA   EE  > F665       Sprung

F677 : 0E       : CLI                    IRQ freigeben
F678 : 39       : RTS

F679 : 48 50 4D 4B 74 75 F4 F5
***************************************************************************

F681 : 43       : COMA                   A = \A
F682 : D6 9E    : LDAB  009E             009e -> B
F684 : 27 15    : BEQ   15  > F69B       B = 0 ?

F686 : C1 05    : CMPB #05               nein, B < #05 ?
F688 : 25 1A    : BCS   1A  > F6A4       ja

F68A : 5F       : CLRB                   sonst B = 0
F68B : D7 9E    : STAB  009E             B -> 009e
F68D : 97 C5    : STAA  00C5             A -> byt_anz
F68F : 16       : TAB                    B = A
F690 : 98 A0    : EORA  00A0             A = A eor 00a0
F692 : 94 9F    : ANDA  009F             A = A and 009f
F694 : D4 A0    : ANDB  00A0             B = B and 00a0
F696 : 1B       : ABA                    A = A+B
F697 : 97 9F    : STAA  009F             A -> 009f
F699 : 96 C5    : LDAA  00C5             byt_anz -> A

F69B : 91 9F    : CMPA  009F             A = 009f ?
F69D : 27 05    : BEQ   05  > F6A4       ja

F69F : 97 A0    : STAA  00A0             sonst A -> 00a0
F6A1 : 7C 00 9E : INC   009E             inc 009e

F6A4 : 7B 04 CA : TIM  #04,00CA          Bit 2 von 00ca gesetzt ?
F6A7 : 27 03    : BEQ   03  > F6AC       nein

F6A9 : 7E F7 A6 : JMP   F7A6             Sprung

F6AC : 96 9F    : LDAA  009F             009f -> A
F6AE : 91 A9    : CMPA  00A9              A = 00a9 ?
F6B0 : 26 0E    : BNE   0E  > F6C0       nein

F6B2 : 96 9B    : LDAA  009B             sonst 009b -> A
F6B4 : D6 C9    : LDAB  00C9             00c9 -> B
F6B6 : C5 02    : BITB #02               Bit 1 von B gesetzt ?
F6B8 : 26 4D    : BNE   4D  > F707       ja

F6BA : 5D       : TSTB                   sonst B positiv ?
F6BB : 2A 48    : BPL   48  > F705       ja

F6BD : 7E F1 3A : JMP   F13A             Sprung

F6C0 : 97 A9    : STAA  00A9             A -> 00a9
F6C2 : 7B 02 C9 : TIM  #02,00C9          Bit 1 von 00c9 gesetzt ?
F6C5 : 26 05    : BNE   05  > F6CC       ja

F6C7 : CE FF FF : LDX  #FFFF             sonst X = #ffff
F6CA : 20 1E    : BRA   1E  > F6EA       Sprung

F6CC : CE 00 00 : LDX  #0000             X = #0000
F6CF : 84 0F    : ANDA #0F               Bits 4-7 von A l”schen

F6D1 : E6 A4    : LDAB  A4,X             B = (X+a4)
F6D3 : C4 0F    : ANDB #0F               Bits 4-7 von B l”schen
F6D5 : 11       : CBA                    B = A ?
F6D6 : 27 1C    : BEQ   1C  > F6F4       ja

F6D8 : E6 A4    : LDAB  A4,X             sonst B = (X+a4)
F6DA : 48       : ASLA                   A um 1 Bit links
F6DB : 58       : ASLB                   B um 1 Bit links
F6DC : 46       : RORA                   A um 1 Bit rechts rotieren
F6DD : A7 A4    : STAA  A4,X             A -> (X+a4)
F6DF : 09       : DEX                    dec X
F6E0 : 26 05    : BNE   05  > F6E7       X <> 0 ?

F6E2 : 72 40 CA : OIM  #40,00CA          nein, Bit 6 von 00ca setzen
F6E5 : 20 10    : BRA   10  > F6F7       Sprung

F6E7 : 72 80 CA : OIM  #80,00CA          Bit 7 von 00ca setzen

F6EA : 96 A9    : LDAA  00A9             00a9 -> A
F6EC : 44       : LSRA                   A um..
F6ED : 44       : LSRA                   ..4 Bit..
F6EE : 44       : LSRA                   ..nach..
F6EF : 44       : LSRA                   ..rechts
F6F0 : 08       : INX                    inc X
F6F1 : 08       : INX                    inc X
F6F2 : 20 DD    : BRA   DD  > F6D1       Sprung

F6F4 : 09       : DEX                    dec X
F6F5 : 26 F3    : BNE   F3  > F6EA       X <> 0 ?

F6F7 : 96 9B    : LDAA  009B             nein, 009b -> A
F6F9 : D6 C9    : LDAB  00C9             00c9 -> B
F6FB : C5 02    : BITB #02               Bit 1 von B gesetzt ?
F6FD : 26 08    : BNE   08  > F707       ja

F6FF : 5D       : TSTB                   sonst B positiv ?
F700 : 2A 03    : BPL   03  > F705       ja

F702 : 7E F7 41 : JMP   F741             Sprung

F705 : 8A FB    : ORAA #FB               Bits 0-1 und 3-7 von A setzen

F707 : 43       : COMA                   A = \A
F708 : 91 A8    : CMPA  00A8             A = 00a8 ?
F70A : 27 35    : BEQ   35  > F741       ja

F70C : 97 A8    : STAA  00A8             sonst A -> 00a8
F70E : 46       : RORA                   A um 1 Bit rechts rotieren
F70F : D6 C9    : LDAB  00C9             00c9 -> B
F711 : C5 02    : BITB #02               Bit 1 von B gesetzt ?
F713 : 26 07    : BNE   07  > F71C       ja

F715 : CE 00 01 : LDX  #0001             sonst X = #0001
F718 : 46       : RORA                   A um 1 Bit rechts rotieren
F719 : 0D       : SEC                    set Carry
F71A : 20 04    : BRA   04  > F720       Sprung

F71C : CE 00 00 : LDX  #0000             X = #0000
F71F : 0C       : CLC                    clear Carry

F720 : 46       : RORA                   A um 1 Bit rechts rotieren
F721 : E6 A4    : LDAB  A4,X             B = (X+a4)
F723 : 24 06    : BCC   06  > F72B       war Carry gel”scht ?

F725 : 2B 10    : BMI   10  > F737       nein, B negativ ?

F727 : CA 80    : ORAB #80               nein, dann Bit 7 von B setzen
F729 : 20 04    : BRA   04  > F72F       Sprung

F72B : 2A 0A    : BPL   0A  > F737       B postiv ?

F72D : C4 7F    : ANDB #7F               nein, dann Bit 7 von B l”schen

F72F : E7 A4    : STAB  A4,X             B -> (X+a4)
F731 : 4D       : TSTA                   A negativ ?
F732 : 2B 0A    : BMI   0A  > F73E       ja

F734 : 72 80 CA : OIM  #80,00CA          sonst Bit 7 von 00ca setzen

F737 : 4D       : TSTA                   A negativ ?
F738 : 2B 07    : BMI   07  > F741       ja

F73A : 08       : INX                    sonst inc X
F73B : 0D       : SEC                    set Carry
F73C : 20 E2    : BRA   E2  > F720       Sprung

F73E : 72 40 CA : OIM  #40,00CA          Bit 6 von 00ca setzen

F741 : 96 CA    : LDAA  00CA             00ca -> A
F743 : 85 02    : BITA #02               Bit 1 von A gesetzt ?
F745 : 26 31    : BNE   31  > F778       ja

F747 : 85 C0    : BITA #C0               sonst Bits 6+7 von A gesetzt ?
F749 : 27 08    : BEQ   08  > F753       nein

F74B : 85 08    : BITA #08               sonst Bit 3 von A gesetzt ?
F74D : 26 07    : BNE   07  > F756       ja

F74F : 0E       : CLI                    IRQ freigeben
F750 : 71 3F CA : AIM  #3F,00CA          Bits 6 und 7 von 00ca l”schen

F753 : 7E F1 3A : JMP   F13A             Sprung

F756 : 85 80    : BITA #80               Bit 7 von A gesetzt ?
F758 : 27 0C    : BEQ   0C  > F766       nein

F75A : 0F       : SEI                    IRQ maskieren
F75B : 86 FE    : LDAA #FE               A = #fe
F75D : C6 01    : LDAB #01               B = #01
F75F : CE 00 A4 : LDX  #00A4             X = #joy1
F762 : BD FD 34 : JSR   FD34             Joystick 0 an ST senden

F765 : 0E       : CLI                    IRQ freigeben

F766 : 7B 40 CA : TIM  #40,00CA          Bit 6 von 00ca gesetzt ?
F769 : 27 E4    : BEQ   E4  > F74F       nein

F76B : 0F       : SEI                    sonst IRQ maskieren
F76C : 86 FF    : LDAA #FF               A = #ff
F76E : C6 01    : LDAB #01               B = #01
F770 : CE 00 A5 : LDX  #00A5             X = #joy2
F773 : BD FD 34 : JSR   FD34             Joystick 1 an ST senden

F776 : 20 D7    : BRA   D7  > F74F       Sprung

F778 : B6 00 A7 : LDAA  00A7             00a7 -> A
F77B : 26 D2    : BNE   D2  > F74F       A <> 0 ?

F77D : 96 94    : LDAA  0094             nein, 0094 -> A
F77F : B7 00 A7 : STAA  00A7             A -> 00a7
F782 : 4F       : CLRA                   A = 0
F783 : D6 A4    : LDAB  00A4             joy1 -> B
F785 : 2A 02    : BPL   02  > F789       B positiv ?

F787 : 8A 02    : ORAA #02               nein, Bit 1 von A setzen

F789 : 58       : ASLB                   B um..
F78A : 58       : ASLB                   ..4 Bit..
F78B : 58       : ASLB                   ..nach..
F78C : 58       : ASLB                   ..links
F78D : D7 A9    : STAB  00A9             B -> 00a9
F78F : D6 A5    : LDAB  00A5             joy2 -> B
F791 : 2A 02    : BPL   02  > F795       B positiv ?

F793 : 8A 01    : ORAA #01               nein, Bit 0 von A setzen

F795 : C4 7F    : ANDB #7F               Bit 7 von B l”schen
F797 : DA A9    : ORAB  00A9             B = B or 00a9
F799 : D7 A9    : STAB  00A9             B -> 00a9
F79B : 0F       : SEI                    IRQ maskieren
F79C : C6 01    : LDAB #01               B = #01
F79E : CE 00 A9 : LDX  #00A9             X = #00a9
F7A1 : BD FD 34 : JSR   FD34

F7A4 : 20 A9    : BRA   A9  > F74F       Sprung

F7A6 : 71 7F A1 : AIM  #7F,00A1          Bit 7 von 00a1 l”schen
F7A9 : CE 00 00 : LDX  #0000             X = #0000
F7AC : 86 0C    : LDAA #0C               A = #0c
F7AE : 97 C5    : STAA  00C5             A -> byt_anz

F7B0 : D6 9F    : LDAB  009F             009f -> B
F7B2 : D4 C5    : ANDB  00C5             B = B and byt_anz
F7B4 : 26 17    : BNE   17  > F7CD       B <> 0 ?

F7B6 : D6 C5    : LDAB  00C5             nein, byt_anz -> B
F7B8 : D5 94    : BITB  0094             B or 0094
F7BA : 27 0E    : BEQ   0E  > F7CA       Ergebnis 0

F7BC : 4F       : CLRA                   sonst A = 0
F7BD : A7 A4    : STAA  A4,X             A -> (X+a4)
F7BF : A7 A6    : STAA  A6,X             A -> (X+a6)
F7C1 : A7 A8    : STAA  A8,X             A -> (X+a8)
F7C3 : 53       : COMB                   B = \B
F7C4 : D4 94    : ANDB  0094             B = B and 0094
F7C6 : D7 94    : STAB  0094             B -> 0094
F7C8 : 8D 25    : BSR   25  > F7EF

F7CA : 7E F8 5D : JMP   F85D             Sprung

F7CD : D1 C5    : CMPB  00C5             B = byt_anz ?
F7CF : 26 03    : BNE   03  > F7D4       nein

F7D1 : 7E F8 5D : JMP   F85D             Sprung

F7D4 : 96 94    : LDAA  0094             0094 -> A
F7D6 : 94 C5    : ANDA  00C5             A = A and byt_anz
F7D8 : 11       : CBA                    B = A ?
F7D9 : 27 20    : BEQ   20  > F7FB       ja

F7DB : 43       : COMA                   A = \A
F7DC : 94 94    : ANDA  0094             A = A and 0094
F7DE : 1B       : ABA                    A = A+B
F7DF : 97 94    : STAA  0094             A -> 0094
F7E1 : 8D 0C    : BSR   0C  > F7EF

F7E3 : 86 64    : LDAA #64               A = #64
F7E5 : A7 A2    : STAA  A2,X             A -> (X+a2)
F7E7 : A6 95    : LDAA  95,X             A = (X+95)
F7E9 : 27 4C    : BEQ   4C  > F837       A = 0 ?

F7EB : A7 A4    : STAA  A4,X             nein, A -> (X+a4)
F7ED : 20 40    : BRA   40  > F82F       Sprung

***************************************************************************
F7EF : 96 A1    : LDAA  00A1             00a1 -> A
F7F1 : 2B 03    : BMI   03  > (F7F6)     A negativ, Bit 6 von A l”schen

F7F3 : 84 DF    : ANDA #DF               sonst Bit 5 von A l”schen
F7F5 : 7D 84 BF : TST   84BF             2 Befehle auf einmal !!!
F7F8 : 97 A1    : STAA  00A1             A -> 00a1
F7FA : 39       : RTS
***************************************************************************

F7FB : 96 A1    : LDAA  00A1             00a1 -> A
F7FD : 2B 06    : BMI   06  > F805       A negativ ?

F7FF : 85 20    : BITA #20               nein, Bit 5 von A gesetzt ?
F801 : 26 0A    : BNE   0A  > F80D       ja

F803 : 20 04    : BRA   04  > F809       sonst Sprung

F805 : 85 40    : BITA #40               Bit 6 von A gesetzt ?
F807 : 26 04    : BNE   04  > F80D       ja

F809 : E6 95    : LDAB  95,X             sonst B = (X+95)
F80B : 26 0A    : BNE   0A  > F817       B <> 0 ?

F80D : E6 99    : LDAB  99,X             nein, B = (X+99)
F80F : 27 4C    : BEQ   4C  > F85D       B = 0 ?

F811 : E6 A8    : LDAB  A8,X             nein, B = (X+a8)
F813 : 26 48    : BNE   48  > F85D       B <> 0 ?

F815 : 20 20    : BRA   20  > F837       nein, Sprung

F817 : E6 97    : LDAB  97,X             B = (X+97)
F819 : 27 04    : BEQ   04  > F81F       B = 0 ?

F81B : E6 A6    : LDAB  A6,X             nein, B = (X+a6)
F81D : 27 0C    : BEQ   0C  > F82B       B = 0 ?

F81F : E6 A4    : LDAB  A4,X             nein, B = (X+a4)
F821 : 26 3A    : BNE   3A  > F85D       B <> 0 ?

F823 : 8D 4A    : BSR   4A  > F86F       nein

F825 : E6 99    : LDAB  99,X             B = (X+99)
F827 : E7 A8    : STAB  A8,X             B -> (X+a8)
F829 : 20 32    : BRA   32  > F85D       Sprung

F82B : E6 A4    : LDAB  A4,X             B = (X+a4)
F82D : 27 06    : BEQ   06  > F835       B = 0 ?

F82F : E6 97    : LDAB  97,X             nein, B = (X+97)
F831 : E7 A6    : STAB  A6,X             B -> (X+a6)
F833 : 20 06    : BRA   06  > F83B       Sprung

F835 : 8D 38    : BSR   38  > F86F

F837 : E6 99    : LDAB  99,X             B = (X,99)
F839 : E7 A8    : STAB  A8,X             B -> (X,a8)

F83B : D6 94    : LDAB  0094             0094 -> B
F83D : CE F8 7A : LDX  #F87A             X = #f87a (Cursortastentabelle)
F840 : 96 A1    : LDAA  00A1             00a1 -> A
F842 : 2B 04    : BMI   04  > F848       A negativ ?

F844 : 08       : INX                    nein, inc X
F845 : 08       : INX                    inc X
F846 : 54       : LSRB                   B um 3 Bit..
F847 : 54       : LSRB                   ..nach..

F848 : 54       : LSRB                   ..rechts
F849 : C4 01    : ANDB #01               Bits 1-7 von B l”schen
F84B : 3A       : ABX                    X = X+B
F84C : A6 00    : LDAA  00,X             A = (X+00)
F84E : 0F       : SEI                    IRQ maskieren
F84F : 16       : TAB                    B = A
F850 : CA 80    : ORAB #80               Bit 7 von B setzen
F852 : D7 C6    : STAB  00C6             B -> header
F854 : CE 00 C6 : LDX  #00C6             X = #header
F857 : C6 01    : LDAB #01               B = #01
F859 : BD FD 34 : JSR   FD34             Cursortaste senden

F85C : 0E       : CLI                    IRQ freigeben

F85D : 96 A1    : LDAA  00A1             00a1 -> A
F85F : 2B 1D    : BMI   1D  > F87E       A negativ ?

F861 : 8A 80    : ORAA #80               nein, Bit 7 von A setzen
F863 : 97 A1    : STAA  00A1             A -> 00a1
F865 : 86 03    : LDAA #03               A = #03
F867 : 97 C5    : STAA  00C5             A -> byt_anz
F869 : CE 00 01 : LDX  #0001             X = #0001
F86C : 7E F7 B0 : JMP   F7B0             Sprung

***************************************************************************
F86F : 4D       : TSTA                   A < 0 ?
F870 : 2B 03    : BMI   03  > (F875)     ja, dann Bit 6 von A setzen

F872 : 8A 20    : ORAA #20               sonst Bit 5 von A setzen
F874 : 7D 8A 40 : TST   8A40             2 Befehle auf einmal !!!
F877 : 97 A1    : STAA  00A1             A -> 00a1
F879 : 39       : RTS
***************************************************************************

F87A : 48 50 4B 4D                       Cursortasten (ho ru li re)

***************************************************************************
F87E : 86 74    : LDAA #74               A = #74
F880 : D6 A1    : LDAB  00A1             00a1 -> B
F882 : 7B 02 9B : TIM  #02,009B          Bit 1 von 009b gesetzt ?
F885 : 26 08    : BNE   08  > F88F       ja

F887 : C5 02    : BITB #02               sonst Bit 1 von B gesetzt ?
F889 : 26 14    : BNE   14  > F89F       ja

F88B : CA 02    : ORAB #02               sonst Bit 1 von B setzen
F88D : 20 08    : BRA   08  > F897       Sprung

F88F : C5 02    : BITB #02               Bit 1 von B gesetzt ?
F891 : 27 0C    : BEQ   0C  > F89F       nein

F893 : C4 FD    : ANDB #FD               sonst Bit 1 von B l”schen
F895 : 8A 80    : ORAA #80               Bit 7 von A setzen

F897 : D7 A1    : STAB  00A1             B -> 00a1
F899 : 0F       : SEI                    IRQ maskieren
F89A : 5F       : CLRB                   B = 0
F89B : BD FD 34 : JSR   FD34

F89E : 0E       : CLI                    IRQ freigeben

F89F : 7E F1 3A : JMP   F13A             Sprung
***************************************************************************

***************************************************************************
F8A2 : 7B 10 CB : TIM  #10,00CB          Bit 4 von 00cb gesetzt ?
F8A5 : 26 2A    : BNE   2A  > F8D1       ja

F8A7 : D6 D7    : LDAB  00D7             sonst 00d7 -> B
F8A9 : 2A 26    : BPL   26  > F8D1       B positiv ?

F8AB : 86 16    : LDAA #16               nein, A = #16

F8AD : 4A       : DECA                   dec A
F8AE : 26 FD    : BNE   FD  > F8AD       A <> 0 ?

F8B0 : 96 03    : LDAA  0003             nein, data_2 -> A
F8B2 : 91 03    : CMPA  0003             A = data_2 ?
F8B4 : 26 FA    : BNE   FA  > F8B0       nein

F8B6 : 85 04    : BITA #04               sonst Bit 2 von data_2 gesetzt ?
F8B8 : 27 01    : BEQ   01  > (F8BB)     nein, Set Carry

F8BA : 6D 0D    : TST   0D,X             2 Befehle auf einmal !!!
F8BC : 96 A4    : LDAA  00A4             joy1 -> A
F8BE : 49       : ROLA                   A um 1 Bit rechts rotieren
F8BF : 97 A4    : STAA  00A4             A -> joy1
F8C1 : 7A 00 A5 : DEC   00A5             dec joy2
F8C4 : 26 0B    : BNE   0B  > F8D1       joy2 <> 0 ?

F8C6 : C6 08    : LDAB #08               nein, dann B = #08
F8C8 : D7 A5    : STAB  00A5             B -> joy2

F8CA : 7B 20 11 : TIM  #20,0011          warten, bis Senderegister..
F8CD : 27 FB    : BEQ   FB  > F8CA       ..leer

F8CF : 97 13    : STAA  0013             sonst A -> transmit_data

F8D1 : 7E F1 3A : JMP   F13A             Sprung
***************************************************************************

***************************************************************************
F8D4 : 71 78 CB : AIM  #78,00CB          Bits 0-2 und 7 von 00cb l”schen
F8D7 : D6 CD    : LDAB  00CD             fkt_nr -> B
F8D9 : 17       : TBA                    A = B
F8DA : 2A 17    : BPL   17  > F8F3       Normaler Befehl an den IKBD ?

F8DC : C1 80    : CMPB #80               nein, B = #80 (RESET) ?
F8DE : 26 03    : BNE   03  > F8E3       nein

F8E0 : 7E F9 90 : JMP   F990             sonst Sprung auf RESET-Routine

F8E3 : C1 87    : CMPB #87               B < #87 ?
F8E5 : 25 2F    : BCS   2F  > F916       ja (STATUS INQUIRIES)

F8E7 : C1 9B    : CMPB #9B               sonst B >= #9b ?
F8E9 : 24 2B    : BCC   2B  > F916       ja (STATUS INQUIRIES)

F8EB : C4 7F    : ANDB #7F               sonst Abfrage-Status-Bit l”schen
F8ED : C0 07    : SUBB #07               7er-Offset von B abziehen
F8EF : CB 1C    : ADDB #1C               B = B + #1c
F8F1 : 20 0A    : BRA   0A  > F8FD       Sprung

F8F3 : C1 07    : CMPB #07               B < #07 ?
F8F5 : 25 1F    : BCS   1F  > F916       ja (STATUS INQUIRIES)

F8F7 : C1 23    : CMPB #23               sonst B >= #23 ?
F8F9 : 24 1B    : BCC   1B  > F916       ja (STATUS INQUIRIES)

F8FB : C0 07    : SUBB #07               sonst 7er-Offset von B abziehen

F8FD : 58       : ASLB                   B = B*2 (Wort-Adressen)
F8FE : CE F9 30 : LDX  #F930             Adressentabelle #f930 nach X
F901 : 3A       : ABX                    X = X+B
F902 : EE 00    : LDX   00,X             X = (X+00)
F904 : 27 10    : BEQ   10  > F916       Sprung-Adresse = 0000 ?

F906 : 85 80    : BITA #80               nein, Request-Kommando an IKBD ?
F908 : 27 0A    : BEQ   0A  > F914       nein, Sprung nach (X+00)

F90A : 7B 08 CB : TIM  #08,00CB          sonst Bit 3 in 00cb gesetzt ?
F90D : 26 07    : BNE   07  > F916       ja

F90F : 7B 03 CA : TIM  #03,00CA          sonst Bits 0-1 in 00ca gesetzt ?
F912 : 26 02    : BNE   02  > F916       ja

F914 : 6E 00    : JMP   00,X             Sprung nach (X+00)

F916 : 71 18 CB : AIM  #18,00CB          Bits 0-2 und 5-7 von 00cb l”schen
F919 : 20 0E    : BRA   0E  > F929       Sprung

******************************* Resume ($11) ******************************
F91B : 7B 08 CB : TIM  #08,00CB          Bit 3 von 00cb gesetzt ?
F91E : 27 09    : BEQ   09  > F929       nein

F920 : 71 F7 CB : AIM  #F7,00CB          sonst Bit 3 von 00cb l”schen
F923 : 72 08 C9 : OIM  #08,00C9          Bit 3 von 00c9 setzen
F926 : 72 04 11 : OIM  #04,0011          Sende-Interrupt T/R_CSR freigeben
***************************************************************************

F929 : 7F 00 CC : CLR   00CC             00cc = 0
F92C : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
F92F : 39       : RTS

          IKBD-Funktionen-Adressen-Tabelle                Code-Nummern

F930 : FAA4 FAB9 FACB FAE8 FB0B FB25 FB39 FB5F      07 08 09 0a 0b 0c 0d 0e
F940 : FB7C FB82 F91B FB88 F9AF F9C1 F9C5 F9CC      0f 10 11 12 13 14 15 16
F950 : F9F3 FA12 FA21 FA41 FA5B FA95 0000 0000      17 18 19 1a 1b 1c -- --
F960 : 0000 FBD4 FC16 FC3B FC59 FC62 FC62 FC62      -- 20 21 22 87 88 89 8a
F970 : FC83 FC8C 0000 0000 FC95 FC95 0000 FCA2      8b 8c -- -- 8f 90 -- 92
F980 : 0000 FCAE FCAE 0000 0000 0000 FCAE FCC9      -- 94 95 -- -- -- 99 9a

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

F990 : 71 EF 11 : AIM  #EF,0011          Empfangs-Inter. T/R_CSR maskieren
F993 : C6 02    : LDAB #02               B = #02
F995 : BD FC FE : JSR   FCFE
F998 : 24 11    : BCC   11  > F9AB       Carry gesetzt ?

F99A : 96 CE    : LDAA  00CE             sonst dat_byte -> A
F99C : 81 01    : CMPA #01               A = #01 ?
F99E : 26 08    : BNE   08  > F9A8       nein

F9A0 : 8E 00 FF : LDS  #00FF             sonst Stack = #00ff
F9A3 : CE F0 10 : LDX  #F010
F9A6 : 3C       : PSHX                   Sprung ber Stack auf F010
F9A7 : 39       : RTS

F9A8 : 7E F9 29 : JMP   F929             Sprung

F9AB : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
F9AE : 39       : RTS
***************************************************************************

**************************** Pause output ($13) ***************************
F9AF : 7B 08 CB : TIM  #08,00CB          Bit 3 von 00cb gesetzt ?
F9B2 : 26 0A    : BNE   0A  > F9BE       ja

F9B4 : 72 08 CB : OIM  #08,00CB          sonst Bit 3 von 00cb setzen
F9B7 : 71 F7 C9 : AIM  #F7,00C9          Bit 3 von 00c9 l”schen
F9BA : 96 D5    : LDAA  00D5             00d5 -> A
F9BC : 97 D8    : STAA  00D8             A -> 00d8

F9BE : 7E F9 29 : JMP   F929             Sprung
***************************************************************************

******************** Set joystick event reporting ($14) *******************
F9C1 : 86 28    : LDAA #28               Bits 3 und 4 von A setzen
F9C3 : 20 02    : BRA   02  > F9C7       Sprung

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                    Set joystick interrogation mode ($15)
F9C5 : 86 30    : LDAA #30               Bits 4 und 5 von A setzen

F9C7 : 97 CA    : STAA  00CA             A -> 00ca
F9C9 : 7E FA 47 : JMP   FA47             Sprung
***************************************************************************

************************ Joystick interrogation ($16) *********************
F9CC : 96 CA    : LDAA  00CA             00ca -> A
F9CE : 85 20    : BITA #20               Bit 5 von A gesetzt ?
F9D0 : 26 03    : BNE   03  > F9D5       ja

F9D2 : 7E F9 29 : JMP   F929             sonst Sprung

F9D5 : 85 18    : BITA #18               Bits 3 und 4 von A gesetzt ?
F9D7 : 27 17    : BEQ   17  > F9F0       nein

F9D9 : 7B 02 C9 : TIM  #02,00C9          sonst Bit 1 von 00c9 gesetzt ?
F9DC : 26 03    : BNE   03  > F9E1       ja

F9DE : 7F 00 A4 : CLR   00A4             sonst joy1 =0

F9E1 : 0F       : SEI                    IRQ maskieren
F9E2 : 86 FD    : LDAA #FD               A = #fd
F9E4 : C6 02    : LDAB #02               B = #02
F9E6 : CE 00 A4 : LDX  #00A4             X = #joy1
F9E9 : BD FD 34 : JSR   FD34             beide Joysticks an ST senden

F9EC : 0E       : CLI                    IRQ freigeben
F9ED : 7E F9 1B : JMP   F91B             Sprung

F9F0 : 7E F9 29 : JMP   F929             Sprung
***************************************************************************

********************** Set joystick monitoring ($17) **********************
F9F3 : C6 02    : LDAB #02               B = #02
F9F5 : BD FC FE : JSR   FCFE

F9F8 : 24 14    : BCC   14  > FA0E       Carry gel”scht ?

F9FA : 71 F8 CB : AIM  #F8,00CB          nein, Bits 0-2 von 00cb l”schen
F9FD : 96 CE    : LDAA  00CE             dat_byte -> A
F9FF : 97 94    : STAA  0094             A -> 0094
FA01 : 97 A7    : STAA  00A7             A -> 00a7
FA03 : 86 0A    : LDAA #0A               A = #0a
FA05 : 97 A6    : STAA  00A6             A -> 00a6
FA07 : 86 22    : LDAA #22               A = #22
FA09 : 97 CA    : STAA  00CA             A -> 00ca
FA0B : 7E FA 47 : JMP   FA47             Sprung

FA0E : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FA11 : 39       : RTS
***************************************************************************

******************** Set fire button monitoring ($18) ********************
FA12 : 86 21    : LDAA #21               A = #21
FA14 : 97 CA    : STAA  00CA             A -> 00ca
FA16 : 72 02 C9 : OIM  #02,00C9          Bit 1 von 00c9 setzen
FA19 : CC 00 08 : LDD  #0008             D = #0008
FA1C : DD A4    : STD   00A4             D -> joy1
FA1E : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

********************* Set joystick keycode mode ($19) *********************
FA21 : C6 07    : LDAB #07               B = #07
FA23 : BD FC FE : JSR   FCFE

FA26 : 24 15    : BCC   15  > FA3D       Carry gel”scht ?

FA28 : CE 00 95 : LDX  #0095             nein, X = #0095
FA2B : BD FD 1E : JSR   FD1E

FA2E : 4F       : CLRA                   A = 0
FA2F : 5F       : CLRB                   B = 0
FA30 : 97 94    : STAA  0094             A -> 0094
FA32 : 97 A1    : STAA  00A1             A -> 00a1
FA34 : DD A2    : STD   00A2             D -> 00a2
FA36 : 86 24    : LDAA #24
FA38 : 97 CA    : STAA  00CA             #24 -> 00ca
FA3A : 7E FA 47 : JMP   FA47             Sprung

FA3D : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FA40 : 39       : RTS
***************************************************************************

************************ Disable joysticks ($1a) **************************
FA41 : 71 DF CA : AIM  #DF,00CA          Bit 5 von 00ca l”schen
FA44 : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

***************************************************************************
FA47 : 4F       : CLRA                   A = 0
FA48 : 5F       : CLRB                   B = 0
FA49 : DD A4    : STD   00A4             D -> joy1
FA4B : DD 9D    : STD   009D             D -> 009d
FA4D : DD A8    : STD   00A8             D -> 00a8
FA4F : 97 9F    : STAA  009F             A -> 009f
FA51 : 86 06    : LDAA #06               kein Mausbutton (Joystick-Fire)..
FA53 : 97 9B    : STAA  009B             ..mehr gedrckt -> Standardwert
FA55 : 72 02 C9 : OIM  #02,00C9          Bit 1 von 00c9 setzen
FA58 : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

********************** Time-of-day clock set ($1b) ************************
FA5B : C6 07    : LDAB #07               B = #07
FA5D : BD FC FE : JSR   FCFE

FA60 : 24 2F    : BCC   2F  > FA91       Carry gel”scht ?

FA62 : 71 F8 CB : AIM  #F8,00CB          nein, Bits 0-2 von 00cb l”schen
FA65 : 0F       : SEI                    IRQ maskieren
FA66 : 5F       : CLRB                   B = 0

FA67 : CE 00 CE : LDX  #00CE             X = #dat_byte
FA6A : 3A       : ABX                    X = X+B
FA6B : A6 00    : LDAA  00,X             A = (X+00)
FA6D : 84 0F    : ANDA #0F               Low-Nibble gr”sser als 9 ?
FA6F : 81 0A    : CMPA #0A
FA71 : 24 10    : BCC   10  > FA83       ja, dann ganzes Byte ignorieren

FA73 : A6 00    : LDAA  00,X             sonst nochmal A = (X+00)
FA75 : 84 F0    : ANDA #F0               High-Nibble gr”sser als 9 ?
FA77 : 81 A0    : CMPA #A0
FA79 : 24 08    : BCC   08  > FA83       ja, dann ganzes Byte ignorieren

FA7B : A6 00    : LDAA  00,X             sonst wieder A = (X+00)
FA7D : CE 00 82 : LDX  #0082             X zeigt auf Datum/Zeit
FA80 : 3A       : ABX                    X = X+B
FA81 : A7 00    : STAA  00,X             Byte kopieren

FA83 : 5C       : INCB                   inc B
FA84 : C1 06    : CMPB #06               alle 6 Bytes kopiert ?
FA86 : 26 DF    : BNE   DF  > FA67       nein

FA88 : CE 03 E8 : LDX  #03E8
FA8B : DF 80    : STX   0080             sonst #03e8 -> ms_Z„hler
FA8D : 0E       : CLI                    IRQ freigeben
FA8E : 7E F9 1B : JMP   F91B             Sprung

FA91 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FA94 : 39       : RTS
***************************************************************************

****************** Interrogate time-of-day clock ($1c) ********************
FA95 : 0F       : SEI                    IRQ maskieren
FA96 : C6 06    : LDAB #06               B = #06
FA98 : 86 FC    : LDAA #FC               A = #fc
FA9A : CE 00 82 : LDX  #0082             X zeigt auf Datum/Zeit
FA9D : BD FD 34 : JSR   FD34             Uhrzeit/Datum an ST senden

FAA0 : 0E       : CLI                    IRQ freigeben
FAA1 : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

********************* Set mouse button action ($07) ***********************
FAA4 : C6 02    : LDAB #02               B = #02
FAA6 : BD FC FE : JSR   FCFE

FAA9 : 24 0A    : BCC   0A  > FAB5       Carry gel”scht ?

FAAB : 71 F8 CB : AIM  #F8,00CB          nein, Bits 0-2 von 00cb l”schen
FAAE : 96 CE    : LDAA  00CE             dat_byte -> A
FAB0 : 97 B4    : STAA  00B4             A -> 00b4
FAB2 : 7E F9 1B : JMP   F91B             Sprung

FAB5 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FAB8 : 39       : RTS
***************************************************************************

*************** Set relative mouse position reporting ($08) ***************
FAB9 : BD FB 8E : JSR   FB8E

FABC : 71 0F C9 : AIM  #0F,00C9          Bits 4-7 von 00c9 l”schen
FABF : 72 90 C9 : OIM  #90,00C9          Bits 4 und 7 von 00c9 setzen
FAC2 : 7F 00 BD : CLR   00BD             00bd = 0
FAC5 : 7F 00 BC : CLR   00BC             00bc = 0
FAC8 : 7E FB AF : JMP   FBAF             Sprung
***************************************************************************

****************** Set absolute mouse positioning ($09) *******************
FACB : C6 05    : LDAB #05               B = #05
FACD : BD FC FE : JSR   FCFE

FAD0 : 24 12    : BCC   12  > FAE4       Carry gel”scht ?

FAD2 : CE 00 AA : LDX  #00AA             nein, X = #00aa
FAD5 : BD FD 1E : JSR   FD1E

FAD8 : BD FB 8E : JSR   FB8E

FADB : 71 0F C9 : AIM  #0F,00C9          Bits 4-7 von 00c9 l”schen
FADE : 72 A0 C9 : OIM  #A0,00C9          Bits 5 und 7 von 00c9 setzen
FAE1 : 7E FB AF : JMP   FBAF             Sprung

FAE4 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FAE7 : 39       : RTS
***************************************************************************
 
********************** Set mouse keycode mode ($0a) ***********************
FAE8 : C6 03    : LDAB #03               B = #03
FAEA : BD FC FE : JSR   FCFE

FAED : 24 18    : BCC   18  > FB07       Carry gel”scht ?

FAEF : CE 00 AE : LDX  #00AE             nein, X = #00ae
FAF2 : BD FD 1E : JSR   FD1E

FAF5 : BD FB 8E : JSR   FB8E

FAF8 : 71 0F C9 : AIM  #0F,00C9          Bits 4-7 von 00c9 l”schen
FAFB : 72 C0 C9 : OIM  #C0,00C9          Bits 6 und 7 von 00c9 setzen
FAFE : 7F 00 BA : CLR   00BA             00ba = 0
FB01 : 7F 00 BB : CLR   00BB             00bb = 0
FB04 : 7E FB AF : JMP   FBAF             Sprung

FB07 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FB0A : 39       : RTS
***************************************************************************

*********************** set mouse threshold ($0b) *************************
FB0B : C6 03    : LDAB #03               B = #03
FB0D : BD FC FE : JSR   FCFE

FB10 : 24 0F    : BCC   0F  > FB21       Carry gel”scht ?

FB12 : CE 00 B0 : LDX  #00B0             nein, X = #00b0
FB15 : BD FD 1E : JSR   FD1E

FB18 : 7F 00 BC : CLR   00BC             00bc = 0
FB1B : 7F 00 BD : CLR   00BD             00bd = 0
FB1E : 7E F9 1B : JMP   F91B             Sprung

FB21 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FB24 : 39       : RTS
***************************************************************************

************************** Set mouse scale ($0c) **************************
FB25 : C6 03    : LDAB #03               B = #03
FB27 : BD FC FE : JSR   FCFE

FB2A : 24 09    : BCC   09  > FB35       Carry gel”scht ?

FB2C : CE 00 B2 : LDX  #00B2             nein, X = #00b2
FB2F : BD FD 1E : JSR   FD1E

FB32 : 7E F9 1B : JMP   F91B             Sprung

FB35 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FB38 : 39       : RTS
***************************************************************************

********************* interrogate mouse position ($0d) ********************
FB39 : 96 C9    : LDAA  00C9             00c9 -> A
FB3B : 85 02    : BITA #02               Bit 1 von A gesetzt ?
FB3D : 26 1D    : BNE   1D  > FB5C       ja

FB3F : 4D       : TSTA                   sonst A positiv ?
FB40 : 2A 1A    : BPL   1A  > FB5C       ja

FB42 : 85 20    : BITA #20               sonst Bit 5 von A gesetzt ?
FB44 : 27 16    : BEQ   16  > FB5C       nein

FB46 : 0F       : SEI                    dann IRQ maskieren
FB47 : 96 C2    : LDAA  00C2             00c2 -> A
FB49 : 97 B5    : STAA  00B5             A -> abs_mouse
FB4B : 86 F7    : LDAA #F7               A = #f7
FB4D : C6 05    : LDAB #05               B = #05
FB4F : CE 00 B5 : LDX  #00B5             X = #abs_mouse
FB52 : BD FD 34 : JSR   FD34             Mouse Position an ST senden

FB55 : 0E       : CLI                    IRQ freigeben
FB56 : 71 F0 C2 : AIM  #F0,00C2          Bits 0-3 von 00c2 l”schen
FB59 : 7E F9 1B : JMP   F91B             Sprung

FB5C : 7E F9 29 : JMP   F929             Sprung
***************************************************************************

*********************** load mouse position ($0e) *************************
FB5F : C6 06    : LDAB #06               B = #06
FB61 : BD FC FE : JSR   FCFE

FB64 : 24 12    : BCC   12  > FB78       Carry gel”scht ?

FB66 : CE 00 B5 : LDX  #00B5             nein, X = #abs_mouse
FB69 : BD FD 1E : JSR   FD1E

FB6C : 71 F0 C2 : AIM  #F0,00C2          Bits 0-3 von 00c2 l”schen
FB6F : 71 0F C9 : AIM  #0F,00C9          Bits 4-7 von 00c9 l”schen
FB72 : 72 A0 C9 : OIM  #A0,00C9          Bits 5 und 7 von 00c9 setzen
FB75 : 7E F9 1B : JMP   F91B             Sprung

FB78 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FB7B : 39       : RTS
***************************************************************************

************************ Set Y=0 at bottom ($0f) **************************
FB7C : 72 01 C9 : OIM  #01,00C9          Bit 0 von 00c9 setzen
FB7F : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

************************* Set Y=0 at top ($10) ****************************
FB82 : 71 FE C9 : AIM  #FE,00C9          Bit 0 von 00c9 l”schen
FB85 : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

************************* Disable mouse ($12) *****************************
FB88 : 71 7F C9 : AIM  #7F,00C9          Bit 7 von 00c9 l”schen
FB8B : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

***************************************************************************
FB8E : 96 07    : LDAA  0007             data_4 -> A
FB90 : 16       : TAB                    B = A
FB91 : 84 03    : ANDA #03               Bits 2-7 von A l”schen
FB93 : 97 BE    : STAA  00BE             A -> 00be
FB95 : 54       : LSRB                   B um 2 Bit..
FB96 : 54       : LSRB                   ..nach rechts
FB97 : C4 03    : ANDB #03               Bits 2-7 von B l”schen
FB99 : D7 BF    : STAB  00BF             B -> 00bf
FB9B : 5F       : CLRB                   B = 0
FB9C : D7 9D    : STAB  009D             B -> 009d
FB9E : 96 03    : LDAA  0003             data_2 -> A
FBA0 : 84 06    : ANDA #06               bis auf Mausbuttons..
FBA2 : 97 9B    : STAA  009B             ..alles in 009B l”schen
FBA4 : 27 04    : BEQ   04  > FBAA       A = 0 ?

FBA6 : 81 06    : CMPA #06               nein, A = #06 ?
FBA8 : 26 02    : BNE   02  > FBAC       nein

FBAA : 88 06    : EORA #06               sonst eor Bits 1 und 3 von A

FBAC : 97 C0    : STAA  00C0             A -> 00c0
FBAE : 39       : RTS
***************************************************************************

***************************************************************************
FBAF : 71 FD C9 : AIM  #FD,00C9          Bit 1 von 00c9 l”schen
FBB2 : 7B 07 CA : TIM  #07,00CA          Bits 0-2 von 00ca gesetzt ?
FBB5 : 26 0E    : BNE   0E  > FBC5       ja

FBB7 : 71 F0 9F : AIM  #F0,009F          sonst Bits 0-3 von 009f l”schen
FBBA : 71 F0 A9 : AIM  #F0,00A9          Bits 0-3 von 00a9 l”schen
FBBD : 71 F0 A0 : AIM  #F0,00A0          Bits 0-3 von 00a0 l”schen
FBC0 : 71 04 A8 : AIM  #04,00A8          Bits 0-1 und 3-7 von 00a8 l”schen
FBC3 : 20 0C    : BRA   0C  > FBD1       Sprung

FBC5 : 86 28    : LDAA #28
FBC7 : 97 CA    : STAA  00CA             #28 -> 00ca
FBC9 : 4F       : CLRA                   A = 0
FBCA : 5F       : CLRB                   B = 0
FBCB : DD A4    : STD   00A4             D -> joy1 und joy2
FBCD : DD A8    : STD   00A8             D -> 00a8
FBCF : DD 9E    : STD   009E             D -> 009e

FBD1 : 7E F9 1B : JMP   F91B             Sprung
***************************************************************************

*************************** Memory load ($20) *****************************
FBD4 : C6 04    : LDAB #04               B = #04
FBD6 : BD FC FE : JSR   FCFE

FBD9 : 24 37    : BCC   37  > FC12       Carry gel”scht ?

FBDB : CE 00 EE : LDX  #00EE             nein, X = #00ee
FBDE : BD FD 1E : JSR   FD1E

FBE1 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FBE4 : 71 F7 08 : AIM  #F7,0008          EOCI (IRQ2 maskieren)
FBE7 : DE EE    : LDX   00EE             00ee -> X (Anfangsadresse)
FBE9 : 96 F0    : LDAA  00F0             00f0 -> A (Anzahl Bytes)
FBEB : 27 21    : BEQ   21  > FC0E       Anzahl = 0 ?

FBED : 7F 00 CC : CLR   00CC             nein, 00cc = 0
FBF0 : C6 64    : LDAB #64               B = #64

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
FBF2 : 7B 80 CB : TIM  #80,00CB          Bit 7 von 00cb gesetzt ?
FBF5 : 26 0A    : BNE   0A  > FC01       ja, kein Warten auf Timeout

FBF7 : 86 C8    : LDAA #C8               sonst A = #c8

FBF9 : 4A       : DECA                   A bis auf Null runterz„hlen
FBFA : 26 FD    : BNE   FD  > FBF9       (ca. 0.8ms)

FBFC : 5A       : DECB                   dann B auf Null runterz„hlen
FBFD : 27 0F    : BEQ   0F  > FC0E       Timeout nach ca. 82ms 

FBFF : 20 F1    : BRA   F1  > FBF2       noch kein Timeout
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

FC01 : 71 7F CB : AIM  #7F,00CB          sonst Bit 7 von 00cb l”schen
FC04 : 96 CD    : LDAA  00CD             fkt_nr -> A
FC06 : A7 00    : STAA  00,X             A in Speicherzelle schreiben
FC08 : 08       : INX                    X zeigt auf n„chste Speicherzelle
FC09 : 7A 00 F0 : DEC   00F0             Anzahl minus eins
FC0C : 26 DF    : BNE   DF  > FBED       Anzahl schon Null ?

FC0E : 72 08 08 : OIM  #08,0008          ja, EOCI freigeben (IRQ2)
FC11 : 39       : RTS

FC12 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FC15 : 39       : RTS
***************************************************************************

**************************** Memory read ($21) ****************************
FC16 : C6 03    : LDAB #03               B = #03
FC18 : BD FC FE : JSR   FCFE

FC1B : 24 1A    : BCC   1A  > FC37       Carry gel”scht ?

FC1D : CE 00 EE : LDX  #00EE             nein, X = #00ee
FC20 : BD FD 1E : JSR   FD1E

FC23 : 0F       : SEI                    IRQ maskieren
FC24 : 86 F6    : LDAA #F6               A = #f6
FC26 : 5F       : CLRB                   B = 0
FC27 : BD FD 34 : JSR   FD34

FC2A : 86 20    : LDAA #20               A = #20
FC2C : C6 06    : LDAB #06               B = #06
FC2E : DE EE    : LDX   00EE             00ee -> X
FC30 : BD FD 34 : JSR   FD34

FC33 : 0E       : CLI                    IRQ freigeben
FC34 : 7E F9 1B : JMP   F91B             Sprung

FC37 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FC3A : 39       : RTS
***************************************************************************

************************ Controller execute ($22) *************************
FC3B : C6 03    : LDAB #03               B = #03
FC3D : BD FC FE : JSR   FCFE

FC40 : 24 13    : BCC   13  > FC55       Carry gel”scht ?

FC42 : CE 00 EE : LDX  #00EE             nein, X = #00ee
FC45 : BD FD 1E : JSR   FD1E

FC48 : 71 F7 08 : AIM  #F7,0008          EOCI (IRQ2) maskieren
FC4B : DE EE    : LDX   00EE             00ee -> X
FC4D : AD 00    : JSR   00,X             JSR (X+00)

FC4F : 72 08 08 : OIM  #08,0008          EOCI (IRQ2) freigeben
FC52 : 7E F9 1B : JMP   F91B             Sprung

FC55 : 72 10 11 : OIM  #10,0011          Empfangs-Inter. T/R_CSR freigeben
FC58 : 39       : RTS
***************************************************************************

******************** Request mouse button action ($87) ********************
FC59 : 86 07    : LDAA #07               A = #07
FC5B : CE 00 B4 : LDX  #00B4             X = #00b4
FC5E : C6 02    : LDAB #02               B = #02
FC60 : 20 75    : BRA   75  > FCD7       Sprung

******************** Request mouse mode ($88,$89,$8a) *********************
FC62 : 96 C9    : LDAA  00C9             00c9 -> A
FC64 : 48       : ASLA                   A um 2 Bit..
FC65 : 48       : ASLA                   ..links
FC66 : 25 09    : BCS   09  > FC71       Carry gesetzt ?

FC68 : 48       : ASLA                   nein, A noch 1 Bit links
FC69 : 25 0F    : BCS   0F  > FC7A       Carry jetzt gesetzt ?

FC6B : 86 08    : LDAA #08               nein, A = #08
FC6D : C6 01    : LDAB #01               B = #01
FC6F : 20 66    : BRA   66  > FCD7       Sprung

FC71 : 86 0A    : LDAA #0A               A = #0a
FC73 : CE 00 AE : LDX  #00AE             X = #00ae
FC76 : C6 03    : LDAB #03               B = #03
FC78 : 20 5D    : BRA   5D  > FCD7       Sprung

FC7A : 86 09    : LDAA #09               A = #09
FC7C : CE 00 AA : LDX  #00AA             X = #00aa
FC7F : C6 05    : LDAB #05               B = #05
FC81 : 20 54    : BRA   54  > FCD7       Sprung
***************************************************************************

********************** Request mouse threshold ($8b) **********************
FC83 : 86 0B    : LDAA #0B               A = #0b
FC85 : CE 00 B0 : LDX  #00B0             X = #00b0
FC88 : C6 03    : LDAB #03               B = #03
FC8A : 20 4B    : BRA   4B  > FCD7       Sprung
***************************************************************************

************************ Request mouse scale ($8c) ************************
FC8C : 86 0C    : LDAA #0C               A = #0c
FC8E : CE 00 B2 : LDX  #00B2             X = #00b2
FC91 : C6 03    : LDAB #03               B = #03
FC93 : 20 42    : BRA   42  > FCD7       Sprung
***************************************************************************

************** Request mouse vertical coordinates ($8f,$90) ***************
FC95 : 96 C9    : LDAA  00C9             00c9 -> A
FC97 : 44       : LSRA                   A um 1 Bit rechts
FC98 : 25 04    : BCS   04  > FC9E       Carry gesetzt ?

FC9A : 86 10    : LDAA #10               nein, A = #10
FC9C : 20 37    : BRA   37  > FCD5       Sprung

FC9E : 86 0F    : LDAA #0F               A = #0f
FCA0 : 20 33    : BRA   33  > FCD5       Sprung
***************************************************************************

******************** Request mouse availibility ($92) *********************
FCA2 : 96 C9    : LDAA  00C9             00c9 -> A
FCA4 : 48       : ASLA                   A um 1 Bit links
FCA5 : 25 04    : BCS   04  > FCAB       Carry gesetzt ?

FCA7 : 86 12    : LDAA #12               nein, A = #12
FCA9 : 20 2A    : BRA   2A  > FCD5       Sprung

FCAB : 4F       : CLRA                   A = 0
FCAC : 20 27    : BRA   27  > FCD5       Sprung
***************************************************************************

****************** Request joystick mode ($94,$95,$99) ********************
FCAE : 96 CA    : LDAA  00CA             00ca -> A
FCB0 : 44       : LSRA                   A um..
FCB1 : 44       : LSRA                   ..3 Bit..
FCB2 : 44       : LSRA                   ..rechts
FCB3 : 25 07    : BCS   07  > FCBC       Carry gesetzt ?

FCB5 : 44       : LSRA                   nein, A noch 1 Bit rechts
FCB6 : 25 0D    : BCS   0D  > FCC5       Carry jetzt gesetzt ?

FCB8 : 86 15    : LDAA #15               nein, A = #15
FCBA : 20 19    : BRA   19  > FCD5       Sprung

FCBC : 86 19    : LDAA #19               A = #19
FCBE : CE 00 95 : LDX  #0095             X = #0095
FCC1 : C6 07    : LDAB #07               B = #07
FCC3 : 20 12    : BRA   12  > FCD7       Sprung

FCC5 : 86 14    : LDAA #14               A = #14
FCC7 : 20 0C    : BRA   0C  > FCD5       Sprung
***************************************************************************

******************* Request joystick availibility ($9a) *******************
FCC9 : 7B 20 CA : TIM  #20,00CA          Bit 5 von 00ca gesetzt ?
FCCC : 26 04    : BNE   04  > FCD2       ja

FCCE : 86 1A    : LDAA #1A               sonst A = #a1
FCD0 : 20 03    : BRA   03  > FCD5       Sprung

FCD2 : 4F       : CLRA                   A = 0
FCD3 : 20 00    : BRA   00  > FCD5       Sprung (berflssig...)

FCD5 : C6 01    : LDAB #01               B = #01

FCD7 : 97 C6    : STAA  00C6             A -> header
FCD9 : D7 C5    : STAB  00CD             B -> byt_anz
FCDB : 0F       : SEI                    IRQ maskieren
FCDC : 3C       : PSHX                   X auf Stack
FCDD : 86 F6    : LDAA #F6               A = #f6
FCDF : 5F       : CLRB                   B = 0
FCE0 : BD FD 34 : JSR   FD34

FCE3 : 38       : PULX                   X vom Stack
FCE4 : 96 C6    : LDAA  00C6             header -> A
FCE6 : D6 C5    : LDAB  00C5             byt_anz -> B
FCE8 : 5A       : DECB                   dec B

FCE9 : BD FD 34 : JSR   FD34

FCEC : D6 C5    : LDAB  00C5             byt_anz -> B
FCEE : 5C       : INCB                   inc B
FCEF : C1 08    : CMPB #08               B = #08 ?
FCF1 : 27 07    : BEQ   07  > FCFA       ja

FCF3 : D7 C5    : STAB  00C5             sonst B -> byt_anz
FCF5 : CC 00 00 : LDD  #0000             D = #0000
FCF8 : 20 EF    : BRA   EF  > FCE9       Sprung

FCFA : 0E       : CLI                    IRQ freigeben
FCFB : 7E F9 29 : JMP   F929             Sprung
***************************************************************************

***************************************************************************
FCFE : 71 EF 11 : AIM  #EF,0011          Empfangs-Inter. T/R_CSR maskieren
FD01 : 96 CB    : LDAA  00CB             00cb -> A
FD03 : 85 40    : BITA #40               Bit 6 von A gesetzt ?
FD05 : 26 0F    : BNE   0F  > FD16       ja

FD07 : D1 CC    : CMPB  00CC             sonst B < 00cc ?
FD09 : 25 0B    : BCS   0B  > FD16       ja

FD0B : 27 09    : BEQ   09  > FD16       sonst B = 00cc ?

FD0D : D0 CC    : SUBB  00CC             nein, B = B - 00cc
FD0F : DA CB    : ORAB  00CB             B = B or 00cb
FD11 : D7 CB    : STAB  00CB             B -> 00cb
FD13 : 0C       : CLC                    clear Carry
FD14 : 20 07    : BRA   07  > FD1D       Sprung auf RTS

FD16 : 84 18    : ANDA #18               Bits 0-2 und 5-7 von A l”schen
FD18 : 5A       : DECB                   dec B
FD19 : 1B       : ABA                    A = A+B
FD1A : 97 CB    : STAA  00CB             A -> 00cb
FD1C : 0D       : SEC                    set Carry

FD1D : 39       : RTS
***************************************************************************

***************************************************************************
FD1E : 5F       : CLRB                   B = 0

FD1F : 3C       : PSHX                   X auf Stack
FD20 : CE 00 CD : LDX  #00CD             X = #fkt_nr
FD23 : 3A       : ABX                    X = X+B
FD24 : A6 01    : LDAA  01,X             A = (X+01)
FD26 : 38       : PULX                   X vom Stack
FD27 : A7 00    : STAA  00,X             A -> (X+00)
FD29 : 08       : INX                    inc X
FD2A : 5C       : INCB                   inc B
FD2B : 7A 00 CB : DEC   00CB             dec 00cb
FD2E : 7B 07 CB : TIM  #07,00CB          Bits 0-2 von 00cb gesetzt ?
FD31 : 26 EC    : BNE   EC  > FD1F       ja, nochmal

FD33 : 39       : RTS
***************************************************************************

***************************************************************************
FD34 : 7B 10 CB : TIM  #10,00CB          Bit 4 von 00cb gesetzt ?
FD37 : 26 2E    : BNE   2E  > FD67       ja, RTS

FD39 : D1 D7    : CMPB  00D7             sonst B >= 00d7 ?
FD3B : 24 2A    : BCC   2A  > FD67       ja, RTS

FD3D : 3C       : PSHX                   sonst X auf Stack
FD3E : 18       : XGDX                   X <-> D
FD3F : 4F       : CLRA                   A = 0
FD40 : D6 D5    : LDAB  00D5             00d5 -> B
FD42 : 18       : XGDX                   X <-> D
FD43 : A7 D9    : STAA  D9,X             A -> (X+d9)
FD45 : 96 D5    : LDAA  00D5             00d5 -> A
FD47 : 4C       : INCA                   A = A+1
FD48 : 81 15    : CMPA #15               A = #15 ?
FD4A : 26 01    : BNE   01  > FD4D       nein

FD4C : 4F       : CLRA                   sonst A = 0
        
FD4D : 97 D5    : STAA  00D5             A -> 00d5
FD4F : 7A 00 D7 : DEC   00D7             dec 00d7
FD52 : 38       : PULX                   X vom Stack
FD53 : 5D       : TSTB                   B = 0
FD54 : 27 06    : BEQ   06  > FD5C       ja

FD56 : A6 00    : LDAA  00,X             sonst A = (X+00)
FD58 : 08       : INX                    inc X
FD59 : 5A       : DECB                   dec B
FD5A : 20 E1    : BRA   E1  > FD3D       Sprung

FD5C : 96 D7    : LDAA  00D7             00d7 -> A
FD5E : 2A 06    : BPL   06  > FD66       A positiv ?

FD60 : 71 7F D7 : AIM  #7F,00D7          nein, Bit 7 von 00d7 l”schen
FD63 : BD FD 68 : JSR   FD68

FD66 : 0D       : SEC                    Carry = 1

FD67 : 39       : RTS
***************************************************************************

***************************************************************************
FD68 : 96 11    : LDAA  0011             T/R_CSR -> A
FD6A : 85 20    : BITA #20               Senderegister leer ?
FD6C : 27 2E    : BEQ   2E  > FD9C       nein, RTS

FD6E : 96 D6    : LDAA  00D6             sonst 00d6 -> A
FD70 : D6 CB    : LDAB  00CB             00cb -> B
FD72 : C5 08    : BITB #08               Bit 3 von B gesetzt ?
FD74 : 27 04    : BEQ   04  > FD7A       nein

FD76 : 91 D8    : CMPA  00D8             sonst A = 00d8 ?
FD78 : 27 22    : BEQ   22  > FD9C       ja, RTS

FD7A : CE 00 D9 : LDX  #00D9             X = #00d9
FD7D : D6 D6    : LDAB  00D6             00d6 -> B
FD7F : 3A       : ABX                    X = X+B
FD80 : E6 00    : LDAB  00,X             B = (X+00)
FD82 : D7 13    : STAB  0013             B -> transmit_data
FD84 : 72 04 11 : OIM  #04,0011          Sende-Interrupt T/R_CSR freigeben
FD87 : 4C       : INCA                   inc A
FD88 : 81 15    : CMPA #15               A = #15 ?
FD8A : 26 01    : BNE   01  > FD8D       nein

FD8C : 4F       : CLRA                   sonst A = 0
FD8D : 97 D6    : STAA  00D6             A -> 00d6
FD8F : 96 D7    : LDAA  00D7             00d7 -> A
FD91 : 84 7F    : ANDA #7F               Bit 7 von A l”schen
FD93 : 4C       : INCA                   inc A
FD94 : 81 15    : CMPA #15               A = #15 ?
FD96 : 26 02    : BNE   02  > FD9A       nein

FD98 : 8A 80    : ORAA #80               Bit 7 von A setzen

FD9A : 97 D7    : STAA  00D7             A -> 00d7

FD9C : 39       : RTS
***************************************************************************

******************** Timer Output Compare Interrupt ***********************
FD9D : 96 08    : LDAA  0008             TCSR -> A
FD9F : 85 40    : BITA #40               Output Compare Flag gesetzt ?
FDA1 : 26 03    : BNE   03  > FDA6       ja

FDA3 : 7E FE CF : JMP   FECF             sonst Sprung auf RTI

FDA6 : DC 09    : LDD   0009             Counter -> D
FDA8 : CB 13    : ADDB #13               B = B + #13
FDAA : D1 0C    : CMPB  000C             B = out_cmp_L ?
FDAC : 26 01    : BNE   01  > FDAF       nein, 3 Zyklen (BNE) warten !!!

FDAE : 01       : NOP                    sonst 4 Zyklen (NOP + BNE) warten

FDAF : DC 0B    : LDD   000B             out_cmp -> D
FDB1 : C3 03 E8 : ADDD #03E8             D = D + #03e8 (dezimal 1 msec)
FDB4 : DD 0B    : STD   000B             D -> out_cmp

FDB6 : 96 83    : LDAA  0083             Monat = 0..
FDB8 : 26 03    : BNE   03  > FDBD       ..also Uhr schon gestellt?

FDBA : 7E FE 29 : JMP   FE29             nein, Uhr ignorieren : Sprung

FDBD : DE 80    : LDX   0080             ms_Z„hler -> X
FDBF : 09       : DEX                    dec X
FDC0 : DF 80    : STX   0080             X -> ms_Z„hler
FDC2 : 26 F6    : BNE   F6  > FDBA       X wieder 0 ? (1000ms vergangen?)

FDC4 : CE 03 E8 : LDX  #03E8             ja, #03e8 -> ms_Z„hler
FDC7 : DF 80    : STX   0080
FDC9 : CE 00 06 : LDX  #0006             X = #0006, Start bei Sekunden
FDCC : C6 60    : LDAB #60               B = #60, 60 Sekunde bzw. Minuten

FDCE : 09       : DEX                    X = X-1
FDCF : A6 82    : LDAA  82,X             A = (X+82)
FDD1 : 8B 01    : ADDA #01               inc A (wichtig wg. Carry)..
FDD3 : 19       : DAA                    ..umgerechnet in BCD addiert
FDD4 : 8C 00 00 : CPX  #0000             X = #0000 (Uhr fertigbearbeitet)?
FDD7 : 27 4E    : BEQ   4E  > FE27       ja

FDD9 : 11       : CBA                    sonst A = Endwert (aus B) ?
FDDA : 26 4B    : BNE   4B  > FE27       nein

FDDC : 4F       : CLRA                   sonst A = 0
FDDD : A7 82    : STAA  82,X             nach (X+82) abspeichern
FDDF : 8C 00 05 : CPX  #0005             Sekunden (X = #0005) ?
FDE2 : 27 EA    : BEQ   EA  > FDCE       ja

FDE4 : 8C 00 04 : CPX  #0004             sonst X = #0004 (Minuten) ?
FDE7 : 26 04    : BNE   04  > FDED       nein

FDE9 : C6 24    : LDAB #24               sonst B = #24 (24 Stunden)
FDEB : 20 E1    : BRA   E1  > FDCE       Sprung

FDED : 8C 00 03 : CPX  #0003             X = #0003 (Tag) ?
FDF0 : 26 2C    : BNE   2C  > FE1E       nein

FDF2 : D6 83    : LDAB  0083             sonst monat -> B
FDF4 : C1 02    : CMPB #02               B = #02 ? (Februar)
FDF6 : 26 18    : BNE   18  > FE10       nein

FDF8 : C6 29    : LDAB #29               sonst B = #29 (Tage im Februar)
FDFA : 96 84    : LDAA  0084             tag -> A
FDFC : 81 28    : CMPA #28               A < #28 (nicht Monatsende) ?
FDFE : 25 CE    : BCS   CE  > FDCE       ja, gleich weiter mit Jahreszahl

FE00 : 96 82    : LDAA  0082             sonst jahr -> A 
FE02 : 85 10    : BITA #10               Bit 4 von A gesetzt ?
FE04 : 27 02    : BEQ   02  > FE08       nein

FE06 : 8B 0A    : ADDA #0A               sonst Korrektur wg.Hexadezimal

FE08 : 84 03    : ANDA #03               Schaltjahr ?
FE0A : 26 C2    : BNE   C2  > FDCE       ja, weiter mit Jahreszahl

FE0C : C6 30    : LDAB #30               sonst B = #30 (Min.Monatstage)
FE0E : 20 BE    : BRA   BE  > FDCE       und weiter mit Jahreszahl

FE10 : CE FE D0 : LDX  #FED0             X = #fed0 Tabelle auf Monatsl„ngen
FE13 : D6 83    : LDAB  0083             monat -> B
FE15 : 5A       : DECB                   dec B
FE16 : 3A       : ABX                    X = X+B
FE17 : E6 00    : LDAB  00,X             B = (X+00)
FE19 : CE 00 03 : LDX  #0003             X = #0003
FE1C : 20 B0    : BRA   B0  > FDCE       Weiter mit Jahreszahl

FE1E : 86 01    : LDAA #01               A = #01 (der 1.des Monats)
FE20 : A7 82    : STAA  82,X             A -> (X+82)
FE22 : C6 13    : LDAB #13               B = #13 (Anzahl Monate+1)
FE24 : 7E FD CE : JMP   FDCE             weiter mit Monatszahl

FE27 : A7 82    : STAA  82,X             A -> (X+82), fertig mit UHR

FE29 : 96 D4    : LDAA  00D4             00d4 -> A
FE2B : 27 21    : BEQ   21  > FE4E       A = 0 ?

FE2D : 81 CD    : CMPA #CD               nein, A = #cd ?
FE2F : 26 0D    : BNE   0D  > FE3E       nein

FE31 : 8E 00 FF : LDS  #00FF             sonst SP = #00ff
FE34 : CE F0 0B : LDX  #F00B             X = #f00b
FE37 : 3C       : PSHX                   X auf Stack
FE38 : 8E 00 F8 : LDS  #00F8             SP = #00f8
FE3B : 7E FE CF : JMP   FECF             Sprung auf RTI

FE3E : 7B 01 11 : TIM  #01,0011          Wake_up von T/R_CSR gesetzt ?
FE41 : 26 08    : BNE   08  > (FE4B)     ja, inc A

FE43 : 4F       : CLRA                   sonst A = 0
FE44 : 71 EF CB : AIM  #EF,00CB          Bit 4 von 00cb l”schen
FE47 : 72 04 11 : OIM  #04,0011          Sende-Interrupt T/R_CSR freigeben
FE4A : 6D 4C    : TST   4C,X             2 Befehle auf einmal !!!
FE4C : 97 D4    : STAA  00D4             A -> 00d4

FE4E : D6 CA    : LDAB  00CA             00ca -> B
FE50 : 96 C9    : LDAA  00C9             00c9 -> A
FE52 : 85 02    : BITA #02               Bit 1 von A gesetzt ?
FE54 : 26 09    : BNE   09  > FE5F       ja

FE56 : C5 20    : BITB #20               sonst Bit 5 von B gesetzt ?
FE58 : 26 0D    : BNE   0D  > FE67       ja

FE5A : 4D       : TSTA                   A negativ ?
FE5B : 2B 11    : BMI   11  > FE6E       ja

FE5D : 20 66    : BRA   66  > FEC5       sonst Sprung

FE5F : C5 20    : BITB #20               Bit 5 von B gesetzt ?
FE61 : 27 62    : BEQ   62  > FEC5       nein

FE63 : C5 01    : BITB #01               sonst Bit 0 von B gesetzt ?
FE65 : 25 68    : BCS   68  > FECF       Carry gesetzt gewesen, RTI

FE67 : 96 9E    : LDAA  009E             sonst 009e -> A
FE69 : 27 03    : BEQ   03  > FE6E       A = 0 ?

FE6B : 4C       : INCA                   nein, inc A
FE6C : 97 9E    : STAA  009E             A -> 009e

FE6E : 96 9D    : LDAA  009D             009d -> A
FE70 : 27 03    : BEQ   03  > FE75       A = 0 ?

FE72 : 4C       : INCA                   nein, inc A
FE73 : 97 9D    : STAA  009D             A -> 009d

FE75 : C5 20    : BITB #20               Bit 5 von B gesetzt ?
FE77 : 27 4C    : BEQ   4C  > FEC5       nein

FE79 : C5 04    : BITB #04               sonst Bit 2 von B gesetzt ?
FE7B : 27 2B    : BEQ   2B  > FEA8       nein

FE7D : CE 00 00 : LDX  #0000             sonst X = #0000

FE80 : A6 A2    : LDAA  A2,X             A = (X+a2)
FE82 : 27 08    : BEQ   08  > FE8C       A = 0 ?

FE84 : 4A       : DECA                   nein, dec A
FE85 : A7 A2    : STAA  A2,X             A -> (X+a2)
FE87 : 09       : DEX                    dec X
FE88 : 27 3B    : BEQ   3B  > FEC5       X = 0 ?

FE8A : 20 17    : BRA   17  > FEA3       nein, Sprung

FE8C : 86 64    : LDAA #64               A = #64
FE8E : A7 A2    : STAA  A2,X             A -> (X+a2)

FE90 : 08       : INX                    inc X
FE91 : 08       : INX                    inc X
FE92 : A6 A2    : LDAA  A2,X             A = (X+a2)
FE94 : 27 03    : BEQ   03  > FE99       A = 0 ?

FE96 : 4A       : DECA                   nein, dec A
FE97 : A7 A2    : STAA  A2,X             A -> (X+a2)

FE99 : 8C 00 06 : CPX  #0006             X < #0006 ?
FE9C : 25 F2    : BCS   F2  > FE90       ja

FE9E : 8C 00 07 : CPX  #0007             sonst X = #0007 ?
FEA1 : 27 22    : BEQ   22  > FEC5       ja

FEA3 : CE 00 01 : LDX  #0001             sonst X = #0001
FEA6 : 20 D8    : BRA   D8  > FE80       Sprung

FEA8 : C5 02    : BITB #02               Bit 1 von B gesetzt ?
FEAA : 27 19    : BEQ   19  > FEC5       nein

FEAC : 7B 08 CB : TIM  #08,00CB          sonst Bit 3 von 00cb gesetzt ?
FEAF : 26 1E    : BNE   1E  > FECF       ja, RTI

FEB1 : 96 A6    : LDAA  00A6             sonst 00a6 -> A
FEB3 : 27 03    : BEQ   03  > FEB8       A = 0 ?

FEB5 : 4A       : DECA                   nein, dec A

FEB6 : 20 09    : BRA   09  > FEC1       Sprung

FEB8 : 86 0A    : LDAA #0A               A = #0a
FEBA : D6 A7    : LDAB  00A7             00a7 -> B
FEBC : 27 03    : BEQ   03  > FEC1       B = 0 ?

FEBE : 5A       : DECB                   nein, dec B
FEBF : D7 A7    : STAB  00A7             B -> 00a7

FEC1 : 97 A6    : STAA  00A6             B -> 00a6
FEC3 : 20 0A    : BRA   0A  > FECF       Sprung auf RTI

FEC5 : 96 89    : LDAA  0089             0089 -> A
FEC7 : 2B 03    : BMI   03  > FECC       A negativ ?

FEC9 : 7E F1 B7 : JMP   F1B7             nein, Sprung

FECC : 75 80 89 : EIM  #80,0089          Bit 7 von 0089 invertieren

FECF : 3B       : RTI

FED0 : 32 29 32 31 32 31 32 32 31        Monatsl„ngen+1 : Jan bis Sept und
FED9 : 00 00 00 00 00 00 32 31 32        Okt bis Dez (0A..0F exist.nicht!)
***************************************************************************

**************** Serial Communication Interrupt Handler *******************
FEE2 : 96 11    : LDAA  0011             T/R_CSR -> A
FEE4 : 85 40    : BITA #40               Frame-Error ?
FEE6 : 26 0C    : BNE   0C  > FEF4       ja

FEE8 : 85 80    : BITA #80               sonst Empfangsregister voll ?
FEEA : 26 05    : BNE   05  > FEF1       ja

FEEC : 85 20    : BITA #20               sonst Senderegister leer ?
FEEE : 26 07    : BNE   07  > FEF7       ja

FEF0 : 3B       : RTI                    sonst ENDE

FEF1 : 8D 11    : BSR   11  > FF04       Empfangsregister voll
FEF3 : 3B       : RTI

FEF4 : 8D 4A    : BSR   4A  > FF40       Frame Error
FEF6 : 3B       : RTI
***************************************************************************

************************ SCI: Senderegister leer **************************
FEF7 : 96 D7    : LDAA  00D7             Senderegister leer : 00d7 -> A
FEF9 : 2A 05    : BPL   05  > FF00       A positiv ?

FEFB : 71 FB 11 : AIM  #FB,0011          nein, TIE l”schen->TDRE-IRQ aus
FEFE : 20 03    : BRA   03  > FF03       Sprung auf RTI

FF00 : BD FD 68 : JSR   FD68
FF03 : 3B       : RTI
***************************************************************************

************************ SCI: Empfangsregister voll ***********************
FF04 : D6 CC    : LDAB  00CC             00cc -> B
FF06 : 96 12    : LDAA  0012             receive_data -> A
FF08 : 26 03    : BNE   03  > FF0D       A <> 0 ?

FF0A : 5D       : TSTB                   sonst B = 0 ?
FF0B : 27 32    : BEQ   32  > FF3F       ja

FF0D : C1 07    : CMPB #07               sonst B = #07 ?
FF0F : 27 2E    : BEQ   2E  > FF3F       ja

FF11 : 96 CB    : LDAA  00CB             sonst 00cb -> A
FF13 : 85 20    : BITA #20               Bit 5 von A gesetzt ?
FF15 : 26 1C    : BNE   1C  > FF33       ja

FF17 : CE 00 CD : LDX  #00CD             sonst X = #fkt_nr
FF1A : 3A       : ABX                    X = X+B
FF1B : D6 12    : LDAB  0012             receive_data -> B
FF1D : E7 00    : STAB  00,X             B -> (X+00)
FF1F : 7C 00 CC : INC   00CC             inc 00cc
FF22 : 85 07    : BITA #07               Bits 0-2 von A gesetzt ?
FF24 : 27 07    : BEQ   07  > FF2D       nein

FF26 : 4A       : DECA                   sonst dec A
FF27 : 85 07    : BITA #07               jetzt Bits 0-2 von A gesetzt ?
FF29 : 26 04    : BNE   04  > FF2F       ja

FF2B : 8A 40    : ORAA #40               sonst Bit 6 von A setzen

FF2D : 8A 80    : ORAA #80               Bit 7 von A setzen

FF2F : 97 CB    : STAA  00CB             A -> 00cb
FF31 : 20 0C    : BRA   0C  > FF3F       Sprung auf RTS

FF33 : 4A       : DECA                   dec A
FF34 : 85 07    : BITA #07               Bits 0-2 von A gesetzt ?
FF36 : 26 F7    : BNE   F7  > FF2F       ja

FF38 : 84 18    : ANDA #18               sonst Bit 0-2 und 5-7 v. A l”schen
FF3A : 97 CB    : STAA  00CB             A -> 00cb
FF3C : 4F       : CLRA
FF3D : 97 CC    : STAA  00CC             #00 -> 00cc

FF3F : 39       : RTS
***************************************************************************

***************************** SCI: Frame Error ****************************
FF40 : D6 12    : LDAB  0012             receive_data -> B
FF42 : 72 01 11 : OIM  #01,0011          Wake_up von T/R_CSR setzen
FF45 : 86 20    : LDAA #20               A = #20

FF47 : 4A       : DECA                   0.1ms warten, damit das Bit..
FF48 : 26 FD    : BNE   FD  > FF47       ..wieder gel”scht werden kann

FF4A : 7B 01 11 : TIM  #01,0011          Wake_up von T/R_CSR gesetzt ?
FF4D : 27 09    : BEQ   09  > FF58       nein

FF4F : 7C 00 D4 : INC   00D4             sonst inc 00d4
FF52 : 72 10 CB : OIM  #10,00CB          Bit 4 von 00cb setzen
FF55 : 71 FB 11 : AIM  #FB,0011          TIE von T/R_CSR l”schen

FF58 : 96 CB    : LDAA  00CB             00cb -> A
FF5A : D6 CC    : LDAB  00CC             00cc -> B
FF5C : 27 05    : BEQ   05  > FF63       B = 0 ?

FF5E : 4A       : DECA                   nein, dec A
FF5F : 85 07    : BITA #07               Bits 0-2 von A gesetzt ?
FF61 : 26 06    : BNE   06  > (FF69)     ja, Bit 5 von A setzen

FF63 : 84 08    : ANDA #08               sonst Bit 0-2 und 4-7 v. A l”schen
FF65 : 5F       : CLRB                   B = 0
FF66 : D7 CC    : STAB  00CC             B -> 00cc
FF68 : 7D 8A 20 : TST   8A20             2 Befehle auf einmal !!!
FF6B : 97 CB    : STAA  00CB             A -> 00cb
FF6D : 39       : RTS
***************************************************************************

FF6E : A6                                Checksum-Byte fr Checksum = FF

FF6F : FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00
FF7F : FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00
FF8F : FF 00 FF 00 FF 00 FF 00 F1 14 00 01 46 00 FF F1
FF9F : 14 00 01 46 7E 0A FF 00 FF 00 FF 00 FF F1 14 00
FFAF : 01 31 00 FF F1 14 00 01 31 7E 0A 00 FF 00 FF 00
FFBF : FF 00 F1 14 00 01 1C 00 FF F1 14 00 01 1C 7E 0A
FFCF : FE 00 DF 00 FF 00 FF F1 1C 00 00 FF 01 02 F1 1C
FFDF : 00 00 FF 7E 81 F3 1C 00 00 FF 01 00 F3 1C 00

FFEE : 00FF     TRAP-Interrupt-Vektor
FFF0 : FEE2     Serial Communication Interrupt-Vektor
FFF2 : F000     Timer Overflow Interrupt-Vektor
FFF4 : FD9D     Timer Output Compare Interrupt-Vektor
FFF6 : F000     Timer Input Capture Interrupt-Vektor
FFF8 : F000     Interrupt Request Vektor
FFFA : F000     Software Interrupt-Vektor
FFFC : F000     NMI-Interrupt-Vektor
FFFE : F000     RESET-Vektor

