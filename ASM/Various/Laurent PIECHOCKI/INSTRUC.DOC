

                         ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
                            CHAPITRE    QUATRE

                         LES INSTRUCTIONS DU 68000

                         ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹



                     *** LES INSTRUCTIONS DU 68000 ***
                     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

- Voil… un chapitre qui est consacr‚ en entier aux diff‚rentes 
  instructions de l'assembleur 68000.

- Maintenant que vous savez, grƒce aux modes d'adressage,atteindre les
  donn‚es en m‚moire, nous allons nous interesser aux instructions qui
  permettent de modifier,d‚placer... donc de se servir des donn‚es.

- Pour chaque instruction, je vous donnerais:
 
  .La syntaxe pour l'instruction et ses op‚randes.
  .Ses effets,son but.
  .Les modes d'adressages autoris‚s pour les op‚randes.
  .L'effet de l'instruction au niveau des registres et notament au 
   niveau du CCR.
  .Et bien sur des exemples d'utilisation...

- De nouvelles notions apparaitront dans les explications conscernant
  les instructions, elles seront d‚taill‚es,expliqu‚es et comment‚es.



                           ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

                    *** LES INSTRUCTIONS DU 68000 ***
                    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     
   MOVE       source,destination   :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   Les 3 tailles d'op‚rations sont autoris‚es pour cette instruction,
   La taille [.W] est prise par d‚faut.
   
   L'op‚rande 'source' est copi‚e (et demeure inchang‚e) … (dans) 
   l'op‚rande 'destination'

   Les modes d'adressages autoris‚s pour l'op‚rande source sont:
                                                    ¹¹¹¹¹¹
     dn       (registres de donn‚es)
     an       (registres d'adresses)
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

   Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                   ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


   Au niveau du CCR: Seuls les Bits N et Z sont affect‚s 
                ¹¹¹


   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
     Move.l    #1456701,d0

     On pose le L-M ‚gal … 1256701 dans le registre de donn‚e d0

       

   MOVEQ        #D,dn       
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   L'op‚rande source est une donn‚e imm‚diate,sign‚e,contenue dans un
   octet (-128<= D <128)
   L'op‚rande destination est un registre de donn‚e

   On copie la donn‚e source,sign‚e,contenue dans un octet dans un 
   registre de donn‚e aprŠs avoir TENDU LE SIGNE DU REGISTRE:
   
      C.….d. que la donn‚e est plac‚e dans l'octet de poids faible du 
   registre Dn et que le MSB a ‚t‚ ‚tendu (copi‚) jusqu'au 31ø bit du
   registre,ceci afin que le registre de donn‚e soit affect‚ en entier
   par le  'chargement' de la donn‚e et que le signe de la donn‚e soit
   conserv‚.

   L'op‚rande source admet donc le mode d'adressage:
              ¹¹¹¹¹¹
   #BBB   ( -128<= BBB <128 )

   L'op‚rande destination admet est un registre de donn‚e.
              ¹¹¹¹¹¹¹¹¹¹¹              ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹


   Seuls les Bits N et Z du CCR sont affect‚s par cette instruction
                            ¹¹¹  

   Exemple:
   ¹¹¹¹¹¹¹¹
   MOVEQ  #%01100101,d0

   On pose l'octet 01100101 dans d0:

   d0= :          00000000000000000000000001100101
          Bit nr 31                       .
                  .                       .    
             MSB (0) <---------------MSB (0)   

   Il y a eu extension du signe de d0 (ici MSB=0 car 01100101>0)

   NB:Moveq se distingue de Move par une plus grande rapidit‚, mais
   ¹¹ n'oubliez pas les conditions d'utilisation de Moveq !



   MOVEA      source,an   :(.W),(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   L'instruction Movea complŠte l'instruction Move car elle accepte un
   Registre d'Adresse pour op‚rande destination.
   
   Sur la plupart des assembleurs,la syntaxe MOVE  source,an est
   accept‚e et automatiquement traduite par  MOVEA source,an

   Si l'op‚rande source utilise la taille d'op‚rantion .W, il y a
   extension du signe du registre d'adresse an.
   La taille .B n'est pas autoris‚e pour MOVEA.


   Les modes d'adressage autoris‚s pour l'op‚rande source sont:
                                                   ¹¹¹¹¹¹
     dn
     an  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)


   L'op‚rande destination est un registre d'adresse
              ¹¹¹¹¹¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   L'instruction MOVEA n'influence pas le CCR.
                                          ¹¹¹

   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVEA.L   #etiq,a5

   Le registre d'adresse a5 est charg‚ avec l'adresse point‚e par le
   label 'etiq'



   LEA    source,an      : [.L]
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
                   
   Cette instruction se lit:'Load Effective Address'

   Seule la taille d'op‚ration .L est possible,elle est d'ailleurs prise
   par d‚faut.

   Elle permet de poser l'adresse point‚e par l'op‚rande source dans
   un registre d'adresse.

   L'op‚rande source admet les modes d'adressage:
              ¹¹¹¹¹¹

     BBBB
     BB     
     (an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

   L'op‚rande destination est un registre d'adresse
              ¹¹¹¹¹¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹             
   
   L'instruction LEA n'influence pas le CCR
                                        ¹¹¹

   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   LEA    etiq,a2

   On pose l'adresse point‚e par le label 'etiq' dans le registre
   d'adresse a2.
   En fait,cela peut aussi se faire avec MOVE.L  #etiq,a2 ,  mais
   c'est moins rapide.         



   CLR    destination    :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Cette instruction se lit: 'CLeaR  destination'  

   Et permet de mettre … 0 tous les bits de l'op‚rande destination.
   
   Elle admet les 3 tailles d'op‚ration.

   Les modes d'adressages autoris‚s pour l'op‚rande destination sont:      
                                                    ¹¹¹¹¹¹¹¹¹¹¹
     dn 
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

       
   Le bit Z du CCR est mis … 1 , les Bits N,V,C … 0.
               ¹¹¹

   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   CLR.W   D0

   Les 16 Bits du MOT de poids faible de d0 sont mis … 0.             


   NEG       destination     : (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  

   Permet d'effectuer la NEGation de l'op‚rande destination.
 
   Les 3 tailles d'op‚ration sont possibles.

   L'op‚rande destination est soustraite de 0, ceci a pour effet de
   changer le signe de l'op‚rande:Les Bits qui ‚taient activ‚s sont
   ‚tteints et les Bits qui ‚taient etteints sont activ‚s.
   
   L'op‚rande destination admet les modes d'adressage suivants:
              ¹¹¹¹¹¹¹¹¹¹¹
     dn       
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


   Tous les Bits du CCR sont affect‚s par la NEGation en fonction du
   r‚sultat obtenu. ¹¹¹


   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVE   #%1010101010101010,d0
   NEG.W  d0

   On obtient le MOT %0101010101010101 dans d0



   EXT       dn           : [.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹

   Permet d'obtenir une EXTension du signe de l'op‚rande destination.

   La taille .B n'est pas autoris‚e.

   Dans le cas de EXT.W  dn:
   Le MSB (bit nø7) du registre de donn‚e est ‚tendu jusqu'au bit nø15   
   
   Dans le cas de EXT.L  dn:
   Le MSB (bit nø15) du registre de donn‚e est ‚tendu jusqu'au bit nø31

   Ceci permet de prolonger le contenu du registre de donn‚e sur un MOT
   ou sur un L-M en pr‚servant le signe de ce registre. 


   L'op‚rande destination ne peut Štre qu'un registre de donn‚e.
              ¹¹¹¹¹¹¹¹¹¹¹                    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Les Bits N et Z du CCR sont positionn‚s suivant le r‚sultat de
   l'op‚rantion.      ¹¹¹


   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVE.W   #%0001011001010010,d5
   EXT.L    d5

   Le MSB (ici 0) sera copi‚ du bit nø16 au bit nø31, d5 contiendra donc
   un L-M :%00000000000000000001011001010010 et non plus un MOT.


   EXG     rn,rm
   ¹¹¹¹¹¹¹¹¹¹¹¹¹

   EXG permet d'‚changer le contenu de 2 registres dn ou an.

   La taille .L est prise par d‚faut

   L'op‚rande source est un registre de donn‚e ou d'adresse
              ¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹          
   L'op‚rande destination est un registre de donn‚e ou d'adresse
              ¹¹¹¹¹¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹

   Le CCR n'est pas affect‚ par EXG
      ¹¹¹
   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVE.L   #$FF,d0
   MOVE.L   #$A2,d1
   EXG      d1,d0

   D0 contiendra le L-M $A2 et d1 le L-M $FF.



   SWAP     dn  
   ¹¹¹¹¹¹¹¹¹¹¹

   Echange les 2 MOTS du L-M contenu dans le registre de donn‚e dn

   L'op‚rande destination doit ˆtre un registre de donn‚e.
              ¹¹¹¹¹¹¹¹¹¹¹              ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹                     
   Les Bits N et Z du CCR sont affect‚s en fonction du r‚sultat obtenu.
                      ¹¹¹

   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVE.L     #%11111111111111110000000000000000,d3
   SWAP       d3

   D3 contiendra le L-M :%00000000000000001111111111111111

   Remarquez que le signe du registre dn n'est pas conserv‚ et qu'il
   peut ˆtre chang‚ !




   ADD      dn,destination     :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
ou

   ADD         source,dn       :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  

   Ajoute l'op‚rande source DANS l'op‚rande destination ( l'op‚rande
   source est donc inchag‚e et le r‚sultat se trouve dans l'op‚rande
   destination! )

   Les 3 tailles d'op‚ration sont accept‚es.


   Les modes d'adressage autoris‚s pour l'op‚rande source si ADD
   s'‚crit: ADD.x  source,dn  sont:                ¹¹¹¹¹¹          
            ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
     dn
     an  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Si l'op‚rande source est un registre d'adresse, la taille .B n'est
    pas autoris‚e,si la taille est .W,il y a EXTension du signe de an.


   Les modes d'adressage autoris‚s pour l'op‚rande destination si ADD
   s'‚crit ADD.x  dn,destination sont:             ¹¹¹¹¹¹¹¹¹¹¹    
           ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 

     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


 
    Tous le Bits du CCR peuvent r‚agir … l'op‚ration ADD en fonction
    du r‚sultat obtenu.

    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    ADD.B  d0,d1
 
    L'octet de poids faible du registre de donn‚e d0 est ajout‚ a
    l'octet de poids faible de d1,le r‚sultat est dans d1:
    d0=d0, d1=d1+d0



    ADDI     #BBB,destination     :(.B),[.W],(.L)
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    ADDI se lit: 'ADD Immediate'

    Les 3 tailles d'op‚ration sont autoris‚es.
 
    La donn‚e imm‚diate source est ajout‚ … l'op‚rande destination.
              ¹¹¹¹¹¹¹¹¹ ¹¹¹¹¹¹
    Les modes d'adressage qui sont autoris‚s pour l'op‚rande 
    destination sont:
    ¹¹¹¹¹¹¹¹¹¹¹
    
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


    Les 5 codes du CCR sont affect‚s par ADDI
                   ¹¹¹      
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    ADDI.W   #12,(a0)

    On ajoute le mot 12 au mot point‚ par le registre d'adresse a0.



    ADDQ     #BBB,destination   :(.B),[.L],(.L)      
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    La donn‚e imm‚diate non sign‚e #BBB est ajout‚e DANS l'op‚rande
    destination.

    Il faut obligatoirement que  1<= #BBB <=8

    L'op‚rande destination admet les modes d'adressage:

     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

     Si l'op‚rande destination est un registre d'adresse an,la taille
     .B est interdite,si on utilise la taille .W il y aura EXTension
     du signe de an sur un L-M.


     Les 5 Bits du CCR sont modifi‚s par ADDQ en fonction du r‚sultat.
                   ¹¹¹

     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
     ADDQ.W   #3,d0

     Ajoute le mot 3 au mot de poids faible de d0.
     
     Remarque:ADDQ est plus rapide que ADDI, ceci explique le nom
     ¹¹¹¹¹¹¹¹ de l'instruction:ADD Quick
              Attention tout de mˆme … ce que 1<= #BBB <=8

   
  
   ADDA       source,an     :(.W),(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Cette instructon se lit: 'ADD Adress'

   Elle complŠte ADD car ici l'op‚rande destination est un registre
   d'adresse.                           ¹¹¹¹¹¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹
   ¹¹¹¹¹¹¹¹¹
   Seuls les tailles .W et .L sont autoris‚es.

   ADDA ajoute l'op‚rande source au registre d'adresse an.

   Les modes d'adressages autoris‚s pour l'op‚rande source sont:
                                                    ¹¹¹¹¹¹
     dn  
     an  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)
     
   Le CCR n'est pas modifi‚ par ADDA
      ¹¹¹
  
   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   ADDA.L    #2,a0

   a0 est incr‚ment‚ de 2 unit‚s.



   SUB       dn,destination     :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
ou

   SUB            source,dn     :(.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  

   Retranche l'op‚rande source DANS l'op‚rande destination ( l'op‚rande
   source est donc inchag‚e et le r‚sultat se trouve dans l'op‚rande
   destination! )

   Les 3 tailles d'op‚ration sont accept‚es.


   Les modes d'adressage autoris‚s pour l'op‚rande source si SUB
   s'‚crit: SUB.x  source,dn  sont:                ¹¹¹¹¹¹          
            ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
     dn
     an  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Si l'op‚rande source est un registre d'adresse, la taille .B n'est
    pas autoris‚e,si la taille est .W,il y a EXTension du signe de an.


   Les modes d'adressage autoris‚s pour l'op‚rande destination si SUB
   s'‚crit SUB.x  dn,destination sont:             ¹¹¹¹¹¹¹¹¹¹¹    
           ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 

     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


 
    Tous le Bits du CCR peuvent r‚agir … l'op‚ration SUB en fonction
    du r‚sultat obtenu.

    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    SUB.B  d0,d1
 
    L'octet de poids faible du registre de donn‚e d0 est retranch‚ a
    l'octet de poids faible de d1,le r‚sultat est dans d1:
    d0=d0, d1=d1-d0



    SUBI     #BBB,destination     :(.B),[.W],(.L)
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    SUBI se lit: 'SUBtract Immediate'

    Les 3 tailles d'op‚ration sont autoris‚es.
 
    La donn‚e imm‚diate source est retranch‚e … l'op‚rande destination.
              ¹¹¹¹¹¹¹¹¹ ¹¹¹¹¹¹
    Les modes d'adressage qui sont autoris‚s pour l'op‚rande 
    destination sont:
    ¹¹¹¹¹¹¹¹¹¹¹
    
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


    Les 5 codes du CCR sont affect‚s par SUBI
                   ¹¹¹      
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    SUBI.W   #12,(a0)

    On retranche le mot 12 au mot point‚ par le registre d'adresse a0.


    SUBQ     #BBB,destination   :(.B),[.L],(.L)      
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    La donn‚e imm‚diate non sign‚e #BBB est retranch‚e DANS l'op‚rande
    destination.

    Il faut obligatoirement que  1<= #BBB <=8

    L'op‚rande destination admet les modes d'adressage:
               ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

     Si l'op‚rande destination est un registre d'adresse an,la taille
     .B est interdite,si on utilise la taille .W il y aurra EXTension
     du signe de an sur un L-M.


     Les 5 Bits du CCR sont modifi‚s par SUBQ en fonction du r‚sultat.
                   ¹¹¹

     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
     SUBQ.W   #3,d0

     Retranche le mot 3 au mot de poids faible de d0.
     
     Remarque:SUBQ est plus rapide que SUBI, ceci explique le nom
     ¹¹¹¹¹¹¹¹ de l'instruction:SUBtarct Quick
              Attention tout de mˆme … ce que 1<= #BBB <=8

   
  
   SUBA       source,an     :(.W),(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Cette instructon se lit: 'SUBtract Adress'

   Elle complŠte SUB car ici l'op‚rande destination est un registre
   d'adresse.                           ¹¹¹¹¹¹¹¹¹¹¹        ¹¹¹¹¹¹¹¹
   ¹¹¹¹¹¹¹¹¹
   Seuls les tailles .W et .L sont autoris‚es.

   SUBA ajoute l'op‚rande source au registre d'adresse an.

   Les modes d'adressages autoris‚s pour l'op‚rande source sont:
                                                    ¹¹¹¹¹¹
     dn  
     an  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)
     
   Le CCR n'est pas modifi‚ par SUBA
      ¹¹¹
  
   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   SUBA.L    #2,a0

   a0 est d‚cr‚ment‚ de 2 unit‚s (comme avec .W, -(a0) ).


   
   MULS    source,dn    
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Permet une MULtiplication Sign‚e de l'op‚rande source DANS le 
   registre de donn‚e dn.

   L'entier relatif 'source' est ‚tendu sur 16 bits et il est multi-
   pli‚ par le MOT de poids faible de dn.   ¹¹¹¹¹¹¹
               ¹¹¹
   Le r‚sultat est dans dn et c'est un L-M, entier relatif SIGN.
                                        ¹¹¹                ¹¹¹¹¹¹
   L'op‚rande source admet les modes d'adressage:
              ¹¹¹¹¹¹
     dn  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Les bits V et C du CCR sont mis … 0,les bits N,Z sont positionn‚s
    suivant le r‚sultat, X n'est pas affect‚.

    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    MOVE.W     #3,D0
    MULS       #-5,D0

    D0 contiendra le L-M ‚gal … 3*(-5)=-15


  
   MULU    source,dn    
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Permet une MULtiplication non sign‚e (Unsigned) de l'op‚rande source
   DANS le registre de donn‚e dn.

   L'entier relatif 'source' est ‚tendu sur 16 bits et il est multi-
   pli‚ par le MOT de poids faible de dn.   ¹¹¹¹¹¹¹
               ¹¹¹
   Le r‚sultat est dans dn et c'est un L-M,entier relatif NON SIGN.
                                       ¹¹¹                ¹¹¹¹¹¹¹¹¹¹
   L'op‚rande source admet les modes d'adressage:
              ¹¹¹¹¹¹
     dn  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Les bits V et C du CCR sont mis … 0,les bits N,Z sont positionn‚s
    suivant le r‚sultat, X n'est pas affect‚.

    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    MOVE.W   #4,d2     
    MULU     #3,d2

    D2 contiendra le L-M ‚gal … 4*3=12

   
   DIVS    source,dn    
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Permet une Division Sign‚e du registre de donn‚e dn par l'entier 
   relatif ‚tendu sur 1 mot 'source'.

   L'entier relatif 'source' est ‚tendu sur 16 bits et c'est le diviseur
   du registre de donn‚e dn.                ¹¹¹¹¹¹¹
      
   Le r‚sultat est dans dn et c'est un L-M, entier relatif SIGN tel que:
                                       ¹¹¹                 ¹¹¹¹¹
   Le quotient occupe le mot de poids faible de dn.
      ¹¹¹¹¹¹¹¹         
   Le reste (si il y en a) a le signe du dividende et occupe le mot de 
      ¹¹¹¹¹  
   poids fort de dn.

   L'op‚rande source admet les modes d'adressage:
              ¹¹¹¹¹¹
     dn  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Le bit C du CCR est mis … 0,les bits N,Z,V sont positionn‚s suivant
    le r‚sultat, le bit X n'est pas affect‚.

    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹  
    MOVE.W   #4,D2     
    MOVE.W   #12,D0
    DIVS     D2,D0
    MOVE.L   D0,RES

    BSS

RES DS.W     1
QUO DS.W     1

    Le mot point‚ par QUO contient 3 et le mot point‚ par RES contient
    0 car il n'y a pas de reste.

    NB:.Pour atteindre facilement les 2 mots (reste/quotient) du registre
    ¹¹  de donn‚e destination, on peut par exemple utiliser l'instruction
        'SWAP dn' vue pr‚c‚dement.

       .Si on pratique une division par 0, ceci entraine une proc‚dure
        d'exception et interromps l'execution du programme !
        (J'expliquerai plus tard ce que sont les proc‚dures d'exception.)

       
   DIVU    source,dn    
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

   Permet une Division NON SIGNE du registre de donn‚e dn par l'entier 
   relatif ‚tendu sur 1 mot 'source'.

   L'entier relatif 'source' est ‚tendu sur 16 bits et c'est le diviseur
   du registre de donn‚e dn.                ¹¹¹¹¹¹¹
     
   Le r‚sultat est dans dn et c'est un L-M, entier relatif NON SIGN
   tel que:                            ¹¹¹                 ¹¹¹¹¹¹¹¹¹
  
   Le quotient occupe le mot de poids faible de dn.
      ¹¹¹¹¹¹¹¹         
   Le reste (si il y en a) occupe le mot de poids fort de dn.
      ¹¹¹¹¹

   L'op‚rande source admet les modes d'adressage:
              ¹¹¹¹¹¹
     dn  
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Le bit C du CCR est mis … 0,les bits N,Z,V sont positionn‚s suivant
    le r‚sultat, le bit X n'est pas affect‚.


    NB:.Il faut bien veiller … ce que les donn‚es ('source' et 'dn') sont
    ¹¹  positives et … ce que l'op‚rande source soit diff‚rente de 0 !

       .Les Instructions qui oppŠrent sur des donnn‚es non sign‚es sont
        plus rapides que leurs instructions compl‚mentaires qui opŠrent
        sur des donn‚es sign‚es (MULS/MULU, DIVS/DIVU) , c'est l… leur
        unique int‚rŠt.

        Les instructions MULS et DIVS peuvent bien entendu aussi oppŠrer
        sur des instructions positives.


   CLR      destination  (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   L'instruction CLR permet d'‚teindre tous les BITS de l'op‚rande  
   destination (CLeaR).
   
   Les 3 tailles d'op‚rantion sont possibles.

   Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                   ¹¹¹¹¹¹¹¹¹¹¹
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


   Le bit Z du CCR est mis … 1, les bits N,V,C … 0 , le bit X n'est pas
   affect‚.    ¹¹¹

   Exemple d'utilisation:
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   MOVE.W    #%1111011101110110,d0
   CLR.B     d0
 
   L'octet de poids faible de d0 est mis … 0, d0 contiendra donc le mot:
   %1111011100000000 .

   NB: .L'instruction CLR.x est logiquement ‚quivalente … l'instruction 
   ¹¹¹  'MOVEQ.x  #0,destination' mais est curieusement moins rapide !
   



   AND  source,dn       (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   ou 

   AND  dn,destination  (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
  
   Permet d'effectuer un AND (et) logique entre ses deux op‚randes.   

   C.….d qu'on ajoute les 2 op‚randes cod‚es en Binaire en se fixant
   une rŠgle selon laquelle:

   1+1 donne 1
   1+0 donne 0
   0+0 donne 0
   0+1 donne 0

   Et cela pour chacun des bits des 2 op‚randes de l'instruction.
   
   Exemple:  MOVE.B     #%11101011,d0;  %11101011
   ¹¹¹¹¹¹¹   MOVE.B     #%10101000,d1;  %10101000
             AND.B      d0,d1        ;   ||||||||
                                         ||||||||
                                         ''''''''
             on obtient l'octet:        %10101000

   Pour la premiŠre syntaxe possible de AND, les modes d'adressage 
   possibles pour l'op‚rande 'source' sont:
                              ¹¹¹¹¹¹
     dn      
     an
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

   Pour la seconde forme de AND,les modes d'adressage autoris‚s pour 
   l'op‚rande 'destination' sont:
               ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

    
    Seuls les bits N et Z du CCR sont affect‚s par cette instruction.         
                             ¹¹¹                             


   OR   source,dn       (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹
   ou 

   OR   dn,destination  (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
  
   Permet d'effectuer un OR (ou) logique entre ses deux op‚randes.   

   C.….d qu'on ajoute les 2 op‚randes cod‚es en Binaire en se fixant
   une rŠgle selon laquelle:

   1+1 donne 1
   1+0 donne 1
   0+1 donne 1
   0+0 donne 0

   Et cela pour chacun des bits des 2 op‚randes de l'instruction.
   
   Exemple:  MOVE.B     #%11101011,d0;  %11101011
   ¹¹¹¹¹¹¹   MOVE.B     #%10101000,d1;  %10101000
             OR.B      d0,d1         ;   ||||||||
                                         ||||||||
                                         ''''''''
             on obtient l'octet:        %11101011

   Pour la premiŠre syntaxe possible de OR, les modes d'adressage 
   possibles pour l'op‚rande 'source' sont:
                              ¹¹¹¹¹¹
     dn      
     an
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

   Pour la seconde forme de OR,les modes d'adressage autoris‚s pour 
   l'op‚rande 'destination' sont:
               ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

    
    Seuls les bits N et Z du CCR sont affect‚s par cette instruction.         
                             ¹¹¹                             
        


   EOR  dn,destination  (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
  
   Permet d'effectuer un EOR (ou exclusif) logique entre ses deux 
   op‚randes.   

   C.….d qu'on ajoute les 2 op‚randes cod‚es en Binaire en se fixant
   une rŠgle selon laquelle:

   1+1 donne 0
   0+0 donne 0
   0+1 donne 1
   1+0 donne 1

   Et cela pour chacun des bits des 2 op‚randes de l'instruction.
   
   Exemple:  MOVE.B     #%11101011,d0;  %11101011
   ¹¹¹¹¹¹¹   MOVE.B     #%10101000,d1;  %10101000
             EOR.B      d0,d1        ;   ||||||||
                                         ||||||||
                                         ''''''''
             on obtient l'octet:        %01000011


   Les modes d'adressage autoris‚s pour l'op‚rande 'destination' sont:
                                                    ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

    
    Seuls les bits N et Z du CCR sont affect‚s par cette instruction.         
                             ¹¹¹                             


   NOT  dn,destination  (.B),[.W],(.L)
   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
  
   Permet d'effectuer un NOT (n‚gation) logique.   

   NOT calcule le compl‚ment … 1 d'un nombre. (NEG le compl‚ment … 2)
    
   Les modes d'adressage possibles pour l'op‚rande 'source' sont:
                                                    ¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

    
    Seuls les bits N et Z du CCR sont affect‚s par cette instruction.         
                             ¹¹¹                             

    
    
    Les instructions  AND,OR,EOR sont complŠt‚es par les 3 instructions
    logiques imm‚diates:

    ANDI    #BBB,destination (.B),[.W],(.L)
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    ORI     #BBB,destination (.B),[.W],(.L)
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    EORI    #BBB,destination (.B),[.W],(.L)
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
    .Ces instructions ont un  r“le commun … leurs instructions
     compl‚mentaires mais elles admettent une donn‚e imm‚diate 
     comme op‚rande source.                   ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
                    ¹¹¹¹¹¹
     L'op‚randes destination admet les modes d'adressage:
                 ¹¹¹¹¹¹¹¹¹¹¹
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
    
    Seuls les bits N et Z du CCR sont affect‚s par ces 3 instructions.         
                             ¹¹¹ 
    NB: L'op‚rande destination peut aussi ˆtre: 'SR' ou 'CCR'.
    ¹¹  Mais dans le cas o— l'op‚rande destination est CCR, l'exectution 
        de ces instruction n‚cessitent qu'on soit en MODE SUPERVISEUR !
                                                    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
        Exemple:  ANDI.B  #%11111011,sr
        ¹¹¹¹¹¹¹  
        met … 0 le bit Z du SR sans changer les autres bits du SR. 
        
        
        Je r‚pŠte: ATTENTION! 
        Le CCR ne peut Štre atteint qu'en MODE SUPERVISEUR , sinon ceci 
        provoquerait l'execution d'une proc‚dure d'exception et l'arrˆt 
        du programme.
        Avec les modes d'adressage SR ou CCR ,les instructions ANDI, 
        ORI,EORI sont donc des instructions qui n‚cessitent que l'on 
        soit un mode superviseur si l'on modifie le CCR ,c'est l'unique
        maniŠre d'atteindre le CCR.
        Ce sont donc des INSTRUCTIONS PRIVILGIES dans ce cas.
        Le SR est par contre aussi disponible en mode utilisateur.
       


    MOVE     sr,destination  
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    Sauve le registre d'‚tat SR … l'adresse destination.

    Le contenu du CCR n'est pase affect‚ par l'instruction.
                  ¹¹¹  
    Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                    ¹¹¹¹¹¹¹¹¹¹¹   
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
     MOVE   sr,dest

     BSS

dest DS.W   1

     le mot point‚ par 'dest' contiendra le SR.



    MOVE     source,sr  
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    Restaure le CCR contenu dans (…) l'op‚rande source.

    Le CCR est charg‚ avec sa nouvelle valeur, le SR n'est pas affect‚.
       ¹¹¹                                        ¹¹
    Les modes d'adressage autoris‚s pour l'op‚rande source sont:
                                                    ¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
     MOVE   sr,dest             ;sauve le SR avec Z=0
     CLR    d0                  ;ici le bit Z du CCR est mis … 1 (CLeaR)
     MOVE   aaa,ccr             ;on recharge le CCR de 'aaa': Z=0   
    
     BSS

dest DS.B   1  ;SR
aaa  DS.B   1  ;CCR
   
     le CCR est charg‚ avec le mot point‚ par 'aaa'.


     
     TST      destination    (.B),[.W],(.L)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     TeST compare l'op‚rande destination … 0 et modifie les bits du
     CCR en cons‚quence.
     ¹¹¹
     Les 3 tailles d'op‚ration sont possibles.

     Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                     ¹¹¹¹¹¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)

    Les bits N,Z du CCR sont affect‚s en fonction du r‚sultat de la
    comparaison ,Les bits V et C sont mis … 0 ,X n'est pas affect‚.
         
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 
    MOVE.W     #5,d0     ;d0=5
    TST.W      d0        ;le bit Z du CCR est mis … 0 car d0=5
    SUB        #5,d0     ;d0=5-5=0
    TST.W      d0        ;le bit Z du CCR est mis … 1 car d0=0
  
     

     CMP      source,destination    (.B),[.W],(.L)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     CoMPare l'op‚rande destination … l'op‚rande source en effectuant la
     soustraction 'destination' - 'source' et modifie les bits du CCR en
     cons‚quence.                                                 ¹¹¹
                                                            
     Les 3 tailles d'op‚ration sont possibles.

     Les modes d'adressage autoris‚s pour l'op‚rande source sont:
                                                     ¹¹¹¹¹¹
     dn
     an        (taille .B interdite)
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)

    Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                    ¹¹¹¹¹¹¹¹¹¹¹
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


    Les bits N,Z,V,C du CCR sont affect‚s en fonction du r‚sultat de 
    la comparaison ,Le bit X n'est pas affect‚.
         
    Exemple d'utlisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 
    MOVE.B     #2,d0
    MOVE.B     #98,d1
    CMP.B      d0,d1

    L'instruction CMP sera utilis‚e avec les instructions du type B**
    et DB** que nous ‚tudierons plus loin.



     CMPI      #BBB,destination    (.B),[.W],(.L)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     CoMPare l'op‚rande destination … l'op‚rande source imm‚diate en
     effectuant la soustraction  'destination' - 'source' et modifie 
     les bits du CCR en cons‚quence.
                 ¹¹¹   
     Les 3 tailles d'op‚ration sont possibles.

     Les modes d'adressage autoris‚s pour l'op‚rande destination sont:
                                                     ¹¹¹¹¹¹¹¹¹¹¹
     dn
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


    Les bits N,Z,V,C du CCR sont affect‚s en fonction du r‚sultat de 
    la comparaison ,Le bit X n'est pas affect‚.
         
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 
    CMPI.L   #3,d3

    Compare le contenu du registre de donn‚e d3 … 3.



     CMPA      source,an    [.W],(.L)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     CoMPare le registre d'adresse 'an' … l'op‚rande source en effectuant
     la soustraction  'an' - 'source' et modifie les bits du CCR en con-
     s‚quence.                                               ¹¹¹

     Seules les tailles d'op‚ration .W et .L sont possibles.

     Les modes d'adressage autoris‚s pour l'op‚rande source sont:
                                                     ¹¹¹¹¹¹
     dn
     an
     BBBB
     BB
     #BBB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)
     d(pc)
     d(pc,rn)


    Les bits N,Z,V,C du CCR sont affect‚s en fonction du r‚sultat de 
    la comparaison ,Le bit X n'est pas affect‚.
         
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 
    CMPA.L   a2,a3

    Compare le contenu du registre d'adresse a3 au contenu du regitre
    d'adresse a2.


     CMPM       (an)+,(am)+    (.B),[.W],(.L)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     CoMPare l'op‚rande destination … l'op‚rande source en effectuant
     la soustraction  'destination' - 'source' et modifie les bits du
     CCR en cons‚quence.

     Les 3 tailles d'op‚ration sont possibles.

     Le mode d'adressage autoris‚ pour l'op‚rande destination et pour
     l'op‚rande destination est le mode POSTINCRMENT.
                                        ¹¹¹¹¹¹¹¹¹¹¹¹¹¹                                                   
     Les bits N,Z,V,C du CCR sont affect‚s en fonction du r‚sultat de 
     la comparaison ,Le bit X n'est pas affect‚.

         
     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
     LEA      TAB,a1     ;pose l'adresse de 'TAB' dans a1
     LEA      BAT,a2     ;et l'adresse de 'BAT' dans a2
     MOVE     #5,d3

BBB  CMPM.B   (a1)+,(a2)+     ;CMPM l'octet point‚ par a1 … l'octet point‚
                              ;par a2 et incr‚mente d'une unit‚ les 2
                              ;registres d'adresses.
     DBF      d3,BBB          ;boucle 6 fois

     DATA                     ;table des donn‚es (octets)     

TAB  DC.B      1,2,3,4,5,6
BAT  DC.B      6,5,4,3,2,1




     B**     label      (Branch & Condition Code)
     ¹¹¹¹¹¹¹¹¹¹¹¹¹
     
     L'instruction admet diff‚rents Codes Condition (**) qui peuvent
     changer l'action de B**. 

     B** oppŠre un saut … l'adresse point‚e par le 'label' si le
     code condition demand‚ est justifi‚ aprŠs une CoMParaison ,
     sinon le programme continue normalement.


     Les ** sont:

     B**         Si A et B sont SIGNS            | Sinon, syntaxe:
     ---------------------------------------------+----------------
     Bgt  si   A>B  (Greater Than)                | Bbi  (Higher)
     Beq  si   A=B  (EQual)                       | Beq  (EQual)   
     Blt  si   A<B  (Less Than)                   | Bcs  (inf‚rieur)   
     Bne  si   A est diff‚rent de B   (Not Equal) | Bne  (Not Equal)   
     Bge  si   A >= B (Greater or Equal)          | Bcc  (sup. ou ‚gal)   
     Ble  si   A <= B (Less or Equal)             | Bls  (inf. ou ‚gal)
                                                  

     L'instruction B** teste en fait les bits du CCR:

     Beq test si le bit Z du CCR est … 1 (CPM soustrait les op‚randes
                                          pour les tester)


     On retrouve aussi les Codes de condition qui ne tiennent que compte
     de certains bits du CCR et non pas du r‚sultat d'une comparaison :
     
     Bmi  si le bit N du CCR est … 1  
          (Donc N‚gatif)

     Bpl  si le bit N du CCR est nul OU si le bit Z du CCR est … 1 
          (Donc Positif ou nul)
 
     Bvc  si le bit V du CCR est nul 
          (Donc si il n'y a pas d‚bordement)

     Bvs  si le bit V du CCR est … 1
          (Donc si il y a d‚bordement)

     Bcc  si le bit C du CCR est … 1

     Bcs  si le bit C du CCR est nul


     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
     MOVE.W    #4,d3     ;d3=4
     MOVE.W    dat,d0    ;d0=-20
     ADD       d3,d0     ;d0=-20+4=-16
     CMPI      #4,d0     ;Compare -16 … 4
     BEQ       egal      ;Si c'est Šgal (Z=1) on saute en 'egal'
     BMI       negatif   ;Si c'est n‚gatif (N=1) on saute en 'negatif'

     DATA

dat  DC.W      -20 


     Dans notre exemple, le programme sautera en 'negatif', ceci serait
     le cas mˆme si il n'y avait pas de 'CMPI #4,d0' car avec Bmi, seul
     le bit N du CCR intervient, il n'y a pas besoin de comparaison,
     contrairement … Beq.

     NB: Le saut au label destination s'effectue par le chargement de
     ¹¹  la valeur du PC … ce label dans le PC actuel.




     DB**    dn,label
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

     Permet d'effectuer une boucle:

     Le nombre de passages est contenu dans le registre de donn‚e dn.
     L'adresse a laquelle le saut pour la boucle doit d'effectuer est
     un label.
     L'instruction admet aussi diff‚rents codes condition (**) qui 
     peuvent op‚rer un d‚branchement de la boucle si ils sont
     v‚rifi‚s.

     Les Codes condition possibles sont les mˆmes qu'avec l'instruction
     B** .

     DB** teste d'abord la condition ** ,si celle-ci est v‚rifi‚e il y
     a d‚branchement de la boucle et le programme continue … l'instruc-
     tion suivante, sinon , le registre dn est d‚cr‚ment‚ d'1:
     Si dn vaut -1 il y a arrŠt de la boucle et le programme continue …
     la prochaine instruction.
     Si dn est positif ou nul, il s'oppŠre un saut … l'adresse point‚e
     par le label.

     Le CCR n'est pas modifi‚ par DB**
        ¹¹¹

     NB:DB** admet aussi les codes condition suivant:
     ¹¹
        .DBf  = toujours faux, il n'y a pas de comparaison ou de test
 
        .DBt  = toujours vrai, idem

     Exemple d'utilisation:
     ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
     LEA       dat,a0    ;adresse de 'dat' dans a0
     MOVE      #7,d1     ;7 dans d1

boo  MOVE.W    (a0)+,d2  ;pose le MOT point‚ par a0 dans le MOT de poids
                         ;faible de d2 en mode postincr‚ment‚
     DBMI      d1,boo    ;teste si N=1 (mi), d‚cr‚mente d1 et saute en
                         ;'boo' si d1 est positif ou nul.
     MOVE.W    d2,res    ;pose le MOT de poids faible de d2 en 'res'

     DATA

dat  DC.W      1,5,486,0,-2,0,4,8,100,20,5   ;11 mots
 
     BSS

res  DS.W      1                        ;r‚serve 1 mot en 'res'

     END

     La condition MI (N=1) a ‚t‚ v‚rifi‚e au bout de 5 passages en 'boo',
     il y a eu d‚branchement de la boucle avant l'execution des 8 pass-
     ages pr‚vus car on a pos‚ le MOT -2 dans d2: Ceci avait pour effet
     de mettre le bit N du CCR … 1 et par l… mŠme de sortir de la boucle
     car la condition MI a ‚t‚ v‚rifi‚e.
 
     A la fin du programme: d2=-2, a0 pointe le mot ‚gal … 0, d1=3 
     et 'res' pointe sur le mot ‚gal … -2




    S**    Destination
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹

    L'instruction S** admet elle aussi les diff‚rents Codes condition.

    Elle teste si la condition ** est v‚rifi‚e.

    Si elle s'avŠre vraie, l'OCTET qui se trouve … l'adresse point‚e 
    par l'op‚rande destination est mis … -1 (soit $FF ou %11111111)

    Si elle s'avŠre fausse, l'OCTET est mis … 0 ($00 ou %00000000)

    Il faudra bien entendu r‚serv‚ cet Octet ! (avec DS.B 1 par exp)

    Les modes d'adressage possibles pour l'op‚rande destination sont:
                                                    ¹¹¹¹¹¹¹¹¹¹¹

     dn
     an
     BBBB
     BB
     (an)
     (an)+
     -(an)
     d(an)
     d(an,rn)


    Le CCR n'est pas affect‚ par S**
       ¹¹¹
 
    Exemple d'utilisation:
    ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹ 
     MOVE      #3,d0     ;mot 3 dans d0
     MOVE      #3,d1     ;mot 3 dans d1
     CMP.W     d0,d1     ;compare les mots de poids faible de d1 et d0
     SEQ       res       ;Si c'est Egal:met L'octet de 'res' … -1 sinon
                         ;met le … 0 (ici d1=d0 on le met donc … -1)
     TST.B     res       ;Compare loctet de 'res' … 0 (0=faux pour S**)
     BEQ       fin       ;si il est ‚gal … 0:va en 'fin'
     BNE       egal      ;sinon (Not Equal) va en 'egal'

     BSS

res  DS.W      1         ;l'octet pour S**

     END

     Dans notre exemple: Le programme va sauter en 'egal'.


          
     
                        ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹



  PIECHOCKI Laurent
  8,impasse Bellevue                    Suite dans :INSTRUC2.DOC
  57980 TENTELING                       ¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹



        
