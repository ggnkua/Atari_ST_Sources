
                              RAMDISK
                           ------------
                           
Kopieren Sie die Ramdisk in den Autoordner, falls sie automatisch
geladen werden soll. Sie k”nnen das Programm auch nach dem Booten
starten. Die Ramdisk hat gewisse Default-Einstellungen, die Sie
mit dem Programm RAMDEDIT.TOS „ndern k”nnen. Starten Sie dazu dieses
Programm und beantworten Sie die gestellten Fragen oder drcken Sie
Return, um die alten Werte beizubehalten (diese werden in Klammern
angezeigt).

Die Ramdisk ist resetfest, d.h. sie findet ihren Inhalt wieder, falls
sie schon einmal installiert wurde. Um die Ramdisk loszuwerden, mssen
Sie einen Kaltstart durchfhren (ab TOS 1.4 mit Control + Alternate + 
Shift + Delete, sonst durch Ein- und Ausschalten).

Beim Start der Ramdisk k”nnen Sie durch Gedrckthalten der rechten
Shifttaste erreichen, daá die Gr”áe und der Laufwerksbuchstabe am
Bildschirm abgefragt werden. Auáerdem k”nnen Sie festlegen, ob die
Ramdisk resetfest sein soll. Beim neuesten TOS funktioniert das nur,
wenn vor dem Drcken der Shifttaste eine andere Taste gedrckt
wurde. Entfernen Sie diesen Tastendruck bei der Eingabe mit Backspace!

Die Ramdisk kann auch durch ein File RAMDISK.INF auf A:\ konfiguriert
werden. Dieses File kann folgende Zeilen enthalten:

SIZE=Zahl
Setzt die Anzahl von KByte, die Ihre Ramdisk fassen kann.

DISK=Buchstabe
Gibt den Laufwerksbuchstaben an.

RESET=J oder N
Gibt an, ob die Ramdisk resetfest sein soll.

LOAD=file
L„dt die angegebene Datei beim Start auf die Ramdisk. Die Datei wird
vom laufwerk A: geladen, falls kein Laufwerksbuchstabe angegeben ist.

FOLDER=name
Erzeugt einen Ordner auf der Ramdisk. Danach werden alle LOAD-Befehle
in diesen Ordner ausgefhrt.

FOLDER=name\
Erzeugt den Ordner nicht, aber bewirkt sonst dasselbe wie FOLDER ohne
\.

Also z.B.
	SIZE=512
	DISK=P
	RESET=Y
	LOAD=B:\ORDNER\*.DOC
	FOLDER=\TEST
	FOLDER=\TEST\A
	LOAD=A:\TEST\A\*.*
Dies erzeugt einen Ordner TEST und einen Unterordner A. Alle Files aus
dem Ordner A:\TEST\A werden dann in den Ordner TEST\A auf der Ramdisk
kopiert. Sie drfen einen Ordner erst erzeugen, wenn s„mtliche darber-
liegenden Ordner erzeugt sind. Man kann also die fnfte Zeile der obigen
Kommandos nicht weglassen!

Mit
	FOLDER=Ordnername\
k”nnen Sie den Ordner ”ffnen, falls er schon erzeugt wurde. Danach werden
alle Files in diesen Ordner kopiert.

Die Ramdisk ist standartgem„ auf D: und hat 128 KByte.

Interna: Die Ramdisk installiert sich ber die Harddiskvektoren wie
blich und reserviert ihren Speicher mit Malloc(). Falls sie resetfest
sein soll, h„ngt sie sich zus„tzlich in den Resetvektor ein. Bei einem
Warmstart kopiert sie ihren Inhalt ans RAM-Ende und erniedrigt
_Phystop. Wenn sie danach aus dem Autoordner oder sonst gestartet
wird, sucht sie eine Magic-Zahl jenseits des Phystop und
reinitialisiert sich gegebenenfalls. Das Programm RAMDISK.PRG
verbleibt nur im Speicher, falls die Ramdisk neu gestartet wurde,
nicht jedoch nach einem Reset. Alle Vektoren werden mit XBRA und dem
Kenner xbrarram eingeh„ngt. Da das physikalische Ende des Speichers
ber einen Buserror erkannt wird, ist das Programm nur auf einem 68000
lauff„hig. Ich habe keine Information ber den Aufbau des Stacks bei
einem Buserror und anderen 680x0-Prozessoren. Anbei der Source-Code
fr den GfA-Assembler und als Text, sowie der C-Sourcecode von
RAMDEDIT.

Alles klar? Fragen bitte an

Dr. Ren‚ Grothmann
Grafenwerderstr. 14
8059 W”rth
