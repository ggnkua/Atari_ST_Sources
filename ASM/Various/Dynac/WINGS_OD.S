*************************************************
*						*
*	MAD MAX DIGI MUSIX RUNNER BY DYNAC	*
*						*
*	    WINGS OF DEATH 2 MUSIX 		*
*						*
*						*
*************************************************

*	TUNES GO FROM 1 TO 14 
*	8+12 DON'T WORK
*	13+14 ARE THE SAME
*	6 IS PLEASE WAIT
*	2 SOMETIMES BOMBS WHEN QUITTING


	DC.W	$A00A
SUPER	PEA	0
	MOVE.W	#32,-(A7)
	TRAP	#1
	ADDQ.L	#6,A7
	MOVE.L	D0,OLDSP

	MOVE.B	#$12,$FFFFFC02

	MOVE.W	#4,-(A7)
	TRAP	#14
	ADDQ.L	#2,A7
	CMP.B	#0,D0
	BEQ	SET

	MOVE.W	D0,RES
	MOVE.W	#0,D7
	BSR	SETRES


	MOVE.W	#$777,$FFFF8246
SET	CLR.W	$FFFF8240
	MOVE.W	#$777,$FFFF825E

	PEA	MESS
	MOVE.W	#9,-(A7)
	TRAP	#1
	ADDQ.L	#6,A7

	MOVE.L	#1,TUNE
	MOVE.L	TUNE,D0	
	BSR	MUSIX
	
WAITKEY	MOVE.W	#7,-(A7)
	TRAP	#1
	ADDQ.L	#2,A7
	CMP.B	#"+",D0	
	BNE	MINUS

	CMP.L	#7,TUNE
	BNE	T1
	ADDQ.L	#2,TUNE
	BRA	S1

T1	CMP.L	#11,TUNE
	BNE	T2
	ADDQ.L	#2,TUNE
	BRA	S1

T2	CMP.L	#13,TUNE
	BEQ	WAITKEY

	ADDQ.L	#1,TUNE
S1	BSR	MUSIX+2
	MOVE.L	TUNE,D0
	BSR	MUSIX	
	BRA	WAITKEY


MINUS	CMP.B	#"-",D0
	BNE	ESC
	CMP.L	#1,TUNE
	BEQ	WAITKEY

	CMP.L	#9,TUNE
	BNE	T1A
	SUBQ.L	#2,TUNE
	BRA	S1A

T1A	CMP.L	#13,TUNE
	BNE	T2A
	SUBQ.L	#2,TUNE
	BRA	S1A

T2A	CMP.L	#14,TUNE
	BNE	S1B
	SUBQ.L	#2,TUNE
	BRA	S1A

S1B	SUBQ.L	#1,TUNE
S1A	BSR	MUSIX+2
	MOVE.L	TUNE,D0
	BSR	MUSIX
	BRA	WAITKEY

ESC	CMP.B	#$1B,D0
	BNE	WAITKEY


	JSR	MUSIX+2		
	MOVE.B	#8,$FFFFFC02
	DC.W	$A00A
	MOVE.W	RES,D7
	BSR	SETRES
	CLR.W	$FFFF8246
	MOVE.W	#$777,$FFFF8240
	CLR.W	$FFFF825E

USER	PEA	OLDSP
	MOVE.W	#32,-(A7)
	TRAP	#1
	ADDQ.L	#6,A7


EXIT	CLR.W	-(A7)
	TRAP	#1
	

SETRES	MOVE.W	D7,-(A7)
	PEA	-1
	PEA	-1
	MOVE.W	#5,-(A7)
	TRAP	#14
	ADD.L	#12,A7
	RTS



MUSIX	INCBIN	"A:\WINGS.RAN"	;MUSIX FILE
	EVEN

MESS	DC.B	27,"E"
	DC.B	27,"Y",32+5,32+11
	DC.B	"WINGS OF DEATH 2"
	DC.B	27,"Y",32+7,32+14
	DC.B	"MUSIX DEMO"
	DC.B	27,"Y",32+16,32+13
	DC.B	"PRESS + AND -",0


	
	
RES	DS.W	1
TUNE	DS.L	1
OLDSP	DS.L	1