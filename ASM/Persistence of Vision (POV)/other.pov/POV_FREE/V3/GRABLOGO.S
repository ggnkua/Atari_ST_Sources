	TEXT
Begin	MOVEA.L	4(A7),A3
	MOVEA.L	#stack,A7
	MOVE.L	12(A3),D0
	ADD.L	20(A3),D0
	ADD.L	28(A3),D0
	ADDI.L	#$100,D0
	MOVE.L	D0,-(A7)
	MOVE.L	A3,-(A7)
	CLR.W	-(A7)
	MOVE.W	#$4A,-(A7)
	TRAP	#1
	LEA	12(A7),A7
	MOVEQ	#$A,D0
	BSR	L0031
	LEA	L0036(PC),A0
	BSR	L0015
	LEA	L0034,A6
	BSR	L0016
	MOVE.L	#L003F,L0055
	MOVE.L	#L0042,L0056
	MOVEQ	#$5A,D0
	BSR	L0031
	TST.W	L0053
	BEQ	L0002
	TST.W	L0054
	BEQ	L0002
	TST.B	L0042
	BEQ	L0002
	BSR	L0019
	BSR	L001F
	BSR	L0022
	BSR	L0021
	BSR	L002D
	BSR	L0029
	BSR	L002A
	BSR	L002E
	BSR	L0025
	BSR	L0026
	BSR	L0028
	BSR	L0013
	BSR	L002B
	BSR	L0008
	BSR	L0023
L0000:
	BSR	L0030
	BSR	L000F
	MOVE.W	L0044,L003B
	MOVE.W	L0045,L003C
	MOVE.W	L0046,L003D
	BSR	L0011
	TST.W	L003B
	BEQ.S	L0000

	BSR	L0007
	BSR	L0022
	BSR	L000E
	BSR	L0005
	BSR	L0003
	BSR	L002C
	BSR	L002F
	LEA	L0037(PC),A0
	BSR	L0015
	BSR	L0023
	LEA	L0035,A6
	BSR	L0016
	MOVE.L	#L003F,L0055
	MOVE.L	#L0042,L0056

	bsr	L0020		;bug fixed for UIS 3.3 by MSD/POV
bp	moveq	#$5A,d0
	BSR	L0031
	bsr	L001F

	TST.W	L0053
	BEQ	L0001
	TST.W	L0054
	BEQ	L0001
	BSR	L0019
	TST.B	L0042
	BEQ.S	L0001
	BSR	f_create
	BSR	L0027
	BSR	L0028
L0001:
	BSR	L002C
	BSR	L002F
	BSR	L0023
	BSR	L0020
L0002:
	MOVEQ	#$13,D0
	BSR	L0031
	CLR.W	-(A7)
	TRAP	#1
L0003:
	LEA	L004E(PC),A0
	LEA	L004C(PC),A1
	MOVEQ	#7,D0
L0004:
	MOVE.L	(A0)+,(A1)+
	DBF	D0,L0004
	RTS
L0005:
	LEA	L004F(PC),A0
	MOVE.W	L003D,D0
	MULU	#$A0,D0
	ADDA.W	D0,A0
	MOVE.W	L003C,D0
	LSR.W	#1,D0
	ANDI.W	#$FF8,D0
	ADDA.W	D0,A0
	MOVE.W	L003C,D1
	ANDI.W	#$F,D1
	LEA	L004B,A1
	MOVEQ	#$F,D7
L0006:
	MOVE.W	8(A0),D0
	SWAP	D0
	MOVE.W	(A0)+,D0
	ROL.L	D1,D0
	MOVE.W	D0,(A1)+
	MOVE.W	8(A0),D0
	SWAP	D0
	MOVE.W	(A0)+,D0
	ROL.L	D1,D0
	MOVE.W	D0,(A1)+
	MOVE.W	8(A0),D0
	SWAP	D0
	MOVE.W	(A0)+,D0
	ROL.L	D1,D0
	MOVE.W	D0,(A1)+
	MOVE.W	8(A0),D0
	SWAP	D0
	MOVE.W	(A0)+,D0
	ROL.L	D1,D0
	MOVE.W	D0,(A1)+
	LEA	152(A0),A0
	DBF	D7,L0006
	RTS
L0007:
	TST.W	L0044
	BNE.S	L0007
	MOVE.W	L0044,L003B
	RTS
L0008:
	MOVE.W	#$22,-(A7)
	TRAP	#$E
	ADDQ.W	#2,A7
	MOVEA.L	D0,A0
	LEA	L0043,A1
	MOVE.L	16(A0),(A1)
	LEA	L0009,A1
	MOVE.L	A1,16(A0)
	RTS
L0009:
	MOVEM.L	A0-A1/D0-D1,-(A7)
	LEA	L0044,A1
	MOVE.B	(A0)+,D0
	ANDI.W	#3,D0
	MOVE.W	D0,(A1)+
	MOVE.W	(A1),D1
	MOVE.B	(A0)+,D0
	EXT.W	D0
	ADD.W	D0,D1
	BMI.S	L000A
	CMP.W	#$131,D1
	BLT.S	L000B
	MOVE.W	#$130,D1
	BRA.S	L000B
L000A:
	MOVEQ	#0,D1
L000B:
	MOVE.W	D1,(A1)+
	MOVE.W	(A1),D1
	MOVE.B	(A0)+,D0
	EXT.W	D0
	ADD.W	D0,D1
	BMI.S	L000C
	CMP.W	#$B9,D1
	BLT.S	L000D
	MOVE.W	#$B8,D1
	BRA.S	L000D
L000C:
	MOVEQ	#0,D1
L000D:
	MOVE.W	D1,(A1)
	MOVEM.L	(A7)+,A0-A1/D0-D1
	RTS
L000E:
	MOVE.W	#$22,-(A7)
	TRAP	#$E
	ADDQ.W	#2,A7
	MOVEA.L	D0,A0
	LEA	L0043,A1
	MOVE.L	(A1),16(A0)
	RTS
L000F:
	MOVEA.L	L0049,A0
	LEA	L004F(PC),A1
	MOVE.W	L003D,D0
	MULU	#$A0,D0
	ADDA.W	D0,A0
	ADDA.W	D0,A1
	MOVE.W	L003C,D0
	LSR.W	#1,D0
	ANDI.W	#$FF8,D0
	ADDA.W	D0,A0
	ADDA.W	D0,A1
	MOVEQ	#$F,D0
L0010:
	MOVE.L	(A1)+,(A0)+
	MOVE.L	(A1)+,(A0)+
	MOVE.L	(A1)+,(A0)+
	MOVE.L	(A1)+,(A0)+
	LEA	144(A0),A0
	LEA	144(A1),A1
	DBF	D0,L0010
	RTS

L0011	MOVEA.L	L0049,A0
	MOVE.W	L003D,D0
	MULU	#$A0,D0
	ADDA.W	D0,A0
	MOVE.W	L003C,D0
	MOVE.W	D0,D1
	ANDI.W	#$F,D1
	LSR.W	#1,D0
	ANDI.W	#$FF8,D0
	ADDA.W	D0,A0
	LEA	L0038,A1
	MOVEQ	#$F,D0
L0012:
	MOVEQ	#0,D2
	MOVE.W	(A1)+,D2
	ROR.L	D1,D2
	OR.W	D2,(A0)+
	SWAP	D2
	OR.W	D2,6(A0)
	SWAP	D2
	OR.W	D2,(A0)+
	SWAP	D2
	OR.W	D2,6(A0)
	SWAP	D2
	OR.W	D2,(A0)+
	SWAP	D2
	OR.W	D2,6(A0)
	SWAP	D2
	OR.W	D2,(A0)+
	SWAP	D2
	OR.W	D2,6(A0)
	SWAP	D2
	LEA	152(A0),A0
	DBF	D0,L0012
	RTS
L0013:
	LEA	L004F(PC),A0
	MOVEA.L	L0049,A1
	MOVE.W	#$1F3F,D0
L0014:
	MOVE.L	(A0)+,(A1)+
	DBF	D0,L0014
	RTS
L0015:
	PEA	(A0)
	MOVE.W	#9,-(A7)
	TRAP	#1
	ADDQ.W	#6,A7
	RTS
L0016:
	CLR.L	L0042
	MOVE.W	#$19,-(A7)
	TRAP	#1
	ADDQ.W	#2,A7
	ADDI.W	#$41,D0
	MOVE.B	D0,L003F
	SUBI.W	#$40,D0
	MOVE.W	D0,-(A7)
	PEA	L0041(PC)
	MOVE.W	#$47,-(A7)
	TRAP	#1
	ADDQ.W	#8,A7
	MOVEA.L	A6,A0
	LEA	L0040(PC),A1
	MOVE.B	#$3A,(A1)+
L0017:
	TST.B	(A1)+
	BNE.S	L0017
	SUBQ.W	#1,A1
L0018:
	MOVE.B	(A0)+,(A1)+
	BNE.S	L0018
	RTS
L0019:
	LEA	L0042(PC),A0
	LEA	L003F(PC),A1
	TST.B	(A0)
	BEQ.S	L001D
L001A:
	TST.B	(A1)+
	BNE.S	L001A
L001B:
	CMPI.B	#$5C,-(A1)
	BNE.S	L001B
	ADDQ.W	#1,A1
L001C:
	MOVE.B	(A0)+,(A1)+
	BNE.S	L001C
L001D:
	RTS
	LEA	L004F(PC),A0
	MOVEA.L	L0049,A1
	MOVE.W	#$1F3F,D0
L001E:
	MOVE.L	(A1)+,(A0)+
	DBF	D0,L001E
	RTS
L001F:
	CLR.L	-(A7)
	MOVE.W	#$20,-(A7)
	TRAP	#1
	ADDQ.W	#6,A7
	MOVE.L	D0,stack
	RTS
L0020:
	MOVE.L	stack,-(A7)
	MOVE.W	#$20,-(A7)
	TRAP	#1
	ADDQ.W	#6,A7
	RTS
L0021:
	MOVE.W	#$FFFF,-(A7)
	CLR.W	-(A7)
	MOVE.W	#$15,-(A7)
	TRAP	#$E
	ADDQ.W	#6,A7
	RTS
L0022:
	PEA	L0032
	MOVE.W	#1,-(A7)
	MOVE.W	#$19,-(A7)
	TRAP	#$E
	ADDQ.W	#8,A7
	RTS
L0023:
	PEA	L0033
	MOVE.W	#1,-(A7)
	MOVE.W	#$19,-(A7)
	TRAP	#$E
	ADDQ.W	#8,A7
	RTS

f_create	clr.w	-(sp)
		pea	L003F(pc)
		move.w	#$3C,-(sp)
		trap	#1
		addq.l	#8,sp
		move.w	d0,handle
		rts

L0025	CLR.W	-(A7)
	PEA	L003F(PC)
	MOVE.W	#$3D,-(A7)
	TRAP	#1
	ADDQ.W	#8,A7
	MOVE.W	D0,handle
	RTS

L0026	PEA	L004D(PC)
	PEA	$7D22.W
	MOVE.W	handle,-(A7)
	MOVE.W	#$3F,-(A7)
	TRAP	#1
	ADDA.W	#$C,A7
	RTS

L0027	PEA	L004B(PC)
	PEA	$A0.W
	MOVE.W	handle,-(A7)
	MOVE.W	#$40,-(A7)
	TRAP	#1
	ADDA.W	#$C,A7
	RTS

L0028	MOVE.W	handle,-(A7)
	MOVE.W	#$3E,-(A7)
	TRAP	#1
	ADDQ.W	#4,A7
	RTS
L0029:
	MOVE.W	#3,-(A7)
	TRAP	#$E
	ADDQ.W	#2,A7
	MOVE.L	D0,L0049
	RTS
L002A:
	MOVEM.L	$FFFF8240.W,D0-D7
	MOVEM.L	D0-D7,L0048
	RTS
L002B:
	MOVEM.L	L004E(PC),D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	RTS
L002C:
	MOVEM.L	L0048(PC),D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	RTS
	LEA	$FFFF8240.W,A0
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	RTS
L002D:
	MOVE.W	#4,-(A7)
	TRAP	#$E
	ADDQ.W	#2,A7
	MOVE.W	D0,L0047
	RTS
L002E:
	BSR	L0030
	CLR.W	-(A7)
	PEA	$FFFFFFFF.W
	PEA	$FFFFFFFF.W
	MOVE.W	#5,-(A7)
	TRAP	#$E
	ADDA.W	#$C,A7
	RTS
L002F:
	BSR	L0030
	MOVE.W	L0047,-(A7)
	MOVE.L	L0049(PC),-(A7)
	MOVE.L	L0049(PC),-(A7)
	MOVE.W	#5,-(A7)
	TRAP	#$E
	ADDA.W	#$C,A7
	RTS
L0030:
	MOVE.W	#$25,-(A7)
	TRAP	#$E
	ADDQ.W	#2,A7
	RTS

L0031	LEA	L0050,A1
	MOVE.W	D0,(A1)+
	SUBI.W	#$A,D0
	MULU	#3,D0
	LEA	L003A,A0
	ADDA.W	D0,A0
	MOVEQ	#0,D0
	MOVE.B	(A0)+,D0
	MOVE.W	D0,(A1)+
	MOVE.B	(A0)+,D0
	MOVE.W	D0,(A1)+
	MOVE.B	(A0)+,D0
	MOVE.W	D0,(A1)+
	CLR.W	(A1)
	MOVE.L	#L0039,D1
	MOVE.W	#$C8,D0
	TRAP	#2
	MOVE.W	L0053,D0
	RTS

	DATA
L0032	DC.B	$12,$1A
L0033	DC.B	$14,$08
L0034	DC.B	'\*.PI1',0
	even
L0035	DC.B	'*.DAT',0
	even
L0036:
	DC.B	$1B,'c"',$1B,'b#',$1B,'E'
	DC.B	$0A,$1B,'f',$1B,'c ',$1B,'C'
	DC.B	'POV Boot Logo Grabber.',$0D,$0A
	DC.B	$1B,'CVersion 1.0',$0D,$0A,$1B
	DC.B	'C',$BD,' 1991',$0D
	DC.B	$0A,$1B,'CBoris'
	DC.B	$0D,$0A,$0A,$1B,'CSource picture filename?',$0D,$0A,$00

L0037	DC.B	$1B,'c"',$1B,'b#',$1B,'E'
	DC.B	$0A,$1B,'f',$1B,'c ',$1B,'C'
	DC.B	'POV Boot Logo Grabber.',$0D,$0A
	DC.B	$1B,'CVersion 1.0',$0D,$0A,$1B
	DC.B	'C',$BD,' 1991',$0D
	DC.B	$0A,$1B,'CBoris'
	DC.B	$0D,$0A,$0A,$1B,'CTarget logo filename?',$0D,$0A,$00
	even
L0038
	DC.B	$FF,$FF,$80,$01,$80,$01,$80,$01
	DC.B	$80,$01,$80,$01,$80,$01,$80,$01
	DC.B	$80,$01,$80,$01,$80,$01,$80,$01
	DC.B	$80,$01,$80,$01,$80,$01,$FF,$FF

L0039	DC.L	L0050
	DC.L	L0051
	DC.L	L0052
	DC.L	L0053
	DC.L	L0055
	DC.L	L0057

L003A	DC.B	$00,$01,$00,$02,$01,$01,$02,$01
	DC.B	$01,$00,$01,$01,$02,$01,$01,$01
	DC.B	$01,$01,$00,$00,$00,$00,$00,$00
	DCB.W	2,0
	DC.B	$01,$00,$00,$01,$00,$03,$05,$00
	DC.B	$05,$05,$00,$00,$01,$01,$02,$01
	DC.B	$00,$10,$07,$01,$02,$01,$00,$00
	DCB.W	4,0
	DC.B	$01,$01,$01,$02,$01,$01,$02,$01
	DC.B	$01,$02,$01,$01,$01,$01,$02,$01
	DC.B	$01,$01,$00,$00,$00,$00,$00,$00
	DCB.W	3,0
	DC.B	$02,$01,$01,$01,$01,$01,$06,$01
	DC.B	$01,$04,$01,$01,$01,$03,$01,$02
	DC.B	$01,$01,$04,$02,$01,$08,$01,$01
	DCB.W	3,0
	DC.B	$01,$01,$01,$09,$01,$00,$01,$01
	DC.B	$01,$01,$01,$00,$00,$05,$01,$03
	DC.B	$03,$01,$02,$02,$01,$00,$00,$00
	DCB.W	18,0
	DC.B	$04,$03,$00,$08,$03,$00,$06,$01
	DC.B	$00,$08,$01,$00,$08,$01,$00,$04
	DC.B	$01,$01,$03,$01,$01,$00,$05,$00
	DC.B	$01,$01,$01,$00,$05,$00,$00,$01
	DC.B	$01,$00,$01,$01,$00,$00,$00,$00
	DCB.W	10,0
	DC.B	$00,$02,$02,$00,$02,$03,$00,$00
	DCB.W	11,0
	DC.B	$05,$01,$00,$05,$01,$00,$01,$01
	DC.B	$00,$01,$01,$00,$02,$05,$00,$06
	DC.B	$01,$00,$02,$01,$00,$01,$01,$00
	DC.B	$06,$05,$00,$00,$00,$00,$00,$01
	DC.B	$01,$00,$01,$00,$02,$01,$00,$02
	DC.B	$01,$01,$01,$01,$01,$00,$00,$00
	DCB.W	6,0
	DC.B	$00,$01,$02,$03,$01,$02,$01,$01
	DC.B	$01,$01,$01,$01,$00,$01,$01,$00
	DC.B	$01,$03
	BSS
L003B:
	DS.W	1
L003C:
	DS.W	1
L003D:
	DS.W	1

handle	DS.W	1
L003F	DS.B	1
L0040	DS.B	1
L0041	DS.B	98
L0042	DS.B	14
L0043	DS.L	1
L0044	DS.W	1
L0045	DS.W	1
L0046	DS.W	1
L0047	DS.W	1
L0048	DS.B	32
L0049	DS.B	1004
stack	ds.l	1
L004B
	DS.B	128
L004C:
	DS.B	160
L004D:
	DS.W	1
L004E:
	DS.B	32
L004F:
	DS.B	32000
L0050	DS.B	12
L0051	DS.B	78
L0052	DS.B	66
L0053	DS.W	1
L0054	DS.B	12
L0055	DS.L	1
L0056	DS.B	8
L0057	DS.L	1

