*           MARCHEW 
*             OF
*      THE TEETH SHACKERS
*    MA ZASZCZYT PZREDSTAWIC 
*      PROCEDURE 'DEMO' DO 
*     ARTYKULU O PLANACH I
*          SCROLLU
*
*  PROCEDURA PRZESUWA 4 PLANY
*
*      DEVPAC ASSEMBLER
*

WHAT_IS_UP?
	MOVE.W #0,-(SP)				; niska rozdzielczosc
	MOVE.L #-1,-(SP)
	MOVE.L #-1,-(SP)
	MOVE.W #5,-(SP)
	TRAP #14
	ADD.L #10,SP

	CLR.L	-(SP)				; SUPERVISOR
	MOVE.W	#$20,-(SP)
	TRAP	#1
	ADD.L	#6,SP

	move.l #graphix+2,-(a7)     ;USTALENIE KOLOROW Z OBRAZKA
	move.w #6,-(sp)
	trap #14
	addq.l #6,sp

	MOVE.L	$44E,A0					;ZAPISANIE ADRESU EKRANU W 
	MOVE.L	A0,ADR_OBRAZU			;ZMIEEENNYYYCCCHHH ADR_OBRAZU_...
	MOVE.L	A0,ADR_OBRAZU_2			
	MOVE.L	A0,ADR_OBRAZU_3
	MOVE.L	A0,ADR_OBRAZU_4



		lea graphix,a0				;ZRZUCAMY KAWALEK PICTURA
		lea $22(a0),a0				;NAEKRANABYUZYSKACSKALEPOROWNAWCZA
		MOVE.L $44E,A1				;ZTYMCOBEDZIEMYPRZESUWAC

		ADD.L #160*80,A1
		move.w #40*120-1,d4
I_SHOT_THE_DEVIL	move.l (a0)+,(a1)+
		dbf d4,I_SHOT_THE_DEVIL

	MOVE.L	$70.W,OLD70				;ZAPAMIETAJ STARY WEKTOR VBL
	MOVE.L	#VBL,$70.W				;NOWY VBL

M_PUSC	CMP.B	#1,$FFFC02			;CZEKAJ NA ESC
	BNE	M_PUSC
END									;EXIT
	MOVE.L	OLD70,$70.W				;WSZYSTKO^PO^STAREMU
	MOVE.W	#$777,$FF8240
	MOVE.W	#$000,$FF8246
	CLR.L	-(SP)					;BYE.....
	TRAP	#1

*GOOD BYE WICKED WORLD...


VBL									;VBL

	MOVEM.L	D0-D7/A0-A6,-(SP)

	jsr ROXLUJ
	cmp.b #$1,$fffc02				;CZY NACISNIETO ESC
	BEQ END 
	MOVEM.L	(SP)+,D0-D7/A0-A6
	RTE

ROXLUJ
	ADD.L #1,LICZ					;LICZ ILE RAZY SUWANO
	CMP.L #320,LICZ					;JAK 320 TO ...
	BEQ PICTEK
	JSR SCROLL_1					;PRZESUN 1 PLAN
	JSR SCROLL_2					;PRZESUN 2 PLAN
	JSR SCROLL_3					;PRZESUN 3 PLAN
	JSR SCROLL_4					;PRZESUN 4 PLAN

***********************************************
* SKASUJ CO UWAZASZ ABY UZYSKAC CO UWAZASZ....*
***********************************************

	RTS	


******************************************
*      PROCEDURY PZRESUWANIA PLANOW      *
******************************************
SCROLL_1
	MOVE.L	ADR_OBRAZU,A0
	lea	BUFOR,A1
	MOVE.L	ILE_LINI,D1		*ILE LINI -1
ROXLUJ_LINIE


	ROXR.W	8*0(A1)
	ROXR.W	8*1(A1)
	ROXR.W	8*2(A1)
	ROXR.W	8*3(A1)
	ROXR.W	8*4(A1)
	ROXR.W	8*5(A1)
	ROXR.W	8*6(A1)
	ROXR.W	8*7(A1)
	ROXR.W	8*8(A1)
	ROXR.W	8*9(A1)
	ROXR.W	8*10(A1)
	ROXR.W	8*11(A1)
	ROXR.W	8*12(A1)
	ROXR.W	8*13(A1)
	ROXR.W	8*14(A1)
	ROXR.W	8*15(A1)
	ROXR.W	8*16(A1)
	ROXR.W	8*17(A1)
	ROXR.W	8*18(A1)
	ROXR.W	8*19(A1)


	ROXR.W	8*0(A0)
	ROXR.W	8*1(A0)
	ROXR.W	8*2(A0)
	ROXR.W	8*3(A0)
	ROXR.W	8*4(A0)
	ROXR.W	8*5(A0)
	ROXR.W	8*6(A0)
	ROXR.W	8*7(A0)
	ROXR.W	8*8(A0)
	ROXR.W	8*9(A0)
	ROXR.W	8*10(A0)
	ROXR.W	8*11(A0)
	ROXR.W	8*12(A0)
	ROXR.W	8*13(A0)
	ROXR.W	8*14(A0)
	ROXR.W	8*15(A0)
	ROXR.W	8*16(A0)
	ROXR.W	8*17(A0)
	ROXR.W	8*18(A0)
	ROXR.W	8*19(A0)


	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,ROXLUJ_LINIE
	RTS	
*
SCROLL_2
	MOVE.L	ADR_OBRAZU_2,A0
	lea	BUFOR,A1
	ADD.W #2,A1
	ADD.W #2,A0
	MOVE.L	ILE_LINI,D1		*ILE LINI -1
ROXLUJ_LINIE2


	ROXR.W	8*0(A1)
	ROXR.W	8*1(A1)
	ROXR.W	8*2(A1)
	ROXR.W	8*3(A1)
	ROXR.W	8*4(A1)
	ROXR.W	8*5(A1)
	ROXR.W	8*6(A1)
	ROXR.W	8*7(A1)
	ROXR.W	8*8(A1)
	ROXR.W	8*9(A1)
	ROXR.W	8*10(A1)
	ROXR.W	8*11(A1)
	ROXR.W	8*12(A1)
	ROXR.W	8*13(A1)
	ROXR.W	8*14(A1)
	ROXR.W	8*15(A1)
	ROXR.W	8*16(A1)
	ROXR.W	8*17(A1)
	ROXR.W	8*18(A1)
	ROXR.W	8*19(A1)


	ROXR.W	8*0(A0)
	ROXR.W	8*1(A0)
	ROXR.W	8*2(A0)
	ROXR.W	8*3(A0)
	ROXR.W	8*4(A0)
	ROXR.W	8*5(A0)
	ROXR.W	8*6(A0)
	ROXR.W	8*7(A0)
	ROXR.W	8*8(A0)
	ROXR.W	8*9(A0)
	ROXR.W	8*10(A0)
	ROXR.W	8*11(A0)
	ROXR.W	8*12(A0)
	ROXR.W	8*13(A0)
	ROXR.W	8*14(A0)
	ROXR.W	8*15(A0)
	ROXR.W	8*16(A0)
	ROXR.W	8*17(A0)
	ROXR.W	8*18(A0)
	ROXR.W	8*19(A0)


	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,ROXLUJ_LINIE2
	RTS	
*

SCROLL_3
	MOVE.L	ADR_OBRAZU_3,A0
	lea	BUFOR,A1
	ADD.W #4,A1
	ADD.W #4,A0
	MOVE.L	ILE_LINI,D1		*ILE LINI -1
ROXLUJ_LINIE3


	ROXR.W	8*0(A1)
	ROXR.W	8*1(A1)
	ROXR.W	8*2(A1)
	ROXR.W	8*3(A1)
	ROXR.W	8*4(A1)
	ROXR.W	8*5(A1)
	ROXR.W	8*6(A1)
	ROXR.W	8*7(A1)
	ROXR.W	8*8(A1)
	ROXR.W	8*9(A1)
	ROXR.W	8*10(A1)
	ROXR.W	8*11(A1)
	ROXR.W	8*12(A1)
	ROXR.W	8*13(A1)
	ROXR.W	8*14(A1)
	ROXR.W	8*15(A1)
	ROXR.W	8*16(A1)
	ROXR.W	8*17(A1)
	ROXR.W	8*18(A1)
	ROXR.W	8*19(A1)


	ROXR.W	8*0(A0)
	ROXR.W	8*1(A0)
	ROXR.W	8*2(A0)
	ROXR.W	8*3(A0)
	ROXR.W	8*4(A0)
	ROXR.W	8*5(A0)
	ROXR.W	8*6(A0)
	ROXR.W	8*7(A0)
	ROXR.W	8*8(A0)
	ROXR.W	8*9(A0)
	ROXR.W	8*10(A0)
	ROXR.W	8*11(A0)
	ROXR.W	8*12(A0)
	ROXR.W	8*13(A0)
	ROXR.W	8*14(A0)
	ROXR.W	8*15(A0)
	ROXR.W	8*16(A0)
	ROXR.W	8*17(A0)
	ROXR.W	8*18(A0)
	ROXR.W	8*19(A0)


	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,ROXLUJ_LINIE3
	RTS	
*
SCROLL_4
	MOVE.L	ADR_OBRAZU_4,A0
	lea	BUFOR,A1
	ADD.W #6,A1
	ADD.W #6,A0
	MOVE.L	ILE_LINI,D1		*ILE LINI -1
ROXLUJ_LINIE4


	ROXR.W	8*0(A1)
	ROXR.W	8*1(A1)
	ROXR.W	8*2(A1)
	ROXR.W	8*3(A1)
	ROXR.W	8*4(A1)
	ROXR.W	8*5(A1)
	ROXR.W	8*6(A1)
	ROXR.W	8*7(A1)
	ROXR.W	8*8(A1)
	ROXR.W	8*9(A1)
	ROXR.W	8*10(A1)
	ROXR.W	8*11(A1)
	ROXR.W	8*12(A1)
	ROXR.W	8*13(A1)
	ROXR.W	8*14(A1)
	ROXR.W	8*15(A1)
	ROXR.W	8*16(A1)
	ROXR.W	8*17(A1)
	ROXR.W	8*18(A1)
	ROXR.W	8*19(A1)


	ROXR.W	8*0(A0)
	ROXR.W	8*1(A0)
	ROXR.W	8*2(A0)
	ROXR.W	8*3(A0)
	ROXR.W	8*4(A0)
	ROXR.W	8*5(A0)
	ROXR.W	8*6(A0)
	ROXR.W	8*7(A0)
	ROXR.W	8*8(A0)
	ROXR.W	8*9(A0)
	ROXR.W	8*10(A0)
	ROXR.W	8*11(A0)
	ROXR.W	8*12(A0)
	ROXR.W	8*13(A0)
	ROXR.W	8*14(A0)
	ROXR.W	8*15(A0)
	ROXR.W	8*16(A0)
	ROXR.W	8*17(A0)
	ROXR.W	8*18(A0)
	ROXR.W	8*19(A0)


	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,ROXLUJ_LINIE4
	RTS	
*
*ZATANKUJ
PICTEK
						lea graphix,a0
						lea $22(a0),a0
						LEA BUFOR,A1
	
						add.l #160*8,a0
						move.w #40*50,d4
YOU_CANNOT_BRING_ME_DOWN	move.l (a0)+,(a1)+
						dbf d4,YOU_CANNOT_BRING_ME_DOWN
						move.L #0,LICZ
				 		RTS 

graphix	incbin "plany.pi1"
ILE_LINI	DC.L 45
ADR_OBRAZU			DC.L 0
ADR_OBRAZU_2		DC.L 0
ADR_OBRAZU_3		DC.L 0
ADR_OBRAZU_4		DC.L 0
BUFOR	DS.B 62*160
LICZ	DC.L 299
OLD70		DC.L	0	

*********************************************************
; ZA POMOCA TEJ PROCEDURY MOZESZ PRZESUWAC POSZCZEGOLNE ;
;    PLANY I OBSERWOWAC KTORE KOLORY POWSTAJA POPRZEZ   ;
; MIESZANIE (NAKLADANIE) PLANOW. EFEKTY OBSERWUJESZ NA  ;
;   GORZE EKRANU I POROWNUJ JE Z TYM CO MASZ NIZEJ...   ;
; WLACZAC LUB WYLACZAC PLANY NAJLEPIEJ BEDZIE W LINIACH ;
;   75,76,77,78 GDZIE ZNAJDUJA SIE SKOKI DO PROCEDUR    ;
;             PRZESUWAJACYCH POSZCZEGOLNE PLANY         ;
;  POBAW SIE TYM... POWINNO CI TO POMOC W ZROZUMIENIU   ;
; TEGO SHITU...   OFCOURSENIEZAPOMNIJOROXLOWANIUEKRANU  ;
;MYSLE,ZEPROCEDURYBEDAWPELNIZROZUMIALE,TAKJAKIKOMENTARZE;
;SORRYZAMESS ALE JESTBARDZOPOZNO W NOCY TA KZENIEBA RDZO;
;MA MSIL YPISACCOK OLWIEK                               ;
;      DO ZOBACZENIA W NASTEPNYCH NUMERACH VOICA!       ;
;GDZIE POSTARAM SIE PRZEDSTAWIC O WIELE CIEKAWSZE EFEKTY;
;ASSEMBLEROWE NP. RAStER SCROLLING ALBO JAKIES BAJERY Z ;
;                      TIMEREM_B                        ;
;                                    END...             ;
;                              YIELD A HELL!            ;
;                SORRY ZA ORTOGRAFIE SKLADNIE  STYL...  ;
;                        MARCHEW OF T.T.S CREW          ;
;P.S. GREETINGSY DLA POZOSTALYCH MEMBERSOW T.T.S:       ;
;        (RADEMENESA,ROSOMAKA I WROBLA......)           ;
*********************************************************




