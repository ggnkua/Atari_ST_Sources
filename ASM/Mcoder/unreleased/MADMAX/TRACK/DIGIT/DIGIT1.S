;
; TRANSFORMEUR DE FICHIER DIGIT MADMAX EN FICHIER NORMAL
;
SOURCE=$4001C
DEST=$50000

	LEA	SOURCE,A5
	LEA	DEST,A6
	CMP.L	#'COSO',(A5)
	BNE	ERREUR
	MOVE.L	#'DIGI',(A6)+
;
; 7 POINTEURS EN LONG A AJUSTER AU FUR ET A MESURE
;
	MOVEQ	#-1,D0
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+
	MOVE.L	D0,(A6)+

	MOVE.L	#'TFMX',(A6)+

	LEA	$24(A5),A5
	MOVEQ	#28-1,D0
COP1:	MOVE.B	(A5)+,(A6)+
	DBRA	D0,COP1

	MOVE.L	A6,D0
	SUB.L	#DEST,D0
	MOVE.L	D0,DEST+4

	MOVE	DEST+36,D7	;NB INS-1
	MOVE.L	A6,A4
	ADDQ	#1,D7
	ADD	D7,A5
	ADD	D7,A5
	ADD	D7,A6




	MOVEQ	#0,D0
	ILLEGAL

ERREUR:	MOVEQ	#-1,D0
	ILLEGAL
