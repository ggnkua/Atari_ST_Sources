FILE=7
O=$40000
;
; 0=PRESENTATION
; MUSIQUES :
;  7 COSO
;  8 SNDTRK
;
; 9=COSO
; 19=COSO
; 28=COSO
; 37=COSO
; 49=COSO
; 58=COSO
;
	MOVE	SR,D0
	AND	#$2000,D0
	BNE.S	SUPER
	CLR.L	-(SP)
	MOVE	#$20,-(SP)
	TRAP	#1
	ADDQ	#6,SP
SUPER:
	MOVE	#$2700,SR

	MOVE.L	#$0E0E0303,$FFFF8800.W
	MOVE	#$80,$FFFF8606.W
	NOP
	NOP
	MOVE	#3,$FFFF8604.W
REST:	BTST	#5,$FFFFFA01.W
	BNE.S	REST

	MOVEQ	#FILE,D0
	LEA	$80000,A0
	LEA	$F8000,A1
	BSR	LOADE

	LEA	$80000,A0
	CMP.L	#'PP20',(A0)
	BEQ.S	J
	MOVEQ	#-1,D0
	ILLEGAL
J:
	MOVE.L	A0,A1
	ADD.L	D0,A1
	LEA	O,A2
	BSR	DECR
	MOVE.L	DEBUT,A0
	MOVE.L	FIN,A1
	ILLEGAL
DEBUT:	DC.L	0
FIN:	DC.L	0

LOADE:
	MOVE.L	A1,L4940
	ASL.W	#3,D0
	LEA	L4946(PC),A1
	ADDA.W	D0,A1
	MOVE.L	A0,A6
	MOVE.L	(A1)+,D6
	MOVE.L	D6,D4
	DIVU	#$16FE,D6
	MOVE	D6,D7
	SWAP	D6
	ADD.L	(A1),D4
	MOVE.L	(A1),-(A7)
	DIVU	#$16FE,D4
	MOVE	D4,D5
	SWAP	D4
	MOVE	D7,L4B28
	CMP.W	D7,D5
	BNE.S	L4502
	MOVE.L	L4940,A0
	BSR	L4560
	MOVE.L	L4940,A0
	ADDA.W	D6,A0
	SUB.W	D6,D4
	SUBQ.W	#1,D4
L44FA:	MOVE.B	(A0)+,(A6)+
	DBF	D4,L44FA
	BRA.S	L455C
L4502:	MOVE.L	L4940,A0
	BSR	L4560
	MOVE.L	L4940,A0
	ADDA.W	D6,A0
	MOVE	#$16FD,D0
	SUB.W	D6,D0
L451A:	MOVE.B	(A0)+,(A6)+
	DBF	D0,L451A
	SUB.W	D7,D5
	SUBQ.W	#2,D5
	BMI.S	L453A
L4526:	ADDQ.W	#1,L4B28
	MOVE.L	A6,A0
	BSR	L4560
	LEA	$16FE(A6),A6
	DBF	D5,L4526
L453A:	TST.W	D4
	BEQ.S	L455C
	ADDQ.W	#1,L4B28
	MOVE.L	L4940,A0
	BSR	L4560
	MOVE.L	L4940,A0
	SUBQ.W	#1,D4
L4556:	MOVE.B	(A0)+,(A6)+
	DBF	D4,L4556
L455C:	MOVE.L	(A7)+,D0
	RTS
L4560:	MOVE	L4B28(PC),D0
	BSR	L47EC
	BPL	L461E
	MOVE.L	A0,-(A7)
	MOVE	L4B28,D0
	BSR	L4702
	MOVE.L	(A7)+,A0
	MOVE	#$84,$FFFF8606.W
	MOVEQ	#1,D0
	BSR	L474C
	MOVE	#$90,$FFFF8606.W
	MOVE	#$190,$FFFF8606.W
	MOVE	#$90,$FFFF8606.W
	MOVE	#$C,$FFFF8604.W
	MOVE.L	A0,L493C
	MOVE.B	L493C+3(PC),$FFFF860D.W
	MOVE.B	L493C+2(PC),$FFFF860B.W
	MOVE.B	L493C+1(PC),$FFFF8609.W
	MOVE	#$80,$FFFF8606.W
	MOVE	#$90,D0
	BSR	L474C
	LEA	$1700(A0),A1
	MOVE.L	#$493E0,D1
L45CE:	SUBQ.L	#1,D1
	BMI.S	L4620
	MOVEQ	#0,D2
	MOVE.B	$FFFF8609.W,D2
	ASL.W	#8,D2
	MOVE.B	$FFFF860B.W,D2
	ASL.L	#8,D2
	MOVE.B	$FFFF860D.W,D2
	CMPA.L	D2,A1
	BHI.S	L45CE
	MOVE	#$D0,D0
	BSR	L474C
	BSR	L4756
	MOVE	$FFFF8604.W,D1
	ANDI.W	#$1C,D1
	BNE.S	L462C
	MOVE.L	A0,A1
	MOVEQ	#0,D0
	MOVE	#$B7E,D1
L4606:	MOVE	(A1)+,D2
	EOR.W	D2,D0
	DBF	D1,L4606
	CMP.W	(A1),D0
	BNE.S	L462C
	MOVE	L4B28(PC),D0
	MOVE.L	L493C(PC),A0
	BSR	L4826
L461E:	RTS
L4620:	MOVE	#$D0,D0
	BSR	L474C
	BSR	L4756
L462C:	BRA	L4560
	CLR.W	L4B28
	MOVE	SR,-(A7)
	MOVE	#$2700,SR
	MOVE.B	#$E,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	ORI.B	#1,D0
	MOVE.B	D0,$FFFF8802.W
	MOVE.B	#$A,$FFFF8800.W
	MOVE	(A7)+,SR
	MOVE	#$80,$FFFF8606.W
	MOVEQ	#3,D0
	BSR	L474C
	BRA	L4764
	MOVE	#$84,$FFFF8606.W
	MOVEQ	#1,D0
	BSR	L474C
	MOVE.L	A0,L493C
	MOVE.B	L493C+3(PC),$FFFF860D.W
	MOVE.B	L493C+2(PC),$FFFF860B.W
	MOVE.B	L493C+1(PC),$FFFF8609.W
	MOVE	#$190,$FFFF8606.W
	MOVE	#$90,$FFFF8606.W
	MOVE	#$190,$FFFF8606.W
	MOVE	#1,$FFFF8604.W
	MOVE	#$180,$FFFF8606.W
	MOVE	#$A0,D0
	BSR	L474C
	BRA	L4764
	MOVE	#$84,$FFFF8606.W
	MOVEQ	#1,D0
	BSR	L474C
	MOVE	#$90,$FFFF8606.W
	MOVE	#$190,$FFFF8606.W
	MOVE	#$90,$FFFF8606.W
	MOVE	#1,$FFFF8604.W
	MOVE.L	A0,L493C
	MOVE.B	L493C+3(PC),$FFFF860D.W
	MOVE.B	L493C+2(PC),$FFFF860B.W
	MOVE.B	L493C+1(PC),$FFFF8609.W
	MOVE	#$80,$FFFF8606.W
	MOVE	#$80,D0
	BSR	L474C
	BRA	L4764
L4702:	MOVE	D0,L4B28
	MOVE	SR,-(A7)
	MOVE	#$2700,SR
	MOVE.B	#$E,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D1
	LSR.W	#1,D0
	BCC.S	L4722
	ANDI.B	#$FE,D1
	BRA.S	L4726
L4722:	ORI.B	#1,D1
L4726:	MOVE.B	D1,$FFFF8802.W
	MOVE.B	#$A,$FFFF8800.W
	MOVE	(A7)+,SR
	MOVE	#$86,$FFFF8606.W
	BSR	L474C
	MOVE	#$80,$FFFF8606.W
	MOVEQ	#$13,D0
	BSR	L474C
	BRA	L4764
L474C:	NOP
	NOP
	NOP
	MOVE	D0,$FFFF8604.W
L4756:	MOVE	D0,-(A7)
	MOVE	#$27,D0
L475C:	DBF	D0,L475C
	MOVE	(A7)+,D0
	RTS
L4764:	BSR.S	L4756
L4766:	BTST	#5,$FFFFFA01.W
	BNE.S	L4766
	MOVE	#$80,$FFFF8606.W
	MOVE	$FFFF8604.W,D0
	RTS
	SF	L4944
	MOVE	SR,-(A7)
	MOVE	#$2700,SR
	MOVE.B	#$E,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	ANDI.B	#$FD,D0
	ORI.B	#5,D0
	MOVE.B	D0,$FFFF8802.W
	MOVE.B	#$A,$FFFF8800.W
	RTE
	ST	L4944
	RTS
	TST.B	L4944
	BEQ.S	L47EA
	MOVE	#$80,$FFFF8606.W
	MOVE	$FFFF8604.W,D0
	BTST	#7,D0
	BNE.S	L47EA
	MOVE	SR,-(A7)
	MOVE	#$2700,SR
	MOVE.B	#$E,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	ORI.B	#6,D0
	MOVE.B	D0,$FFFF8802.W
	MOVE.B	#$A,$FFFF8800.W
	MOVE	(A7)+,SR
	SF	L4944
L47EA:	RTS
L47EC:	TST.B	L4B2C
	BEQ.S	L4822
	MOVE	L4B2A,D1
	SUBQ.W	#1,D1
	BMI.S	L4822
	LEA	$86900,A1
L4804:	LEA	$1700(A1),A1
	CMP.W	(A1),D0
	DBEQ	D1,L4804
	TST.W	D1
	BMI.S	L4822
	ADDQ.L	#2,A1
	MOVE	#$16FD,D0
L4818:	MOVE.B	(A1)+,(A0)+
	DBF	D0,L4818
	MOVEQ	#0,D0
	RTS
L4822:	MOVEQ	#-1,D0
	RTS
L4826:	TST.B	L4B2C
	BEQ.S	L4858
	MOVE	L4B2A,D1
	CMPI.W	#$58,D1
	BEQ.S	L4858
	MULU	#$1700,D1
	LEA	$88000,A1
	ADDA.L	D1,A1
	MOVE	D0,(A1)+
	MOVE	#$16FD,D0
L484C:	MOVE.B	(A0)+,(A1)+
	DBF	D0,L484C
	ADDQ.W	#1,L4B2A
L4858:	RTS
L485A:	ADDQ.W	#8,D3
	MOVEQ	#7,D1
L485E:	DBF	D3,L4866
	MOVE.L	-(A1),D2
	MOVEQ	#$1F,D3
L4866:	LSR.L	#1,D2
	ADDX.W	D0,D0
	DBF	D1,L485E
	BRA.S	L48D8
DECR:	ADDQ.L	#4,A0
	SUBQ.B	#1,(A0)
	SUBQ.B	#1,1(A0)
	SUBQ.B	#1,2(A0)
	SUBQ.B	#1,3(A0)
	MOVE.L	A2,A4
	MOVE.L	-(A1),D0
	MOVEQ	#0,D1
	MOVE.B	D0,D1
	LSR.L	#8,D0
	MOVE.L	A4,DEBUT
	ADDA.L	D0,A4
	MOVE.L	A4,FIN
	MOVE.L	-(A1),D2
	MOVEQ	#$20,D3
	TST.W	D1
	BEQ.S	L489A
	SUBQ.W	#1,D1
	BSR	L4928
L489A:	DBF	D3,L48A2
	MOVE.L	-(A1),D2
	MOVEQ	#$1F,D3
L48A2:	LSR.L	#1,D2
	BCS.S	L48E2
	MOVEQ	#0,D4
L48A8:	MOVEQ	#1,D1
	BSR	L4928
	ADD.W	D0,D4
	SUBQ.W	#3,D0
	BEQ.S	L48A8
L48B4:	SUBQ.W	#8,D3
	BMI.S	L485A
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
	LSR.L	#1,D2
	ADDX.W	D0,D0
L48D8:	MOVE.B	D0,-(A4)
	DBF	D4,L48B4
	CMPA.L	A4,A2
	BCC.S	L4926
L48E2:	MOVEQ	#1,D1
	BSR.S	L4928
	MOVEQ	#0,D1
	MOVE.B	0(A0,D0.W),D1
	MOVE	D0,D4
	ADDQ.W	#1,D4
	SUBQ.W	#3,D0
	BMI.S	L4914
	DBF	D3,L48FC
	MOVE.L	-(A1),D2
	MOVEQ	#$1F,D3
L48FC:	LSR.L	#1,D2
	BCS.S	L4902
	MOVEQ	#6,D1
L4902:	BSR.S	L4928
	LEA	1(A4,D0.W),A3
L4908:	MOVEQ	#2,D1
	BSR.S	L4928
	ADD.W	D0,D4
	SUBQ.W	#7,D0
	BEQ.S	L4908
	BRA.S	L491A
L4914:	BSR.S	L4928
	LEA	1(A4,D0.W),A3
L491A:	MOVE.B	-(A3),-(A4)
	DBF	D4,L491A
	CMPA.L	A4,A2
	BCS	L489A
L4926:	RTS
L4928:	MOVEQ	#0,D0
L492A:	DBF	D3,L4932
	MOVE.L	-(A1),D2
	MOVEQ	#$1F,D3
L4932:	LSR.L	#1,D2
	ADDX.W	D0,D0
	DBF	D1,L492A
	RTS
L493C:	DC.W	0,0
L4940:	DC.W	0,0
L4944:	DC.W	0
L4946:	DC.L	$B6B6,$2AF0
	DC.L	$E1A6,0
	DC.L	$E1A6,$1A654
	DC.L	$287FA,$47E0
	DC.L	$2CFDA,$E224
	DC.L	$3B1FE,0
	DC.L	$3B1FE,$5104
	DC.L	$40302,$B90
	DC.L	$40E92,$2346C
	DC.L	$642FE,$424
	DC.L	$64722,$449C
	DC.L	$68BBE,$3ED0
	DC.L	$6CA8E,$9540
	DC.L	$75FCE,$1084
	DC.L	$77052,$D40
	DC.L	$77D92,0
	DC.L	$77D92,$1C98
	DC.L	$79A2A,$694
	DC.L	$7A0BE,$17AC
	DC.L	$7B86A,$17AC
	DC.L	$7D016,$38EC
	DC.L	$80902,$6A34
	DC.L	$87336,$BD8
	DC.L	$87F0E,$93C
	DC.L	$8884A,0
	DC.L	$8884A,$22E0
	DC.L	$8AB2A,$1DD8
	DC.L	$8C902,$984
	DC.L	$8D286,$FD4
	DC.L	$8E25A,$3840
	DC.L	$91A9A,$4120
	DC.L	$95BBA,$474
	DC.L	$9602E,$7F8
	DC.L	$96826,$87C
	DC.L	$970A2,$BE0
	DC.L	$97C82,$FFC
	DC.L	$98C7E,$13B4
	DC.L	$9A032,$FDC
	DC.L	$9B00E,$3710
	DC.L	$9E71E,$24AC
	DC.L	$A0BCA,$790
	DC.L	$A135A,$3398
	DC.L	$A46F2,$73A8
	DC.L	$ABA9A,$E04
	DC.L	$AC89E,$D70
	DC.L	$AD60E,0
	DC.L	$AD60E,$558C
	DC.L	$B2B9A,$1350
	DC.L	$B3EEA,$6270
	DC.L	$BA15A,$12A0
	DC.L	$BB3FA,$3288
	DC.L	$BE682,$A230
	DC.L	$C88B2,$1040
	DC.L	$C98F2,$284
	DC.L	$C9B76,0
	DC.L	$C9B76,$6770
	DC.L	$D02E6,0
	DC.L	$D02E6,0
	DC.L	$D02E6,$10D8
	DC.L	$B0014

	DC.L	$1D0029
	DC.W	$32
L4B28:	DC.W	0
L4B2A:	DC.W	0
L4B2C:	DC.W	0
