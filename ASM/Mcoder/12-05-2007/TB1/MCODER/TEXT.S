;
; MOULINETTE DE SCROLLER-TEXTE
;
LOAD=$40000
SAVE=$50000
SAVE2=$60000

	LEA	LOAD,A5
	LEA	SAVE,A6
BCL:
	MOVE.B	(A5)+,D0
	BEQ.S	FINI
	CMP.B	#$1A,D0
	BEQ.S	FINI
	CMP.B	#13,D0
	BEQ.S	BCL
	CMP.B	#10,D0
	BEQ.S	BCL
	MOVE.B	D0,(A6)+
	BRA.S	BCL

FINI:
	ST	(A6)

	LEA	FONTE(PC),A0
	LEA	CONVERT(PC),A1
	MOVEQ	#0,D7
	CLR	D0
CBV:
	MOVE.B	(A0)+,D0
	BEQ.S	FINCV
	MOVE.B	D7,(A1,D0.W)
	ADDQ	#1,D7
	BRA.S	CBV
FINCV:
;
; INITIALISE LE SCROLLER
;
	LEA	SAVE,A0
	LEA	SAVE2,A1
	MOVEQ	#0,D0
CONV:	MOVE.B	(A0)+,D0
	BMI.S	FINCONV
	MOVE.B	CONVERT(PC,D0.W),(A1)+
	BRA.S	CONV
FINCONV:
	LEA	SAVE2,A0
	ST	(A1)+
	ILLEGAL

FONTE:	DC.B	" 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
	DC.B	"[?]!~#$-./%&'()*+,:;<=>"
	DC.B	0
CONVERT:BLK.B	128,0
