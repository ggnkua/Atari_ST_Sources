
 MOVE.L A7,A5
 MOVE.L 4(A5),A5
 MOVE.L $C(A5),D0
 ADD.L $14(A5),D0
 ADD.L $1C(A5),D0
 ADD.L #$1100,D0

 MOVE.L A5,D1
 ADD.L D0,D1
 AND.L #-2,D1
 MOVE.L D1,A7
 MOVE.L D0,-(SP)
 MOVE.L A5,-(SP)
 MOVE.W D0,-(SP)
 MOVE.W #$4A,-(SP)
 TRAP #1
 ADD.L #12,SP

 MOVE.W #0,-(SP)
 MOVE.L #-1,-(SP)
 MOVE.L #-1,-(SP)
 MOVE.W #5,-(SP)
 TRAP #14
 ADD.L #12,SP

 MOVE.W #2,-(SP)
 TRAP #14
 ADDQ.L #2,SP
 MOVE.L D0,SCREEN

 MOVE.L #32128,-(SP)
 MOVE.W #$48,-(SP)
 TRAP #1
 ADDQ.L #6,SP
 MOVE.L D0,GRAFBUF

 MOVE.L #FILNAME,D5
 MOVE.L GRAFBUF,D6
 MOVE.L #32128,D4

 CLR.W -(SP)
 MOVE.L D5,-(SP)
 MOVE.W #$3D,-(SP)
 TRAP #1
 ADDQ.L #8,SP
 MOVE.W D0,HANDLE
               
 MOVE.L D6,-(SP)
 MOVE.L D4,-(SP)
 MOVE.W HANDLE,-(SP)
 MOVE.W #$3F,-(SP)
 TRAP #1
 ADD.L #12,SP
                
 MOVE.W HANDLE,-(SP)
 MOVE.W #$3E,-(SP)
 TRAP #1
 ADDQ.L #4,SP

 MOVE.L GRAFBUF,A0
 ADD.L #128,A0
 MOVE.L SCREEN,A1
 MOVE.W #199,D7
ROW: MOVE.W #159,D6
LINE: MOVE.W (A0)+,(A1)+
 DBRA D6,LINE
 DBRA D7,ROW

 MOVE.L GRAFBUF,A4
 MOVE.W #0,D4
 MOVE.W #15,D5
COLORS:
 MOVE.W 4(A4),-(SP)
 MOVE.W D4,-(SP)
 MOVE.W #7,-(SP)
 TRAP #14
 ADDQ.L #6,SP
 ADD.L #2,A4
 ADD.W #1,D4
 DBRA D5,COLORS

 MOVE.W #7,-(SP)
 TRAP #1
 ADDQ.L #2,SP

 MOVE.L GRAFBUF,-(SP)
 MOVE.W #$49,-(SP)
 TRAP #1
 ADDQ.L #6,SP

 CLR.W -(SP)
 TRAP #1


GRAFBUF: DC.L 0
SCREEN: DC.L 0
HANDLE: DC.W 0
FILNAME: DC.B 'A:\PRESS.NEO'
 END
