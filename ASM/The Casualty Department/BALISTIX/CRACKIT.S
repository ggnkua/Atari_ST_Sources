*	SEARCH AND REPLACE CRACKING CODE FOR BALISTIX
*	SEARCHES FOR SECTOR LOADING CODE:
*	JSR $1B292 AND JSR $30F1E
*	REPLACES WITH THE FOLLOWING:

*	JSR	$CA00

	BSR	REPL1
	BSR	REPL2
	BSR	CRACK

EXIT	CLR.W	-(A7)
	TRAP	#1



REPL1	MOVE.L	#$4EB90003,D0		;JSR	$30F1E
	MOVE.W	#$0F1E,D1		;
	MOVE.L	#$4EB90000,D2		;JSR	$CA00
	MOVE.W	#$CA00,D3		
	LEA	FILE(PC),A0		;START OF FILE
	LEA	FILEND,A1
	BSR	LOADER1
	RTS

REPL2	MOVE.L	#$4EB90001,D0		;JSR	$30F0E
	MOVE.W	#$B292,D1		;
	MOVE.L	#$4EB90000,D2		;JSR	$CA00
	MOVE.W	#$CA00,D3		
	CLR.L	D4
	LEA	FILE(PC),A0		;START OF FILE
	LEA	FILEND,A1
	BSR	LOADER2
	RTS

*	REPLACE PROTECTION CHECK CODE:

*	MOVE.B	#1,$19DBE	13FC0001 00019DBE	
*	LEA	$372BC,A0	41F90003 72BC 		
*	JSR	$199CA		4EB90001 99CA		
*	CMPI.B	#0,$19DBE	0C390000 00019DBE	
*	BNE	$ADDRESS	6600F00C		

CRACK	MOVE.L	#$13FC0001,D0		;MOVE.B	#1,$19DBE
	MOVE.L	#$00019DBE,D1		;
	MOVE.L	#$13FC0000,D2		;MOVE.B	#0,$19DBE
	MOVE.L	#$00019DBE,D3
	CLR.L	D4
	MOVE.L	#$4E714E71,D7		;NOP
	LEA	FILE(PC),A0		;START OF FILE
	LEA	FILEND,A1
	BSR	CRACKIT
	RTS

LOADER1	NOP
FIRST	ADD.L	#2,A0
	CMP.L	A1,A0
	BGT	FIN1
	MOVE.L	(A0),D6
	MOVE.W	4(A0),D5
	CMP.L	D0,D6
	BNE	FIRST
	CMP.W	D1,D5
	BNE	FIRST
	MOVE.L	D2,(A0)
	MOVE.W	D3,4(A0)
	ADD.L	#1,D4
	BRA	FIRST
FIN1	RTS

LOADER2	NOP
SECOND	ADD.L	#2,A0
	CMP.L	A1,A0
	BGT	FIN2
	MOVE.L	(A0),D6
	MOVE.W	4(A0),D5
	CMP.L	D0,D6
	BNE	SECOND
	CMP.W	D1,D5
	BNE	SECOND
	MOVE.L	D2,(A0)
	MOVE.W	D3,4(A0)
	ADD.L	#1,D4
	BRA	SECOND
FIN2	RTS


CRACKIT	NOP
NEXT	ADD.L	#2,A0
	CMP.L	A1,A0
	BGT	FIN3
	MOVE.L	(A0),D6
	MOVE.L	4(A0),D5
	CMP.L	D0,D6
	BNE	NEXT
	CMP.L	D1,D5
	BNE	NEXT
	MOVE.L	D2,(A0)
	MOVE.L	D7,8(A0)
	MOVE.L	D7,12(A0)
	MOVE.L	D7,16(A0)
	MOVE.L	D7,20(A0)
	MOVE.L	D7,24(A0)
	MOVE.L	D7,28(A0)
	BRA	NEXT
FIN3	RTS

	DATA

	EVEN
FILE	INCBIN	"A:\BALISTIX.DYN"
FILEND	EVEN