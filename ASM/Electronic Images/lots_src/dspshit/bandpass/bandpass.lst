Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  bandpass.asm
  Page 1



1                        ;******************************************************
*********
2                        ;* BANDPASS.ASM -- 800 Hz audio bandpass filter        
        *
3                        ;*                                                     
  *
4                        ;* Provides extremely narrow FIR bandpass filter.      
        *
5                        ;*                                                     
  *
6                        ;* Copyright (C) 1992 by Alef Null. All rights reserved
.       *
7                        ;* Author(s): Jarkko Vuori, OH2LNS                     
      *
8                        ;* Modification(s):                                    
    *
9                        ;******************************************************
*********
10     
11     
223    
224    
225       000258         buflen    equ     600
226    
227    
228       P:0040                   org     p:user_code
229    
230       P:0040 67F400            move              #buffer+2,r7
                 001002
231       P:0042 05F427            move              #buflen*4-1,m7
                 00095F
232    
233       P:0044 62F400            move              #buffer,r2
                 001000
234       P:0046 3A0300            move              #4-1,n2
235       P:0047 05F422            move              #buflen*4-1,m2
                 00095F
236    
237                                ctrlcd  1,r2,buflen,LINEI,0.0,0.0,LINEO|HEADP
,0.0,0.0
258                                opencd  8
287    
288                      ; wait for one complete block
289                      loop      waitblk r2,buflen,1
307    
308                      ; then filter the left channel
309       P:0065 05F420            move              #buflen*4-1,m0
                 00095F
310       P:0067 70F400            move              #-4,n0
                 FFFFFC
311       P:0069 64F400            move              #coeffs,r4
                 000018
312    
313       P:006B 225000            move              r2,r0
314       P:006C 200013            clr     a
315       P:006D F08800            move              x:(r0)+n0,x0 y:(r4)+,y0
316       P:006E 063FA1            rep     #taps-1
317       P:006F F088D2            mac     x0,y0,a   x:(r0)+n0,x0 y:(r4)+,y0
318       P:0070 205AD3            macr    x0,y0,a   (r2)+
319       P:0071 5E4A00            move                          a,y:(r2)+n2
320    
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  bandpass.asm
  Page 2



321       P:0072 0C0057            jmp     <loop
322    
323    
324       X:0018                   org     x:user_data
325    
326       X:1000         buffer    dsm     buflen*4
327    
328    
329       Y:0018                   org     y:user_data
330    
331                                include 'coeff.asm'
332                      ; SPW FDS generated coefficients
333                      ;
334                      ; sample_freq   =      8000       {sample frequency}
335                      ; tap_length    =      320       {filter length}
336                      ; center_freq   =      800       {center frequency}
337                      ; pass_bw       =      100       {passband bandwidth}
338                      ; stop_bw       =      200       {stopband bandwidth}
339                      ; weight1       =      10       {first stopband weight;
passband weight = 1}
340                      ; weight2       =      10       {second stopband weight
}
341    
342       000140         taps      equ     320
343    
344       Y:0018         coeffs    dc      0.0017996576744581446
345       Y:0019                   dc      -3.4706815797811048e-05
346       Y:001A                   dc      -0.00032621005019612607
347       Y:001B                   dc      -0.0006800155401674138
348       Y:001C                   dc      -0.00093375759838703601
349       Y:001D                   dc      -0.00094873786343264467
350       Y:001E                   dc      -0.00067172215726001711
351       Y:001F                   dc      -0.00017095710474832851
352       Y:0020                   dc      0.00038170587382695196
353       Y:0021                   dc      0.00077191026630810014
354       Y:0022                   dc      0.00083222792690434999
355       Y:0023                   dc      0.00051479874443189451
356       Y:0024                   dc      -7.6688026970194627e-05
357       Y:0025                   dc      -0.00071901407208648242
358       Y:0026                   dc      -0.0011490714293175895
359       Y:0027                   dc      -0.0011728996885619156
360       Y:0028                   dc      -0.00076205334230794604
361       Y:0029                   dc      -4.802601343789994e-05
362       Y:002A                   dc      0.00069589521447677291
363       Y:002B                   dc      0.0011776348151302434
364       Y:002C                   dc      0.0012002562056323358
365       Y:002D                   dc      0.0007451733539490205
366       Y:002E                   dc      -1.398696106063072e-05
367       Y:002F                   dc      -0.00078061229819909039
368       Y:0030                   dc      -0.0012522929526443064
369       Y:0031                   dc      -0.0012454411423010201
370       Y:0032                   dc      -0.00076801568886045429
371       Y:0033                   dc      -1.7096791271077388e-05
372       Y:0034                   dc      0.00070677587627990365
373       Y:0035                   dc      0.001123969410341269
374       Y:0036                   dc      0.0010906074220241994
375       Y:0037                   dc      0.00064723397110594012
376       Y:0038                   dc      1.2683573860940416e-06
377       Y:0039                   dc      -0.00057867503505505745
378       Y:003A                   dc      -0.00087250527641806702
379       Y:003B                   dc      -0.00080240630341597949
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  coeff.asm
  Page 3



380       Y:003C                   dc      -0.00045059987450060766
381       Y:003D                   dc      -8.7754467973132685e-06
382       Y:003E                   dc      0.00032243075647834488
383       Y:003F                   dc      0.00042679905019966675
384       Y:0040                   dc      0.00032117911983512359
385       Y:0041                   dc      0.00012951880935753424
386       Y:0042                   dc      4.7636222976930528e-06
387       Y:0043                   dc      3.4577108435382463e-05
388       Y:0044                   dc      0.00018865665970039017
389       Y:0045                   dc      0.00032963161842238767
390       Y:0046                   dc      0.00029316488063787453
391       Y:0047                   dc      -5.5439711634432814e-06
392       Y:0048                   dc      -0.00049938428654178841
393       Y:0049                   dc      -0.00097063446989502063
394       Y:004A                   dc      -0.0011405450901983193
395       Y:004B                   dc      -0.00081232747762052695
396       Y:004C                   dc      3.6804692844431657e-06
397       Y:004D                   dc      0.0010450809399885522
398       Y:004E                   dc      0.0018764270890977448
399       Y:004F                   dc      0.0020658529995952859
400       Y:0050                   dc      0.0013947402079791313
401       Y:0051                   dc      -3.2566960077979289e-06
402       Y:0052                   dc      -0.0016423561815143593
403       Y:0053                   dc      -0.002851328431726168
404       Y:0054                   dc      -0.0030458959141827185
405       Y:0055                   dc      -0.0020019300893205651
406       Y:0056                   dc      2.6578724225999675e-06
407       Y:0057                   dc      0.0022437815408723866
408       Y:0058                   dc      0.003816152486123753
409       Y:0059                   dc      0.0039983999110910062
410       Y:005A                   dc      0.002580406847405764
411       Y:005B                   dc      -2.255396052253545e-06
412       Y:005C                   dc      -0.0027938003044902819
413       Y:005D                   dc      -0.0046776643520767157
414       Y:005E                   dc      -0.0048272921603747911
415       Y:005F                   dc      -0.0030701155179088148
416       Y:0060                   dc      1.3371054296607877e-06
417       Y:0061                   dc      0.0032277262600952537
418       Y:0062                   dc      0.0053302358130787328
419       Y:0063                   dc      0.0054255445469057612
420       Y:0064                   dc      0.0034034400001745962
421       Y:0065                   dc      -1.2442664672459094e-06
422       Y:0066                   dc      -0.0034803272474487308
423       Y:0067                   dc      -0.0056671000690012002
424       Y:0068                   dc      -0.0056864025131494883
425       Y:0069                   dc      -0.0035153732158138256
426       Y:006A                   dc      9.721989568233641e-07
427       Y:006B                   dc      0.0034852071229489008
428       Y:006C                   dc      0.005583375275453514
429       Y:006D                   dc      0.0055071556926189775
430       Y:006E                   dc      0.0033432727040189807
431       Y:006F                   dc      -1.3779993711855211e-06
432       Y:0070                   dc      -0.0031855629609605241
433       Y:0071                   dc      -0.0049898525299422371
434       Y:0072                   dc      -0.0048023492354152472
435       Y:0073                   dc      -0.0028372031319763005
436       Y:0074                   dc      2.1447428011360688e-06
437       Y:0075                   dc      0.0025364042490918343
438       Y:0076                   dc      0.0038194547394352352
439       Y:0077                   dc      0.0035106930104271609
440       Y:0078                   dc      0.0019629515090879937
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  coeff.asm
  Page 4



441       Y:0079                   dc      -2.8866586714968064e-06
442       Y:007A                   dc      -0.0015111241865102141
443       Y:007B                   dc      -0.0020358870230620238
444       Y:007C                   dc      -0.0016028831912264794
445       Y:007D                   dc      -0.0007071000713312031
446       Y:007E                   dc      3.5317895701191156e-06
447       Y:007F                   dc      0.00010504905706129825
448       Y:0080                   dc      -0.00036043617629423442
449       Y:0081                   dc      -0.00091279061069705208
450       Y:0082                   dc      -0.0009203940656845593
451       Y:0083                   dc      -4.1124855589800852e-06
452       Y:0084                   dc      0.0016615211214856978
453       Y:0085                   dc      0.0033286272632425057
454       Y:0086                   dc      0.0039872628308454004
455       Y:0087                   dc      0.0028841932939367492
456       Y:0088                   dc      5.1941263154194192e-06
457       Y:0089                   dc      -0.0037422314705840625
458       Y:008A                   dc      -0.0067855455556849733
459       Y:008B                   dc      -0.0075291074594349998
460       Y:008C                   dc      -0.0051225255405828478
461       Y:008D                   dc      -5.7064556811525498e-06
462       Y:008E                   dc      0.0060674743512730009
463       Y:008F                   dc      0.010610488147199976
464       Y:0090                   dc      0.011410207913072954
465       Y:0091                   dc      0.0075520027921826697
466       Y:0092                   dc      6.2644857647058778e-06
467       Y:0093                   dc      -0.0085445987258299487
468       Y:0094                   dc      -0.014647690152578415
469       Y:0095                   dc      -0.015469070807386331
470       Y:0096                   dc      -0.010069406544237641
471       Y:0097                   dc      -6.4537070647355515e-06
472       Y:0098                   dc      0.011064976991981973
473       Y:0099                   dc      0.018717098046788769
474       Y:009A                   dc      0.0195218298142266
475       Y:009B                   dc      0.012558941655314515
476       Y:009C                   dc      6.2594921035191708e-06
477       Y:009D                   dc      -0.013509864713319166
478       Y:009E                   dc      -0.022624574441191699
479       Y:009F                   dc      -0.0233729774823314
480       Y:00A0                   dc      -0.014899243428626086
481       Y:00A1                   dc      -5.5615661262733117e-06
482       Y:00A2                   dc      0.01575793881086952
483       Y:00A3                   dc      0.026174561175660211
484       Y:00A4                   dc      0.026828267545684886
485       Y:00A5                   dc      0.016971573785486548
486       Y:00A6                   dc      5.1014808865245884e-06
487       Y:00A7                   dc      -0.017692296963606746
488       Y:00A8                   dc      -0.029181445622957977
489       Y:00A9                   dc      -0.02970576095584819
490       Y:00AA                   dc      -0.018665715628985908
491       Y:00AB                   dc      -3.627067572197374e-06
492       Y:00AC                   dc      0.019211228079840416
493       Y:00AD                   dc      0.031485738949934394
494       Y:00AE                   dc      0.031852187412654089
495       Y:00AF                   dc      0.019891532620125454
496       Y:00B0                   dc      2.4576684438033271e-06
497       Y:00B1                   dc      -0.020231071510730357
498       Y:00B2                   dc      -0.032960752669612188
499       Y:00B3                   dc      -0.033149226099650202
500       Y:00B4                   dc      -0.020580992970288224
501       Y:00B5                   dc      -8.2387268651989282e-07
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  coeff.asm
  Page 5



502       Y:00B6                   dc      0.020696318272458082
503       Y:00B7                   dc      0.033525745957109915
504       Y:00B8                   dc      0.033525745957109915
505       Y:00B9                   dc      0.020696318272458082
506       Y:00BA                   dc      -8.2387268651989282e-07
507       Y:00BB                   dc      -0.020580992970288224
508       Y:00BC                   dc      -0.033149226099650202
509       Y:00BD                   dc      -0.032960752669612188
510       Y:00BE                   dc      -0.020231071510730357
511       Y:00BF                   dc      2.4576684438033271e-06
512       Y:00C0                   dc      0.019891532620125454
513       Y:00C1                   dc      0.031852187412654089
514       Y:00C2                   dc      0.031485738949934394
515       Y:00C3                   dc      0.019211228079840416
516       Y:00C4                   dc      -3.627067572197374e-06
517       Y:00C5                   dc      -0.018665715628985908
518       Y:00C6                   dc      -0.02970576095584819
519       Y:00C7                   dc      -0.029181445622957977
520       Y:00C8                   dc      -0.017692296963606746
521       Y:00C9                   dc      5.1014808865245884e-06
522       Y:00CA                   dc      0.016971573785486548
523       Y:00CB                   dc      0.026828267545684886
524       Y:00CC                   dc      0.026174561175660211
525       Y:00CD                   dc      0.01575793881086952
526       Y:00CE                   dc      -5.5615661262733117e-06
527       Y:00CF                   dc      -0.014899243428626086
528       Y:00D0                   dc      -0.0233729774823314
529       Y:00D1                   dc      -0.022624574441191699
530       Y:00D2                   dc      -0.013509864713319166
531       Y:00D3                   dc      6.2594921035191708e-06
532       Y:00D4                   dc      0.012558941655314515
533       Y:00D5                   dc      0.0195218298142266
534       Y:00D6                   dc      0.018717098046788769
535       Y:00D7                   dc      0.011064976991981973
536       Y:00D8                   dc      -6.4537070647355515e-06
537       Y:00D9                   dc      -0.010069406544237641
538       Y:00DA                   dc      -0.015469070807386331
539       Y:00DB                   dc      -0.014647690152578415
540       Y:00DC                   dc      -0.0085445987258299487
541       Y:00DD                   dc      6.2644857647058778e-06
542       Y:00DE                   dc      0.0075520027921826697
543       Y:00DF                   dc      0.011410207913072954
544       Y:00E0                   dc      0.010610488147199976
545       Y:00E1                   dc      0.0060674743512730009
546       Y:00E2                   dc      -5.7064556811525498e-06
547       Y:00E3                   dc      -0.0051225255405828478
548       Y:00E4                   dc      -0.0075291074594349998
549       Y:00E5                   dc      -0.0067855455556849733
550       Y:00E6                   dc      -0.0037422314705840625
551       Y:00E7                   dc      5.1941263154194192e-06
552       Y:00E8                   dc      0.0028841932939367492
553       Y:00E9                   dc      0.0039872628308454004
554       Y:00EA                   dc      0.0033286272632425057
555       Y:00EB                   dc      0.0016615211214856978
556       Y:00EC                   dc      -4.1124855589800852e-06
557       Y:00ED                   dc      -0.0009203940656845593
558       Y:00EE                   dc      -0.00091279061069705208
559       Y:00EF                   dc      -0.00036043617629423442
560       Y:00F0                   dc      0.00010504905706129825
561       Y:00F1                   dc      3.5317895701191156e-06
562       Y:00F2                   dc      -0.0007071000713312031
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  coeff.asm
  Page 6



563       Y:00F3                   dc      -0.0016028831912264794
564       Y:00F4                   dc      -0.0020358870230620238
565       Y:00F5                   dc      -0.0015111241865102141
566       Y:00F6                   dc      -2.8866586714968064e-06
567       Y:00F7                   dc      0.0019629515090879937
568       Y:00F8                   dc      0.0035106930104271609
569       Y:00F9                   dc      0.0038194547394352352
570       Y:00FA                   dc      0.0025364042490918343
571       Y:00FB                   dc      2.1447428011360688e-06
572       Y:00FC                   dc      -0.0028372031319763005
573       Y:00FD                   dc      -0.0048023492354152472
574       Y:00FE                   dc      -0.0049898525299422371
575       Y:00FF                   dc      -0.0031855629609605241
576       Y:0100                   dc      -1.3779993711855211e-06
577       Y:0101                   dc      0.0033432727040189807
578       Y:0102                   dc      0.0055071556926189775
579       Y:0103                   dc      0.005583375275453514
580       Y:0104                   dc      0.0034852071229489008
581       Y:0105                   dc      9.721989568233641e-07
582       Y:0106                   dc      -0.0035153732158138256
583       Y:0107                   dc      -0.0056864025131494883
584       Y:0108                   dc      -0.0056671000690012002
585       Y:0109                   dc      -0.0034803272474487308
586       Y:010A                   dc      -1.2442664672459094e-06
587       Y:010B                   dc      0.0034034400001745962
588       Y:010C                   dc      0.0054255445469057612
589       Y:010D                   dc      0.0053302358130787328
590       Y:010E                   dc      0.0032277262600952537
591       Y:010F                   dc      1.3371054296607877e-06
592       Y:0110                   dc      -0.0030701155179088148
593       Y:0111                   dc      -0.0048272921603747911
594       Y:0112                   dc      -0.0046776643520767157
595       Y:0113                   dc      -0.0027938003044902819
596       Y:0114                   dc      -2.255396052253545e-06
597       Y:0115                   dc      0.002580406847405764
598       Y:0116                   dc      0.0039983999110910062
599       Y:0117                   dc      0.003816152486123753
600       Y:0118                   dc      0.0022437815408723866
601       Y:0119                   dc      2.6578724225999675e-06
602       Y:011A                   dc      -0.0020019300893205651
603       Y:011B                   dc      -0.0030458959141827185
604       Y:011C                   dc      -0.002851328431726168
605       Y:011D                   dc      -0.0016423561815143593
606       Y:011E                   dc      -3.2566960077979289e-06
607       Y:011F                   dc      0.0013947402079791313
608       Y:0120                   dc      0.0020658529995952859
609       Y:0121                   dc      0.0018764270890977448
610       Y:0122                   dc      0.0010450809399885522
611       Y:0123                   dc      3.6804692844431657e-06
612       Y:0124                   dc      -0.00081232747762052695
613       Y:0125                   dc      -0.0011405450901983193
614       Y:0126                   dc      -0.00097063446989502063
615       Y:0127                   dc      -0.00049938428654178841
616       Y:0128                   dc      -5.5439711634432814e-06
617       Y:0129                   dc      0.00029316488063787453
618       Y:012A                   dc      0.00032963161842238767
619       Y:012B                   dc      0.00018865665970039017
620       Y:012C                   dc      3.4577108435382463e-05
621       Y:012D                   dc      4.7636222976930528e-06
622       Y:012E                   dc      0.00012951880935753424
623       Y:012F                   dc      0.00032117911983512359
Motorola DSP56000 Assembler  Version 3.1  94-04-01  19:55:44  coeff.asm
  Page 7



624       Y:0130                   dc      0.00042679905019966675
625       Y:0131                   dc      0.00032243075647834488
626       Y:0132                   dc      -8.7754467973132685e-06
627       Y:0133                   dc      -0.00045059987450060766
628       Y:0134                   dc      -0.00080240630341597949
629       Y:0135                   dc      -0.00087250527641806702
630       Y:0136                   dc      -0.00057867503505505745
631       Y:0137                   dc      1.2683573860940416e-06
632       Y:0138                   dc      0.00064723397110594012
633       Y:0139                   dc      0.0010906074220241994
634       Y:013A                   dc      0.001123969410341269
635       Y:013B                   dc      0.00070677587627990365
636       Y:013C                   dc      -1.7096791271077388e-05
637       Y:013D                   dc      -0.00076801568886045429
638       Y:013E                   dc      -0.0012454411423010201
639       Y:013F                   dc      -0.0012522929526443064
640       Y:0140                   dc      -0.00078061229819909039
641       Y:0141                   dc      -1.398696106063072e-05
642       Y:0142                   dc      0.0007451733539490205
643       Y:0143                   dc      0.0012002562056323358
644       Y:0144                   dc      0.0011776348151302434
645       Y:0145                   dc      0.00069589521447677291
646       Y:0146                   dc      -4.802601343789994e-05
647       Y:0147                   dc      -0.00076205334230794604
648       Y:0148                   dc      -0.0011728996885619156
649       Y:0149                   dc      -0.0011490714293175895
650       Y:014A                   dc      -0.00071901407208648242
651       Y:014B                   dc      -7.6688026970194627e-05
652       Y:014C                   dc      0.00051479874443189451
653       Y:014D                   dc      0.00083222792690434999
654       Y:014E                   dc      0.00077191026630810014
655       Y:014F                   dc      0.00038170587382695196
656       Y:0150                   dc      -0.00017095710474832851
657       Y:0151                   dc      -0.00067172215726001711
658       Y:0152                   dc      -0.00094873786343264467
659       Y:0153                   dc      -0.00093375759838703601
660       Y:0154                   dc      -0.0006800155401674138
661       Y:0155                   dc      -0.00032621005019612607
662       Y:0156                   dc      -3.4706815797811048e-05
663       Y:0157                   dc      0.0017996576744581446
664    
665       Y:1000                   dsm     buflen*4
666    
667    
668                                end

0    Errors
0    Warnings













