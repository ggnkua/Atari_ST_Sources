PROCEDURE select_color
  init=TRUE
  my%=MOUSEY
  IF MOUSEY>250
    my%=250
  ENDIF
  VSYNC
  RC_COPY XBIOS(2),0,my%,639,my%+128 TO V:colsave|(0),0,0
  VSYNC
  RC_COPY V:colpuf|(0),0,0,639,128 TO XBIOS(2),0,my%
  DEFMOUSE 3
  REPEAT
    IF MOUSEY>my% AND MOUSEY<my%+16*8
      '  fpbox(0,0,40,40,(INT((MOUSEY-my%)/16)*32+INT(MOUSEX/20)))
      IF MOUSEK=1
        acolor%=INT((MOUSEY-my%)/16)*32+INT(MOUSEX/20)
      ENDIF
    ENDIF
    IF UPPER$(a$)="P"
    ENDIF
  UNTIL MOUSEK=1
  '  ALERT 1,"Farbe "+STR$(acolor%)+".",1,"OKAY",a
  COLOR col|(acolor%)
  RC_COPY V:colsave|(0),0,0,639,128 TO XBIOS(2),0,my%
  DEFMOUSE 7
  SHOWM
  GOSUB kill_mouseks
RETURN
