<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- last modified on 23.12.2003 -->
<html>
<head>
<title>
DOITF030 - Tips u. Tricks zum Atari Falcon F030: LAN ESCC
</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Generator" content="UDO6 PL14 for TOS">
<meta name="Email" content="support@doitarchive.de">
<link rev=made href="mailto:support@doitarchive.de" title="E-Mail">
<link rel=home href="doitf030.htm" title="Homepage">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF0000" vlink="#800080">

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0c06.htm" target="UDOcon"><img src="udo_up.gif" alt="LAN-Port" border=0 width="24" height="24"></a>
<a href="0c0601.htm" target="UDOcon"><img src="udo_lf.gif" alt="LAN to LAN" border=0 width="24" height="24"></a>
<a href="0c07.htm" target="UDOcon"><img src="udo_rg.gif" alt="Atari, Mac und PC seriell" border=0 width="24" height="24"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="LAN_20ESCC">12.6.2 LAN ESCC</a></h1>
<p align=center><img src="image/line.gif" border=0 width="637" height="6"></p><br>
<p><tt> Der LAN Port / ESCC </tt>
<br>
</p>
<p><img src="image/english.gif" border=0 width="35" height="22"></p><br>
<p>
<br><tt> Pinout for the <a href="0c06.htm" target="UDOcon">LAN-Port</a> / Modem adaptor cable </tt>
<br>
</p>
<p>
<br>
</p>
<div align=center><table border=1 frame=box>
<caption align=bottom>Tabelle 46: Falcon LAN to Modem</caption>
<tr>
  <td align=left valign=top>Mini-DIN</td>
  <td align=left valign=top>Description</td>
  <td align=left valign=top>RS232/25-pol D-SUB</td>
</tr>
<tr>
  <td align=left valign=top>Pin Signal</td>
  <td align=left valign=top>Signal</td>
  <td align=left valign=top>Pin Signal</td>
</tr>
<tr>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top>1  HSKo</td>
  <td align=left valign=top>DTR-Signal from SCC</td>
  <td align=left valign=top>4  RTS</td>
</tr>
<tr>
  <td align=left valign=top>2  HSKi</td>
  <td align=left valign=top>CTS-Signal to SCC</td>
  <td align=left valign=top>5  CTS</td>
</tr>
<tr>
  <td align=left valign=top>3  TXD-</td>
  <td align=left valign=top>Send data negativ</td>
  <td align=left valign=top>2  TXD</td>
</tr>
<tr>
  <td align=left valign=top>4  GND</td>
  <td align=left valign=top>Signal Ground</td>
  <td align=left valign=top>7  GND</td>
</tr>
<tr>
  <td align=left valign=top>5  RXD-</td>
  <td align=left valign=top>Receive data negative</td>
  <td align=left valign=top>3  RXD</td>
</tr>
<tr>
  <td align=left valign=top>6  TxD+</td>
  <td align=left valign=top>Send data</td>
  <td align=left valign=top>n/c</td>
</tr>
<tr>
  <td align=left valign=top>7  GPi</td>
  <td align=left valign=top>DCD-Signal to  SCC</td>
  <td align=left valign=top>8  DCD</td>
</tr>
<tr>
  <td align=left valign=top>8  RxD+</td>
  <td align=left valign=top>Receive data</td>
  <td align=left valign=top>7  GND</td>
</tr>
</table></div>

<p>
<br>
<br>
</p>
<p>Urgent:
<br>On the Mini-DIN plug you have to connect Pin 4 AND Pin 8 to GND.
The only way for the symetric input of the <a href="0c06.htm" target="UDOcon">LAN-Port</a> for a defined
signal.
<br>
<br>
<br>
</p>
<p align=center><img src="image/lan.gif" border=0 width="425" height="225"></p><br>
<div align=center><tt> Abbildung 1 - LAN to Modem </tt>
<br>
</div>
<p>
<br>
<br>The hole connection works with hardware handshake in both
directions if you use the HSMODAxx-SCC driver. HSModem drivers switch
RTS/CTS handshake transparent to a DTR/CTS handshake an allows a
higher bit transfer.
<br>
</p>
<p>Ask you local electronic dealer for the right mini DIN8 plug.
Ready to use cables are not avaiable, so you have to make your own
cable. Mac serial cables doasn't work, they are all have a different
pin out.
<br>
</p>
<p>
<br>
<br><b> Modify <a href="0c06.htm" target="UDOcon">LAN-Port</a> </b>
<br>
</p>
<dl>
<dt><b>Question:</b></dt><dd> I want to hook up my Mega STe, TT and Falcon via the LAN ports. I
will be using STing, and IP masquerading.
<br>&nbsp;
<dt><b>Answer:</b></dt><dd> The `LAN ports' are just regular serial ports only with different
electrical characteristics, they're not faster or anything like
that... (at least electritcally its the same thing macs used for their
early slow way of networking called `appletalk', but to use them like
that you'd need special drivers which may still not exist.)
<br>&nbsp;
<dt><b>Handling:</b></dt><dd> Anyway i'd just use null modem cables, connect the `normal'
serial ports (which go to the same uart chip) and set up 115200 bps
slip links with header compression. (or ppp, but slip has less
overhead and for fixed links ppp's features are of no use.)
<br>
<br>&nbsp;
<br>Actually I believe the TT and Falcon ports can do 230400 too but
i'm not sure about the other machines... and use modem2 and/or
serial2, modem1 is on a different uart that can only do 19200 bps.
Make the fastest machine the router (and NAT box, i.e. the TT),
meaning you'll have one slip link from the TT to the Mega STe and one
from the TT to the Falcon. Actually since these are all ataris you
could also use plip (parallel port ip) for one of the links, thats a
bit faster than serial...
<br>
<br>&nbsp;
<br>And btw 115200 bps slip is also what i used years ago to link my
Mega STe to the unix (BSD) box and it had no problems getting some
10K/sec throughput with ftp. (well ok, that was with a hardware fix,
see below...) It even for a while did uucp-i over tcp to my `ISP' over
that link after i switched from analog to isdn (with the BSD box
routing the packets to isdn, single channel sync raw-ip) and that
little 68000 then exchanged my mail and news with nearly isdn speed
(sending and receiving at the same time) and still had CPU cycles
free.
<br>
<br>&nbsp;
<dt><b>The hardware fix:</b></dt><dd> On the Mega STe atari screwed up (at least on mine, but others
reported similar problems): With the original SCC chip (thats the uart
that controls the faster serial ports) serial IO on those ports could
interfere with disk DMA(!), which had me searching for a long time for
mysterious data corruption even though the protocol on the serial link
discovered _no_ CRC errors. (anyone who still knows what protocol i
was porting back then gets a virtual cookie!)
<br>
<br>&nbsp;
<br>When i finally replaced the SCC with a better pin-compatible Zilog
one the problem went away... this chip was also mentioned in the
hsmodem docs, i didn't change its clock tho. It also has 8 bytes FIFO
on each channel, the original one only had 3, so if you get `silo
overflows' at the higher speeds (receiver overrun, would cause tcp/ip
to have to resend packets) that would be a way to fix those too.
Actually as i remember on the TT the SCC also had DMA channels but i
have never heared of them actually being used... (that would be
another way to get rid of receiver overruns, and it would lower the
CPU load too. But of course receiver overruns are more likely to occur
on the machines with the slower CPUs, where you don't have the luxury
of DMA on the SCC.)
<br>&nbsp;
<br>If you replaced the original 85C30 in your MegaSTE, TT or Falcon
by an AM85C230A or Z85230, you can use ESCC.PRG instead of SCC.PRG. In
the state of delivery these computers contain only a SCC, then use the
SCC.PRG. If you modified your falcon by drawing out the MODEM1
interface not existent in the original state, you can use additionally
MFP_FALC.PRG for this interface.
<br>
<br>&nbsp;
<br>Who installed the hardware ST_ESCC in his computer, uses
additionally ST_ESCC.PRG. Who has other interface modifications,
should read the textes and may ask me, if he finds nothing.
<br>&nbsp;
</dl>
<p>
<br>
<br>
</p>
<p><b> SCC, ESCC an ST_ESCC Driver </b>
<br>
</p>
<p>These all are drivers for the serial interfaces realized by a SCC
or ESCC (eg IC Z8530, Am85C30, Z85230). They work together with
DRVIN.PRG.
<br>
</p>
<p>Falcon SCC only can be modified with Z8530, Am85C30 or an Z85230
chip. Other won't work!
<br>
</p>
<p>These ICs all hade an 8 byte receiver FIFO and a transmitter FIFO
with 4 byte. An ESCC contains -all- functions of an normal Falcon SCC.
After installtion of one of the ESCCs have have to use HSModem7
package from Harun Scheutzow.
<br>
</p>
<p>On the Falcon, if equipped with a speeder with FastRAM) *SCC*.PRG
must be loaded into physical RAM, they should _not_ be loaded into
virtual RAM!
<br>
</p>
<p>The drivers detect automatically whether there is a PCLK clock
frequency of 8MHz or 14745600Hz and display it rate in their
installation message.
<br>
</p>
<p>
<br>
</p>
<div align=center><table border=1 frame=box>
<caption align=bottom>Tabelle 47: Falcon serial ESCC Speed</caption>
<tr>
  <td align=left valign=top>NEW (ESCC)</td>
  <td align=left valign=top>OLD</td>
</tr>
<tr>
  <td align=left valign=top>Serial2</td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top>115200</td>
  <td align=left valign=top>150</td>
</tr>
<tr>
  <td align=left valign=top>57600</td>
  <td align=left valign=top>134</td>
</tr>
<tr>
  <td align=left valign=top>38400</td>
  <td align=left valign=top>110</td>
</tr>
<tr>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top>MODEM2</td>
  <td align=left valign=top>OLD</td>
</tr>
<tr>
  <td align=left valign=top>153600</td>
  <td align=left valign=top>75</td>
</tr>
<tr>
  <td align=left valign=top>76800</td>
  <td align=left valign=top>50</td>
</tr>
<tr>
  <td align=left valign=top>38400</td>
  <td align=left valign=top>110</td>
</tr>
</table></div>

<p>
<br>
<br>
</p>
<p>Some technical Data taken from HSModem7 Doku, Harun Scheutzow
<br>
</p>
<p>
<br>
<br>
</p>
<p align=center><img src="image/sline.gif" border=0 width="640" height="2"></p><br>
<p align=center><img src="image/img.gif" border=0 width="50" height="40"></p><br>

<hr>
<address>Copyright &copy; <a href="http://www.doitarchive.de">Robert Schaffner</a> (<a href="mailto:support@doitarchive.de">support@doitarchive.de</a>)<br>
Letzte Aktualisierung am 23. Dezember 2003</address>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" border=0 width="24" height="24"></a>
<a href="0c06.htm" target="UDOcon"><img src="udo_up.gif" alt="LAN-Port" border=0 width="24" height="24"></a>
<a href="0c0601.htm" target="UDOcon"><img src="udo_lf.gif" alt="LAN to LAN" border=0 width="24" height="24"></a>
<a href="0c07.htm" target="UDOcon"><img src="udo_rg.gif" alt="Atari, Mac und PC seriell" border=0 width="24" height="24"></a>
</td></tr></table>
</body></html>
